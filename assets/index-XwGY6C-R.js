var gQ=Object.defineProperty;var hQ=(h,C,D)=>C in h?gQ(h,C,{enumerable:!0,configurable:!0,writable:!0,value:D}):h[C]=D;var vq=(h,C,D)=>hQ(h,typeof C!="symbol"?C+"":C,D);(function(){const C=document.createElement("link").relList;if(C&&C.supports&&C.supports("modulepreload"))return;for(const W of document.querySelectorAll('link[rel="modulepreload"]'))N(W);new MutationObserver(W=>{for(const Y of W)if(Y.type==="childList")for(const de of Y.addedNodes)de.tagName==="LINK"&&de.rel==="modulepreload"&&N(de)}).observe(document,{childList:!0,subtree:!0});function D(W){const Y={};return W.integrity&&(Y.integrity=W.integrity),W.referrerPolicy&&(Y.referrerPolicy=W.referrerPolicy),W.crossOrigin==="use-credentials"?Y.credentials="include":W.crossOrigin==="anonymous"?Y.credentials="omit":Y.credentials="same-origin",Y}function N(W){if(W.ep)return;W.ep=!0;const Y=D(W);fetch(W.href,Y)}})();/**
* @vue/shared v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function jq(h,C){const D=new Set(h.split(","));return N=>D.has(N)}const gi={},Ek=[],Ig=()=>{},pQ=()=>!1,P8=h=>h.charCodeAt(0)===111&&h.charCodeAt(1)===110&&(h.charCodeAt(2)>122||h.charCodeAt(2)<97),Gq=h=>h.startsWith("onUpdate:"),fd=Object.assign,qq=(h,C)=>{const D=h.indexOf(C);D>-1&&h.splice(D,1)},bQ=Object.prototype.hasOwnProperty,Ca=(h,C)=>bQ.call(h,C),cr=Array.isArray,Tk=h=>$8(h)==="[object Map]",NX=h=>$8(h)==="[object Set]",kr=h=>typeof h=="function",Ql=h=>typeof h=="string",Yy=h=>typeof h=="symbol",hi=h=>h!==null&&typeof h=="object",BX=h=>(hi(h)||kr(h))&&kr(h.then)&&kr(h.catch),MX=Object.prototype.toString,$8=h=>MX.call(h),vQ=h=>$8(h).slice(8,-1),PX=h=>$8(h)==="[object Object]",Kq=h=>Ql(h)&&h!=="NaN"&&h[0]!=="-"&&""+parseInt(h,10)===h,bF=jq(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I8=h=>{const C=Object.create(null);return D=>C[D]||(C[D]=h(D))},yQ=/-(\w)/g,KS=I8(h=>h.replace(yQ,(C,D)=>D?D.toUpperCase():"")),CQ=/\B([A-Z])/g,XS=I8(h=>h.replace(CQ,"-$1").toLowerCase()),$X=I8(h=>h.charAt(0).toUpperCase()+h.slice(1)),yq=I8(h=>h?`on${$X(h)}`:""),qy=(h,C)=>!Object.is(h,C),Cq=(h,...C)=>{for(let D=0;D<h.length;D++)h[D](...C)},IX=(h,C,D,N=!1)=>{Object.defineProperty(h,C,{configurable:!0,enumerable:!1,writable:N,value:D})},wQ=h=>{const C=parseFloat(h);return isNaN(C)?h:C};let ZY;const LX=()=>ZY||(ZY=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yq(h){if(cr(h)){const C={};for(let D=0;D<h.length;D++){const N=h[D],W=Ql(N)?TQ(N):Yq(N);if(W)for(const Y in W)C[Y]=W[Y]}return C}else if(Ql(h)||hi(h))return h}const SQ=/;(?![^(]*\))/g,xQ=/:([^]+)/,EQ=/\/\*[^]*?\*\//g;function TQ(h){const C={};return h.replace(EQ,"").split(SQ).forEach(D=>{if(D){const N=D.split(xQ);N.length>1&&(C[N[0].trim()]=N[1].trim())}}),C}function Xq(h){let C="";if(Ql(h))C=h;else if(cr(h))for(let D=0;D<h.length;D++){const N=Xq(h[D]);N&&(C+=N+" ")}else if(hi(h))for(const D in h)h[D]&&(C+=D+" ");return C.trim()}const AQ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",kQ=jq(AQ);function HX(h){return!!h||h===""}const zX=h=>!!(h&&h.__v_isRef===!0),VX=h=>Ql(h)?h:h==null?"":cr(h)||hi(h)&&(h.toString===MX||!kr(h.toString))?zX(h)?VX(h.value):JSON.stringify(h,UX,2):String(h),UX=(h,C)=>zX(C)?UX(h,C.value):Tk(C)?{[`Map(${C.size})`]:[...C.entries()].reduce((D,[N,W],Y)=>(D[wq(N,Y)+" =>"]=W,D),{})}:NX(C)?{[`Set(${C.size})`]:[...C.values()].map(D=>wq(D))}:Yy(C)?wq(C):hi(C)&&!cr(C)&&!PX(C)?String(C):C,wq=(h,C="")=>{var D;return Yy(h)?`Symbol(${(D=h.description)!=null?D:C})`:h};/**
* @vue/reactivity v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kh;class _Q{constructor(C=!1){this.detached=C,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Kh,!C&&Kh&&(this.index=(Kh.scopes||(Kh.scopes=[])).push(this)-1)}get active(){return this._active}run(C){if(this._active){const D=Kh;try{return Kh=this,C()}finally{Kh=D}}}on(){Kh=this}off(){Kh=this.parent}stop(C){if(this._active){let D,N;for(D=0,N=this.effects.length;D<N;D++)this.effects[D].stop();for(D=0,N=this.cleanups.length;D<N;D++)this.cleanups[D]();if(this.scopes)for(D=0,N=this.scopes.length;D<N;D++)this.scopes[D].stop(!0);if(!this.detached&&this.parent&&!C){const W=this.parent.scopes.pop();W&&W!==this&&(this.parent.scopes[this.index]=W,W.index=this.index)}this.parent=void 0,this._active=!1}}}function DQ(h,C=Kh){C&&C.active&&C.effects.push(h)}function OQ(){return Kh}let GS;class Jq{constructor(C,D,N,W){this.fn=C,this.trigger=D,this.scheduler=N,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,DQ(this,W)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Xy();for(let C=0;C<this._depsLength;C++){const D=this.deps[C];if(D.computed&&(RQ(D.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Jy()}return this._dirtyLevel>=4}set dirty(C){this._dirtyLevel=C?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let C=Zy,D=GS;try{return Zy=!0,GS=this,this._runnings++,jY(this),this.fn()}finally{GY(this),this._runnings--,GS=D,Zy=C}}stop(){this.active&&(jY(this),GY(this),this.onStop&&this.onStop(),this.active=!1)}}function RQ(h){return h.value}function jY(h){h._trackId++,h._depsLength=0}function GY(h){if(h.deps.length>h._depsLength){for(let C=h._depsLength;C<h.deps.length;C++)WX(h.deps[C],h);h.deps.length=h._depsLength}}function WX(h,C){const D=h.get(C);D!==void 0&&C._trackId!==D&&(h.delete(C),h.size===0&&h.cleanup())}let Zy=!0,Rq=0;const ZX=[];function Xy(){ZX.push(Zy),Zy=!1}function Jy(){const h=ZX.pop();Zy=h===void 0?!0:h}function Qq(){Rq++}function eK(){for(Rq--;!Rq&&Fq.length;)Fq.shift()()}function jX(h,C,D){if(C.get(h)!==h._trackId){C.set(h,h._trackId);const N=h.deps[h._depsLength];N!==C?(N&&WX(N,h),h.deps[h._depsLength++]=C):h._depsLength++}}const Fq=[];function GX(h,C,D){Qq();for(const N of h.keys()){let W;N._dirtyLevel<C&&(W??(W=h.get(N)===N._trackId))&&(N._shouldSchedule||(N._shouldSchedule=N._dirtyLevel===0),N._dirtyLevel=C),N._shouldSchedule&&(W??(W=h.get(N)===N._trackId))&&(N.trigger(),(!N._runnings||N.allowRecurse)&&N._dirtyLevel!==2&&(N._shouldSchedule=!1,N.scheduler&&Fq.push(N.scheduler)))}eK()}const qX=(h,C)=>{const D=new Map;return D.cleanup=h,D.computed=C,D},O8=new WeakMap,qS=Symbol(""),Nq=Symbol("");function Pm(h,C,D){if(Zy&&GS){let N=O8.get(h);N||O8.set(h,N=new Map);let W=N.get(D);W||N.set(D,W=qX(()=>N.delete(D))),jX(GS,W)}}function s0(h,C,D,N,W,Y){const de=O8.get(h);if(!de)return;let Q=[];if(C==="clear")Q=[...de.values()];else if(D==="length"&&cr(h)){const Te=Number(N);de.forEach((ct,Xe)=>{(Xe==="length"||!Yy(Xe)&&Xe>=Te)&&Q.push(ct)})}else switch(D!==void 0&&Q.push(de.get(D)),C){case"add":cr(h)?Kq(D)&&Q.push(de.get("length")):(Q.push(de.get(qS)),Tk(h)&&Q.push(de.get(Nq)));break;case"delete":cr(h)||(Q.push(de.get(qS)),Tk(h)&&Q.push(de.get(Nq)));break;case"set":Tk(h)&&Q.push(de.get(qS));break}Qq();for(const Te of Q)Te&&GX(Te,4);eK()}function FQ(h,C){const D=O8.get(h);return D&&D.get(C)}const NQ=jq("__proto__,__v_isRef,__isVue"),KX=new Set(Object.getOwnPropertyNames(Symbol).filter(h=>h!=="arguments"&&h!=="caller").map(h=>Symbol[h]).filter(Yy)),qY=BQ();function BQ(){const h={};return["includes","indexOf","lastIndexOf"].forEach(C=>{h[C]=function(...D){const N=Ia(this);for(let Y=0,de=this.length;Y<de;Y++)Pm(N,"get",Y+"");const W=N[C](...D);return W===-1||W===!1?N[C](...D.map(Ia)):W}}),["push","pop","shift","unshift","splice"].forEach(C=>{h[C]=function(...D){Xy(),Qq();const N=Ia(this)[C].apply(this,D);return eK(),Jy(),N}}),h}function MQ(h){Yy(h)||(h=String(h));const C=Ia(this);return Pm(C,"has",h),C.hasOwnProperty(h)}class YX{constructor(C=!1,D=!1){this._isReadonly=C,this._isShallow=D}get(C,D,N){const W=this._isReadonly,Y=this._isShallow;if(D==="__v_isReactive")return!W;if(D==="__v_isReadonly")return W;if(D==="__v_isShallow")return Y;if(D==="__v_raw")return N===(W?Y?qQ:eJ:Y?QX:JX).get(C)||Object.getPrototypeOf(C)===Object.getPrototypeOf(N)?C:void 0;const de=cr(C);if(!W){if(de&&Ca(qY,D))return Reflect.get(qY,D,N);if(D==="hasOwnProperty")return MQ}const Q=Reflect.get(C,D,N);return(Yy(D)?KX.has(D):NQ(D))||(W||Pm(C,"get",D),Y)?Q:Jd(Q)?de&&Kq(D)?Q:Q.value:hi(Q)?W?tJ(Q):oK(Q):Q}}class XX extends YX{constructor(C=!1){super(!1,C)}set(C,D,N,W){let Y=C[D];if(!this._isShallow){const Te=YS(Y);if(!_k(N)&&!YS(N)&&(Y=Ia(Y),N=Ia(N)),!cr(C)&&Jd(Y)&&!Jd(N))return Te?!1:(Y.value=N,!0)}const de=cr(C)&&Kq(D)?Number(D)<C.length:Ca(C,D),Q=Reflect.set(C,D,N,W);return C===Ia(W)&&(de?qy(N,Y)&&s0(C,"set",D,N):s0(C,"add",D,N)),Q}deleteProperty(C,D){const N=Ca(C,D);C[D];const W=Reflect.deleteProperty(C,D);return W&&N&&s0(C,"delete",D,void 0),W}has(C,D){const N=Reflect.has(C,D);return(!Yy(D)||!KX.has(D))&&Pm(C,"has",D),N}ownKeys(C){return Pm(C,"iterate",cr(C)?"length":qS),Reflect.ownKeys(C)}}class PQ extends YX{constructor(C=!1){super(!0,C)}set(C,D){return!0}deleteProperty(C,D){return!0}}const $Q=new XX,IQ=new PQ,LQ=new XX(!0);const tK=h=>h,L8=h=>Reflect.getPrototypeOf(h);function y8(h,C,D=!1,N=!1){h=h.__v_raw;const W=Ia(h),Y=Ia(C);D||(qy(C,Y)&&Pm(W,"get",C),Pm(W,"get",Y));const{has:de}=L8(W),Q=N?tK:D?rK:wF;if(de.call(W,C))return Q(h.get(C));if(de.call(W,Y))return Q(h.get(Y));h!==W&&h.get(C)}function C8(h,C=!1){const D=this.__v_raw,N=Ia(D),W=Ia(h);return C||(qy(h,W)&&Pm(N,"has",h),Pm(N,"has",W)),h===W?D.has(h):D.has(h)||D.has(W)}function w8(h,C=!1){return h=h.__v_raw,!C&&Pm(Ia(h),"iterate",qS),Reflect.get(h,"size",h)}function KY(h,C=!1){!C&&!_k(h)&&!YS(h)&&(h=Ia(h));const D=Ia(this);return L8(D).has.call(D,h)||(D.add(h),s0(D,"add",h,h)),this}function YY(h,C,D=!1){!D&&!_k(C)&&!YS(C)&&(C=Ia(C));const N=Ia(this),{has:W,get:Y}=L8(N);let de=W.call(N,h);de||(h=Ia(h),de=W.call(N,h));const Q=Y.call(N,h);return N.set(h,C),de?qy(C,Q)&&s0(N,"set",h,C):s0(N,"add",h,C),this}function XY(h){const C=Ia(this),{has:D,get:N}=L8(C);let W=D.call(C,h);W||(h=Ia(h),W=D.call(C,h)),N&&N.call(C,h);const Y=C.delete(h);return W&&s0(C,"delete",h,void 0),Y}function JY(){const h=Ia(this),C=h.size!==0,D=h.clear();return C&&s0(h,"clear",void 0,void 0),D}function S8(h,C){return function(N,W){const Y=this,de=Y.__v_raw,Q=Ia(de),Te=C?tK:h?rK:wF;return!h&&Pm(Q,"iterate",qS),de.forEach((ct,Xe)=>N.call(W,Te(ct),Te(Xe),Y))}}function x8(h,C,D){return function(...N){const W=this.__v_raw,Y=Ia(W),de=Tk(Y),Q=h==="entries"||h===Symbol.iterator&&de,Te=h==="keys"&&de,ct=W[h](...N),Xe=D?tK:C?rK:wF;return!C&&Pm(Y,"iterate",Te?Nq:qS),{next(){const{value:wt,done:yt}=ct.next();return yt?{value:wt,done:yt}:{value:Q?[Xe(wt[0]),Xe(wt[1])]:Xe(wt),done:yt}},[Symbol.iterator](){return this}}}}function Vy(h){return function(...C){return h==="delete"?!1:h==="clear"?void 0:this}}function HQ(){const h={get(Y){return y8(this,Y)},get size(){return w8(this)},has:C8,add:KY,set:YY,delete:XY,clear:JY,forEach:S8(!1,!1)},C={get(Y){return y8(this,Y,!1,!0)},get size(){return w8(this)},has:C8,add(Y){return KY.call(this,Y,!0)},set(Y,de){return YY.call(this,Y,de,!0)},delete:XY,clear:JY,forEach:S8(!1,!0)},D={get(Y){return y8(this,Y,!0)},get size(){return w8(this,!0)},has(Y){return C8.call(this,Y,!0)},add:Vy("add"),set:Vy("set"),delete:Vy("delete"),clear:Vy("clear"),forEach:S8(!0,!1)},N={get(Y){return y8(this,Y,!0,!0)},get size(){return w8(this,!0)},has(Y){return C8.call(this,Y,!0)},add:Vy("add"),set:Vy("set"),delete:Vy("delete"),clear:Vy("clear"),forEach:S8(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Y=>{h[Y]=x8(Y,!1,!1),D[Y]=x8(Y,!0,!1),C[Y]=x8(Y,!1,!0),N[Y]=x8(Y,!0,!0)}),[h,D,C,N]}const[zQ,VQ,UQ,WQ]=HQ();function nK(h,C){const D=C?h?WQ:UQ:h?VQ:zQ;return(N,W,Y)=>W==="__v_isReactive"?!h:W==="__v_isReadonly"?h:W==="__v_raw"?N:Reflect.get(Ca(D,W)&&W in N?D:N,W,Y)}const ZQ={get:nK(!1,!1)},jQ={get:nK(!1,!0)},GQ={get:nK(!0,!1)};const JX=new WeakMap,QX=new WeakMap,eJ=new WeakMap,qQ=new WeakMap;function KQ(h){switch(h){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function YQ(h){return h.__v_skip||!Object.isExtensible(h)?0:KQ(vQ(h))}function oK(h){return YS(h)?h:sK(h,!1,$Q,ZQ,JX)}function XQ(h){return sK(h,!1,LQ,jQ,QX)}function tJ(h){return sK(h,!0,IQ,GQ,eJ)}function sK(h,C,D,N,W){if(!hi(h)||h.__v_raw&&!(C&&h.__v_isReactive))return h;const Y=W.get(h);if(Y)return Y;const de=YQ(h);if(de===0)return h;const Q=new Proxy(h,de===2?N:D);return W.set(h,Q),Q}function vF(h){return YS(h)?vF(h.__v_raw):!!(h&&h.__v_isReactive)}function YS(h){return!!(h&&h.__v_isReadonly)}function _k(h){return!!(h&&h.__v_isShallow)}function nJ(h){return h?!!h.__v_raw:!1}function Ia(h){const C=h&&h.__v_raw;return C?Ia(C):h}function JQ(h){return Object.isExtensible(h)&&IX(h,"__v_skip",!0),h}const wF=h=>hi(h)?oK(h):h,rK=h=>hi(h)?tJ(h):h;class oJ{constructor(C,D,N,W){this.getter=C,this._setter=D,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Jq(()=>C(this._value),()=>T8(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!W,this.__v_isReadonly=N}get value(){const C=Ia(this);return(!C._cacheable||C.effect.dirty)&&qy(C._value,C._value=C.effect.run())&&T8(C,4),sJ(C),C.effect._dirtyLevel>=2&&T8(C,2),C._value}set value(C){this._setter(C)}get _dirty(){return this.effect.dirty}set _dirty(C){this.effect.dirty=C}}function QQ(h,C,D=!1){let N,W;const Y=kr(h);return Y?(N=h,W=Ig):(N=h.get,W=h.set),new oJ(N,W,Y||!W,D)}function sJ(h){var C;Zy&&GS&&(h=Ia(h),jX(GS,(C=h.dep)!=null?C:h.dep=qX(()=>h.dep=void 0,h instanceof oJ?h:void 0)))}function T8(h,C=4,D,N){h=Ia(h);const W=h.dep;W&&GX(W,C)}function Jd(h){return!!(h&&h.__v_isRef===!0)}function SF(h){return eee(h,!1)}function eee(h,C){return Jd(h)?h:new tee(h,C)}class tee{constructor(C,D){this.__v_isShallow=D,this.dep=void 0,this.__v_isRef=!0,this._rawValue=D?C:Ia(C),this._value=D?C:wF(C)}get value(){return sJ(this),this._value}set value(C){const D=this.__v_isShallow||_k(C)||YS(C);C=D?C:Ia(C),qy(C,this._rawValue)&&(this._rawValue,this._rawValue=C,this._value=D?C:wF(C),T8(this,4))}}function rJ(h){return Jd(h)?h.value:h}const nee={get:(h,C,D)=>rJ(Reflect.get(h,C,D)),set:(h,C,D,N)=>{const W=h[C];return Jd(W)&&!Jd(D)?(W.value=D,!0):Reflect.set(h,C,D,N)}};function aJ(h){return vF(h)?h:new Proxy(h,nee)}function oee(h){const C=cr(h)?new Array(h.length):{};for(const D in h)C[D]=ree(h,D);return C}class see{constructor(C,D,N){this._object=C,this._key=D,this._defaultValue=N,this.__v_isRef=!0}get value(){const C=this._object[this._key];return C===void 0?this._defaultValue:C}set value(C){this._object[this._key]=C}get dep(){return FQ(Ia(this._object),this._key)}}function ree(h,C,D){const N=h[C];return Jd(N)?N:new see(h,C,D)}/**
* @vue/runtime-core v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jy(h,C,D,N){try{return N?h(...N):h()}catch(W){H8(W,C,D)}}function Yh(h,C,D,N){if(kr(h)){const W=jy(h,C,D,N);return W&&BX(W)&&W.catch(Y=>{H8(Y,C,D)}),W}if(cr(h)){const W=[];for(let Y=0;Y<h.length;Y++)W.push(Yh(h[Y],C,D,N));return W}}function H8(h,C,D,N=!0){const W=C?C.vnode:null;if(C){let Y=C.parent;const de=C.proxy,Q=`https://vuejs.org/error-reference/#runtime-${D}`;for(;Y;){const ct=Y.ec;if(ct){for(let Xe=0;Xe<ct.length;Xe++)if(ct[Xe](h,de,Q)===!1)return}Y=Y.parent}const Te=C.appContext.config.errorHandler;if(Te){Xy(),jy(Te,null,10,[h,de,Q]),Jy();return}}aee(h,D,W,N)}function aee(h,C,D,N=!0){console.error(h)}let xF=!1,Bq=!1;const md=[];let C1=0;const Ak=[];let Uy=null,ZS=0;const cJ=Promise.resolve();let aK=null;function R8(h){const C=aK||cJ;return h?C.then(this?h.bind(this):h):C}function cee(h){let C=C1+1,D=md.length;for(;C<D;){const N=C+D>>>1,W=md[N],Y=EF(W);Y<h||Y===h&&W.pre?C=N+1:D=N}return C}function cK(h){(!md.length||!md.includes(h,xF&&h.allowRecurse?C1+1:C1))&&(h.id==null?md.push(h):md.splice(cee(h.id),0,h),iJ())}function iJ(){!xF&&!Bq&&(Bq=!0,aK=cJ.then(uJ))}function iee(h){const C=md.indexOf(h);C>C1&&md.splice(C,1)}function lee(h){cr(h)?Ak.push(...h):(!Uy||!Uy.includes(h,h.allowRecurse?ZS+1:ZS))&&Ak.push(h),iJ()}function QY(h,C,D=xF?C1+1:0){for(;D<md.length;D++){const N=md[D];if(N&&N.pre){if(h&&N.id!==h.uid)continue;md.splice(D,1),D--,N()}}}function lJ(h){if(Ak.length){const C=[...new Set(Ak)].sort((D,N)=>EF(D)-EF(N));if(Ak.length=0,Uy){Uy.push(...C);return}for(Uy=C,ZS=0;ZS<Uy.length;ZS++){const D=Uy[ZS];D.active!==!1&&D()}Uy=null,ZS=0}}const EF=h=>h.id==null?1/0:h.id,uee=(h,C)=>{const D=EF(h)-EF(C);if(D===0){if(h.pre&&!C.pre)return-1;if(C.pre&&!h.pre)return 1}return D};function uJ(h){Bq=!1,xF=!0,md.sort(uee);try{for(C1=0;C1<md.length;C1++){const C=md[C1];C&&C.active!==!1&&jy(C,C.i,C.i?15:14)}}finally{C1=0,md.length=0,lJ(),xF=!1,aK=null,(md.length||Ak.length)&&uJ()}}let w1=null,dJ=null;function F8(h){const C=w1;return w1=h,dJ=h&&h.type.__scopeId||null,C}function dee(h,C=w1,D){if(!C||h._n)return h;const N=(...W)=>{N._d&&cX(-1);const Y=F8(C);let de;try{de=h(...W)}finally{F8(Y),N._d&&cX(1)}return de};return N._n=!0,N._c=!0,N._d=!0,N}function US(h,C,D,N){const W=h.dirs,Y=C&&C.dirs;for(let de=0;de<W.length;de++){const Q=W[de];Y&&(Q.oldValue=Y[de].value);let Te=Q.dir[N];Te&&(Xy(),Yh(Te,D,8,[h.el,Q,h,C]),Jy())}}function mJ(h,C){h.shapeFlag&6&&h.component?mJ(h.component.subTree,C):h.shapeFlag&128?(h.ssContent.transition=C.clone(h.ssContent),h.ssFallback.transition=C.clone(h.ssFallback)):h.transition=C}/*! #__NO_SIDE_EFFECTS__ */function z8(h,C){return kr(h)?fd({name:h.name},C,{setup:h}):h}const A8=h=>!!h.type.__asyncLoader,fJ=h=>h.type.__isKeepAlive;function gJ(h,C){pJ(h,"a",C)}function hJ(h,C){pJ(h,"da",C)}function pJ(h,C,D=Xd){const N=h.__wdc||(h.__wdc=()=>{let W=D;for(;W;){if(W.isDeactivated)return;W=W.parent}return h()});if(V8(C,N,D),D){let W=D.parent;for(;W&&W.parent;)fJ(W.parent.vnode)&&mee(N,C,D,W),W=W.parent}}function mee(h,C,D,N){const W=V8(C,h,N,!0);vJ(()=>{qq(N[C],W)},D)}function V8(h,C,D=Xd,N=!1){if(D){const W=D[h]||(D[h]=[]),Y=C.__weh||(C.__weh=(...de)=>{Xy();const Q=kF(D),Te=Yh(C,D,h,de);return Q(),Jy(),Te});return N?W.unshift(Y):W.push(Y),Y}}const r0=h=>(C,D=Xd)=>{(!Z8||h==="sp")&&V8(h,(...N)=>C(...N),D)},fee=r0("bm"),iK=r0("m"),gee=r0("bu"),hee=r0("u"),bJ=r0("bum"),vJ=r0("um"),pee=r0("sp"),bee=r0("rtg"),vee=r0("rtc");function yee(h,C=Xd){V8("ec",h,C)}const Cee=Symbol.for("v-ndc"),Mq=h=>h?PJ(h)?hK(h):Mq(h.parent):null,yF=fd(Object.create(null),{$:h=>h,$el:h=>h.vnode.el,$data:h=>h.data,$props:h=>h.props,$attrs:h=>h.attrs,$slots:h=>h.slots,$refs:h=>h.refs,$parent:h=>Mq(h.parent),$root:h=>Mq(h.root),$emit:h=>h.emit,$options:h=>lK(h),$forceUpdate:h=>h.f||(h.f=()=>{h.effect.dirty=!0,cK(h.update)}),$nextTick:h=>h.n||(h.n=R8.bind(h.proxy)),$watch:h=>Wee.bind(h)}),Sq=(h,C)=>h!==gi&&!h.__isScriptSetup&&Ca(h,C),wee={get({_:h},C){if(C==="__v_skip")return!0;const{ctx:D,setupState:N,data:W,props:Y,accessCache:de,type:Q,appContext:Te}=h;let ct;if(C[0]!=="$"){const Tt=de[C];if(Tt!==void 0)switch(Tt){case 1:return N[C];case 2:return W[C];case 4:return D[C];case 3:return Y[C]}else{if(Sq(N,C))return de[C]=1,N[C];if(W!==gi&&Ca(W,C))return de[C]=2,W[C];if((ct=h.propsOptions[0])&&Ca(ct,C))return de[C]=3,Y[C];if(D!==gi&&Ca(D,C))return de[C]=4,D[C];Pq&&(de[C]=0)}}const Xe=yF[C];let wt,yt;if(Xe)return C==="$attrs"&&Pm(h.attrs,"get",""),Xe(h);if((wt=Q.__cssModules)&&(wt=wt[C]))return wt;if(D!==gi&&Ca(D,C))return de[C]=4,D[C];if(yt=Te.config.globalProperties,Ca(yt,C))return yt[C]},set({_:h},C,D){const{data:N,setupState:W,ctx:Y}=h;return Sq(W,C)?(W[C]=D,!0):N!==gi&&Ca(N,C)?(N[C]=D,!0):Ca(h.props,C)||C[0]==="$"&&C.slice(1)in h?!1:(Y[C]=D,!0)},has({_:{data:h,setupState:C,accessCache:D,ctx:N,appContext:W,propsOptions:Y}},de){let Q;return!!D[de]||h!==gi&&Ca(h,de)||Sq(C,de)||(Q=Y[0])&&Ca(Q,de)||Ca(N,de)||Ca(yF,de)||Ca(W.config.globalProperties,de)},defineProperty(h,C,D){return D.get!=null?h._.accessCache[C]=0:Ca(D,"value")&&this.set(h,C,D.value,null),Reflect.defineProperty(h,C,D)}};function eX(h){return cr(h)?h.reduce((C,D)=>(C[D]=null,C),{}):h}let Pq=!0;function See(h){const C=lK(h),D=h.proxy,N=h.ctx;Pq=!1,C.beforeCreate&&tX(C.beforeCreate,h,"bc");const{data:W,computed:Y,methods:de,watch:Q,provide:Te,inject:ct,created:Xe,beforeMount:wt,mounted:yt,beforeUpdate:Tt,updated:_t,activated:Lt,deactivated:gt,beforeDestroy:st,beforeUnmount:Qe,destroyed:ie,unmounted:St,render:Wn,renderTracked:vt,renderTriggered:J,errorCaptured:Yt,serverPrefetch:On,expose:gn,inheritAttrs:rt,components:we,directives:Ro,filters:Ve}=C;if(ct&&xee(ct,N,null),de)for(const it in de){const ve=de[it];kr(ve)&&(N[it]=ve.bind(D))}if(W){const it=W.call(D,D);hi(it)&&(h.data=oK(it))}if(Pq=!0,Y)for(const it in Y){const ve=Y[it],Rt=kr(ve)?ve.bind(D,D):kr(ve.get)?ve.get.bind(D,D):Ig,It=!kr(ve)&&kr(ve.set)?ve.set.bind(D):Ig,_e=fte({get:Rt,set:It});Object.defineProperty(N,it,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Dt=>_e.value=Dt})}if(Q)for(const it in Q)yJ(Q[it],N,D,it);if(Te){const it=kr(Te)?Te.call(D):Te;Reflect.ownKeys(it).forEach(ve=>{Dee(ve,it[ve])})}Xe&&tX(Xe,h,"c");function T(it,ve){cr(ve)?ve.forEach(Rt=>it(Rt.bind(D))):ve&&it(ve.bind(D))}if(T(fee,wt),T(iK,yt),T(gee,Tt),T(hee,_t),T(gJ,Lt),T(hJ,gt),T(yee,Yt),T(vee,vt),T(bee,J),T(bJ,Qe),T(vJ,St),T(pee,On),cr(gn))if(gn.length){const it=h.exposed||(h.exposed={});gn.forEach(ve=>{Object.defineProperty(it,ve,{get:()=>D[ve],set:Rt=>D[ve]=Rt})})}else h.exposed||(h.exposed={});Wn&&h.render===Ig&&(h.render=Wn),rt!=null&&(h.inheritAttrs=rt),we&&(h.components=we),Ro&&(h.directives=Ro)}function xee(h,C,D=Ig){cr(h)&&(h=$q(h));for(const N in h){const W=h[N];let Y;hi(W)?"default"in W?Y=k8(W.from||N,W.default,!0):Y=k8(W.from||N):Y=k8(W),Jd(Y)?Object.defineProperty(C,N,{enumerable:!0,configurable:!0,get:()=>Y.value,set:de=>Y.value=de}):C[N]=Y}}function tX(h,C,D){Yh(cr(h)?h.map(N=>N.bind(C.proxy)):h.bind(C.proxy),C,D)}function yJ(h,C,D,N){const W=N.includes(".")?NJ(D,N):()=>D[N];if(Ql(h)){const Y=C[h];kr(Y)&&Gy(W,Y)}else if(kr(h))Gy(W,h.bind(D));else if(hi(h))if(cr(h))h.forEach(Y=>yJ(Y,C,D,N));else{const Y=kr(h.handler)?h.handler.bind(D):C[h.handler];kr(Y)&&Gy(W,Y,h)}}function lK(h){const C=h.type,{mixins:D,extends:N}=C,{mixins:W,optionsCache:Y,config:{optionMergeStrategies:de}}=h.appContext,Q=Y.get(C);let Te;return Q?Te=Q:!W.length&&!D&&!N?Te=C:(Te={},W.length&&W.forEach(ct=>N8(Te,ct,de,!0)),N8(Te,C,de)),hi(C)&&Y.set(C,Te),Te}function N8(h,C,D,N=!1){const{mixins:W,extends:Y}=C;Y&&N8(h,Y,D,!0),W&&W.forEach(de=>N8(h,de,D,!0));for(const de in C)if(!(N&&de==="expose")){const Q=Eee[de]||D&&D[de];h[de]=Q?Q(h[de],C[de]):C[de]}return h}const Eee={data:nX,props:oX,emits:oX,methods:pF,computed:pF,beforeCreate:Yd,created:Yd,beforeMount:Yd,mounted:Yd,beforeUpdate:Yd,updated:Yd,beforeDestroy:Yd,beforeUnmount:Yd,destroyed:Yd,unmounted:Yd,activated:Yd,deactivated:Yd,errorCaptured:Yd,serverPrefetch:Yd,components:pF,directives:pF,watch:Aee,provide:nX,inject:Tee};function nX(h,C){return C?h?function(){return fd(kr(h)?h.call(this,this):h,kr(C)?C.call(this,this):C)}:C:h}function Tee(h,C){return pF($q(h),$q(C))}function $q(h){if(cr(h)){const C={};for(let D=0;D<h.length;D++)C[h[D]]=h[D];return C}return h}function Yd(h,C){return h?[...new Set([].concat(h,C))]:C}function pF(h,C){return h?fd(Object.create(null),h,C):C}function oX(h,C){return h?cr(h)&&cr(C)?[...new Set([...h,...C])]:fd(Object.create(null),eX(h),eX(C??{})):C}function Aee(h,C){if(!h)return C;if(!C)return h;const D=fd(Object.create(null),h);for(const N in C)D[N]=Yd(h[N],C[N]);return D}function CJ(){return{app:null,config:{isNativeTag:pQ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let kee=0;function _ee(h,C){return function(N,W=null){kr(N)||(N=fd({},N)),W!=null&&!hi(W)&&(W=null);const Y=CJ(),de=new WeakSet;let Q=!1;const Te=Y.app={_uid:kee++,_component:N,_props:W,_container:null,_context:Y,_instance:null,version:gte,get config(){return Y.config},set config(ct){},use(ct,...Xe){return de.has(ct)||(ct&&kr(ct.install)?(de.add(ct),ct.install(Te,...Xe)):kr(ct)&&(de.add(ct),ct(Te,...Xe))),Te},mixin(ct){return Y.mixins.includes(ct)||Y.mixins.push(ct),Te},component(ct,Xe){return Xe?(Y.components[ct]=Xe,Te):Y.components[ct]},directive(ct,Xe){return Xe?(Y.directives[ct]=Xe,Te):Y.directives[ct]},mount(ct,Xe,wt){if(!Q){const yt=Mm(N,W);return yt.appContext=Y,wt===!0?wt="svg":wt===!1&&(wt=void 0),Xe&&C?C(yt,ct):h(yt,ct,wt),Q=!0,Te._container=ct,ct.__vue_app__=Te,hK(yt.component)}},unmount(){Q&&(h(null,Te._container),delete Te._container.__vue_app__)},provide(ct,Xe){return Y.provides[ct]=Xe,Te},runWithContext(ct){const Xe=kk;kk=Te;try{return ct()}finally{kk=Xe}}};return Te}}let kk=null;function Dee(h,C){if(Xd){let D=Xd.provides;const N=Xd.parent&&Xd.parent.provides;N===D&&(D=Xd.provides=Object.create(N)),D[h]=C}}function k8(h,C,D=!1){const N=Xd||w1;if(N||kk){const W=kk?kk._context.provides:N?N.parent==null?N.vnode.appContext&&N.vnode.appContext.provides:N.parent.provides:void 0;if(W&&h in W)return W[h];if(arguments.length>1)return D&&kr(C)?C.call(N&&N.proxy):C}}const wJ={},SJ=()=>Object.create(wJ),xJ=h=>Object.getPrototypeOf(h)===wJ;function Oee(h,C,D,N=!1){const W={},Y=SJ();h.propsDefaults=Object.create(null),EJ(h,C,W,Y);for(const de in h.propsOptions[0])de in W||(W[de]=void 0);D?h.props=N?W:XQ(W):h.type.props?h.props=W:h.props=Y,h.attrs=Y}function Ree(h,C,D,N){const{props:W,attrs:Y,vnode:{patchFlag:de}}=h,Q=Ia(W),[Te]=h.propsOptions;let ct=!1;if((N||de>0)&&!(de&16)){if(de&8){const Xe=h.vnode.dynamicProps;for(let wt=0;wt<Xe.length;wt++){let yt=Xe[wt];if(U8(h.emitsOptions,yt))continue;const Tt=C[yt];if(Te)if(Ca(Y,yt))Tt!==Y[yt]&&(Y[yt]=Tt,ct=!0);else{const _t=KS(yt);W[_t]=Iq(Te,Q,_t,Tt,h,!1)}else Tt!==Y[yt]&&(Y[yt]=Tt,ct=!0)}}}else{EJ(h,C,W,Y)&&(ct=!0);let Xe;for(const wt in Q)(!C||!Ca(C,wt)&&((Xe=XS(wt))===wt||!Ca(C,Xe)))&&(Te?D&&(D[wt]!==void 0||D[Xe]!==void 0)&&(W[wt]=Iq(Te,Q,wt,void 0,h,!0)):delete W[wt]);if(Y!==Q)for(const wt in Y)(!C||!Ca(C,wt))&&(delete Y[wt],ct=!0)}ct&&s0(h.attrs,"set","")}function EJ(h,C,D,N){const[W,Y]=h.propsOptions;let de=!1,Q;if(C)for(let Te in C){if(bF(Te))continue;const ct=C[Te];let Xe;W&&Ca(W,Xe=KS(Te))?!Y||!Y.includes(Xe)?D[Xe]=ct:(Q||(Q={}))[Xe]=ct:U8(h.emitsOptions,Te)||(!(Te in N)||ct!==N[Te])&&(N[Te]=ct,de=!0)}if(Y){const Te=Ia(D),ct=Q||gi;for(let Xe=0;Xe<Y.length;Xe++){const wt=Y[Xe];D[wt]=Iq(W,Te,wt,ct[wt],h,!Ca(ct,wt))}}return de}function Iq(h,C,D,N,W,Y){const de=h[D];if(de!=null){const Q=Ca(de,"default");if(Q&&N===void 0){const Te=de.default;if(de.type!==Function&&!de.skipFactory&&kr(Te)){const{propsDefaults:ct}=W;if(D in ct)N=ct[D];else{const Xe=kF(W);N=ct[D]=Te.call(null,C),Xe()}}else N=Te}de[0]&&(Y&&!Q?N=!1:de[1]&&(N===""||N===XS(D))&&(N=!0))}return N}const Fee=new WeakMap;function TJ(h,C,D=!1){const N=D?Fee:C.propsCache,W=N.get(h);if(W)return W;const Y=h.props,de={},Q=[];let Te=!1;if(!kr(h)){const Xe=wt=>{Te=!0;const[yt,Tt]=TJ(wt,C,!0);fd(de,yt),Tt&&Q.push(...Tt)};!D&&C.mixins.length&&C.mixins.forEach(Xe),h.extends&&Xe(h.extends),h.mixins&&h.mixins.forEach(Xe)}if(!Y&&!Te)return hi(h)&&N.set(h,Ek),Ek;if(cr(Y))for(let Xe=0;Xe<Y.length;Xe++){const wt=KS(Y[Xe]);sX(wt)&&(de[wt]=gi)}else if(Y)for(const Xe in Y){const wt=KS(Xe);if(sX(wt)){const yt=Y[Xe],Tt=de[wt]=cr(yt)||kr(yt)?{type:yt}:fd({},yt),_t=Tt.type;let Lt=!1,gt=!0;if(cr(_t))for(let st=0;st<_t.length;++st){const Qe=_t[st],ie=kr(Qe)&&Qe.name;if(ie==="Boolean"){Lt=!0;break}else ie==="String"&&(gt=!1)}else Lt=kr(_t)&&_t.name==="Boolean";Tt[0]=Lt,Tt[1]=gt,(Lt||Ca(Tt,"default"))&&Q.push(wt)}}const ct=[de,Q];return hi(h)&&N.set(h,ct),ct}function sX(h){return h[0]!=="$"&&!bF(h)}const AJ=h=>h[0]==="_"||h==="$stable",uK=h=>cr(h)?h.map(y1):[y1(h)],Nee=(h,C,D)=>{if(C._n)return C;const N=dee((...W)=>uK(C(...W)),D);return N._c=!1,N},kJ=(h,C,D)=>{const N=h._ctx;for(const W in h){if(AJ(W))continue;const Y=h[W];if(kr(Y))C[W]=Nee(W,Y,N);else if(Y!=null){const de=uK(Y);C[W]=()=>de}}},_J=(h,C)=>{const D=uK(C);h.slots.default=()=>D},DJ=(h,C,D)=>{for(const N in C)(D||N!=="_")&&(h[N]=C[N])},Bee=(h,C,D)=>{const N=h.slots=SJ();if(h.vnode.shapeFlag&32){const W=C._;W?(DJ(N,C,D),D&&IX(N,"_",W,!0)):kJ(C,N)}else C&&_J(h,C)},Mee=(h,C,D)=>{const{vnode:N,slots:W}=h;let Y=!0,de=gi;if(N.shapeFlag&32){const Q=C._;Q?D&&Q===1?Y=!1:DJ(W,C,D):(Y=!C.$stable,kJ(C,W)),de=C}else C&&(_J(h,C),de={default:1});if(Y)for(const Q in W)!AJ(Q)&&de[Q]==null&&delete W[Q]};function Lq(h,C,D,N,W=!1){if(cr(h)){h.forEach((yt,Tt)=>Lq(yt,C&&(cr(C)?C[Tt]:C),D,N,W));return}if(A8(N)&&!W)return;const Y=N.shapeFlag&4?hK(N.component):N.el,de=W?null:Y,{i:Q,r:Te}=h,ct=C&&C.r,Xe=Q.refs===gi?Q.refs={}:Q.refs,wt=Q.setupState;if(ct!=null&&ct!==Te&&(Ql(ct)?(Xe[ct]=null,Ca(wt,ct)&&(wt[ct]=null)):Jd(ct)&&(ct.value=null)),kr(Te))jy(Te,Q,12,[de,Xe]);else{const yt=Ql(Te),Tt=Jd(Te);if(yt||Tt){const _t=()=>{if(h.f){const Lt=yt?Ca(wt,Te)?wt[Te]:Xe[Te]:Te.value;W?cr(Lt)&&qq(Lt,Y):cr(Lt)?Lt.includes(Y)||Lt.push(Y):yt?(Xe[Te]=[Y],Ca(wt,Te)&&(wt[Te]=Xe[Te])):(Te.value=[Y],h.k&&(Xe[h.k]=Te.value))}else yt?(Xe[Te]=de,Ca(wt,Te)&&(wt[Te]=de)):Tt&&(Te.value=de,h.k&&(Xe[h.k]=de))};de?(_t.id=-1,Bm(_t,D)):_t()}}}const Pee=Symbol("_vte"),$ee=h=>h.__isTeleport,Bm=Jee;function Iee(h){return Lee(h)}function Lee(h,C){const D=LX();D.__VUE__=!0;const{insert:N,remove:W,patchProp:Y,createElement:de,createText:Q,createComment:Te,setText:ct,setElementText:Xe,parentNode:wt,nextSibling:yt,setScopeId:Tt=Ig,insertStaticContent:_t}=h,Lt=(re,I,G,le=null,L=null,ye=null,He=void 0,ke=null,lt=!!I.dynamicChildren)=>{if(re===I)return;re&&!hF(re,I)&&(le=dt(re),Dt(re,L,ye,!0),re=null),I.patchFlag===-2&&(lt=!1,I.dynamicChildren=null);const{type:Je,ref:cn,shapeFlag:Wt}=I;switch(Je){case W8:gt(re,I,G,le);break;case TF:st(re,I,G,le);break;case Tq:re==null&&Qe(I,G,le,He);break;case o0:we(re,I,G,le,L,ye,He,ke,lt);break;default:Wt&1?Wn(re,I,G,le,L,ye,He,ke,lt):Wt&6?Ro(re,I,G,le,L,ye,He,ke,lt):(Wt&64||Wt&128)&&Je.process(re,I,G,le,L,ye,He,ke,lt,Ct)}cn!=null&&L&&Lq(cn,re&&re.ref,ye,I||re,!I)},gt=(re,I,G,le)=>{if(re==null)N(I.el=Q(I.children),G,le);else{const L=I.el=re.el;I.children!==re.children&&ct(L,I.children)}},st=(re,I,G,le)=>{re==null?N(I.el=Te(I.children||""),G,le):I.el=re.el},Qe=(re,I,G,le)=>{[re.el,re.anchor]=_t(re.children,I,G,le,re.el,re.anchor)},ie=({el:re,anchor:I},G,le)=>{let L;for(;re&&re!==I;)L=yt(re),N(re,G,le),re=L;N(I,G,le)},St=({el:re,anchor:I})=>{let G;for(;re&&re!==I;)G=yt(re),W(re),re=G;W(I)},Wn=(re,I,G,le,L,ye,He,ke,lt)=>{I.type==="svg"?He="svg":I.type==="math"&&(He="mathml"),re==null?vt(I,G,le,L,ye,He,ke,lt):On(re,I,L,ye,He,ke,lt)},vt=(re,I,G,le,L,ye,He,ke)=>{let lt,Je;const{props:cn,shapeFlag:Wt,transition:wn,dirs:ot}=re;if(lt=re.el=de(re.type,ye,cn&&cn.is,cn),Wt&8?Xe(lt,re.children):Wt&16&&Yt(re.children,lt,null,le,L,xq(re,ye),He,ke),ot&&US(re,null,le,"created"),J(lt,re,re.scopeId,He,le),cn){for(const Xt in cn)Xt!=="value"&&!bF(Xt)&&Y(lt,Xt,null,cn[Xt],ye,le);"value"in cn&&Y(lt,"value",null,cn.value,ye),(Je=cn.onVnodeBeforeMount)&&v1(Je,le,re)}ot&&US(re,null,le,"beforeMount");const mt=Hee(L,wn);mt&&wn.beforeEnter(lt),N(lt,I,G),((Je=cn&&cn.onVnodeMounted)||mt||ot)&&Bm(()=>{Je&&v1(Je,le,re),mt&&wn.enter(lt),ot&&US(re,null,le,"mounted")},L)},J=(re,I,G,le,L)=>{if(G&&Tt(re,G),le)for(let ye=0;ye<le.length;ye++)Tt(re,le[ye]);if(L){let ye=L.subTree;if(I===ye){const He=L.vnode;J(re,He,He.scopeId,He.slotScopeIds,L.parent)}}},Yt=(re,I,G,le,L,ye,He,ke,lt=0)=>{for(let Je=lt;Je<re.length;Je++){const cn=re[Je]=ke?Wy(re[Je]):y1(re[Je]);Lt(null,cn,I,G,le,L,ye,He,ke)}},On=(re,I,G,le,L,ye,He)=>{const ke=I.el=re.el;let{patchFlag:lt,dynamicChildren:Je,dirs:cn}=I;lt|=re.patchFlag&16;const Wt=re.props||gi,wn=I.props||gi;let ot;if(G&&WS(G,!1),(ot=wn.onVnodeBeforeUpdate)&&v1(ot,G,I,re),cn&&US(I,re,G,"beforeUpdate"),G&&WS(G,!0),(Wt.innerHTML&&wn.innerHTML==null||Wt.textContent&&wn.textContent==null)&&Xe(ke,""),Je?gn(re.dynamicChildren,Je,ke,G,le,xq(I,L),ye):He||ve(re,I,ke,null,G,le,xq(I,L),ye,!1),lt>0){if(lt&16)rt(ke,Wt,wn,G,L);else if(lt&2&&Wt.class!==wn.class&&Y(ke,"class",null,wn.class,L),lt&4&&Y(ke,"style",Wt.style,wn.style,L),lt&8){const mt=I.dynamicProps;for(let Xt=0;Xt<mt.length;Xt++){const sn=mt[Xt],lo=Wt[sn],po=wn[sn];(po!==lo||sn==="value")&&Y(ke,sn,lo,po,L,G)}}lt&1&&re.children!==I.children&&Xe(ke,I.children)}else!He&&Je==null&&rt(ke,Wt,wn,G,L);((ot=wn.onVnodeUpdated)||cn)&&Bm(()=>{ot&&v1(ot,G,I,re),cn&&US(I,re,G,"updated")},le)},gn=(re,I,G,le,L,ye,He)=>{for(let ke=0;ke<I.length;ke++){const lt=re[ke],Je=I[ke],cn=lt.el&&(lt.type===o0||!hF(lt,Je)||lt.shapeFlag&70)?wt(lt.el):G;Lt(lt,Je,cn,null,le,L,ye,He,!0)}},rt=(re,I,G,le,L)=>{if(I!==G){if(I!==gi)for(const ye in I)!bF(ye)&&!(ye in G)&&Y(re,ye,I[ye],null,L,le);for(const ye in G){if(bF(ye))continue;const He=G[ye],ke=I[ye];He!==ke&&ye!=="value"&&Y(re,ye,ke,He,L,le)}"value"in G&&Y(re,"value",I.value,G.value,L)}},we=(re,I,G,le,L,ye,He,ke,lt)=>{const Je=I.el=re?re.el:Q(""),cn=I.anchor=re?re.anchor:Q("");let{patchFlag:Wt,dynamicChildren:wn,slotScopeIds:ot}=I;ot&&(ke=ke?ke.concat(ot):ot),re==null?(N(Je,G,le),N(cn,G,le),Yt(I.children||[],G,cn,L,ye,He,ke,lt)):Wt>0&&Wt&64&&wn&&re.dynamicChildren?(gn(re.dynamicChildren,wn,G,L,ye,He,ke),(I.key!=null||L&&I===L.subTree)&&OJ(re,I,!0)):ve(re,I,G,cn,L,ye,He,ke,lt)},Ro=(re,I,G,le,L,ye,He,ke,lt)=>{I.slotScopeIds=ke,re==null?I.shapeFlag&512?L.ctx.activate(I,G,le,He,lt):Ve(I,G,le,L,ye,He,lt):je(re,I,lt)},Ve=(re,I,G,le,L,ye,He)=>{const ke=re.component=cte(re,le,L);if(fJ(re)&&(ke.ctx.renderer=Ct),ite(ke,!1,He),ke.asyncDep){if(L&&L.registerDep(ke,T,He),!re.el){const lt=ke.subTree=Mm(TF);st(null,lt,I,G)}}else T(ke,re,I,G,L,ye,He)},je=(re,I,G)=>{const le=I.component=re.component;if(Kee(re,I,G))if(le.asyncDep&&!le.asyncResolved){it(le,I,G);return}else le.next=I,iee(le.update),le.effect.dirty=!0,le.update();else I.el=re.el,le.vnode=I},T=(re,I,G,le,L,ye,He)=>{const ke=()=>{if(re.isMounted){let{next:cn,bu:Wt,u:wn,parent:ot,vnode:mt}=re;{const ro=RJ(re);if(ro){cn&&(cn.el=mt.el,it(re,cn,He)),ro.asyncDep.then(()=>{re.isUnmounted||ke()});return}}let Xt=cn,sn;WS(re,!1),cn?(cn.el=mt.el,it(re,cn,He)):cn=mt,Wt&&Cq(Wt),(sn=cn.props&&cn.props.onVnodeBeforeUpdate)&&v1(sn,ot,cn,mt),WS(re,!0);const lo=Eq(re),po=re.subTree;re.subTree=lo,Lt(po,lo,wt(po.el),dt(po),re,L,ye),cn.el=lo.el,Xt===null&&Yee(re,lo.el),wn&&Bm(wn,L),(sn=cn.props&&cn.props.onVnodeUpdated)&&Bm(()=>v1(sn,ot,cn,mt),L)}else{let cn;const{el:Wt,props:wn}=I,{bm:ot,m:mt,parent:Xt}=re,sn=A8(I);if(WS(re,!1),ot&&Cq(ot),!sn&&(cn=wn&&wn.onVnodeBeforeMount)&&v1(cn,Xt,I),WS(re,!0),Wt&&tt){const lo=()=>{re.subTree=Eq(re),tt(Wt,re.subTree,re,L,null)};sn?I.type.__asyncLoader().then(()=>!re.isUnmounted&&lo()):lo()}else{const lo=re.subTree=Eq(re);Lt(null,lo,G,le,re,L,ye),I.el=lo.el}if(mt&&Bm(mt,L),!sn&&(cn=wn&&wn.onVnodeMounted)){const lo=I;Bm(()=>v1(cn,Xt,lo),L)}(I.shapeFlag&256||Xt&&A8(Xt.vnode)&&Xt.vnode.shapeFlag&256)&&re.a&&Bm(re.a,L),re.isMounted=!0,I=G=le=null}},lt=re.effect=new Jq(ke,Ig,()=>cK(Je),re.scope),Je=re.update=()=>{lt.dirty&&lt.run()};Je.i=re,Je.id=re.uid,WS(re,!0),Je()},it=(re,I,G)=>{I.component=re;const le=re.vnode.props;re.vnode=I,re.next=null,Ree(re,I.props,le,G),Mee(re,I.children,G),Xy(),QY(re),Jy()},ve=(re,I,G,le,L,ye,He,ke,lt=!1)=>{const Je=re&&re.children,cn=re?re.shapeFlag:0,Wt=I.children,{patchFlag:wn,shapeFlag:ot}=I;if(wn>0){if(wn&128){It(Je,Wt,G,le,L,ye,He,ke,lt);return}else if(wn&256){Rt(Je,Wt,G,le,L,ye,He,ke,lt);return}}ot&8?(cn&16&&Ne(Je,L,ye),Wt!==Je&&Xe(G,Wt)):cn&16?ot&16?It(Je,Wt,G,le,L,ye,He,ke,lt):Ne(Je,L,ye,!0):(cn&8&&Xe(G,""),ot&16&&Yt(Wt,G,le,L,ye,He,ke,lt))},Rt=(re,I,G,le,L,ye,He,ke,lt)=>{re=re||Ek,I=I||Ek;const Je=re.length,cn=I.length,Wt=Math.min(Je,cn);let wn;for(wn=0;wn<Wt;wn++){const ot=I[wn]=lt?Wy(I[wn]):y1(I[wn]);Lt(re[wn],ot,G,null,L,ye,He,ke,lt)}Je>cn?Ne(re,L,ye,!0,!1,Wt):Yt(I,G,le,L,ye,He,ke,lt,Wt)},It=(re,I,G,le,L,ye,He,ke,lt)=>{let Je=0;const cn=I.length;let Wt=re.length-1,wn=cn-1;for(;Je<=Wt&&Je<=wn;){const ot=re[Je],mt=I[Je]=lt?Wy(I[Je]):y1(I[Je]);if(hF(ot,mt))Lt(ot,mt,G,null,L,ye,He,ke,lt);else break;Je++}for(;Je<=Wt&&Je<=wn;){const ot=re[Wt],mt=I[wn]=lt?Wy(I[wn]):y1(I[wn]);if(hF(ot,mt))Lt(ot,mt,G,null,L,ye,He,ke,lt);else break;Wt--,wn--}if(Je>Wt){if(Je<=wn){const ot=wn+1,mt=ot<cn?I[ot].el:le;for(;Je<=wn;)Lt(null,I[Je]=lt?Wy(I[Je]):y1(I[Je]),G,mt,L,ye,He,ke,lt),Je++}}else if(Je>wn)for(;Je<=Wt;)Dt(re[Je],L,ye,!0),Je++;else{const ot=Je,mt=Je,Xt=new Map;for(Je=mt;Je<=wn;Je++){const ss=I[Je]=lt?Wy(I[Je]):y1(I[Je]);ss.key!=null&&Xt.set(ss.key,Je)}let sn,lo=0;const po=wn-mt+1;let ro=!1,Ds=0;const to=new Array(po);for(Je=0;Je<po;Je++)to[Je]=0;for(Je=ot;Je<=Wt;Je++){const ss=re[Je];if(lo>=po){Dt(ss,L,ye,!0);continue}let Lo;if(ss.key!=null)Lo=Xt.get(ss.key);else for(sn=mt;sn<=wn;sn++)if(to[sn-mt]===0&&hF(ss,I[sn])){Lo=sn;break}Lo===void 0?Dt(ss,L,ye,!0):(to[Lo-mt]=Je+1,Lo>=Ds?Ds=Lo:ro=!0,Lt(ss,I[Lo],G,null,L,ye,He,ke,lt),lo++)}const Qo=ro?zee(to):Ek;for(sn=Qo.length-1,Je=po-1;Je>=0;Je--){const ss=mt+Je,Lo=I[ss],ir=ss+1<cn?I[ss+1].el:le;to[Je]===0?Lt(null,Lo,G,ir,L,ye,He,ke,lt):ro&&(sn<0||Je!==Qo[sn]?_e(Lo,G,ir,2):sn--)}}},_e=(re,I,G,le,L=null)=>{const{el:ye,type:He,transition:ke,children:lt,shapeFlag:Je}=re;if(Je&6){_e(re.component.subTree,I,G,le);return}if(Je&128){re.suspense.move(I,G,le);return}if(Je&64){He.move(re,I,G,Ct);return}if(He===o0){N(ye,I,G);for(let Wt=0;Wt<lt.length;Wt++)_e(lt[Wt],I,G,le);N(re.anchor,I,G);return}if(He===Tq){ie(re,I,G);return}if(le!==2&&Je&1&&ke)if(le===0)ke.beforeEnter(ye),N(ye,I,G),Bm(()=>ke.enter(ye),L);else{const{leave:Wt,delayLeave:wn,afterLeave:ot}=ke,mt=()=>N(ye,I,G),Xt=()=>{Wt(ye,()=>{mt(),ot&&ot()})};wn?wn(ye,mt,Xt):Xt()}else N(ye,I,G)},Dt=(re,I,G,le=!1,L=!1)=>{const{type:ye,props:He,ref:ke,children:lt,dynamicChildren:Je,shapeFlag:cn,patchFlag:Wt,dirs:wn,cacheIndex:ot}=re;if(Wt===-2&&(L=!1),ke!=null&&Lq(ke,null,G,re,!0),ot!=null&&(I.renderCache[ot]=void 0),cn&256){I.ctx.deactivate(re);return}const mt=cn&1&&wn,Xt=!A8(re);let sn;if(Xt&&(sn=He&&He.onVnodeBeforeUnmount)&&v1(sn,I,re),cn&6)rn(re.component,G,le);else{if(cn&128){re.suspense.unmount(G,le);return}mt&&US(re,null,I,"beforeUnmount"),cn&64?re.type.remove(re,I,G,Ct,le):Je&&!Je.hasOnce&&(ye!==o0||Wt>0&&Wt&64)?Ne(Je,I,G,!1,!0):(ye===o0&&Wt&384||!L&&cn&16)&&Ne(lt,I,G),le&&An(re)}(Xt&&(sn=He&&He.onVnodeUnmounted)||mt)&&Bm(()=>{sn&&v1(sn,I,re),mt&&US(re,null,I,"unmounted")},G)},An=re=>{const{type:I,el:G,anchor:le,transition:L}=re;if(I===o0){nt(G,le);return}if(I===Tq){St(re);return}const ye=()=>{W(G),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(re.shapeFlag&1&&L&&!L.persisted){const{leave:He,delayLeave:ke}=L,lt=()=>He(G,ye);ke?ke(re.el,ye,lt):lt()}else ye()},nt=(re,I)=>{let G;for(;re!==I;)G=yt(re),W(re),re=G;W(I)},rn=(re,I,G)=>{const{bum:le,scope:L,update:ye,subTree:He,um:ke,m:lt,a:Je}=re;rX(lt),rX(Je),le&&Cq(le),L.stop(),ye&&(ye.active=!1,Dt(He,re,I,G)),ke&&Bm(ke,I),Bm(()=>{re.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Ne=(re,I,G,le=!1,L=!1,ye=0)=>{for(let He=ye;He<re.length;He++)Dt(re[He],I,G,le,L)},dt=re=>{if(re.shapeFlag&6)return dt(re.component.subTree);if(re.shapeFlag&128)return re.suspense.next();const I=yt(re.anchor||re.el),G=I&&I[Pee];return G?yt(G):I};let V=!1;const Ao=(re,I,G)=>{re==null?I._vnode&&Dt(I._vnode,null,null,!0):Lt(I._vnode||null,re,I,null,null,null,G),I._vnode=re,V||(V=!0,QY(),lJ(),V=!1)},Ct={p:Lt,um:Dt,m:_e,r:An,mt:Ve,mc:Yt,pc:ve,pbc:gn,n:dt,o:h};let jt,tt;return{render:Ao,hydrate:jt,createApp:_ee(Ao,jt)}}function xq({type:h,props:C},D){return D==="svg"&&h==="foreignObject"||D==="mathml"&&h==="annotation-xml"&&C&&C.encoding&&C.encoding.includes("html")?void 0:D}function WS({effect:h,update:C},D){h.allowRecurse=C.allowRecurse=D}function Hee(h,C){return(!h||h&&!h.pendingBranch)&&C&&!C.persisted}function OJ(h,C,D=!1){const N=h.children,W=C.children;if(cr(N)&&cr(W))for(let Y=0;Y<N.length;Y++){const de=N[Y];let Q=W[Y];Q.shapeFlag&1&&!Q.dynamicChildren&&((Q.patchFlag<=0||Q.patchFlag===32)&&(Q=W[Y]=Wy(W[Y]),Q.el=de.el),!D&&Q.patchFlag!==-2&&OJ(de,Q)),Q.type===W8&&(Q.el=de.el)}}function zee(h){const C=h.slice(),D=[0];let N,W,Y,de,Q;const Te=h.length;for(N=0;N<Te;N++){const ct=h[N];if(ct!==0){if(W=D[D.length-1],h[W]<ct){C[N]=W,D.push(N);continue}for(Y=0,de=D.length-1;Y<de;)Q=Y+de>>1,h[D[Q]]<ct?Y=Q+1:de=Q;ct<h[D[Y]]&&(Y>0&&(C[N]=D[Y-1]),D[Y]=N)}}for(Y=D.length,de=D[Y-1];Y-- >0;)D[Y]=de,de=C[de];return D}function RJ(h){const C=h.subTree.component;if(C)return C.asyncDep&&!C.asyncResolved?C:RJ(C)}function rX(h){if(h)for(let C=0;C<h.length;C++)h[C].active=!1}const Vee=Symbol.for("v-scx"),Uee=()=>k8(Vee),E8={};function Gy(h,C,D){return FJ(h,C,D)}function FJ(h,C,{immediate:D,deep:N,flush:W,once:Y,onTrack:de,onTrigger:Q}=gi){if(C&&Y){const vt=C;C=(...J)=>{vt(...J),Wn()}}const Te=Xd,ct=vt=>N===!0?vt:jS(vt,N===!1?1:void 0);let Xe,wt=!1,yt=!1;if(Jd(h)?(Xe=()=>h.value,wt=_k(h)):vF(h)?(Xe=()=>ct(h),wt=!0):cr(h)?(yt=!0,wt=h.some(vt=>vF(vt)||_k(vt)),Xe=()=>h.map(vt=>{if(Jd(vt))return vt.value;if(vF(vt))return ct(vt);if(kr(vt))return jy(vt,Te,2)})):kr(h)?C?Xe=()=>jy(h,Te,2):Xe=()=>(Tt&&Tt(),Yh(h,Te,3,[_t])):Xe=Ig,C&&N){const vt=Xe;Xe=()=>jS(vt())}let Tt,_t=vt=>{Tt=ie.onStop=()=>{jy(vt,Te,4),Tt=ie.onStop=void 0}},Lt;if(Z8)if(_t=Ig,C?D&&Yh(C,Te,3,[Xe(),yt?[]:void 0,_t]):Xe(),W==="sync"){const vt=Uee();Lt=vt.__watcherHandles||(vt.__watcherHandles=[])}else return Ig;let gt=yt?new Array(h.length).fill(E8):E8;const st=()=>{if(!(!ie.active||!ie.dirty))if(C){const vt=ie.run();(N||wt||(yt?vt.some((J,Yt)=>qy(J,gt[Yt])):qy(vt,gt)))&&(Tt&&Tt(),Yh(C,Te,3,[vt,gt===E8?void 0:yt&&gt[0]===E8?[]:gt,_t]),gt=vt)}else ie.run()};st.allowRecurse=!!C;let Qe;W==="sync"?Qe=st:W==="post"?Qe=()=>Bm(st,Te&&Te.suspense):(st.pre=!0,Te&&(st.id=Te.uid),Qe=()=>cK(st));const ie=new Jq(Xe,Ig,Qe),St=OQ(),Wn=()=>{ie.stop(),St&&qq(St.effects,ie)};return C?D?st():gt=ie.run():W==="post"?Bm(ie.run.bind(ie),Te&&Te.suspense):ie.run(),Lt&&Lt.push(Wn),Wn}function Wee(h,C,D){const N=this.proxy,W=Ql(h)?h.includes(".")?NJ(N,h):()=>N[h]:h.bind(N,N);let Y;kr(C)?Y=C:(Y=C.handler,D=C);const de=kF(this),Q=FJ(W,Y.bind(N),D);return de(),Q}function NJ(h,C){const D=C.split(".");return()=>{let N=h;for(let W=0;W<D.length&&N;W++)N=N[D[W]];return N}}function jS(h,C=1/0,D){if(C<=0||!hi(h)||h.__v_skip||(D=D||new Set,D.has(h)))return h;if(D.add(h),C--,Jd(h))jS(h.value,C,D);else if(cr(h))for(let N=0;N<h.length;N++)jS(h[N],C,D);else if(NX(h)||Tk(h))h.forEach(N=>{jS(N,C,D)});else if(PX(h)){for(const N in h)jS(h[N],C,D);for(const N of Object.getOwnPropertySymbols(h))Object.prototype.propertyIsEnumerable.call(h,N)&&jS(h[N],C,D)}return h}const Zee=(h,C)=>C==="modelValue"||C==="model-value"?h.modelModifiers:h[`${C}Modifiers`]||h[`${KS(C)}Modifiers`]||h[`${XS(C)}Modifiers`];function jee(h,C,...D){if(h.isUnmounted)return;const N=h.vnode.props||gi;let W=D;const Y=C.startsWith("update:"),de=Y&&Zee(N,C.slice(7));de&&(de.trim&&(W=D.map(Xe=>Ql(Xe)?Xe.trim():Xe)),de.number&&(W=D.map(wQ)));let Q,Te=N[Q=yq(C)]||N[Q=yq(KS(C))];!Te&&Y&&(Te=N[Q=yq(XS(C))]),Te&&Yh(Te,h,6,W);const ct=N[Q+"Once"];if(ct){if(!h.emitted)h.emitted={};else if(h.emitted[Q])return;h.emitted[Q]=!0,Yh(ct,h,6,W)}}function BJ(h,C,D=!1){const N=C.emitsCache,W=N.get(h);if(W!==void 0)return W;const Y=h.emits;let de={},Q=!1;if(!kr(h)){const Te=ct=>{const Xe=BJ(ct,C,!0);Xe&&(Q=!0,fd(de,Xe))};!D&&C.mixins.length&&C.mixins.forEach(Te),h.extends&&Te(h.extends),h.mixins&&h.mixins.forEach(Te)}return!Y&&!Q?(hi(h)&&N.set(h,null),null):(cr(Y)?Y.forEach(Te=>de[Te]=null):fd(de,Y),hi(h)&&N.set(h,de),de)}function U8(h,C){return!h||!P8(C)?!1:(C=C.slice(2).replace(/Once$/,""),Ca(h,C[0].toLowerCase()+C.slice(1))||Ca(h,XS(C))||Ca(h,C))}function Eq(h){const{type:C,vnode:D,proxy:N,withProxy:W,propsOptions:[Y],slots:de,attrs:Q,emit:Te,render:ct,renderCache:Xe,props:wt,data:yt,setupState:Tt,ctx:_t,inheritAttrs:Lt}=h,gt=F8(h);let st,Qe;try{if(D.shapeFlag&4){const St=W||N,Wn=St;st=y1(ct.call(Wn,St,Xe,wt,Tt,yt,_t)),Qe=Q}else{const St=C;st=y1(St.length>1?St(wt,{attrs:Q,slots:de,emit:Te}):St(wt,null)),Qe=C.props?Q:Gee(Q)}}catch(St){CF.length=0,H8(St,h,1),st=Mm(TF)}let ie=st;if(Qe&&Lt!==!1){const St=Object.keys(Qe),{shapeFlag:Wn}=ie;St.length&&Wn&7&&(Y&&St.some(Gq)&&(Qe=qee(Qe,Y)),ie=Dk(ie,Qe,!1,!0))}return D.dirs&&(ie=Dk(ie,null,!1,!0),ie.dirs=ie.dirs?ie.dirs.concat(D.dirs):D.dirs),D.transition&&(ie.transition=D.transition),st=ie,F8(gt),st}const Gee=h=>{let C;for(const D in h)(D==="class"||D==="style"||P8(D))&&((C||(C={}))[D]=h[D]);return C},qee=(h,C)=>{const D={};for(const N in h)(!Gq(N)||!(N.slice(9)in C))&&(D[N]=h[N]);return D};function Kee(h,C,D){const{props:N,children:W,component:Y}=h,{props:de,children:Q,patchFlag:Te}=C,ct=Y.emitsOptions;if(C.dirs||C.transition)return!0;if(D&&Te>=0){if(Te&1024)return!0;if(Te&16)return N?aX(N,de,ct):!!de;if(Te&8){const Xe=C.dynamicProps;for(let wt=0;wt<Xe.length;wt++){const yt=Xe[wt];if(de[yt]!==N[yt]&&!U8(ct,yt))return!0}}}else return(W||Q)&&(!Q||!Q.$stable)?!0:N===de?!1:N?de?aX(N,de,ct):!0:!!de;return!1}function aX(h,C,D){const N=Object.keys(C);if(N.length!==Object.keys(h).length)return!0;for(let W=0;W<N.length;W++){const Y=N[W];if(C[Y]!==h[Y]&&!U8(D,Y))return!0}return!1}function Yee({vnode:h,parent:C},D){for(;C;){const N=C.subTree;if(N.suspense&&N.suspense.activeBranch===h&&(N.el=h.el),N===h)(h=C.vnode).el=D,C=C.parent;else break}}const Xee=h=>h.__isSuspense;function Jee(h,C){C&&C.pendingBranch?cr(h)?C.effects.push(...h):C.effects.push(h):lee(h)}const o0=Symbol.for("v-fgt"),W8=Symbol.for("v-txt"),TF=Symbol.for("v-cmt"),Tq=Symbol.for("v-stc"),CF=[];let Df=null;function dK(h=!1){CF.push(Df=h?null:[])}function Qee(){CF.pop(),Df=CF[CF.length-1]||null}let AF=1;function cX(h){AF+=h,h<0&&Df&&(Df.hasOnce=!0)}function ete(h){return h.dynamicChildren=AF>0?Df||Ek:null,Qee(),AF>0&&Df&&Df.push(h),h}function mK(h,C,D,N,W,Y){return ete(fK(h,C,D,N,W,Y,!0))}function Hq(h){return h?h.__v_isVNode===!0:!1}function hF(h,C){return h.type===C.type&&h.key===C.key}const MJ=({key:h})=>h??null,_8=({ref:h,ref_key:C,ref_for:D})=>(typeof h=="number"&&(h=""+h),h!=null?Ql(h)||Jd(h)||kr(h)?{i:w1,r:h,k:C,f:!!D}:h:null);function fK(h,C=null,D=null,N=0,W=null,Y=h===o0?0:1,de=!1,Q=!1){const Te={__v_isVNode:!0,__v_skip:!0,type:h,props:C,key:C&&MJ(C),ref:C&&_8(C),scopeId:dJ,slotScopeIds:null,children:D,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Y,patchFlag:N,dynamicProps:W,dynamicChildren:null,appContext:null,ctx:w1};return Q?(gK(Te,D),Y&128&&h.normalize(Te)):D&&(Te.shapeFlag|=Ql(D)?8:16),AF>0&&!de&&Df&&(Te.patchFlag>0||Y&6)&&Te.patchFlag!==32&&Df.push(Te),Te}const Mm=tte;function tte(h,C=null,D=null,N=0,W=null,Y=!1){if((!h||h===Cee)&&(h=TF),Hq(h)){const Q=Dk(h,C,!0);return D&&gK(Q,D),AF>0&&!Y&&Df&&(Q.shapeFlag&6?Df[Df.indexOf(h)]=Q:Df.push(Q)),Q.patchFlag=-2,Q}if(mte(h)&&(h=h.__vccOpts),C){C=nte(C);let{class:Q,style:Te}=C;Q&&!Ql(Q)&&(C.class=Xq(Q)),hi(Te)&&(nJ(Te)&&!cr(Te)&&(Te=fd({},Te)),C.style=Yq(Te))}const de=Ql(h)?1:Xee(h)?128:$ee(h)?64:hi(h)?4:kr(h)?2:0;return fK(h,C,D,N,W,de,Y,!0)}function nte(h){return h?nJ(h)||xJ(h)?fd({},h):h:null}function Dk(h,C,D=!1,N=!1){const{props:W,ref:Y,patchFlag:de,children:Q,transition:Te}=h,ct=C?ste(W||{},C):W,Xe={__v_isVNode:!0,__v_skip:!0,type:h.type,props:ct,key:ct&&MJ(ct),ref:C&&C.ref?D&&Y?cr(Y)?Y.concat(_8(C)):[Y,_8(C)]:_8(C):Y,scopeId:h.scopeId,slotScopeIds:h.slotScopeIds,children:Q,target:h.target,targetStart:h.targetStart,targetAnchor:h.targetAnchor,staticCount:h.staticCount,shapeFlag:h.shapeFlag,patchFlag:C&&h.type!==o0?de===-1?16:de|16:de,dynamicProps:h.dynamicProps,dynamicChildren:h.dynamicChildren,appContext:h.appContext,dirs:h.dirs,transition:Te,component:h.component,suspense:h.suspense,ssContent:h.ssContent&&Dk(h.ssContent),ssFallback:h.ssFallback&&Dk(h.ssFallback),el:h.el,anchor:h.anchor,ctx:h.ctx,ce:h.ce};return Te&&N&&mJ(Xe,Te.clone(Xe)),Xe}function ote(h=" ",C=0){return Mm(W8,null,h,C)}function y1(h){return h==null||typeof h=="boolean"?Mm(TF):cr(h)?Mm(o0,null,h.slice()):typeof h=="object"?Wy(h):Mm(W8,null,String(h))}function Wy(h){return h.el===null&&h.patchFlag!==-1||h.memo?h:Dk(h)}function gK(h,C){let D=0;const{shapeFlag:N}=h;if(C==null)C=null;else if(cr(C))D=16;else if(typeof C=="object")if(N&65){const W=C.default;W&&(W._c&&(W._d=!1),gK(h,W()),W._c&&(W._d=!0));return}else{D=32;const W=C._;!W&&!xJ(C)?C._ctx=w1:W===3&&w1&&(w1.slots._===1?C._=1:(C._=2,h.patchFlag|=1024))}else kr(C)?(C={default:C,_ctx:w1},D=32):(C=String(C),N&64?(D=16,C=[ote(C)]):D=8);h.children=C,h.shapeFlag|=D}function ste(...h){const C={};for(let D=0;D<h.length;D++){const N=h[D];for(const W in N)if(W==="class")C.class!==N.class&&(C.class=Xq([C.class,N.class]));else if(W==="style")C.style=Yq([C.style,N.style]);else if(P8(W)){const Y=C[W],de=N[W];de&&Y!==de&&!(cr(Y)&&Y.includes(de))&&(C[W]=Y?[].concat(Y,de):de)}else W!==""&&(C[W]=N[W])}return C}function v1(h,C,D,N=null){Yh(h,C,7,[D,N])}const rte=CJ();let ate=0;function cte(h,C,D){const N=h.type,W=(C?C.appContext:h.appContext)||rte,Y={uid:ate++,vnode:h,type:N,parent:C,appContext:W,root:null,next:null,subTree:null,effect:null,update:null,scope:new _Q(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:C?C.provides:Object.create(W.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:TJ(N,W),emitsOptions:BJ(N,W),emit:null,emitted:null,propsDefaults:gi,inheritAttrs:N.inheritAttrs,ctx:gi,data:gi,props:gi,attrs:gi,slots:gi,refs:gi,setupState:gi,setupContext:null,suspense:D,suspenseId:D?D.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Y.ctx={_:Y},Y.root=C?C.root:Y,Y.emit=jee.bind(null,Y),h.ce&&h.ce(Y),Y}let Xd=null,B8,zq;{const h=LX(),C=(D,N)=>{let W;return(W=h[D])||(W=h[D]=[]),W.push(N),Y=>{W.length>1?W.forEach(de=>de(Y)):W[0](Y)}};B8=C("__VUE_INSTANCE_SETTERS__",D=>Xd=D),zq=C("__VUE_SSR_SETTERS__",D=>Z8=D)}const kF=h=>{const C=Xd;return B8(h),h.scope.on(),()=>{h.scope.off(),B8(C)}},iX=()=>{Xd&&Xd.scope.off(),B8(null)};function PJ(h){return h.vnode.shapeFlag&4}let Z8=!1;function ite(h,C=!1,D=!1){C&&zq(C);const{props:N,children:W}=h.vnode,Y=PJ(h);Oee(h,N,Y,C),Bee(h,W,D);const de=Y?lte(h,C):void 0;return C&&zq(!1),de}function lte(h,C){const D=h.type;h.accessCache=Object.create(null),h.proxy=new Proxy(h.ctx,wee);const{setup:N}=D;if(N){const W=h.setupContext=N.length>1?dte(h):null,Y=kF(h);Xy();const de=jy(N,h,0,[h.props,W]);if(Jy(),Y(),BX(de)){if(de.then(iX,iX),C)return de.then(Q=>{lX(h,Q,C)}).catch(Q=>{H8(Q,h,0)});h.asyncDep=de}else lX(h,de,C)}else $J(h,C)}function lX(h,C,D){kr(C)?h.type.__ssrInlineRender?h.ssrRender=C:h.render=C:hi(C)&&(h.setupState=aJ(C)),$J(h,D)}let uX;function $J(h,C,D){const N=h.type;if(!h.render){if(!C&&uX&&!N.render){const W=N.template||lK(h).template;if(W){const{isCustomElement:Y,compilerOptions:de}=h.appContext.config,{delimiters:Q,compilerOptions:Te}=N,ct=fd(fd({isCustomElement:Y,delimiters:Q},de),Te);N.render=uX(W,ct)}}h.render=N.render||Ig}{const W=kF(h);Xy();try{See(h)}finally{Jy(),W()}}}const ute={get(h,C){return Pm(h,"get",""),h[C]}};function dte(h){const C=D=>{h.exposed=D||{}};return{attrs:new Proxy(h.attrs,ute),slots:h.slots,emit:h.emit,expose:C}}function hK(h){return h.exposed?h.exposeProxy||(h.exposeProxy=new Proxy(aJ(JQ(h.exposed)),{get(C,D){if(D in C)return C[D];if(D in yF)return yF[D](h)},has(C,D){return D in C||D in yF}})):h.proxy}function mte(h){return kr(h)&&"__vccOpts"in h}const fte=(h,C)=>QQ(h,C,Z8);function dX(h,C,D){const N=arguments.length;return N===2?hi(C)&&!cr(C)?Hq(C)?Mm(h,null,[C]):Mm(h,C):Mm(h,null,C):(N>3?D=Array.prototype.slice.call(arguments,2):N===3&&Hq(D)&&(D=[D]),Mm(h,C,D))}const gte="3.4.37";/**
* @vue/runtime-dom v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const hte="http://www.w3.org/2000/svg",pte="http://www.w3.org/1998/Math/MathML",t0=typeof document<"u"?document:null,mX=t0&&t0.createElement("template"),bte={insert:(h,C,D)=>{C.insertBefore(h,D||null)},remove:h=>{const C=h.parentNode;C&&C.removeChild(h)},createElement:(h,C,D,N)=>{const W=C==="svg"?t0.createElementNS(hte,h):C==="mathml"?t0.createElementNS(pte,h):D?t0.createElement(h,{is:D}):t0.createElement(h);return h==="select"&&N&&N.multiple!=null&&W.setAttribute("multiple",N.multiple),W},createText:h=>t0.createTextNode(h),createComment:h=>t0.createComment(h),setText:(h,C)=>{h.nodeValue=C},setElementText:(h,C)=>{h.textContent=C},parentNode:h=>h.parentNode,nextSibling:h=>h.nextSibling,querySelector:h=>t0.querySelector(h),setScopeId(h,C){h.setAttribute(C,"")},insertStaticContent(h,C,D,N,W,Y){const de=D?D.previousSibling:C.lastChild;if(W&&(W===Y||W.nextSibling))for(;C.insertBefore(W.cloneNode(!0),D),!(W===Y||!(W=W.nextSibling)););else{mX.innerHTML=N==="svg"?`<svg>${h}</svg>`:N==="mathml"?`<math>${h}</math>`:h;const Q=mX.content;if(N==="svg"||N==="mathml"){const Te=Q.firstChild;for(;Te.firstChild;)Q.appendChild(Te.firstChild);Q.removeChild(Te)}C.insertBefore(Q,D)}return[de?de.nextSibling:C.firstChild,D?D.previousSibling:C.lastChild]}},vte=Symbol("_vtc");function yte(h,C,D){const N=h[vte];N&&(C=(C?[C,...N]:[...N]).join(" ")),C==null?h.removeAttribute("class"):D?h.setAttribute("class",C):h.className=C}const fX=Symbol("_vod"),Cte=Symbol("_vsh"),wte=Symbol(""),Ste=/(^|;)\s*display\s*:/;function xte(h,C,D){const N=h.style,W=Ql(D);let Y=!1;if(D&&!W){if(C)if(Ql(C))for(const de of C.split(";")){const Q=de.slice(0,de.indexOf(":")).trim();D[Q]==null&&D8(N,Q,"")}else for(const de in C)D[de]==null&&D8(N,de,"");for(const de in D)de==="display"&&(Y=!0),D8(N,de,D[de])}else if(W){if(C!==D){const de=N[wte];de&&(D+=";"+de),N.cssText=D,Y=Ste.test(D)}}else C&&h.removeAttribute("style");fX in h&&(h[fX]=Y?N.display:"",h[Cte]&&(N.display="none"))}const gX=/\s*!important$/;function D8(h,C,D){if(cr(D))D.forEach(N=>D8(h,C,N));else if(D==null&&(D=""),C.startsWith("--"))h.setProperty(C,D);else{const N=Ete(h,C);gX.test(D)?h.setProperty(XS(N),D.replace(gX,""),"important"):h[N]=D}}const hX=["Webkit","Moz","ms"],Aq={};function Ete(h,C){const D=Aq[C];if(D)return D;let N=KS(C);if(N!=="filter"&&N in h)return Aq[C]=N;N=$X(N);for(let W=0;W<hX.length;W++){const Y=hX[W]+N;if(Y in h)return Aq[C]=Y}return C}const pX="http://www.w3.org/1999/xlink";function bX(h,C,D,N,W,Y=kQ(C)){N&&C.startsWith("xlink:")?D==null?h.removeAttributeNS(pX,C.slice(6,C.length)):h.setAttributeNS(pX,C,D):D==null||Y&&!HX(D)?h.removeAttribute(C):h.setAttribute(C,Y?"":Yy(D)?String(D):D)}function Tte(h,C,D,N){if(C==="innerHTML"||C==="textContent"){if(D==null)return;h[C]=D;return}const W=h.tagName;if(C==="value"&&W!=="PROGRESS"&&!W.includes("-")){const de=W==="OPTION"?h.getAttribute("value")||"":h.value,Q=D==null?"":String(D);(de!==Q||!("_value"in h))&&(h.value=Q),D==null&&h.removeAttribute(C),h._value=D;return}let Y=!1;if(D===""||D==null){const de=typeof h[C];de==="boolean"?D=HX(D):D==null&&de==="string"?(D="",Y=!0):de==="number"&&(D=0,Y=!0)}try{h[C]=D}catch{}Y&&h.removeAttribute(C)}function Ate(h,C,D,N){h.addEventListener(C,D,N)}function kte(h,C,D,N){h.removeEventListener(C,D,N)}const vX=Symbol("_vei");function _te(h,C,D,N,W=null){const Y=h[vX]||(h[vX]={}),de=Y[C];if(N&&de)de.value=N;else{const[Q,Te]=Dte(C);if(N){const ct=Y[C]=Fte(N,W);Ate(h,Q,ct,Te)}else de&&(kte(h,Q,de,Te),Y[C]=void 0)}}const yX=/(?:Once|Passive|Capture)$/;function Dte(h){let C;if(yX.test(h)){C={};let N;for(;N=h.match(yX);)h=h.slice(0,h.length-N[0].length),C[N[0].toLowerCase()]=!0}return[h[2]===":"?h.slice(3):XS(h.slice(2)),C]}let kq=0;const Ote=Promise.resolve(),Rte=()=>kq||(Ote.then(()=>kq=0),kq=Date.now());function Fte(h,C){const D=N=>{if(!N._vts)N._vts=Date.now();else if(N._vts<=D.attached)return;Yh(Nte(N,D.value),C,5,[N])};return D.value=h,D.attached=Rte(),D}function Nte(h,C){if(cr(C)){const D=h.stopImmediatePropagation;return h.stopImmediatePropagation=()=>{D.call(h),h._stopped=!0},C.map(N=>W=>!W._stopped&&N&&N(W))}else return C}const CX=h=>h.charCodeAt(0)===111&&h.charCodeAt(1)===110&&h.charCodeAt(2)>96&&h.charCodeAt(2)<123,Bte=(h,C,D,N,W,Y)=>{const de=W==="svg";C==="class"?yte(h,N,de):C==="style"?xte(h,D,N):P8(C)?Gq(C)||_te(h,C,D,N,Y):(C[0]==="."?(C=C.slice(1),!0):C[0]==="^"?(C=C.slice(1),!1):Mte(h,C,N,de))?(Tte(h,C,N),!h.tagName.includes("-")&&(C==="value"||C==="checked"||C==="selected")&&bX(h,C,N,de,Y,C!=="value")):(C==="true-value"?h._trueValue=N:C==="false-value"&&(h._falseValue=N),bX(h,C,N,de))};function Mte(h,C,D,N){if(N)return!!(C==="innerHTML"||C==="textContent"||C in h&&CX(C)&&kr(D));if(C==="spellcheck"||C==="draggable"||C==="translate"||C==="form"||C==="list"&&h.tagName==="INPUT"||C==="type"&&h.tagName==="TEXTAREA")return!1;if(C==="width"||C==="height"){const W=h.tagName;if(W==="IMG"||W==="VIDEO"||W==="CANVAS"||W==="SOURCE")return!1}return CX(C)&&Ql(D)?!1:C in h}const Pte=fd({patchProp:Bte},bte);let wX;function $te(){return wX||(wX=Iee(Pte))}const Ite=(...h)=>{const C=$te().createApp(...h),{mount:D}=C;return C.mount=N=>{const W=Hte(N);if(!W)return;const Y=C._component;!kr(Y)&&!Y.render&&!Y.template&&(Y.template=W.innerHTML),W.innerHTML="";const de=D(W,!1,Lte(W));return W instanceof Element&&(W.removeAttribute("v-cloak"),W.setAttribute("data-v-app","")),de},C};function Lte(h){if(h instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&h instanceof MathMLElement)return"mathml"}function Hte(h){return Ql(h)?document.querySelector(h):h}const zte=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Vte=h=>zte.map(C=>C.toLowerCase()).indexOf(h.toLowerCase())!==-1,Ute=(h,C,D)=>{Object.keys(C).filter(Vte).forEach(N=>{const W=C[N];typeof W=="function"&&(N==="onInit"?W(h,D):D.on(N.substring(2),Y=>W(Y,D)))})},Wte=(h,C,D,N)=>{const W=h.modelEvents?h.modelEvents:null,Y=Array.isArray(W)?W.join(" "):W;Gy(N,(de,Q)=>{D&&typeof de=="string"&&de!==Q&&de!==D.getContent({format:h.outputFormat})&&D.setContent(de)}),D.on(Y||"change input undo redo",()=>{C.emit("update:modelValue",D.getContent({format:h.outputFormat}))})},Zte=(h,C,D,N,W,Y)=>{N.setContent(Y()),D.attrs["onUpdate:modelValue"]&&Wte(C,D,N,W),Ute(h,D.attrs,N)};let SX=0;const IJ=h=>{const C=Date.now(),D=Math.floor(Math.random()*1e9);return SX++,h+"_"+D+SX+String(C)},jte=h=>h!==null&&h.tagName.toLowerCase()==="textarea",xX=h=>typeof h>"u"||h===""?[]:Array.isArray(h)?h:h.split(" "),Gte=(h,C)=>xX(h).concat(xX(C)),qte=h=>h==null,EX=()=>({listeners:[],scriptId:IJ("tiny-script"),scriptLoaded:!1}),Kte=()=>{let h=EX();const C=(W,Y,de,Q)=>{const Te=Y.createElement("script");Te.referrerPolicy="origin",Te.type="application/javascript",Te.id=W,Te.src=de;const ct=()=>{Te.removeEventListener("load",ct),Q()};Te.addEventListener("load",ct),Y.head&&Y.head.appendChild(Te)};return{load:(W,Y,de)=>{h.scriptLoaded?de():(h.listeners.push(de),W.getElementById(h.scriptId)||C(h.scriptId,W,Y,()=>{h.listeners.forEach(Q=>Q()),h.scriptLoaded=!0}))},reinitialize:()=>{h=EX()}}},Yte=Kte(),Xte=()=>typeof window<"u"?window:global,n0=()=>{const h=Xte();return h&&h.tinymce?h.tinymce:null},Jte={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:h=>h==="html"||h==="text"}},Qte=(h,C,D,N)=>h(N||"div",{id:C,ref:D}),ene=(h,C,D)=>h("textarea",{id:C,visibility:"hidden",ref:D}),_q={selector:void 0,target:void 0},tne=z8({props:Jte,setup:(h,C)=>{let D=h.init?{...h.init,..._q}:{..._q};const{disabled:N,modelValue:W,tagName:Y}=oee(h),de=SF(null);let Q=null;const Te=h.id||IJ("tiny-vue"),ct=h.init&&h.init.inline||h.inline,Xe=!!C.attrs["onUpdate:modelValue"];let wt=!0;const yt=h.initialValue?h.initialValue:"";let Tt="";const _t=st=>Xe?()=>W!=null&&W.value?W.value:"":()=>st?yt:Tt,Lt=()=>{const st=_t(wt),Qe={...D,readonly:h.disabled,target:de.value,plugins:Gte(D.plugins,h.plugins),toolbar:h.toolbar||D.toolbar,inline:ct,setup:ie=>{Q=ie,ie.on("init",St=>Zte(St,h,C,ie,W,st)),typeof D.setup=="function"&&D.setup(ie)}};jte(de.value)&&(de.value.style.visibility=""),n0().init(Qe),wt=!1};Gy(N,st=>{var Qe;Q!==null&&(typeof((Qe=Q.mode)==null?void 0:Qe.set)=="function"?Q.mode.set(st?"readonly":"design"):Q.setMode(st?"readonly":"design"))}),Gy(Y,()=>{var st;Xe||(Tt=Q.getContent()),(st=n0())==null||st.remove(Q),R8(()=>Lt())}),iK(()=>{if(n0()!==null)Lt();else if(de.value&&de.value.ownerDocument){const st=h.cloudChannel?h.cloudChannel:"7",Qe=h.apiKey?h.apiKey:"no-api-key",ie=qte(h.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${Qe}/tinymce/${st}/tinymce.min.js`:h.tinymceScriptSrc;Yte.load(de.value.ownerDocument,ie,Lt)}}),bJ(()=>{n0()!==null&&n0().remove(Q)}),ct||(gJ(()=>{wt||Lt()}),hJ(()=>{var st;Xe||(Tt=Q.getContent()),(st=n0())==null||st.remove(Q)}));const gt=st=>{var Qe;Tt=Q.getContent(),(Qe=n0())==null||Qe.remove(Q),D={...D,...st,..._q},R8(()=>Lt())};return C.expose({rerender:gt,getEditor:()=>Q}),()=>ct?Qte(dX,Te,de,h.tagName):ene(dX,Te,de)}});function nne(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var LJ={exports:{}};(function(h){(function(){var C=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},D=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},N=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},W=function(e,n){return Y(function(o,r){return e.eq(n(o),n(r))})},Y=function(e){return{eq:e}},de=Y(function(e,n){return e===n}),Q=de,Te=function(e){return Y(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},ct=function(e,n){return W(Te(e),function(o){return N(o,n)})},Xe=function(e){return Y(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!ct(Q).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var v=r[f];if(!e.eq(n[v],o[v]))return!1}return!0})},wt=Y(function(e,n){if(e===n)return!0;var o=C(e),r=C(n);return o!==r?!1:D(o)?e===n:o==="array"?Te(wt).eq(e,n):o==="object"?Xe(wt).eq(e,n):!1});const yt=Object.getPrototypeOf,Tt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},_t=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Tt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Lt=e=>n=>_t(n)===e,gt=e=>n=>typeof n===e,st=e=>n=>e===n,Qe=(e,n)=>St(e)&&Tt(e,n,(o,r)=>yt(o)===r),ie=Lt("string"),St=Lt("object"),Wn=e=>Qe(e,Object),vt=Lt("array"),J=st(null),Yt=gt("boolean"),On=st(void 0),gn=e=>e==null,rt=e=>!gn(e),we=gt("function"),Ro=gt("number"),Ve=(e,n)=>{if(vt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},je=()=>{},T=(e,n)=>(...o)=>e(n.apply(null,o)),it=(e,n)=>o=>e(n(o)),ve=e=>()=>e,Rt=e=>e,It=(e,n)=>e===n;function _e(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Dt=e=>n=>!e(n),An=e=>()=>{throw new Error(e)},nt=e=>e(),rn=e=>{e()},Ne=ve(!1),dt=ve(!0);class V{constructor(n,o){this.tag=n,this.value=o}static some(n){return new V(!0,n)}static none(){return V.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?V.some(n(this.value)):V.none()}bind(n){return this.tag?n(this.value):V.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:V.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return rt(n)?V.some(n):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const Ao=Array.prototype.slice,Ct=Array.prototype.indexOf,jt=Array.prototype.push,tt=(e,n)=>Ct.call(e,n),re=(e,n)=>{const o=tt(e,n);return o===-1?V.none():V.some(o)},I=(e,n)=>tt(e,n)>-1,G=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},le=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},L=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},ye=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},He=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},ke=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},lt=(e,n,o)=>(ye(e,(r,c)=>{o=n(o,r,c)}),o),Je=(e,n,o)=>(L(e,(r,c)=>{o=n(o,r,c)}),o),cn=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return V.some(u);if(o(u,r))break}return V.none()},Wt=(e,n)=>cn(e,n,Ne),wn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return V.some(o)}return V.none()},ot=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!vt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);jt.apply(n,e[o])}return n},mt=(e,n)=>ot(le(e,n)),Xt=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},sn=e=>{const n=Ao.call(e,0);return n.reverse(),n},lo=(e,n)=>ke(e,o=>!I(n,o)),po=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},ro=(e,n)=>{const o=Ao.call(e,0);return o.sort(n),o},Ds=(e,n)=>n>=0&&n<e.length?V.some(e[n]):V.none(),to=e=>Ds(e,0),Qo=e=>Ds(e,e.length-1),ss=we(Array.from)?Array.from:e=>Ao.call(e),Lo=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return V.none()},ir=(e,n)=>{const o=[],r=we(n)?c=>G(o,u=>n(u,c)):c=>I(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},xo=Object.keys,zr=Object.hasOwnProperty,on=(e,n)=>{const o=xo(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Zo=(e,n)=>gr(e,(o,r)=>({k:r,v:n(o,r)})),gr=(e,n)=>{const o={};return on(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},tr=e=>(n,o)=>{e[o]=n},Rr=(e,n,o,r)=>{on(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},_r=(e,n)=>{const o={},r={};return Rr(e,n,tr(o),tr(r)),{t:o,f:r}},ys=(e,n)=>{const o={};return Rr(e,n,tr(o),je),o},ea=(e,n)=>{const o=[];return on(e,(r,c)=>{o.push(n(r,c))}),o},Gr=e=>ea(e,Rt),bs=(e,n)=>Qn(e,n)?V.from(e[n]):V.none(),Qn=(e,n)=>zr.call(e,n),Ns=(e,n)=>Qn(e,n)&&e[n]!==void 0&&e[n]!==null,Ke=(e,n,o=wt)=>Xe(o).eq(e,n),xt=e=>{const n={};return L(e,o=>{n[o]={}}),xo(n)},xn=e=>e.length!==void 0,Bn=Array.isArray,Ho=e=>{if(Bn(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},as=(e,n,o)=>{if(!e)return!1;if(o=o||e,xn(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Qn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},pr=(e,n)=>{const o=[];return as(e,(r,c)=>{o.push(n(r,c,e))}),o},Sr=(e,n)=>{const o=[];return as(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},lr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ae=(e,n,o,r)=>{let c=On(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Ce=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},ht=e=>e[e.length-1],Ft=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Yn=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),v=f||r("(pointer:coarse)"),w=c||!u&&f&&r("(min-device-width:768px)"),_=u||f&&!w,P=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,H=!_&&!w&&!P;return{isiPad:ve(c),isiPhone:ve(u),isTablet:ve(w),isPhone:ve(_),isTouch:ve(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ve(P),isDesktop:ve(H)}},Co=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Bo=(e,n)=>{const o=Co(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Fo(r(1),r(2))},ur=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Le():Bo(e,o)},Le=()=>Fo(0,0),Fo=(e,n)=>({major:e,minor:n}),Re={nu:Fo,detect:ur,unknown:Le},Be=(e,n)=>Lo(n.brands,o=>{const r=o.brand.toLowerCase();return Wt(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Re.nu(parseInt(o.version,10),0)}))}),qt=(e,n)=>{const o=String(n).toLowerCase();return Wt(e,r=>r.search(o))},tn=(e,n)=>qt(e,n).map(o=>{const r=Re.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Dn=(e,n)=>qt(e,n).map(o=>{const r=Re.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Zn=(e,n)=>e.substring(n),Gn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,zn=(e,n)=>bo(e,n)?Zn(e,n.length):e,no=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?On(r)?!0:c+n.length<=r:!1},bo=(e,n)=>Gn(e,n,0),hs=(e,n)=>Gn(e,n,e.length-n.length),As=e=>n=>n.replace(e,""),Ls=As(/^\s+|\s+$/g),wa=As(/^\s+/g),la=As(/\s+$/g),fo=e=>e.length>0,is=e=>!fo(e),ms=(e,n)=>n<=0?"":new Array(n+1).join(e),aa=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?V.none():V.some(o)},ta=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fr=e=>n=>no(n,e),dr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>no(e,"edge/")&&no(e,"chrome")&&no(e,"safari")&&no(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ta],search:e=>no(e,"chrome")&&!no(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>no(e,"msie")||no(e,"trident")},{name:"Opera",versionRegexes:[ta,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fr("firefox")},{name:"Safari",versionRegexes:[ta,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(no(e,"safari")||no(e,"mobile/"))&&no(e,"applewebkit")}],_l=[{name:"Windows",search:Fr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>no(e,"iphone")||no(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fr("linux"),versionRegexes:[]},{name:"Solaris",search:Fr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ec={browsers:ve(dr),oses:ve(_l)},ks="Edge",Sa="Chromium",ha="IE",Vr="Opera",pi="Firefox",xa="Safari",Fa=()=>fc({current:void 0,version:Re.unknown()}),fc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(ks),isChromium:r(Sa),isIE:r(ha),isOpera:r(Vr),isFirefox:r(pi),isSafari:r(xa)}},tc={unknown:Fa,nu:fc,edge:ve(ks),chromium:ve(Sa),ie:ve(ha),opera:ve(Vr),firefox:ve(pi),safari:ve(xa)},Wi="Windows",ni="iOS",Uc="Android",Na="Linux",Nr="macOS",Ei="Solaris",Zi="FreeBSD",Ti="ChromeOS",Ai=()=>Ur({current:void 0,version:Re.unknown()}),Ur=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Wi),isiOS:r(ni),isAndroid:r(Uc),isMacOS:r(Nr),isLinux:r(Na),isSolaris:r(Ei),isFreeBSD:r(Zi),isChromeOS:r(Ti)}},Za={unknown:Ai,nu:Ur,windows:ve(Wi),ios:ve(ni),android:ve(Uc),linux:ve(Na),macos:ve(Nr),solaris:ve(Ei),freebsd:ve(Zi),chromeos:ve(Ti)},Se={detect:(e,n,o)=>{const r=ec.browsers(),c=ec.oses(),u=n.bind(w=>Be(r,w)).orThunk(()=>tn(r,e)).fold(tc.unknown,tc.nu),f=Dn(c,e).fold(Za.unknown,Za.nu),v=Yn(f,u,e,o);return{browser:u,os:f,deviceType:v}}},Ge=e=>window.matchMedia(e).matches;let Ht=Ft(()=>Se.detect(window.navigator.userAgent,V.from(window.navigator.userAgentData),Ge));const dn=()=>Ht(),$n=window.navigator.userAgent,es=dn(),Ws=es.browser,ls=es.os,q=es.deviceType,xe=$n.indexOf("Windows Phone")!==-1,Ie={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ws.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ws.isIE(),windowsPhone:xe,browser:{current:Ws.current,version:Ws.version,isChromium:Ws.isChromium,isEdge:Ws.isEdge,isFirefox:Ws.isFirefox,isIE:Ws.isIE,isOpera:Ws.isOpera,isSafari:Ws.isSafari},os:{current:ls.current,version:ls.version,isAndroid:ls.isAndroid,isChromeOS:ls.isChromeOS,isFreeBSD:ls.isFreeBSD,isiOS:ls.isiOS,isLinux:ls.isLinux,isMacOS:ls.isMacOS,isSolaris:ls.isSolaris,isWindows:ls.isWindows},deviceType:{isDesktop:q.isDesktop,isiPad:q.isiPad,isiPhone:q.isiPhone,isPhone:q.isPhone,isTablet:q.isTablet,isTouch:q.isTouch,isWebView:q.isWebView}},nn=/^\s*|\s*$/g,zo=e=>gn(e)?"":(""+e).replace(nn,""),$=(e,n)=>n?n==="array"&&Bn(e)?!0:typeof e===n:e!==void 0,se=(e,n,o={})=>{const r=ie(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},De=Qn,at=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(Qn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},pt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),as(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(pt(c,n,o,r),!0)))},Qt={trim:zo,isArray:Bn,is:$,toArray:Ho,makeMap:se,each:as,map:pr,grep:Sr,inArray:lr,hasOwn:De,extend:at,walk:pt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>vt(e)?e:e===""?[]:pr(e.split(n||","),zo),_addCacheSuffix:e=>{const n=Ie.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Hs=(e,n,o=It)=>e.exists(r=>o(r,n)),pa=(e,n,o=It)=>qo(e,n,o).getOr(e.isNone()&&n.isNone()),gc=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},qo=(e,n,o)=>e.isSome()&&n.isSome()?V.some(o(e.getOrDie(),n.getOrDie())):V.none(),hc=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?V.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):V.none(),qr=(e,n)=>e?V.some(n):V.none(),eu=typeof window<"u"?window:Function("return this;")(),nr=(e,n)=>{let o=n??eu;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ji=(e,n)=>{const o=e.split(".");return nr(o,n)},Qd=(e,n)=>ji(e,n),Of=(e,n)=>{const o=Qd(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Dr=Object.getPrototypeOf,em=e=>Of("HTMLElement",e),ca=e=>{const n=ji("ownerDocument.defaultView",e);return St(e)&&(em(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Dr(e).constructor.name))},La=8,bi=9,vi=11,Tu=1,ae=3,fe=e=>e.dom.nodeName.toLowerCase(),ut=e=>e.dom.nodeType,zt=e=>n=>ut(n)===e,go=e=>ut(e)===La||fe(e)==="#comment",Mo=e=>Bs(e)&&ca(e.dom),Bs=zt(Tu),Js=zt(ae),Ha=zt(bi),pc=zt(vi),ia=e=>n=>Bs(n)&&fe(n)===e,bc=(e,n,o)=>{if(ie(o)||Yt(o)||Ro(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},or=(e,n,o)=>{bc(e.dom,n,o)},Sc=(e,n)=>{const o=e.dom;on(n,(r,c)=>{bc(o,c,r)})},nc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Kr=(e,n)=>V.from(nc(e,n)),Br=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},br=(e,n)=>{e.dom.removeAttribute(n)},Au=e=>{const n=e.dom.attributes;return n==null||n.length===0},ku=e=>Je(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),_u=(e,n)=>{const o=nc(e,n);return o===void 0||o===""?[]:o.split(" ")},$m=(e,n,o)=>{const c=_u(e,n).concat([o]);return or(e,n,c.join(" ")),!0},Du=(e,n,o)=>{const r=ke(_u(e,n),c=>c!==o);return r.length>0?or(e,n,r.join(" ")):br(e,n),!1},Gi=e=>e.dom.classList!==void 0,Im=e=>_u(e,"class"),ba=(e,n)=>$m(e,"class",n),Lm=(e,n)=>Du(e,"class",n),Lg=(e,n)=>I(Im(e),n)?Lm(e,n):ba(e,n),Dl=(e,n)=>{Gi(e)?e.dom.classList.add(n):ba(e,n)},Hg=e=>{(Gi(e)?e.dom.classList:Im(e)).length===0&&br(e,"class")},Ou=(e,n)=>{Gi(e)?e.dom.classList.remove(n):Lm(e,n),Hg(e)},zg=(e,n)=>{const o=Gi(e)?e.dom.classList.toggle(n):Lg(e,n);return Hg(e),o},tu=(e,n)=>Gi(e)&&e.dom.classList.contains(n),Vg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Ru(r.childNodes[0])},Hm=(e,n)=>{const r=(n||document).createElement(e);return Ru(r)},Rf=(e,n)=>{const r=(n||document).createTextNode(e);return Ru(r)},Ru=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Fe={fromHtml:Vg,fromTag:Hm,fromText:Rf,fromDom:Ru,fromPoint:(e,n,o)=>V.from(e.dom.elementFromPoint(n,o)).map(Ru)},nu=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ol=(e,n)=>{const o=e.dom;if(o.nodeType!==Tu)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Ug=e=>e.nodeType!==Tu&&e.nodeType!==bi&&e.nodeType!==vi||e.childElementCount===0,S1=(e,n)=>{const o=n===void 0?document:n.dom;return Ug(o)?[]:le(o.querySelectorAll(e),Fe.fromDom)},Fu=(e,n)=>{const o=n===void 0?document:n.dom;return Ug(o)?V.none():V.from(o.querySelector(e)).map(Fe.fromDom)},os=(e,n)=>e.dom===n.dom,Ea=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},qi=e=>Fe.fromDom(e.dom.ownerDocument),Nu=e=>Ha(e)?e:qi(e),zm=e=>Fe.fromDom(Nu(e).dom.documentElement),tm=e=>Fe.fromDom(Nu(e).dom.defaultView),xc=e=>V.from(e.dom.parentNode).map(Fe.fromDom),Vm=e=>V.from(e.dom.parentElement).map(Fe.fromDom),ou=(e,n)=>{const o=we(n)?n:Ne;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=Fe.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Um=e=>{const n=o=>ke(o,r=>!os(e,r));return xc(e).map(ja).map(n).getOr([])},su=e=>V.from(e.dom.previousSibling).map(Fe.fromDom),Wc=e=>V.from(e.dom.nextSibling).map(Fe.fromDom),Wg=e=>sn(nu(e,su)),nm=e=>nu(e,Wc),ja=e=>le(e.dom.childNodes,Fe.fromDom),oi=(e,n)=>{const o=e.dom.childNodes;return V.from(o[n]).map(Fe.fromDom)},Mc=e=>oi(e,0),gd=e=>oi(e,e.dom.childNodes.length-1),om=e=>e.dom.childNodes.length,Zg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return Fe.fromDom(n)},sm=e=>pc(e)&&rt(e.dom.host),ul=e=>Fe.fromDom(e.dom.getRootNode()),Wm=e=>sm(e)?e:Zg(Nu(e)),Xh=e=>sm(e)?e:Fe.fromDom(Nu(e).dom.body),jg=e=>{const n=ul(e);return sm(n)?V.some(n):V.none()},a0=e=>Fe.fromDom(e.dom.host),Nf=e=>{if(rt(e.target)){const n=Fe.fromDom(e.target);if(Bs(n)&&rm(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return to(o)}}return V.from(e.target)},rm=e=>rt(e.dom.shadowRoot),hd=e=>{const n=Js(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return jg(Fe.fromDom(n)).fold(()=>o.body.contains(n),it(hd,a0))};var am=(e,n,o,r,c)=>e(o,r)?V.some(o):we(c)&&c(o)?V.none():n(o,r,c);const Wr=(e,n,o)=>{let r=e.dom;const c=we(o)?o:Ne;for(;r.parentNode;){r=r.parentNode;const u=Fe.fromDom(r);if(n(u))return V.some(u);if(c(u))break}return V.none()},Yr=(e,n,o)=>am((c,u)=>u(c),Wr,e,n,o),ki=(e,n)=>{const o=e.dom;return o.parentNode?pd(Fe.fromDom(o.parentNode),r=>!os(e,r)&&n(r)):V.none()},pd=(e,n)=>{const o=c=>n(Fe.fromDom(c));return Wt(e.dom.childNodes,o).map(Fe.fromDom)},Gg=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=Fe.fromDom(r.childNodes[c]);if(n(u))return V.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return V.none()};return o(e.dom)},Ba=(e,n,o)=>Wr(e,r=>Ol(r,n),o),oo=(e,n)=>Fu(n,e),ru=(e,n,o)=>am((c,u)=>Ol(c,u),Ba,e,n,o),Bf=e=>ru(e,"[contenteditable]"),oc=(e,n=!1)=>hd(e)?e.dom.isContentEditable:Bf(e).fold(ve(n),o=>Ys(o)==="true"),Ys=e=>e.dom.contentEditable,Bu=e=>e.style!==void 0&&we(e.style.getPropertyValue),qg=(e,n,o)=>{if(!ie(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Bu(e)&&e.style.setProperty(n,o)},cm=(e,n)=>{Bu(e)&&e.style.removeProperty(n)},Jh=(e,n,o)=>{const r=e.dom;qg(r,n,o)},Yo=(e,n)=>{const o=e.dom;on(n,(r,c)=>{qg(o,c,r)})},Ma=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!hd(e)?bd(o,n):c},bd=(e,n)=>Bu(e)?e.style.getPropertyValue(n):"",vc=(e,n)=>{const o=e.dom,r=bd(o,n);return V.from(r).filter(c=>c.length>0)},Zc=e=>{const n={},o=e.dom;if(Bu(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},_i=(e,n)=>{const o=e.dom;cm(o,n),Hs(Kr(e,"style").map(Ls),"")&&br(e,"style")},Ga=e=>e.dom.offsetWidth,Pc=(e,n)=>{xc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},yi=(e,n)=>{Wc(e).fold(()=>{xc(e).each(c=>{na(c,n)})},r=>{Pc(r,n)})},Mf=(e,n)=>{Mc(e).fold(()=>{na(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},na=(e,n)=>{e.dom.appendChild(n.dom)},vd=(e,n)=>{Pc(e,n),na(n,e)},ua=(e,n)=>{L(n,(o,r)=>{const c=r===0?e:n[r-1];yi(c,o)})},Mu=(e,n)=>{L(n,o=>{na(e,o)})},yd=e=>{e.dom.textContent="",L(ja(e),n=>{mr(n)})},mr=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Ki=e=>{const n=ja(e);n.length>0&&ua(e,n),mr(e)},Qh=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ja(Fe.fromDom(r))},au=e=>le(e,Fe.fromDom),xr=e=>e.dom.innerHTML,Pu=(e,n)=>{const r=qi(e).dom,c=Fe.fromDom(r.createDocumentFragment()),u=Qh(n,r);Mu(c,u),yd(e),na(e,c)},si=e=>{const n=Fe.fromTag("div"),o=Fe.fromDom(e.dom.cloneNode(!0));return na(n,o),xr(n)},us=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Cd=e=>{const n=Fe.fromDom(Nf(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=T(r,o);return us(n,e.clientX,e.clientY,o,r,c,e)},Zm=(e,n)=>o=>{e(o)&&n(Cd(o))},Pf=(e,n,o,r,c)=>{const u=Zm(o,r);return e.dom.addEventListener(n,u,c),{unbind:_e(M,e,n,u,c)}},A=(e,n,o,r)=>Pf(e,n,o,r,!1),M=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},K=(e,n)=>({left:e,top:n,translate:(r,c)=>K(e+r,n+c)}),Ee=K,$e=e=>{const n=e.getBoundingClientRect();return Ee(n.left,n.top)},en=(e,n)=>e!==void 0?e:n!==void 0?n:0,Eo=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Ee(o.offsetLeft,o.offsetTop);const u=en(r==null?void 0:r.pageYOffset,c.scrollTop),f=en(r==null?void 0:r.pageXOffset,c.scrollLeft),v=en(c.clientTop,o.clientTop),w=en(c.clientLeft,o.clientLeft);return Xo(e).translate(f-w,u-v)},Xo=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Ee(r.offsetLeft,r.offsetTop):hd(e)?$e(n):Ee(0,0)},_o=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Ee(o,r)},To=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Er=(e,n)=>{dn().browser.isSafari()&&we(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},va=e=>{const n=e===void 0?window:e;return dn().browser.isFirefox()?V.none():V.from(n.visualViewport)},Di=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),cu=e=>{const n=e===void 0?window:e,o=n.document,r=_o(Fe.fromDom(o));return va(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Di(r.left,r.top,u,f)},c=>Di(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},jm=(e,n)=>ke(ja(e),n),Kg=(e,n)=>{let o=[];return L(ja(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Kg(r,n))}),o},$c=(e,n)=>S1(n,e),Yg=(e,n,o)=>Wr(e,n,o).isSome(),c0=(e,n)=>ki(e,n).isSome(),ep=(e,n)=>Gg(e,n).isSome();class Ec{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const tp="\uFEFF",za=" ",i0=e=>e===tp,ri=e=>e.replace(/\uFEFF/g,""),ko=/^[ \t\r\n]*$/,Yi=e=>ko.test(e),$f=e=>{for(const n of e)if(!i0(n))return!1;return!0},Xg=e=>" \f	\v".indexOf(e)!==-1,np=e=>e===`
`||e==="\r",x1=(e,n)=>n<e.length&&n>=0?np(e[n]):!1,Rl=(e,n=4,o=!0,r=!0)=>{const c=ms(" ",n),u=e.replace(/\t/g,c);return Je(u,(v,w)=>Xg(w)||w===za?v.pcIsSpace||v.str===""&&o||v.str.length===u.length-1&&r||x1(u,v.str.length+1)?{pcIsSpace:!1,str:v.str+za}:{pcIsSpace:!0,str:v.str+" "}:{pcIsSpace:np(w),str:v.str+w},{pcIsSpace:!1,str:""}).str},$u=e=>n=>!!n&&n.nodeType===e,im=e=>!!e&&!Object.getPrototypeOf(e),Mn=$u(1),dl=e=>Mn(e)&&Mo(Fe.fromDom(e)),op=e=>Mn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Gm=e=>{const n=e.toLowerCase();return o=>rt(o)&&o.nodeName.toLowerCase()===n},Fl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return I(n,r)}return!1}},Jg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Mn(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},lm=e=>n=>Mn(n)&&n.hasAttribute(e),qm=e=>Mn(e)&&e.hasAttribute("data-mce-bogus"),Qg=e=>Mn(e)&&e.getAttribute("data-mce-bogus")==="all",iu=e=>Mn(e)&&e.tagName==="TABLE",l0=e=>n=>!!(dl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),oa=Fl(["textarea","input"]),un=$u(3),jc=$u(4),lu=$u(7),sc=$u(8),If=$u(9),qa=$u(11),zs=Gm("br"),sp=Gm("img"),Zt=l0("true"),Vs=l0("false"),eh=Fl(["td","th"]),Va=Fl(["td","th","caption"]),Gc=Fl(["video","audio","object","embed"]),u0=Gm("li"),Xi=Gm("details"),eC=Gm("summary"),wd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},d0=(e,n,o)=>{const r=Fe.fromDom(n),c=Fe.fromDom(e),u=o.getWhitespaceElements();return Yg(c,v=>Qn(u,fe(v)),_e(os,r))},Ji=e=>Mn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),$s=(e,n)=>Mn(e)&&Qn(n.getNonEmptyElements(),e.nodeName),Iu=lm("data-mce-bookmark"),Km=e=>Vm(Fe.fromDom(e)).exists(n=>!oc(n)),Ka=(e,n,o)=>Yi(e.data)&&!d0(e,n,o),rp=(e,n,o,r)=>un(e)&&!Ka(e,n,o)&&(!r.includeZwsp||!$f(e.data)),Lu=(e,n,o,r)=>we(r.isContent)&&r.isContent(n)||$s(n,e)||Iu(n)||Ji(n)||rp(n,o,e,r)||Vs(n)||Zt(n)&&Km(n),Hu=(e,n,o)=>{const r={...wd,...o};if(r.checkRootAsContent&&Lu(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new Ec(c,n);do{if(r.skipBogus&&Mn(c)){const v=c.getAttribute("data-mce-bogus");if(v){c=f.next(v==="all");continue}}if(sc(c)){c=f.next(!0);continue}if(zs(c)){u++,c=f.next();continue}if(Lu(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},Or=(e,n,o)=>Hu(e,n.dom,{checkRootAsContent:!0,...o}),Lf=(e,n,o)=>Lu(e,n,n,{includeZwsp:wd.includeZwsp,...o}),et=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Qi=e=>{const n=et(V.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(V.some(v))}}},Hf=e=>{const n=et(V.none()),o=()=>n.get().each(v=>clearInterval(v));return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(V.some(setInterval(v,e)))}}},qc=()=>{const e=Qi(je);return{...e,on:o=>e.get().each(o)}},el=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Ta=e=>el(e)!=="html",da=e=>Ta(e.nodeName),tC=e=>el(e.nodeName),x=["svg","math"],R=()=>{const e=qc(),n=()=>e.get().map(tC).getOr("html");return{track:c=>(da(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},j="data-mce-block",ue=e=>ke(xo(e),n=>!/[A-Z]/.test(n)),ze=e=>le(ue(e),n=>{const o=CSS.escape(n);return`${o}:`+le(x,r=>`not(${r} ${o})`).join(":")}).join(","),Vt=(e,n)=>rt(n.querySelector(e))?(n.setAttribute(j,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(j),!1),vn=(e,n)=>{const o=ze(e.getTransparentElements()),r=ze(e.getBlockElements());return ke(n.querySelectorAll(o),c=>Vt(r,c))},jn=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(Hu(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},jo=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();jn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();jn(e,f,!1),Hu(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),Hu(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),Hu(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},ns=(e,n,o)=>{const r=e.getBlockElements(),c=Fe.fromDom(n),u=v=>fe(v)in r,f=v=>os(v,c);L(au(o),v=>{Wr(v,u,f).each(w=>{const _=jm(v,P=>u(P)&&!e.isValidChild(fe(w),fe(P)));if(_.length>0){const P=Vm(w);L(_,H=>{Wr(H,u,f).each(U=>{jo(e,U.dom,H.dom)})}),P.each(H=>vn(e,H.dom))}})})},js=(e,n,o)=>{L([...o,...zu(e,n)?[n]:[]],r=>L($c(Fe.fromDom(r),r.nodeName.toLowerCase()),c=>{th(e,c.dom)&&Ki(c)}))},Gs=(e,n)=>{const o=vn(e,n);ns(e,n,o),js(e,n,o)},Xr=(e,n)=>{if(Nl(e,n)){const o=ze(e.getBlockElements());Vt(o,n)}},tl=(e,n,o)=>{const r=u=>os(u,Fe.fromDom(n)),c=ou(Fe.fromDom(o),r);Ds(c,c.length-2).filter(Bs).fold(()=>Gs(e,n),u=>Gs(e,u.dom))},Tc=e=>e.hasAttribute(j),uu=(e,n)=>Qn(e.getTransparentElements(),n),Nl=(e,n)=>Mn(n)&&uu(e,n.nodeName),zu=(e,n)=>Nl(e,n)&&Tc(n),th=(e,n)=>Nl(e,n)&&!Tc(n),ml=(e,n)=>n.type===1&&uu(e,n.name)&&ie(n.attr(j)),zf=dn().browser,ap=e=>Wt(e,Bs),cp=e=>zf.isFirefox()&&fe(e)==="table"?ap(ja(e)).filter(n=>fe(n)==="caption").bind(n=>ap(nm(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Ym=(e,n)=>e.children&&I(e.children,n),rc=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Ma(Fe.fromDom(e),"position")==="static"){const v=n.getBoundingClientRect();return r=v.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=v.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Ym(f,o);){const v=f;r+=v.offsetLeft||0,c+=v.offsetTop||0,f=v.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Ym(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=cp(Fe.fromDom(n))}return{x:r,y:c}},du=(e,n={})=>{let o=0;const r={},c=Fe.fromDom(e),u=Nu(c),f=Me=>{n.referrerPolicy=Me},v=Me=>{n.contentCssCors=Me},w=Me=>{na(Wm(c),Me)},_=Me=>{const qe=Wm(c);oo(qe,"#"+Me).each(mr)},P=Me=>bs(r,Me).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),H=Me=>new Promise((qe,Ze)=>{let bt;const Jt=Qt._addCacheSuffix(Me),yn=P(Jt);r[Jt]=yn,yn.count++;const In=(qn,uo)=>{L(qn,rn),yn.status=uo,yn.passed=[],yn.failed=[],bt&&(bt.onload=null,bt.onerror=null,bt=null)},Pt=()=>In(yn.passed,2),At=()=>In(yn.failed,3);if(qe&&yn.passed.push(qe),Ze&&yn.failed.push(Ze),yn.status===1)return;if(yn.status===2){Pt();return}if(yn.status===3){At();return}yn.status=1;const Kt=Fe.fromTag("link",u.dom);Sc(Kt,{rel:"stylesheet",type:"text/css",id:yn.id}),n.contentCssCors&&or(Kt,"crossOrigin","anonymous"),n.referrerPolicy&&or(Kt,"referrerpolicy",n.referrerPolicy),bt=Kt.dom,bt.onload=Pt,bt.onerror=At,w(Kt),or(Kt,"href",Jt)}),U=(Me,qe)=>{const Ze=P(Me);r[Me]=Ze,Ze.count++;const bt=Fe.fromTag("style",u.dom);Sc(bt,{rel:"stylesheet",type:"text/css",id:Ze.id}),bt.dom.innerHTML=qe,w(bt)},oe=Me=>Promise.allSettled(le(Me,Ze=>H(Ze).then(ve(Ze)))).then(Ze=>{const bt=He(Ze,Jt=>Jt.status==="fulfilled");return bt.fail.length>0?Promise.reject(le(bt.fail,Jt=>Jt.reason)):le(bt.pass,Jt=>Jt.value)}),ge=Me=>{const qe=Qt._addCacheSuffix(Me);bs(r,qe).each(Ze=>{--Ze.count===0&&(delete r[qe],_(Ze.id))})};return{load:H,loadRawCss:U,loadAll:oe,unload:ge,unloadRawCss:Me=>{bs(r,Me).each(qe=>{--qe.count===0&&(delete r[Me],_(qe.id))})},unloadAll:Me=>{L(Me,qe=>{ge(qe)})},_setReferrerPolicy:f,_setContentCssCors:v}},Tr=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ul(o).dom;return V.from(e.get(u)).getOrThunk(()=>{const f=du(u,r);return e.set(u,f),f})}}})(),ai=e=>e.nodeName.toLowerCase()==="span",ya=(e,n)=>rt(e)&&(Lf(n,e)||n.isInline(e.nodeName.toLowerCase())),ip=(e,n,o)=>{const r=new Ec(e,n).prev(!1),c=new Ec(e,n).next(!1),u=On(r)||ya(r,o),f=On(c)||ya(c,o);return u&&f},Xm=e=>ai(e)&&e.getAttribute("data-mce-type")==="bookmark",Jm=(e,n,o)=>un(e)&&e.data.length>0&&ip(e,n,o),fl=e=>Mn(e)?e.childNodes.length>0:!1,Sd=e=>qa(e)||If(e),um=(e,n,o,r)=>{var c;const u=r||n;if(Mn(n)&&Xm(n))return n;const f=n.childNodes;for(let v=f.length-1;v>=0;v--)um(e,f[v],o,u);if(Mn(n)){const v=n.childNodes;v.length===1&&Xm(v[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(v[0],n))}return!Sd(n)&&!Lf(o,n)&&!fl(n)&&!Jm(n,u,o)&&e.remove(n),n},Vu=Qt.makeMap,E1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lp=/[<>&\"\']/g,nh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,QS={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},xd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ex={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},nC=e=>{const n=Fe.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Aa=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!xd[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},m0=Aa("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ed=(e,n)=>e.replace(n?E1:dm,o=>xd[o]||o),Vf=e=>(""+e).replace(lp,n=>xd[n]||n),Qm=(e,n)=>e.replace(n?E1:dm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":xd[o]||"&#"+o.charCodeAt(0)+";"),mu=(e,n,o)=>{const r=o||m0;return e.replace(n?E1:dm,c=>xd[c]||r[c]||c)},Td={encodeRaw:Ed,encodeAllRaw:Vf,encodeNumeric:Qm,encodeNamed:mu,getEncodeFunc:(e,n)=>{const o=Aa(n)||m0,r=(f,v)=>f.replace(v?E1:dm,w=>xd[w]!==void 0?xd[w]:o[w]!==void 0?o[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),c=(f,v)=>mu(f,v,o),u=Vu(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:mu:u.numeric?Qm:Ed},decode:e=>e.replace(nh,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):QS[o]||String.fromCharCode(o)):ex[n]||m0[n]||nC(n))},ci=(e,n)=>(e=Qt.trim(e),e?e.split(n||" "):[]),A1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),oC=e=>St(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",k1=e=>{const n=o=>vt(o)?le(o,n):oC(o)?new RegExp(o.source,o.flags):St(o)?Zo(o,n):o;return n(e)},_1=e=>{const n=/^(~)?(.+)$/;return mt(ci(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},sC=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),oh=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Ad=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=oh(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Oi={html4:Ft(()=>Ad("html4")),html5:Ft(()=>Ad("html5")),"html5-strict":Ft(()=>Ad("html5-strict"))},gu=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Oi[e]();return n==="blocks"?V.some(o):n==="phrasing"?V.some(r):n==="flow"?V.some(c):V.none()},Uf=e=>{const n=sC(e),{phrasingContent:o,flowContent:r}=oh(e),c={},u=(w,_,P)=>{c[w]={attributes:po(_,ve({})),attributesOrder:_,children:po(P,ve({}))}},f=(w,_="",P="")=>{const H=ci(P),U=ci(w);let oe=U.length;const ge=[...n,...ci(_)];for(;oe--;)u(U[oe],ge.slice(),H)},v=(w,_)=>{const P=ci(w),H=ci(_);let U=P.length;for(;U--;){const oe=c[P[U]];for(let ge=0,ce=H.length;ge<ce;ge++)oe.attributes[H[ge]]={},oe.attributesOrder.push(H[ge])}};return e!=="html5-strict"&&(L(ci("acronym applet basefont big font strike tt"),P=>{f(P,"",o)}),L(ci("center dir isindex noframes"),P=>{f(P,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(v("script","language xml:space"),v("style","xml:space"),v("object","declare classid code codebase codetype archive standby align border hspace vspace"),v("embed","align name hspace vspace"),v("param","valuetype type"),v("a","charset name rev shape coords"),v("br","clear"),v("applet","codebase archive code object alt name width height align hspace vspace"),v("img","name longdesc align border hspace vspace"),v("iframe","longdesc frameborder marginwidth marginheight scrolling align"),v("font basefont","size color face"),v("input","usemap align"),v("select"),v("textarea"),v("h1 h2 h3 h4 h5 h6 div p legend caption","align"),v("ul","type compact"),v("li","type"),v("ol dl menu dir","compact"),v("pre","width xml:space"),v("hr","align noshade size width"),v("isindex","prompt"),v("table","summary width frame rules cellspacing cellpadding align bgcolor"),v("col","width align char charoff valign"),v("colgroup","width align char charoff valign"),v("thead","align char charoff valign"),v("tr","align char charoff valign bgcolor"),v("th","axis align char charoff valign nowrap bgcolor width height"),v("form","accept"),v("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),v("tfoot","align char charoff valign"),v("tbody","align char charoff valign"),v("area","nohref"),v("body","background bgcolor text link vlink alink")),e!=="html4"&&(v("input button select textarea","autofocus"),v("input textarea","placeholder"),v("a","download"),v("link script img","crossorigin"),v("img","loading"),v("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&L([c.video,c.audio],w=>{delete w.children.audio,delete w.children.video}),L(ci("a form meter progress dfn"),w=>{c[w]&&delete c[w].children[w]}),delete c.caption.children.table,delete c.script,c},rC=e=>e==="-"?"remove":"add",sh=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return V.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},aC=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return mt(ci(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?rC(c):"replace",f=r[2],v=mt(ci(r[3],"|"),w=>sh(w).toArray());return[{operation:u,name:f,validChildren:v}]}else return[]})},tx=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return L(ci(e,"|"),f=>{const v=o.exec(f);if(v){const w={},_=v[1],P=v[2].replace(/[\\:]:/g,":"),H=v[3],U=v[4];if(_==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(P),w.required=!0),_==="-"){delete c[P],u.splice(Qt.inArray(u,P),1);return}if(H&&(H==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:P,value:U}),w.defaultValue=U):H==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:P,value:U}),w.forcedValue=U):H==="<"&&(w.validValues=Qt.makeMap(U,"?"))),r.test(P)){const oe=w;n.attributePatterns=n.attributePatterns||[],oe.pattern=A1(P),n.attributePatterns.push(oe)}else c[P]||u.push(P),c[P]=w}})},nx=(e,n)=>{on(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},ox=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return mt(ci(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],v=c[3],w=c[4],_=c[5],P={attributes:{},attributesOrder:[]};if(e.each(H=>nx(H,P)),u==="#"?P.paddEmpty=!0:u==="-"&&(P.removeEmpty=!0),w==="!"&&(P.removeEmptyAttrs=!0),_&&tx(_,P),v&&(P.outputName=f),f==="@")if(e.isNone())e=V.some(P);else return[];return[v?{name:f,element:P,aliasName:v}:{name:f,element:P}]}else return[]})},Wf={},rh=Qt.makeMap,rs=Qt.each,wo=Qt.extend,Zf=Qt.explode,D1=(e,n={})=>{const o=rh(e," ",rh(e.toUpperCase()," "));return wo(o,n)},f0=e=>D1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),cC=(e,n)=>{if(e){const o={};return ie(e)&&(e={"*":e}),rs(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?rh(r,/[, ]/):Zf(r,/[, ]/)}),o}else return},mm=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},v=(mo,_s,ra)=>{const Ra=e[mo];if(Ra)return rh(Ra,/[, ]/,rh(Ra.toUpperCase(),/[, ]/));{let Xa=Wf[mo];return Xa||(Xa=D1(_s,ra),Wf[mo]=Xa),Xa}},w=(n=e.schema)!==null&&n!==void 0?n:"html5",_=Uf(w);e.verify_html===!1&&(e.valid_elements="*[*]");const P=cC(e.valid_styles),H=cC(e.invalid_styles,"map"),U=cC(e.valid_classes,"map"),oe=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ge=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ce=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),be=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Me="td th iframe video audio object script code",qe=v("non_empty_elements",Me+" pre svg textarea summary",ce),Ze=v("move_caret_before_on_enter_elements",Me+" table",ce),bt="h1 h2 h3 h4 h5 h6",Jt=v("text_block_elements",bt+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),yn=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Jt),In=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Pt=v("transparent_elements","a ins del canvas map"),At=v("wrap_block_elements","pre "+bt);rs("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),mo=>{f[mo]=new RegExp("</"+mo+"[^>]*>","gi")});const Kt=mo=>{const _s=V.from(o["@"]),ra=/[*?+]/;L(ox(_s,mo??""),({name:Ra,element:Xa,aliasName:Vc})=>{if(Vc&&(o[Vc]=Xa),ra.test(Ra)){const Ja=Xa;Ja.pattern=A1(Ra),c.push(Ja)}else o[Ra]=Xa})},qn=mo=>{c=[],L(xo(o),_s=>{delete o[_s]}),Kt(mo)},uo=(mo,_s)=>{var ra,Ra;delete Wf.text_block_elements,delete Wf.block_elements;const Xa=_s.extends?!ql(_s.extends):!1,Vc=_s.extends;if(r[mo]=Vc?r[Vc]:{},u[mo]=Vc??mo,qe[mo.toUpperCase()]={},qe[mo]={},Xa||(yn[mo.toUpperCase()]={},yn[mo]={}),Vc&&!o[mo]&&o[Vc]){const Ja=k1(o[Vc]);delete Ja.removeEmptyAttrs,delete Ja.removeEmpty,o[mo]=Ja}else o[mo]={attributesOrder:[],attributes:{}};if(vt(_s.attributes)){const Ja=Vi=>{Qa.attributesOrder.push(Vi),Qa.attributes[Vi]={}},Qa=(ra=o[mo])!==null&&ra!==void 0?ra:{};delete Qa.attributesDefault,delete Qa.attributesForced,delete Qa.attributePatterns,delete Qa.attributesRequired,Qa.attributesOrder=[],Qa.attributes={},L(_s.attributes,Vi=>{const Zd=sC(w);sh(Vi).each(({preset:jd,name:Gd})=>{jd?Gd==="global"&&L(Zd,Ja):Ja(Gd)})}),o[mo]=Qa}if(Yt(_s.padEmpty)){const Ja=(Ra=o[mo])!==null&&Ra!==void 0?Ra:{};Ja.paddEmpty=_s.padEmpty,o[mo]=Ja}if(vt(_s.children)){const Ja={},Qa=Zd=>{Ja[Zd]={}},Vi=Zd=>{gu(w,Zd).each(jd=>{L(jd,Qa)})};L(_s.children,Zd=>{sh(Zd).each(({preset:jd,name:Gd})=>{jd?Vi(Gd):Qa(Gd)})}),r[mo]=Ja}Vc&&on(r,(Ja,Qa)=>{Ja[Vc]&&(r[Qa]=Ja=wo({},r[Qa]),Ja[mo]=Ja[Vc])})},ps=mo=>{L(_1(mo??""),({name:_s,cloneName:ra})=>{uo(_s,{extends:ra})})},Cs=mo=>{St(mo)?on(mo,(_s,ra)=>uo(ra,_s)):ie(mo)&&ps(mo)},Xs=mo=>{L(aC(mo??""),({operation:_s,name:ra,validChildren:Ra})=>{const Xa=_s==="replace"?{"#comment":{}}:r[ra],Vc=Qa=>{_s==="remove"?delete Xa[Qa]:Xa[Qa]={}},Ja=Qa=>{gu(w,Qa).each(Vi=>{L(Vi,Vc)})};L(Ra,({preset:Qa,name:Vi})=>{Qa?Ja(Vi):Vc(Vi)}),r[ra]=Xa})},fr=mo=>{const _s=o[mo];if(_s)return _s;let ra=c.length;for(;ra--;){const Ra=c[ra];if(Ra.pattern.test(mo))return Ra}},Oa=()=>{e.valid_elements?(qn(e.valid_elements),rs(_,(mo,_s)=>{r[_s]=mo.children})):(rs(_,(mo,_s)=>{o[_s]={attributes:mo.attributes,attributesOrder:mo.attributesOrder},r[_s]=mo.children}),rs(ci("strong/b em/i"),mo=>{const _s=ci(mo,"/");o[_s[1]].outputName=_s[0]}),rs(In,(mo,_s)=>{o[_s]&&(e.padd_empty_block_inline_children&&(o[_s].paddInEmptyBlock=!0),o[_s].removeEmpty=!0)}),rs(ci("ol ul blockquote a table tbody"),mo=>{o[mo]&&(o[mo].removeEmpty=!0)}),rs(ci("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),mo=>{o[mo]&&(o[mo].paddEmpty=!0)}),rs(ci("span"),mo=>{o[mo].removeEmptyAttrs=!0})),delete o.svg,Cs(e.custom_elements),Xs(e.valid_children),Kt(e.extended_valid_elements),Xs("+ol[ul|ol],+ul[ul|ol]"),rs({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(mo,_s)=>{o[_s]&&(o[_s].parentsRequired=ci(mo))}),e.invalid_elements&&rs(Zf(e.invalid_elements),mo=>{o[mo]&&delete o[mo]}),fr("span")||Kt("span[!data-mce-type|*]")},dc=ve(P),Cr=ve(H),En=ve(U),co=ve(be),Us=ve(yn),Nn=ve(Jt),So=ve(In),fs=ve(Object.seal(ce)),Pn=ve(ge),gs=ve(qe),ws=ve(Ze),Bc=ve(oe),er=ve(Pt),wc=ve(At),Wd=ve(Object.seal(f)),Af=(mo,_s)=>{const ra=r[mo.toLowerCase()];return!!(ra&&ra[_s.toLowerCase()])},il=(mo,_s)=>{const ra=fr(mo);if(ra)if(_s){if(ra.attributes[_s])return!0;const Ra=ra.attributePatterns;if(Ra){let Xa=Ra.length;for(;Xa--;)if(Ra[Xa].pattern.test(_s))return!0}}else return!0;return!1},ql=mo=>Qn(Us(),mo),id=mo=>!bo(mo,"#")&&il(mo)&&!ql(mo),Kl=mo=>Qn(wc(),mo)||id(mo),ld=ve(u);return Oa(),{type:w,children:r,elements:o,getValidStyles:dc,getValidClasses:En,getBlockElements:Us,getInvalidStyles:Cr,getVoidElements:fs,getTextBlockElements:Nn,getTextInlineElements:So,getBoolAttrs:co,getElementRule:fr,getSelfClosingElements:Pn,getNonEmptyElements:gs,getMoveCaretBeforeOnEnterElements:ws,getWhitespaceElements:Bc,getTransparentElements:er,getSpecialElements:Wd,isValidChild:Af,isValid:il,isBlock:ql,isInline:id,isWrapper:Kl,getCustomElements:ld,addValidElements:Kt,setValidElements:qn,addCustomElements:Cs,addValidChildren:Xs}},Mr=e=>({value:sx(e)}),sx=e=>zn(e,"#").toUpperCase(),iC=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},lC=e=>{const n=iC(e.red)+iC(e.green)+iC(e.blue);return Mr(n)},Gt=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ah=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Rk=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),jf=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),v=parseFloat(r);return Rk(c,u,f,v)},Fk=e=>Gt.test(e)?"rgb":ah.test(e)?"rgba":"other",ch=e=>{const n=Gt.exec(e);if(n!==null)return V.some(jf(n[1],n[2],n[3],"1"));const o=ah.exec(e);return o!==null?V.some(jf(o[1],o[2],o[3],o[4])):V.none()},uC=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,kd=e=>ch(e).map(lC).map(n=>"#"+n.value).getOr(e),dC=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,v;const w=tp;n&&(f=n.getValidStyles(),v=n.getInvalidStyles());const _=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let H=0;H<_.length;H++)u[_[H]]=w+H,u[w+H]=_[H];const P={parse:H=>{const U={};let oe=!1;const ge=e.url_converter,ce=e.url_converter_scope||P,be=(Pt,At,Kt)=>{const qn=U[Pt+"-top"+At];if(!qn)return;const uo=U[Pt+"-right"+At];if(!uo)return;const ps=U[Pt+"-bottom"+At];if(!ps)return;const Cs=U[Pt+"-left"+At];if(!Cs)return;const Xs=[qn,uo,ps,Cs];let fr=Xs.length-1;for(;fr--&&Xs[fr]===Xs[fr+1];);fr>-1&&Kt||(U[Pt+At]=fr===-1?Xs[0]:Xs.join(" "),delete U[Pt+"-top"+At],delete U[Pt+"-right"+At],delete U[Pt+"-bottom"+At],delete U[Pt+"-left"+At])},Me=Pt=>{const At=U[Pt];if(!At)return;const Kt=At.indexOf(",")>-1?[At]:At.split(" ");let qn=Kt.length;for(;qn--;)if(Kt[qn]!==Kt[0])return!1;return U[Pt]=Kt[0],!0},qe=(Pt,At,Kt,qn)=>{Me(At)&&Me(Kt)&&Me(qn)&&(U[Pt]=U[At]+" "+U[Kt]+" "+U[qn],delete U[At],delete U[Kt],delete U[qn])},Ze=Pt=>(oe=!0,u[Pt]),bt=(Pt,At)=>(oe&&(Pt=Pt.replace(/\uFEFF[0-9]/g,Kt=>u[Kt])),At||(Pt=Pt.replace(/\\([\'\";:])/g,"$1")),Pt),Jt=Pt=>String.fromCharCode(parseInt(Pt.slice(1),16)),yn=Pt=>Pt.replace(/\\[0-9a-f]+/gi,Jt),In=(Pt,At,Kt,qn,uo,ps)=>{if(uo=uo||ps,uo)return uo=bt(uo),"'"+uo.replace(/\'/g,"\\'")+"'";if(At=bt(At||Kt||qn||""),!e.allow_script_urls){const Cs=At.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Cs)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Cs))return""}return ge&&(At=ge.call(ce,At,"style")),"url('"+At.replace(/\'/g,"\\'")+"')"};if(H){H=H.replace(/[\u0000-\u001F]/g,""),H=H.replace(/\\[\"\';:\uFEFF]/g,Ze).replace(/\"[^\"]+\"|\'[^\']+\'/g,At=>At.replace(/[;:]/g,Ze));let Pt;for(;Pt=r.exec(H);){r.lastIndex=Pt.index+Pt[0].length;let At=Pt[1].replace(c,"").toLowerCase(),Kt=Pt[2].replace(c,"");if(At&&Kt){if(At=yn(At),Kt=yn(Kt),At.indexOf(w)!==-1||At.indexOf('"')!==-1||!e.allow_script_urls&&(At==="behavior"||/expression\s*\(|\/\*|\*\//.test(Kt)))continue;At==="font-weight"&&Kt==="700"?Kt="bold":(At==="color"||At==="background-color")&&(Kt=Kt.toLowerCase()),Fk(Kt)==="rgb"&&ch(Kt).each(qn=>{Kt=kd(uC(qn)).toLowerCase()}),Kt=Kt.replace(o,In),U[At]=oe?bt(Kt,!0):Kt}}be("border","",!0),be("border","-width"),be("border","-color"),be("border","-style"),be("padding",""),be("margin",""),qe("border","border-width","border-style","border-color"),U.border==="medium none"&&delete U.border,U["border-image"]==="none"&&delete U["border-image"]}return U},serialize:(H,U)=>{let oe="";const ge=(be,Me)=>{const qe=Me[be];if(qe)for(let Ze=0,bt=qe.length;Ze<bt;Ze++){const Jt=qe[Ze],yn=H[Jt];yn&&(oe+=(oe.length>0?" ":"")+Jt+": "+yn+";")}},ce=(be,Me)=>{if(!v||!Me)return!0;let qe=v["*"];return qe&&qe[be]?!1:(qe=v[Me],!(qe&&qe[be]))};return U&&f?(ge("*",f),ge(U,f)):on(H,(be,Me)=>{be&&ce(Me,U)&&(oe+=(oe.length>0?" ":"")+Me+": "+be+";")}),oe}};return P},up={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Zr=e=>e instanceof Event||we(e.initEvent),fm=e=>e.isDefaultPrevented===dt||e.isDefaultPrevented===Ne,mC=e=>gn(e.preventDefault)||Zr(e),Uu=(e,n)=>{const o=n??{};for(const r in e)Qn(up,r)||(o[r]=e[r]);return rt(e.composedPath)&&(o.composedPath=()=>e.composedPath()),rt(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),rt(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},fC=(e,n,o,r)=>{var c;const u=Uu(n,r);return u.type=e,gn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),mC(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=dt,we(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=dt,we(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=dt,u.stopPropagation()},fm(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?dt:Ne,u.isPropagationStopped=u.cancelBubble===!0?dt:Ne,u.isImmediatePropagationStopped=Ne)),u},O1="mce-data-",dp=/^(?:mouse|contextmenu)|click/,R1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},gl=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},rx=e=>rt(e)&&dp.test(e.type),F1=(e,n)=>{const o=fC(e.type,e,document,n);if(rx(e)&&On(e.pageX)&&!On(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},gC=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{gl(e,"DOMContentLoaded",f),gl(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():R1(e,"DOMContentLoaded",f),o.domLoaded||R1(e,"load",f)};class Gf{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=O1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const v=window,w=U=>{u.executeHandlers(F1(U||v.event),_)};if(!n||un(n)||sc(n))return r;let _;n[u.expando]?_=n[u.expando]:(_=u.count++,n[u.expando]=_,u.events[_]={}),c=c||n;const P=o.split(" ");let H=P.length;for(;H--;){let U=P[H],oe=w,ge=!1,ce=!1;if(U==="DOMContentLoaded"&&(U="ready"),u.domLoaded&&U==="ready"&&n.readyState==="complete"){r.call(c,F1({type:U}));continue}!u.hasFocusIn&&(U==="focusin"||U==="focusout")&&(ge=!0,ce=U==="focusin"?"focus":"blur",oe=be=>{const Me=F1(be||v.event);Me.type=Me.type==="focus"?"focusin":"focusout",u.executeHandlers(Me,_)}),f=u.events[_][U],f?U==="ready"&&u.domLoaded?r(F1({type:U})):f.push({func:r,scope:c}):(u.events[_][U]=f=[{func:r,scope:c}],f.fakeName=ce,f.capture=ge,f.nativeHandler=oe,U==="ready"?gC(n,oe,u):R1(n,ce||U,oe,ge))}return n=f=null,r}unbind(n,o,r){if(!n||un(n)||sc(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let v=f.length;for(;v--;){const w=f[v],_=u[w];if(_){if(r){let P=_.length;for(;P--;)if(_[P].func===r){const H=_.nativeHandler,U=_.fakeName,oe=_.capture,ge=_.slice(0,P).concat(_.slice(P+1));ge.nativeHandler=H,ge.fakeName=U,ge.capture=oe,u[w]=ge}}(!r||_.length===0)&&(delete u[w],gl(n,_.fakeName||w,_.nativeHandler,_.capture))}}}else on(u,(f,v)=>{gl(n,f.fakeName||v,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Qn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||un(n)||sc(n))return this;const c=F1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||un(n)||sc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const v=c[u];if(v&&v.func.call(v.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Gf.Event=new Gf;const hC=Qt.each,ax=Qt.grep,pC="data-mce-style",cx=Qt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ci=(e,n,o)=>{gn(o)||o===""?br(e,n):or(e,n,o)},hl=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),hn=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&un(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},g0=(e,n)=>{const o=nc(n,"style"),r=e.serialize(e.parse(o),fe(n));Ci(n,pC,r)},Ic=(e,n)=>Ro(e)?Qn(cx,n)?e+"":e+"px":e,h0=(e,n,o)=>{const r=hl(n);gn(o)||o===""?_i(e,r):Jh(e,r,Ic(o,r))},ix=(e,n,o)=>{const r=n.keep_values,c={set:(f,v,w)=>{const _=Fe.fromDom(f);we(n.url_converter)&&rt(v)&&(v=n.url_converter.call(n.url_converter_scope||o(),String(v),w,f));const P="data-mce-"+w;Ci(_,P,v),Ci(_,w,v)},get:(f,v)=>{const w=Fe.fromDom(f);return nc(w,"data-mce-"+v)||nc(w,v)}},u={style:{set:(f,v)=>{const w=Fe.fromDom(f);r&&Ci(w,pC,v),br(w,"style"),ie(v)&&Yo(w,e.parse(v))},get:f=>{const v=Fe.fromDom(f),w=nc(v,pC)||nc(v,"style");return e.serialize(e.parse(w),fe(v))}}};return r&&(u.href=u.src=c),u},jr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,v=!0,w=Tr.forElement(Fe.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),_=[],P=n.schema?n.schema:mm({}),H=dC({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),U=n.ownEvents?new Gf:Gf.Event,oe=P.getBlockElements(),ge=Et=>ie(Et)?Qn(oe,Et):Mn(Et)&&(Qn(oe,Et.nodeName)||zu(P,Et)),ce=Et=>Et&&e&&ie(Et)?e.getElementById(Et):Et,be=Et=>{const kt=ce(Et);return rt(kt)?Fe.fromDom(kt):null},Me=(Et,kt,Sn="")=>{let pn;const No=be(Et);if(rt(No)&&Bs(No)){const xs=HS[kt];xs&&xs.get?pn=xs.get(No.dom,kt):pn=nc(No,kt)}return rt(pn)?pn:Sn},qe=Et=>{const kt=ce(Et);return gn(kt)?[]:kt.attributes},Ze=(Et,kt,Sn)=>{co(Et,pn=>{if(Mn(pn)){const No=Fe.fromDom(pn),xs=Sn===""?null:Sn,ga=nc(No,kt),qd=HS[kt];qd&&qd.set?qd.set(No.dom,xs,kt):Ci(No,kt,xs),ga!==xs&&n.onSetAttrib&&n.onSetAttrib({attrElm:No.dom,attrName:kt,attrValue:xs})}})},bt=(Et,kt)=>Et.cloneNode(kt),Jt=()=>n.root_element||e.body,yn=Et=>{const kt=cu(Et);return{x:kt.x,y:kt.y,w:kt.width,h:kt.height}},In=(Et,kt)=>rc(e.body,ce(Et),kt),Pt=(Et,kt,Sn)=>{co(Et,pn=>{const No=Fe.fromDom(pn);h0(No,kt,Sn),n.update_styles&&g0(H,No)})},At=(Et,kt)=>{co(Et,Sn=>{const pn=Fe.fromDom(Sn);on(kt,(No,xs)=>{h0(pn,xs,No)}),n.update_styles&&g0(H,pn)})},Kt=(Et,kt,Sn)=>{const pn=ce(Et);if(!(gn(pn)||!dl(pn)&&!op(pn)))return Sn?Ma(Fe.fromDom(pn),hl(kt)):(kt=kt.replace(/-(\D)/g,(No,xs)=>xs.toUpperCase()),kt==="float"&&(kt="cssFloat"),pn.style?pn.style[kt]:void 0)},qn=Et=>{const kt=ce(Et);if(!kt)return{w:0,h:0};let Sn=Kt(kt,"width"),pn=Kt(kt,"height");return(!Sn||Sn.indexOf("px")===-1)&&(Sn="0"),(!pn||pn.indexOf("px")===-1)&&(pn="0"),{w:parseInt(Sn,10)||kt.offsetWidth||kt.clientWidth,h:parseInt(pn,10)||kt.offsetHeight||kt.clientHeight}},uo=Et=>{const kt=ce(Et),Sn=In(kt),pn=qn(kt);return{x:Sn.x,y:Sn.y,w:pn.w,h:pn.h}},ps=(Et,kt)=>{if(!Et)return!1;const Sn=vt(Et)?Et:[Et];return G(Sn,pn=>Ol(Fe.fromDom(pn),kt))},Cs=(Et,kt,Sn,pn)=>{const No=[];let xs=ce(Et);pn=pn===void 0;const ga=Sn||(Jt().nodeName!=="BODY"?Jt().parentNode:null);if(ie(kt))if(kt==="*")kt=Mn;else{const qd=kt;kt=Hy=>ps(Hy,qd)}for(;xs&&!(xs===ga||gn(xs.nodeType)||If(xs)||qa(xs));){if(!kt||kt(xs))if(pn)No.push(xs);else return[xs];xs=xs.parentNode}return pn?No:null},Xs=(Et,kt,Sn)=>{const pn=Cs(Et,kt,Sn,!1);return pn&&pn.length>0?pn[0]:null},fr=(Et,kt,Sn)=>{let pn=kt;if(Et){ie(kt)&&(pn=No=>ps(No,kt));for(let No=Et[Sn];No;No=No[Sn])if(we(pn)&&pn(No))return No}return null},Oa=(Et,kt)=>fr(Et,kt,"nextSibling"),dc=(Et,kt)=>fr(Et,kt,"previousSibling"),Cr=Et=>we(Et.querySelectorAll),En=(Et,kt)=>{var Sn,pn;const No=(pn=(Sn=ce(kt))!==null&&Sn!==void 0?Sn:n.root_element)!==null&&pn!==void 0?pn:e;return Cr(No)?ss(No.querySelectorAll(Et)):[]},co=function(Et,kt,Sn){const pn=Sn??this;if(vt(Et)){const No=[];return hC(Et,(xs,ga)=>{const qd=ce(xs);qd&&No.push(kt.call(pn,qd,ga))}),No}else{const No=ce(Et);return No?kt.call(pn,No):!1}},Us=(Et,kt)=>{co(Et,Sn=>{on(kt,(pn,No)=>{Ze(Sn,No,pn)})})},Nn=(Et,kt)=>{co(Et,Sn=>{const pn=Fe.fromDom(Sn);Pu(pn,kt)})},So=(Et,kt,Sn,pn,No)=>co(Et,xs=>{const ga=ie(kt)?e.createElement(kt):kt;return rt(Sn)&&Us(ga,Sn),pn&&(!ie(pn)&&pn.nodeType?ga.appendChild(pn):ie(pn)&&Nn(ga,pn)),No?ga:xs.appendChild(ga)}),fs=(Et,kt,Sn)=>So(e.createElement(Et),Et,kt,Sn,!0),Pn=Td.decode,gs=Td.encodeAllRaw,ws=(Et,kt,Sn="")=>{let pn="<"+Et;for(const No in kt)Ns(kt,No)&&(pn+=" "+No+'="'+gs(kt[No])+'"');return is(Sn)&&Qn(P.getVoidElements(),Et)?pn+" />":pn+">"+Sn+"</"+Et+">"},Bc=Et=>{const kt=e.createElement("div"),Sn=e.createDocumentFragment();Sn.appendChild(kt),Et&&(kt.innerHTML=Et);let pn;for(;pn=kt.firstChild;)Sn.appendChild(pn);return Sn.removeChild(kt),Sn},er=(Et,kt)=>co(Et,Sn=>{const pn=Fe.fromDom(Sn);return kt&&L(ja(pn),No=>{Js(No)&&No.dom.length===0?mr(No):Pc(pn,No)}),mr(pn),pn.dom}),wc=Et=>co(Et,kt=>{const Sn=kt.attributes;for(let pn=Sn.length-1;pn>=0;pn--)kt.removeAttributeNode(Sn.item(pn))}),Wd=Et=>H.parse(Et),Af=(Et,kt)=>H.serialize(Et,kt),il=Et=>{if(Ng!==jr.DOM&&e===document){if(o[Et])return;o[Et]=!0}let kt=e.getElementById("mceDefaultStyles");if(!kt){kt=e.createElement("style"),kt.id="mceDefaultStyles",kt.type="text/css";const Sn=e.head;Sn.firstChild?Sn.insertBefore(kt,Sn.firstChild):Sn.appendChild(kt)}kt.styleSheet?kt.styleSheet.cssText+=Et:kt.appendChild(e.createTextNode(Et))},ql=Et=>{Et||(Et=""),L(Et.split(","),kt=>{c[kt]=!0,w.load(kt).catch(je)})},id=(Et,kt,Sn)=>{co(Et,pn=>{if(Mn(pn)){const No=Fe.fromDom(pn),xs=kt.split(" ");L(xs,ga=>{rt(Sn)?(Sn?Dl:Ou)(No,ga):zg(No,ga)})}})},Kl=(Et,kt)=>{id(Et,kt,!0)},ld=(Et,kt)=>{id(Et,kt,!1)},mo=(Et,kt)=>{const Sn=be(Et),pn=kt.split(" ");return rt(Sn)&&Xt(pn,No=>tu(Sn,No))},_s=Et=>{co(Et,kt=>_i(Fe.fromDom(kt),"display"))},ra=Et=>{co(Et,kt=>Jh(Fe.fromDom(kt),"display","none"))},Ra=Et=>{const kt=be(Et);return rt(kt)&&Hs(vc(kt,"display"),"none")},Xa=Et=>(Et||"mce_")+u++,Vc=Et=>{const kt=be(Et);return rt(kt)?Mn(kt.dom)?kt.dom.outerHTML:si(kt):""},Ja=(Et,kt)=>{co(Et,Sn=>{Mn(Sn)&&(Sn.outerHTML=kt)})},Qa=(Et,kt)=>{const Sn=ce(kt);return co(Et,pn=>{const No=Sn==null?void 0:Sn.parentNode,xs=Sn==null?void 0:Sn.nextSibling;return No&&(xs?No.insertBefore(pn,xs):No.appendChild(pn)),pn})},Vi=(Et,kt,Sn)=>co(kt,pn=>{var No;const xs=vt(kt)?Et.cloneNode(!0):Et;return Sn&&hC(ax(pn.childNodes),ga=>{xs.appendChild(ga)}),(No=pn.parentNode)===null||No===void 0||No.replaceChild(xs,pn),pn}),Zd=(Et,kt)=>{if(Et.nodeName!==kt.toUpperCase()){const Sn=fs(kt);return hC(qe(Et),pn=>{Ze(Sn,pn.nodeName,Me(Et,pn.nodeName))}),Vi(Sn,Et,!0),Sn}else return Et},jd=(Et,kt)=>{let Sn=Et;for(;Sn;){let pn=kt;for(;pn&&Sn!==pn;)pn=pn.parentNode;if(Sn===pn)break;Sn=Sn.parentNode}return!Sn&&Et.ownerDocument?Et.ownerDocument.documentElement:Sn},Gd=(Et,kt,Sn)=>Wn(kt)?Hu(P,Et,{...Sn,isContent:No=>{const xs=No.nodeName.toLowerCase();return!!kt[xs]}}):Hu(P,Et,Sn),Eu=()=>e.createRange(),Rg=(Et,kt,Sn)=>{let pn=Eu(),No,xs;if(Et&&kt&&Et.parentNode&&kt.parentNode){const ga=Et.parentNode;return pn.setStart(ga,hn(Et)),pn.setEnd(kt.parentNode,hn(kt)),No=pn.extractContents(),pn=Eu(),pn.setStart(kt.parentNode,hn(kt)+1),pn.setEnd(ga,hn(Et)+1),xs=pn.extractContents(),ga.insertBefore(um(Ng,No,P),Et),Sn?ga.insertBefore(Sn,Et):ga.insertBefore(kt,Et),ga.insertBefore(um(Ng,xs,P),Et),er(Et),Sn||kt}else return},qh=(Et,kt,Sn,pn)=>{if(vt(Et)){let No=Et.length;const xs=[];for(;No--;)xs[No]=qh(Et[No],kt,Sn,pn);return xs}else return n.collect&&(Et===e||Et===r)&&_.push([Et,kt,Sn,pn]),U.bind(Et,kt,Sn,pn||Ng)},Yb=(Et,kt,Sn)=>{if(vt(Et)){let pn=Et.length;const No=[];for(;pn--;)No[pn]=Yb(Et[pn],kt,Sn);return No}else{if(_.length>0&&(Et===e||Et===r)){let pn=_.length;for(;pn--;){const[No,xs,ga]=_[pn];Et===No&&(!kt||kt===xs)&&(!Sn||Sn===ga)&&U.unbind(No,xs,ga)}}return U.unbind(Et,kt,Sn)}},pk=(Et,kt,Sn)=>U.dispatch(Et,kt,Sn),Fg=(Et,kt,Sn)=>U.dispatch(Et,kt,Sn),Ly=Et=>{if(Et&&dl(Et)){const kt=Et.getAttribute("data-mce-contenteditable");return kt&&kt!=="inherit"?kt:Et.contentEditable!=="inherit"?Et.contentEditable:null}else return null},Ng={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:v,styleSheetLoader:w,boundEvents:_,styles:H,schema:P,events:U,isBlock:ge,root:null,clone:bt,getRoot:Jt,getViewPort:yn,getRect:uo,getSize:qn,getParent:Xs,getParents:Cs,get:ce,getNext:Oa,getPrev:dc,select:En,is:ps,add:So,create:fs,createHTML:ws,createFragment:Bc,remove:er,setStyle:Pt,getStyle:Kt,setStyles:At,removeAllAttribs:wc,setAttrib:Ze,setAttribs:Us,getAttrib:Me,getPos:In,parseStyle:Wd,serializeStyle:Af,addStyle:il,loadCSS:ql,addClass:Kl,removeClass:ld,hasClass:mo,toggleClass:id,show:_s,hide:ra,isHidden:Ra,uniqueId:Xa,setHTML:Nn,getOuterHTML:Vc,setOuterHTML:Ja,decode:Pn,encode:gs,insertAfter:Qa,replace:Vi,rename:Zd,findCommonAncestor:jd,run:co,getAttribs:qe,isEmpty:Gd,createRng:Eu,nodeIndex:hn,split:Rg,bind:qh,unbind:Yb,fire:Fg,dispatch:pk,getContentEditable:Ly,getContentEditableParent:Et=>{const kt=Jt();let Sn=null;for(let pn=Et;pn&&pn!==kt&&(Sn=Ly(pn),Sn===null);pn=pn.parentNode);return Sn},isEditable:Et=>{if(rt(Et)){const kt=Mn(Et)?Et:Et.parentElement;return rt(kt)&&dl(kt)&&oc(Fe.fromDom(kt))}else return!1},destroy:()=>{if(_.length>0){let Et=_.length;for(;Et--;){const[kt,Sn,pn]=_[Et];U.unbind(kt,Sn,pn)}}on(c,(Et,kt)=>{w.unload(kt),delete c[kt]})},isChildOf:(Et,kt)=>Et===kt||kt.contains(Et),dumpRng:Et=>"startContainer: "+Et.startContainer.nodeName+", startOffset: "+Et.startOffset+", endContainer: "+Et.endContainer.nodeName+", endOffset: "+Et.endOffset},HS=ix(H,n,ve(Ng));return Ng};jr.DOM=jr(document),jr.nodeIndex=hn;const ef=jr.DOM,p0=0,Nk=1,tf=2,b0=3;class _d{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=ef;let u;const f=()=>{c.remove(_),u&&(u.onerror=u.onload=u=null)},v=()=>{f(),o()},w=()=>{f(),r("Failed to load script: "+n)},_=c.uniqueId();u=document.createElement("script"),u.id=_,u.type="text/javascript",u.src=Qt._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=v,u.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===tf}markDone(n){this.states[n]=tf}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=p0),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(w,_)=>{bs(o.scriptLoadedCallbacks,_).each(P=>{L(P,H=>H[w](_))}),delete o.scriptLoadedCallbacks[_]},c=w=>{const _=ke(w,P=>P.status==="rejected");return _.length>0?Promise.reject(mt(_,({reason:P})=>vt(P)?P:[P])):Promise.resolve()},u=w=>Promise.allSettled(le(w,_=>o.states[_]===tf?(r("resolve",_),Promise.resolve()):o.states[_]===b0?(r("reject",_),Promise.reject(_)):(o.states[_]=Nk,o.loadScript(_).then(()=>{o.states[_]=tf,r("resolve",_);const P=o.queue;return P.length>0?(o.queue=[],u(P).then(c)):Promise.resolve()},()=>(o.states[_]=b0,r("reject",_),Promise.reject(_)))))),f=w=>(o.loading=!0,u(w).then(_=>{o.loading=!1;const P=o.queueLoadedCallbacks.shift();return V.from(P).each(rn),c(_)})),v=xt(n);return o.loading?new Promise((w,_)=>{o.queueLoadedCallbacks.push(()=>{f(v).then(w,_)})}):f(v)}}_d.ScriptLoader=new _d;const lx=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},bC=e=>St(e)&&Qn(e,"raw"),Pr=e=>vt(e)&&e.length>1,mp={},ma=et("en"),ux=()=>bs(mp,ma.get()),Ac={getData:()=>Zo(mp,e=>({...e})),setCode:e=>{e&&ma.set(e)},getCode:()=>ma.get(),add:(e,n)=>{let o=mp[e];o||(mp[e]=o={});const r=le(xo(n),c=>c.toLowerCase());on(n,(c,u)=>{const f=u.toLowerCase();f!==u&&lx(r,f)?(Qn(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=ux().getOr({}),o=f=>we(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const v=o(f);return Qn(n,v)?o(n[v]):bs(n,v.toLowerCase()).map(o).getOr(v)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(bC(e))return o(e.raw);if(Pr(e)){const f=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(w,_)=>Qn(f,_)?o(f[_]):w);return u(v)}return u(c(e))},isRtl:()=>ux().bind(e=>bs(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Qn(mp,e)},Ri=()=>{const e=[],n={},o={},r=[],c=(ce,be)=>{const Me=ke(r,qe=>qe.name===ce&&qe.state===be);L(Me,qe=>qe.resolve())},u=ce=>Qn(n,ce),f=ce=>Qn(o,ce),v=ce=>{if(o[ce])return o[ce].instance},w=(ce,be)=>{const Me=Ac.getCode(),qe=","+(be||"")+",";!Me||be&&qe.indexOf(","+Me+",")===-1||_d.ScriptLoader.add(n[ce]+"/langs/"+Me+".js")},_=(ce,be)=>{Ri.languageLoad!==!1&&(u(ce)?w(ce,be):ge(ce,"loaded").then(()=>w(ce,be)))},P=(ce,be)=>(e.push(be),o[ce]={instance:be},c(ce,"added"),be),H=ce=>{delete n[ce],delete o[ce]},U=(ce,be)=>ie(be)?ie(ce)?{prefix:"",resource:be,suffix:""}:{prefix:ce.prefix,resource:be,suffix:ce.suffix}:be,oe=(ce,be)=>{if(n[ce])return Promise.resolve();let Me=ie(be)?be:be.prefix+be.resource+be.suffix;Me.indexOf("/")!==0&&Me.indexOf("://")===-1&&(Me=Ri.baseURL+"/"+Me),n[ce]=Me.substring(0,Me.lastIndexOf("/"));const qe=()=>(c(ce,"loaded"),Promise.resolve());return o[ce]?qe():_d.ScriptLoader.add(Me).then(qe)},ge=(ce,be="added")=>be==="added"&&f(ce)||be==="loaded"&&u(ce)?Promise.resolve():new Promise(Me=>{r.push({name:ce,state:be,resolve:Me})});return{items:e,urls:n,lookup:o,get:v,requireLangPack:_,add:P,remove:H,createUrl:U,load:oe,waitFor:ge}};Ri.languageLoad=!0,Ri.baseURL="",Ri.PluginManager=Ri(),Ri.ThemeManager=Ri(),Ri.ModelManager=Ri();const N1=(e,n)=>{let o=null;return{cancel:()=>{J(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{J(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},qf=(e,n)=>{let o=null;const r=()=>{J(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},vC=(e,n,o)=>Ba(e,n,o).isSome(),gp=ve("mce-annotation"),gm=ve("data-mce-annotation"),hp=ve("data-mce-annotation-uid"),ih=ve("data-mce-annotation-active"),Kf=ve("data-mce-annotation-classes"),hm=ve("data-mce-annotation-attrs"),lh=e=>n=>os(n,e),uh=(e,n)=>{const o=e.selection.getRng(),r=Fe.fromDom(o.startContainer),c=Fe.fromDom(e.getBody()),u=n.fold(()=>"."+gp(),w=>`[${gm()}="${w}"]`),f=oi(r,o.startOffset).getOr(r);return ru(f,u,lh(c)).bind(w=>Kr(w,`${hp()}`).bind(_=>Kr(w,`${gm()}`).map(P=>{const H=v0(e,_);return{uid:_,name:P,elements:H}})))},Ik=e=>Bs(e)&&tu(e,gp()),yC=(e,n)=>Br(e,"data-mce-bogus")||vC(e,'[data-mce-bogus="all"]',lh(n)),v0=(e,n)=>{const o=Fe.fromDom(e.getBody()),r=$c(o,`[${hp()}="${n}"]`);return ke(r,c=>!yC(c,o))},dx=(e,n)=>{const o=Fe.fromDom(e.getBody()),r=$c(o,`[${gm()}="${n}"]`),c={};return L(r,u=>{if(!yC(u,o)){const f=nc(u,hp()),v=bs(c,f).getOr([]);c[f]=v.concat([u])}}),c},CC=(e,n)=>{const o=et({}),r=()=>({listeners:[],previous:qc()}),c=(H,U)=>{u(H,oe=>(U(oe),oe))},u=(H,U)=>{const oe=o.get(),ge=bs(oe,H).getOrThunk(r),ce=U(ge);oe[H]=ce,o.set(oe)},f=(H,U,oe)=>{c(H,ge=>{L(ge.listeners,ce=>ce(!0,H,{uid:U,nodes:le(oe,be=>be.dom)}))})},v=H=>{c(H,U=>{L(U.listeners,oe=>oe(!1,H))})},w=(H,U)=>{L(v0(e,H),oe=>{U?or(oe,ih(),"true"):br(oe,ih())})},_=qf(()=>{const H=ro(n.getNames());L(H,U=>{u(U,oe=>{const ge=oe.previous.get();return uh(e,V.some(U)).fold(()=>{ge.each(ce=>{v(U),oe.previous.clear(),w(ce,!1)})},({uid:ce,name:be,elements:Me})=>{Hs(ge,ce)||(ge.each(qe=>w(qe,!1)),f(be,ce,Me),oe.previous.set(ce),w(ce,!0))}),{previous:oe.previous,listeners:oe.listeners}})})},30);return e.on("remove",()=>{_.cancel()}),e.on("NodeChange",()=>{_.throttle()}),{addListener:(H,U)=>{u(H,oe=>({previous:oe.previous,listeners:oe.listeners.concat([U])}))}}},y0=(e,n)=>{const o=gm(),r=u=>V.from(u.attr(o)).bind(n.lookup),c=u=>{var f,v;u.attr(hp(),null),u.attr(gm(),null),u.attr(ih(),null);const w=V.from(u.attr(hm())).map(U=>U.split(",")).getOr([]),_=V.from(u.attr(Kf())).map(U=>U.split(",")).getOr([]);L(w,U=>u.attr(U,null));const P=(v=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&v!==void 0?v:[],H=lo(P,[gp()].concat(_));u.attr("class",H.length>0?H.join(" "):null),u.attr(Kf(),null),u.attr(hm(),null)};e.serializer.addTempAttr(ih()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(v=>{v.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},wC=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>bs(e,c).map(u=>u.settings),getNames:()=>xo(e)}},SC=(e,n,o)=>Math.min(Math.max(e,n),o),xC=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let B1=0;const C0=e=>{const o=new Date().getTime(),r=Math.floor(xC()*1e9);return B1++,e+"_"+r+B1+String(o)},OF=(e,n)=>{L(n,o=>{Dl(e,o)})},M1=(e,n)=>{L(n,o=>{Ou(e,o)})},pp=(e,n)=>Fe.fromDom(e.dom.cloneNode(n)),Yf=e=>pp(e,!1),EC=e=>pp(e,!0),TC=(e,n)=>{const o=Fe.fromTag(n),r=ku(e);return Sc(o,r),o},mx=(e,n)=>{const o=TC(e,n);yi(e,o);const r=ja(e);return Mu(o,r),mr(e),o},AC=(e,n,o=Ne)=>{const r=new Ec(e,n),c=u=>{let f;do f=r[u]();while(f&&!un(f)&&!o(f));return V.from(f).filter(un)};return{current:()=>V.from(r.current()).filter(un),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},dh=(e,n)=>{const o=n||(f=>e.isBlock(f)||zs(f)||Vs(f)),r=(f,v,w,_)=>{if(un(f)){const P=_(f,v,f.data);if(P!==-1)return V.some({container:f,offset:P})}return w().bind(P=>r(P.container,P.offset,w,_))};return{backwards:(f,v,w,_)=>{const P=AC(f,_??e.getRoot(),o);return r(f,v,()=>P.prev().map(H=>({container:H,offset:H.length})),w).getOrNull()},forwards:(f,v,w,_)=>{const P=AC(f,_??e.getRoot(),o);return r(f,v,()=>P.next().map(H=>({container:H,offset:0})),w).getOrNull()}}},kC=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?V.from(u.dom.nodeValue):V.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Js,"text"),Xf=e=>kC.get(e),bp=e=>kC.getOption(e),_C=(e,n)=>kC.set(e,n),w0=["td","th"],DC=["thead","tbody","tfoot"],fx=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ii=["li","dd","dt"],RF=["ul","ol","dl"],OC=["pre","script","textarea","style"],P1=e=>{let n;return o=>(n=n||po(e,dt),Qn(n,fe(o)))},Hk=e=>fe(e)==="table",vl=e=>Bs(e)&&fe(e)==="br",Wu=P1(fx),Jf=P1(RF),mh=P1(ii),gx=P1(DC),$1=P1(w0),S0=P1(OC),hx=e=>{const n=[];let o=e.dom;for(;o;)n.push(Fe.fromDom(o)),o=o.lastChild;return n},Qf=e=>{const n=$c(e,"br"),o=ke(hx(e).slice(-1),vl);n.length===o.length&&L(o,mr)},fh=()=>{const e=Fe.fromTag("br");return or(e,"data-mce-bogus","1"),e},hu=e=>{yd(e),na(e,fh())},x0=(e,n)=>{gd(e).each(o=>{su(o).each(r=>{n.isBlock(fe(e))&&vl(o)&&n.isBlock(fe(r))&&mr(o)})})},yc=tp,RC=i0,Fi=ri,zk=e=>e.insertContent(yc,{preserve_zwsp:!0}),px=Mn,nf=un,eg=e=>(nf(e)&&(e=e.parentNode),px(e)&&e.hasAttribute("data-mce-caret")),of=e=>nf(e)&&RC(e.data),yl=e=>eg(e)||of(e),bx=e=>e.firstChild!==e.lastChild||!zs(e.firstChild),I1=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(yc),u=e.parentNode;if(n){const f=e.previousSibling;if(nf(f)){if(yl(f))return f;if(Es(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(nf(f)){if(yl(f))return f;if(tg(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},FC=e=>{const n=e.container();return un(n)?n.data.charAt(e.offset())===yc||e.isAtStart()&&of(n.previousSibling):!1},vp=e=>{const n=e.container();return un(n)?n.data.charAt(e.offset()-1)===yc||e.isAtEnd()&&of(n.nextSibling):!1},gh=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(fh().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},tg=e=>nf(e)&&e.data[0]===yc,Es=e=>nf(e)&&e.data[e.data.length-1]===yc,nl=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];qm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},pm=e=>e&&e.hasAttribute("data-mce-caret")?(nl(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,E0=e=>eg(e.startContainer),hr=Math.round,ng=e=>e?{left:hr(e.left),top:hr(e.top),bottom:hr(e.bottom),right:hr(e.right),width:hr(e.width),height:hr(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},T0=(e,n)=>(e=ng(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Vk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Uk=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,L1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Uk(n.top-e.bottom,e,n)},$r=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Uk(n.bottom-e.top,e,n),vx=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Wk=e=>Je(e,(n,o)=>n.fold(()=>V.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),v=Math.max(o.bottom,r.bottom);return V.some({top:u,right:f,bottom:v,left:c,width:f-c,height:v-u})}),V.none()),yx=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},hh=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Cl=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},og=(e,n)=>{if(Mn(e)&&e.hasChildNodes()){const o=e.childNodes,r=SC(n,0,o.length-1);return o[r]}else return e},NC=(e,n)=>{if(!(n<0&&Mn(e)&&e.hasChildNodes()))return og(e,n)},Vn=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),BC=e=>ie(e)&&e.charCodeAt(0)>=768&&Vn.test(e),Zk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},Cx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},MC=Zt,wx=Vs,Sx=zs,Dd=un,H1=Fl(["script","style","textarea"]),ph=Fl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),A0=Fl(["table"]),jk=yl,Bl=e=>jk(e)?!1:Dd(e)?!H1(e.parentNode):ph(e)||Sx(e)||A0(e)||PC(e),xx=e=>Mn(e)&&e.getAttribute("unselectable")==="true",PC=e=>!xx(e)&&wx(e),Ex=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(PC(o))return!1;if(MC(o))return!0}return!0},k0=e=>PC(e)?!Je(ss(e.getElementsByTagName("*")),(n,o)=>n||MC(o),!1):!1,Gk=e=>ph(e)||k0(e),_0=(e,n)=>Bl(e)&&Ex(e,n),$C=Mn,IC=Bl,Tx=Jg("display","block table"),qk=Jg("float","left right"),bm=Cx($C,IC,Dt(qk)),Ax=Dt(Jg("white-space","pre pre-line pre-wrap")),yp=un,Cp=zs,kx=jr.nodeIndex,D0=NC,LC=e=>e?e.createRange():jr.DOM.createRng(),O0=e=>ie(e)&&/[\r\n\t ]/.test(e),Kk=e=>!!e.setStart&&!!e.setEnd,Ni=e=>{const n=e.startContainer,o=e.startOffset;if(O0(e.toString())&&Ax(n.parentNode)&&un(n)){const r=n.data;if(O0(r[o-1])||O0(r[o+1]))return!0}return!1},Yk=e=>{const n=e.ownerDocument,o=LC(n),r=n.createTextNode(za),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=ng(o.getBoundingClientRect());return c.removeChild(r),u},Xk=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&un(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),rg(u)}else return null},sg=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,rg=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=ng(r[0]):o=ng(e.getBoundingClientRect()),!Kk(e)&&Cp(e)&&sg(o)?Yk(e):sg(o)&&Kk(e)&&(n=Xk(e))!==null&&n!==void 0?n:o},sf=(e,n)=>{const o=T0(e,n);return o.width=1,o.right=o.left+1,o},HC=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Vk(f,n[n.length-1])||n.push(f))},r=(f,v)=>{const w=LC(f.ownerDocument);if(v<f.data.length){if(BC(f.data[v]))return;if(BC(f.data[v-1])&&(w.setStart(f,v),w.setEnd(f,v+1),!Ni(w))){o(sf(rg(w),!1));return}}v>0&&(w.setStart(f,v-1),w.setEnd(f,v),Ni(w)||o(sf(rg(w),!1))),v<f.data.length&&(w.setStart(f,v),w.setEnd(f,v+1),Ni(w)||o(sf(rg(w),!0)))},c=e.container(),u=e.offset();if(yp(c))return r(c,u),n;if($C(c))if(e.isAtEnd()){const f=D0(c,u);yp(f)&&r(f,f.data.length),bm(f)&&!Cp(f)&&o(sf(rg(f),!1))}else{const f=D0(c,u);if(yp(f)&&r(f,0),bm(f)&&e.isAtEnd())return o(sf(rg(f),!1)),n;const v=D0(e.container(),e.offset()-1);bm(v)&&!Cp(v)&&(Tx(v)||Tx(f)||!bm(f))&&o(sf(rg(v),!1)),bm(f)&&o(sf(rg(f),!0))}return n},Mt=(e,n,o)=>{const r=()=>(yp(e),n===0),c=()=>yp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const P=LC(e.ownerDocument);return P.setStart(e,n),P.setEnd(e,n),P},f=()=>(o||(o=HC(Mt(e,n))),o),v=()=>f().length>0,w=P=>P&&e===P.container()&&n===P.offset(),_=P=>D0(e,P?n-1:n);return{container:ve(e),offset:ve(n),toRange:u,getClientRects:f,isVisible:v,isAtStart:r,isAtEnd:c,isEqual:w,getNode:_}};Mt.fromRangeStart=e=>Mt(e.startContainer,e.startOffset),Mt.fromRangeEnd=e=>Mt(e.endContainer,e.endOffset),Mt.after=e=>Mt(e.parentNode,kx(e)+1),Mt.before=e=>Mt(e.parentNode,kx(e)),Mt.isAbove=(e,n)=>qo(to(n.getClientRects()),Qo(e.getClientRects()),L1).getOr(!1),Mt.isBelow=(e,n)=>qo(Qo(n.getClientRects()),to(e.getClientRects()),$r).getOr(!1),Mt.isAtStart=e=>e?e.isAtStart():!1,Mt.isAtEnd=e=>e?e.isAtEnd():!1,Mt.isTextPosition=e=>e?un(e.container()):!1,Mt.isElementPosition=e=>!Mt.isTextPosition(e);const R0=(e,n)=>{un(n)&&n.data.length===0&&e.remove(n)},rf=(e,n,o)=>{n.insertNode(o),R0(e,o.previousSibling),R0(e,o.nextSibling)},ag=(e,n,o)=>{const r=V.from(o.firstChild),c=V.from(o.lastChild);n.insertNode(o),r.each(u=>R0(e,u.previousSibling)),c.each(u=>R0(e,u.nextSibling))},F0=(e,n,o)=>{qa(o)?ag(e,n,o):rf(e,n,o)},wl=un,zC=qm,VC=jr.nodeIndex,Bi=e=>{const n=e.parentNode;return zC(n)?Bi(n):n},wp=e=>e?Ae(e.childNodes,(n,o)=>(zC(o)&&o.nodeName!=="BR"?n=n.concat(wp(o)):n.push(o),n),[]):[],_x=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&wl(o);)n+=o.data.length;return n},Dx=e=>n=>e===n,Jk=e=>{let n,o;n=wp(Bi(e)),o=Ce(n,Dx(e),e),n=n.slice(0,o+1);const r=Ae(n,(c,u,f)=>(wl(u)&&wl(n[f-1])&&c++,c),0);return n=Sr(n,Fl([e.nodeName])),o=Ce(n,Dx(e),e),o-r},Ox=e=>(wl(e)?"text()":e.nodeName.toLowerCase())+"["+Jk(e)+"]",Qk=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},Rx=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(wl(r))u=_x(r,c);else{const v=r.childNodes;c>=v.length?(u="after",c=v.length-1):u="before",r=v[c]}o.push(Ox(r));let f=Qk(e,r);return f=Sr(f,Dt(qm)),o=o.concat(pr(f,v=>Ox(v))),o.reverse().join("/")+","+u},e_=(e,n,o)=>{let r=wp(e);return r=Sr(r,(c,u)=>!wl(c)||!wl(r[u-1])),r=Sr(r,Fl([n])),r[o]},t_=(e,n)=>{let o=e,r=0;for(;wl(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!wl(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return wl(e)&&n>e.data.length&&(n=e.data.length),Mt(e,n)},N0=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Ae(r,(f,v)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return w?(w[1]==="text()"&&(w[1]="#text"),e_(f,w[1],parseInt(w[2],10))):null},e);if(!u)return null;if(!wl(u)&&u.parentNode){let f;return c==="after"?f=VC(u)+1:f=VC(u),Mt(u.parentNode,f)}return t_(u,parseInt(c,10))},B0=Vs,n_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&un(c);c=c.previousSibling)r+=e(c.data).length;return r},Fx=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const v=[],w=e.getRoot();if(un(u))v.push(o?n_(n,u,f):f);else{let _=0;const P=u.childNodes;f>=P.length&&P.length&&(_=1,f=Math.max(0,P.length-1)),v.push(e.nodeIndex(P[f],o)+_)}for(let _=u;_&&_!==w;_=_.parentNode)v.push(e.nodeIndex(_,o));return v},o_=(e,n,o,r)=>{const c=n.dom,u=Fx(c,e,o,r,!0),f=n.isForward(),v=E0(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...v};{const w=Fx(c,e,o,r,!1);return{start:u,end:w,forward:f,...v}}},UC=(e,n,o)=>{let r=0;return Qt.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},fa=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Mn(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},WC=e=>(fa(e,!0),fa(e,!1),e),Nx=(e,n)=>{if(Mn(e)&&(e=og(e,n),B0(e)))return e;if(yl(e)){un(e)&&eg(e)&&(e=e.parentNode);let o=e.previousSibling;if(B0(o)||(o=e.nextSibling,B0(o)))return o}},M0=e=>Nx(e.startContainer,e.startOffset)||Nx(e.endContainer,e.endOffset),P0=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||B0(r)){const f=r.nodeName;return{name:f,index:UC(o.dom,f,r)}}const u=M0(c);if(u){const f=u.tagName;return{name:f,index:UC(o.dom,f,u)}}return o_(e,o,n,c)},li=e=>{const n=e.getRng();return{start:Rx(e.dom.getRoot(),Mt.fromRangeStart(n)),end:Rx(e.dom.getRoot(),Mt.fromRangeEnd(n)),forward:e.isForward()}},Ml=e=>({rng:e.getRng(),forward:e.isForward()}),ZC=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},jC=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),v=f.nodeName,w=e.isForward();if(v==="IMG")return{name:v,index:UC(o,v,f)};const _=WC(r.cloneRange());if(!u){_.collapse(!1);const H=ZC(o,c+"_end",n);F0(o,_,H)}r=WC(r),r.collapse(!0);const P=ZC(o,c+"_start",n);return F0(o,r,P),e.moveToBookmark({id:c,keep:!0,forward:w}),{id:c,forward:w}},Bx=(e,n,o=!1)=>n===2?P0(Fi,o,e):n===3?li(e):n?Ml(e):jC(e,!1),GC=_e(P0,Rt,!0),z1=e=>{const n=u=>u(e),o=ve(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:dt,isError:Ne,map:u=>Mi.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>V.some(e)};return c},$0=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ne,isError:dt,map:n,mapError:r=>Mi.error(r(e)),bind:n,exists:Ne,forall:dt,getOr:Rt,or:Rt,getOrThunk:nt,orThunk:nt,getOrDie:An(String(e)),each:je,toOptional:V.none};return o},Mi={value:z1,error:$0,fromOption:(e,n)=>e.fold(()=>$0(n),z1)},Od={generate:e=>{if(!vt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return L(e,(r,c)=>{const u=xo(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],v=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!vt(v))throw new Error("case arguments must be an array");n.push(f),o[f]=(...w)=>{const _=w.length;if(_!==v.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+v.length+" ("+v+"), got "+_);return{fold:(...H)=>{if(H.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+H.length);return H[c].apply(null,w)},match:H=>{const U=xo(H);if(n.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+U.join(","));if(!Xt(n,ge=>I(U,ge)))throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+n.join(", "));return H[f].apply(null,w)},log:H=>{console.log(H,{constructors:n,constructor:f,params:w})}}}}),o}};Od.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const qC=e=>{const n=[],o=[];return L(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Jr=e=>e.type==="inline-command"||e.type==="inline-format",Zu=e=>e.type==="block-command"||e.type==="block-format",ig=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,s_=e=>{var n;const o=c=>Mi.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let v;if(vt(e.format)){if(!Xt(e.format,ie))return o(c+" pattern has non-string items in the `format` array");v=e.format}else if(ie(e.format))v=[e.format];else return o(c+" pattern has non-string `format` parameter");return Mi.value(u(v))}else return e.cmd!==void 0?ie(e.cmd)?Mi.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!St(e))return o("Raw pattern is not an object");if(!ie(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ie(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,v)=>({type:"inline-command",start:c,end:u,cmd:f,value:v}))}else{if(e.replacement!==void 0)return ie(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Mi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},KC=e=>ke(e,Zu),Px=e=>ke(e,Jr),bh=(e,n)=>({inlinePatterns:Px(e),blockPatterns:KC(e),dynamicPatternsLookup:n}),kc=(e,n)=>({...e,blockPatterns:ke(e.blockPatterns,o=>ig(o,n))}),af=e=>{const n=qC(le(e,s_));return L(n.errors,o=>console.error(o.message,o.pattern)),n.values},r_=e=>n=>{const o=e(n);return af(o)},YC=dn().deviceType,a_=YC.isTouch(),I0=jr.DOM,XC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Je(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Ls(u)]=Ls(f),o},{})},L0=e=>Qe(e,RegExp),Un=e=>n=>n.options.get(e),V1=e=>ie(e)||St(e),JC=(e,n="")=>o=>{const r=ie(o);if(r)if(o.indexOf("=")!==-1){const c=XC(o);return{value:bs(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},$x=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:JC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:JC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ie(o)&&fo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=I(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Yt(o)?{valid:!0,value:o}:ie(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ie(o)||Ve(o,ie);return r?ie(o)?{value:le(o.split(","),Ls),valid:r}:vt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:j1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ie(o)||Ve(o,ie);return r?{value:vt(o)?o:le(o.split(","),Ls),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Yt(o)||ie(o);return r?o===!1||YC.isiPhone()||YC.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!a_}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ie(o)||we(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ie(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:V1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:V1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:V1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:V1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ie(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Ve(o,St)||o===!1?{value:af(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>we(o)?{value:r_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Ve(o,L0)?{value:o,valid:!0}:L0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=I(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=I(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ac.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:I0.getAttrib(e.getElement(),"placeholder")})})},Ix=Un("iframe_attrs"),c_=Un("doctype"),Lc=Un("document_base_url"),i_=Un("body_id"),lg=Un("body_class"),QC=Un("content_security_policy"),Lx=Un("br_in_pre"),Kc=Un("forced_root_block"),ug=Un("forced_root_block_attrs"),cf=Un("newline_behavior"),Hx=Un("br_newline_selector"),l_=Un("no_newline_selector"),u_=Un("keep_styles"),ac=Un("end_container_on_empty_block"),ka=Un("automatic_uploads"),sr=Un("images_reuse_filename"),Yc=Un("images_replace_blob_uris"),cc=Un("icons"),ic=Un("icons_url"),H0=Un("images_upload_url"),z0=Un("images_upload_base_path"),zx=Un("images_upload_credentials"),Vx=Un("images_upload_handler"),Ux=Un("content_css_cors"),V0=Un("referrer_policy"),dg=Un("language"),U0=Un("language_url"),d_=Un("indent_use_margin"),Sp=Un("indentation"),m_=Un("content_css"),f_=Un("content_style"),ol=Un("font_css"),FF=Un("directionality"),Wx=Un("inline_boundaries_selector"),Pl=Un("object_resizing"),W0=Un("resize_img_proportional"),U1=Un("placeholder"),Rd=Un("event_root"),Pi=Un("service_message"),mg=Un("theme"),ew=Un("theme_url"),Z0=Un("model"),Zx=Un("model_url"),lf=Un("inline_boundaries"),jx=Un("formats"),tw=Un("preview_styles"),Gx=Un("format_empty_lines"),W1=Un("format_noneditable_selector"),Z1=Un("custom_ui_selector"),j1=Un("inline"),g_=Un("hidden_input"),j0=Un("submit_patch"),h_=Un("add_form_submit_trigger"),qx=Un("add_unload_trigger"),p_=Un("custom_undo_redo_levels"),G0=Un("disable_nodechange"),Kx=Un("readonly"),b_=Un("editable_root"),nw=Un("content_css_cors"),q0=Un("plugins"),v_=Un("external_plugins"),Yx=Un("block_unsupported_drop"),$i=Un("visual"),ow=Un("visual_table_class"),sw=Un("visual_anchor_class"),rw=Un("iframe_aria_text"),K0=Un("setup"),y_=Un("init_instance_callback"),Y0=Un("urlconverter_callback"),Xx=Un("auto_focus"),aw=Un("browser_spellcheck"),cw=Un("protect"),Jx=Un("paste_block_drop"),xp=Un("paste_data_images"),Qx=Un("paste_preprocess"),eE=Un("paste_postprocess"),tE=Un("newdocument_content"),C_=Un("paste_webkit_styles"),nE=Un("paste_remove_styles_if_webkit"),oE=Un("paste_merge_formats"),w_=Un("smart_paste"),X0=Un("paste_as_text"),sE=Un("paste_tab_spaces"),Ep=Un("allow_html_data_urls"),rE=Un("text_patterns"),iw=Un("text_patterns_lookup"),aE=Un("noneditable_class"),S_=Un("editable_class"),ju=Un("noneditable_regexp"),J0=Un("preserve_cdata"),Q0=Un("highlight_on_focus"),Xc=Un("xss_sanitization"),NF=Un("init_content_sync"),$l=e=>e.options.isSet("text_patterns_lookup"),lw=e=>Qt.explode(e.options.get("font_size_style_values")),x_=e=>Qt.explode(e.options.get("font_size_classes")),fg=e=>e.options.get("encoding")==="xml",G1=e=>Qt.explode(e.options.get("images_file_types")),E_=Un("table_tab_navigation"),cE=Un("details_initial_state"),uw=Un("details_serialized_state"),iE=Un("sandbox_iframes"),ev=e=>e.options.get("sandbox_iframes_exclusions"),q1=Un("convert_unsafe_embeds"),lE=Un("license_key"),uE=Un("api_key"),T_=Mn,tv=un,nv=e=>{const n=e.parentNode;n&&n.removeChild(e)},A_=e=>{const n=Fi(e);return{count:e.length-n.length,text:n}},Tp=e=>{let n;for(;(n=e.data.lastIndexOf(yc))!==-1;)e.deleteData(n,1)},dE=(e,n)=>(vh(e),n),ov=(e,n)=>{const o=A_(e.data.substr(0,n.offset())),r=A_(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Tp(e),Mt(e,n.offset()-o.count)):n},dw=(e,n)=>{const o=n.container(),r=re(ss(o.childNodes),e).map(c=>c<n.offset()?Mt(o,n.offset()-1):n).getOr(n);return vh(e),r},sv=(e,n)=>tv(e)&&n.container()===e?ov(e,n):dE(e,n),k_=(e,n)=>n.container()===e.parentNode?dw(e,n):dE(e,n),mE=(e,n)=>Mt.isTextPosition(n)?sv(e,n):k_(e,n),vh=e=>{T_(e)&&yl(e)&&(bx(e)?e.removeAttribute("data-mce-caret"):nv(e)),tv(e)&&(Tp(e),e.data.length===0&&nv(e))},fE=Vs,K1=Gc,gg=eh,Y1="*[contentEditable=false],video,audio,embed,object",gE=(e,n,o)=>{const r=T0(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;c=e.scrollLeft||v.scrollLeft,u=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();c=e.scrollLeft-v.left,u=e.scrollTop-v.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},hE=e=>{var n,o;const r=$c(Fe.fromDom(e),Y1);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(Es(f)){const v=f.data;v.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(v.length-1,1)}f=u.nextSibling,tg(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},BF=(e,n,o,r)=>{const c=qc();let u,f;const v=Kc(e),w=e.dom,_=(ce,be)=>{let Me;if(P(),gg(be))return null;if(o(be)){const qe=gh(v,be,ce),Ze=gE(n,be,ce);w.setStyle(qe,"top",Ze.top),w.setStyle(qe,"caret-color","transparent"),f=qe;const bt=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(bt,{...Ze}),w.add(n,bt),c.set({caret:bt,element:be,before:ce}),ce&&w.addClass(bt,"mce-visual-caret-before"),H(),Me=be.ownerDocument.createRange(),Me.setStart(qe,0),Me.setEnd(qe,0)}else return f=I1(be,ce),Me=be.ownerDocument.createRange(),Ap(f.nextSibling)?(Me.setStart(f,0),Me.setEnd(f,0)):(Me.setStart(f,1),Me.setEnd(f,1)),Me;return Me},P=()=>{hE(n),f&&(vh(f),f=null),c.on(ce=>{w.remove(ce.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},H=()=>{u=setInterval(()=>{c.on(ce=>{r()?w.toggleClass(ce.caret,"mce-visual-caret-hidden"):w.addClass(ce.caret,"mce-visual-caret-hidden")})},500)};return{show:_,hide:P,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(ce=>{const be=gE(n,ce.element,ce.before);w.setStyles(ce.caret,{...be})})},destroy:()=>clearInterval(u)}},__=()=>Ie.browser.isFirefox(),Ap=e=>fE(e)||K1(e),vm=e=>(Ap(e)||iu(e)&&__())&&Vm(Fe.fromDom(e)).exists(oc),D_=Zt,mw=Vs,pE=Gc,bE=Jg("display","block table table-cell table-caption list-item"),vE=yl,fw=eg,yE=Mn,hg=un,CE=Bl,yh=e=>e>0,pg=e=>e<0,X1=(e,n)=>{let o;for(;o=e(n);)if(!fw(o))return o;return null},kp=(e,n,o,r,c)=>{const u=new Ec(e,r),f=mw(e)||fw(e);let v;if(pg(n)){if(f&&(v=X1(u.prev.bind(u),!0),o(v)))return v;for(;v=X1(u.prev.bind(u),c);)if(o(v))return v}if(yh(n)){if(f&&(v=X1(u.next.bind(u),!0),o(v)))return v;for(;v=X1(u.next.bind(u),c);)if(o(v))return v}return null},rv=(e,n)=>{const o=c=>D_(c.dom),r=c=>c.dom===n;return Wr(Fe.fromDom(e),o,r).map(c=>c.dom).getOr(n)},bg=(e,n)=>{for(;e&&e!==n;){if(bE(e))return e;e=e.parentNode}return null},Il=(e,n,o)=>bg(e.container(),o)===bg(n.container(),o),gw=(e,n)=>{if(!n)return V.none();const o=n.container(),r=n.offset();return yE(o)?V.from(o.childNodes[r+e]):V.none()},O_=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},_p=(e,n,o)=>bg(n,e)===bg(o,e),wE=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&vE(u)&&(u=u[r]),mw(u)||pE(u)){if(_p(n,u,c))return u;break}if(CE(u))break;c=c.parentNode}return null},Dp=_e(O_,!0),Op=_e(O_,!1),Hc=(e,n,o)=>{let r;const c=_e(wE,!0,n),u=_e(wE,!1,n),f=o.startContainer,v=o.startOffset;if(eg(f)){const w=hg(f)?f.parentNode:f,_=w.getAttribute("data-mce-caret");if(_==="before"&&(r=w.nextSibling,vm(r)))return Dp(r);if(_==="after"&&(r=w.previousSibling,vm(r)))return Op(r)}if(!o.collapsed)return o;if(un(f)){if(vE(f)){if(e===1){if(r=u(f),r)return Dp(r);if(r=c(f),r)return Op(r)}if(e===-1){if(r=c(f),r)return Op(r);if(r=u(f),r)return Dp(r)}return o}if(Es(f)&&v>=f.data.length-1)return e===1&&(r=u(f),r)?Dp(r):o;if(tg(f)&&v<=1)return e===-1&&(r=c(f),r)?Op(r):o;if(v===f.data.length)return r=u(f),r?Dp(r):o;if(v===0)return r=c(f),r?Op(r):o}return o},av=(e,n)=>gw(e?0:-1,n).filter(mw),J1=(e,n,o)=>{const r=Hc(e,n,o);return e===-1?Mt.fromRangeStart(r):Mt.fromRangeEnd(r)},cv=e=>V.from(e.getNode()).map(Fe.fromDom),SE=e=>V.from(e.getNode(!0)).map(Fe.fromDom),hw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},iv=(e,n)=>{const o=Il(e,n);return!o&&zs(e.getNode())?!0:o};var Ya;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ya||(Ya={}));const lv=Vs,ym=un,xE=Mn,pw=zs,uf=Bl,Q1=Gk,Rp=_0,uv=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},dv=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,vg=(e,n)=>{if(yh(e)){if(uf(n.previousSibling)&&!ym(n.previousSibling))return Mt.before(n);if(ym(n))return Mt(n,0)}if(pg(e)){if(uf(n.nextSibling)&&!ym(n.nextSibling))return Mt.after(n);if(ym(n))return Mt(n,n.data.length)}return pg(e)?pw(n)?Mt.before(n):Mt.after(n):Mt.before(n)},R_=(e,n)=>{const o=n.nextSibling;return o&&uf(o)?ym(o)?Mt(o,0):Mt.before(o):Sl(Ya.Forwards,Mt.after(n),e)},Sl=(e,n,o)=>{let r,c,u,f;if(!xE(o)||!n)return null;if(n.isEqual(Mt.after(o))&&o.lastChild){if(f=Mt.after(o.lastChild),pg(e)&&uf(o.lastChild)&&xE(o.lastChild))return pw(o.lastChild)?Mt.before(o.lastChild):f}else f=n;const v=f.container();let w=f.offset();if(ym(v)){if(pg(e)&&w>0)return Mt(v,--w);if(yh(e)&&w<v.length)return Mt(v,++w);r=v}else{if(pg(e)&&w>0&&(c=dv(v,w-1),uf(c)))return!Q1(c)&&(u=kp(c,e,Rp,c),u)?ym(u)?Mt(u,u.data.length):Mt.after(u):ym(c)?Mt(c,c.data.length):Mt.before(c);if(yh(e)&&w<v.childNodes.length&&(c=dv(v,w),uf(c)))return pw(c)?R_(o,c):!Q1(c)&&(u=kp(c,e,Rp,c),u)?ym(u)?Mt(u,0):Mt.before(u):ym(c)?Mt(c,0):Mt.after(c);r=c||f.getNode()}if(r&&(yh(e)&&f.isAtEnd()||pg(e)&&f.isAtStart())&&(r=kp(r,e,dt,o,!0),Rp(r,o)))return vg(e,r);c=r&&kp(r,e,Rp,o);const _=ht(ke(uv(v,o),lv));return _&&(!c||!_.contains(c))?(yh(e)?f=Mt.after(_):f=Mt.before(_),f):c?vg(e,c):null},Fd=e=>({next:n=>Sl(Ya.Forwards,n,e),prev:n=>Sl(Ya.Backwards,n,e)}),bw=(e,n,o)=>{const r=e?Mt.before(o):Mt.after(o);return sl(e,n,r)},EE=e=>zs(e)?Mt.before(e):Mt.after(e),TE=e=>Mt.isTextPosition(e)?e.offset()===0:Bl(e.getNode()),vw=e=>{if(Mt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Bl(e.getNode(!0))},yw=(e,n)=>!Mt.isTextPosition(e)&&!Mt.isTextPosition(n)&&e.getNode()===n.getNode(!0),AE=e=>!Mt.isTextPosition(e)&&zs(e.getNode()),kE=(e,n,o)=>e?!yw(n,o)&&!AE(n)&&vw(n)&&TE(o):!yw(o,n)&&TE(n)&&vw(o),sl=(e,n,o)=>{const r=Fd(n);return V.from(e?r.next(o):r.prev(o))},Ch=(e,n,o)=>sl(e,n,o).bind(r=>Il(o,r,n)&&kE(e,o,r)?sl(e,n,r):V.some(r)),Cw=(e,n,o,r)=>Ch(e,n,o).bind(c=>r(c)?Cw(e,n,c,r):V.some(c)),yg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return un(o)?V.some(Mt(o,e?0:o.data.length)):o?Bl(o)?V.some(e?Mt.before(o):EE(o)):bw(e,n,o):V.none()},rl=_e(sl,!0),xl=_e(sl,!1),Jc=_e(yg,!0),pu=_e(yg,!1),mv="_mce_caret",bu=e=>Mn(e)&&e.id===mv,wh=(e,n)=>{let o=n;for(;o&&o!==e;){if(bu(o))return o;o=o.parentNode}return null},F_=e=>ie(e.start),ww=e=>Qn(e,"rng"),N_=e=>Qn(e,"id"),B_=e=>Qn(e,"name"),_E=e=>Qt.isArray(e.start),fv=e=>!B_(e)&&Yt(e.forward)?e.forward:!0,gv=(e,n)=>(Mn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),ui=(e,n)=>{const o=V.from(N0(e.getRoot(),n.start)),r=V.from(N0(e.getRoot(),n.end));return qo(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:fv(n)}})},Fp=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(yc);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Np=e=>!e.hasChildNodes(),eb=(e,n)=>pu(e).fold(Ne,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Sw=(e,n,o)=>Np(n)&&wh(e,n)?(Fp(n,o),!0):!1,tb=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,v=c[0];for(let w=c.length-1;f&&w>=1;w--){const _=f.childNodes;if(Sw(u,f,r))return!0;if(c[w]>_.length-1)return Sw(u,f,r)?!0:eb(f,r);f=_[c[w]]}un(f)&&(v=Math.min(c[0],f.data.length)),Mn(f)&&(v=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,v):r.setEnd(f,v)}return!0},nb=e=>un(e)&&e.data.length>0,Sh=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,v;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,v=1):nb(r.nextSibling)?(f=r.nextSibling,v=0):nb(r.previousSibling)?(f=r.previousSibling,v=r.previousSibling.data.length):(f=c,v=e.nodeIndex(r)+1):(f=c,v=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,v=1):nb(r.previousSibling)?(f=r.previousSibling,v=r.previousSibling.data.length):(f=c,v=e.nodeIndex(r)):(f=c,v=e.nodeIndex(r)),!u){const w=r.previousSibling,_=r.nextSibling;Qt.each(Qt.grep(r.childNodes),H=>{un(H)&&(H.data=H.data.replace(/\uFEFF/g,""))});let P;for(;P=e.get(o.id+"_"+n);)e.remove(P,!0);if(un(_)&&un(w)&&!Ie.browser.isOpera()){const H=w.data.length;w.appendData(_.data),e.remove(_),f=w,v=H}}return V.some(Mt(f,v))}else return V.none()},xw=(e,n)=>{const o=e.createRng();return tb(e,!0,n,o)&&tb(e,!1,n,o)?V.some({range:o,forward:fv(n)}):V.none()},hv=(e,n)=>{const o=Sh(e,"start",n),r=Sh(e,"end",n);return qo(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(gv(e,c.container()),c.offset()),f.setEnd(gv(e,u.container()),u.offset()),{range:f,forward:fv(n)}})},Gu=(e,n)=>V.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),DE=(e,n)=>{const o=e.dom;if(n){if(_E(n))return xw(o,n);if(F_(n))return ui(o,n);if(N_(n))return hv(o,n);if(B_(n))return Gu(o,n);if(ww(n))return V.some({range:n.rng,forward:fv(n)})}return V.none()},OE=(e,n,o)=>Bx(e,n,o),df=(e,n)=>{DE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ll=e=>Mn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",xh=(e=>n=>e===n)(za),Cg=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Ew=e=>!Cg(e)&&!xh(e)&&!i0(e),pv=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},RE=e=>mt(e,n=>{const o=Cl(n);return o?[Fe.fromDom(o)]:[]}),M_=e=>pv(e).length>1,P_=e=>ke(RE(e),$1),Eh=e=>$c(e,"td[data-mce-selected],th[data-mce-selected]"),Tw=(e,n)=>{const o=Eh(n);return o.length>0?o:P_(e)},Bp=e=>Tw(pv(e.selection.getSel()),Fe.fromDom(e.getBody())),sb=(e,n)=>Ba(e,"table",n),$_=e=>{const n=e.startContainer,o=e.startOffset;return un(n)?o===0?V.some(Fe.fromDom(n)):V.none():V.from(n.childNodes[o]).map(Fe.fromDom)},bv=e=>{const n=e.endContainer,o=e.endOffset;return un(n)?o===n.data.length?V.some(Fe.fromDom(n)):V.none():V.from(n.childNodes[o-1]).map(Fe.fromDom)},Aw=e=>Mc(e).fold(ve([e]),n=>[e].concat(Aw(n))),kw=e=>gd(e).fold(ve([e]),n=>fe(n)==="br"?su(n).map(o=>[e].concat(kw(o))).getOr([]):[e].concat(kw(n))),vv=(e,n)=>qo($_(n),bv(n),(o,r)=>{const c=Wt(Aw(e),_e(os,o)),u=Wt(kw(e),_e(os,r));return c.isSome()&&u.isSome()}).getOr(!1),_w=(e,n,o,r)=>{const c=o,u=new Ec(o,c),f=ys(e.schema.getMoveCaretBeforeOnEnterElements(),(w,_)=>!I(["td","th","table"],_.toLowerCase()));let v=o;do{if(un(v)&&Qt.trim(v.data).length!==0){r?n.setStart(v,0):n.setEnd(v,v.data.length);return}if(f[v.nodeName]){r?n.setStartBefore(v):v.nodeName==="BR"?n.setEndBefore(v):n.setEndAfter(v);return}}while(v=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Mp=e=>{const n=e.selection.getSel();return rt(n)&&n.rangeCount>0},yv=(e,n)=>{const o=Bp(e);o.length>0?L(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},Cv=(e,n,o)=>{const r=jC(e,n);o(r),e.moveToBookmark(r)},wv=e=>Ro(e==null?void 0:e.nodeType),Sv=e=>Mn(e)&&!Ll(e)&&!bu(e)&&!qm(e),Rs=(e,n)=>{if(Sv(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Cm=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Vs(u);Cv(r,!0,()=>{n()}),f&&Vs(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Th(c,r)},Th=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,v=n.getNode();if(!Rs(e,v)&&Mn(u)){const w=u.childNodes,_=e.getRoot();let P;if(f<w.length){const H=w[f];P=new Ec(H,(o=e.getParent(H,e.isBlock))!==null&&o!==void 0?o:_)}else{const H=w[w.length-1];P=new Ec(H,(r=e.getParent(H,e.isBlock))!==null&&r!==void 0?r:_),P.next(!0)}for(let H=P.current();H;H=P.next()){if(e.getContentEditable(H)==="false")return;if(un(H)&&!Tv(H)){c.setStart(H,0),n.setRng(c);return}}}},xv=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Mn(e)||!Tv(e))return e}},Ev=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||zu(e,n),wg=(e,n,o)=>e.schema.isValidChild(n,o),Tv=(e,n=!1)=>{if(rt(e)&&un(e)){const o=n?e.data.replace(/ /g," "):e.data;return Yi(o)}else return!1},Dw=e=>rt(e)&&un(e)&&e.length===0,Ow=(e,n)=>{const o="[data-mce-cef-wrappable]",r=W1(e),c=is(r)?o:`${o},${r}`;return Ol(Fe.fromDom(n),c)},Rw=(e,n)=>{const o=e.dom;return Sv(n)&&o.getContentEditable(n)==="false"&&Ow(e,n)&&o.select('[contenteditable="true"]',n).length===0},mf=(e,n)=>we(e)?e(n):(rt(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Ah=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),FE=(e,n)=>{if(gn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=kd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},rb=(e,n,o)=>{const r=e.getStyle(n,o);return FE(r,o)},Fw=(e,n)=>{let o;return e.getParent(n,r=>Mn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Av=(e,n,o)=>e.getParents(n,o,e.getRoot()),kv=(e,n,o)=>{const r=e.formatter.get(n);return rt(r)&&G(r,o)},Nw=(e,n)=>kv(e,n,r=>{const c=u=>we(u)||u.length>1&&u.charAt(0)==="%";return G(["styles","attributes"],u=>bs(r,u).exists(f=>{const v=vt(f)?f:Gr(f);return G(v,c)}))}),NE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>ys(u,(f,v)=>G(r,w=>w===v));return kv(e,n,u=>{const f=c(u);return kv(e,o,v=>{const w=c(v);return Ke(f,w)})})},ff=e=>Ns(e,"block"),_v=e=>ff(e)&&e.wrapper===!0,BE=e=>ff(e)&&e.wrapper!==!0,vu=e=>Ns(e,"selector"),_c=e=>Ns(e,"inline"),gf=e=>vu(e)&&_c(e)&&Hs(bs(e,"mixed"),!0),Bw=e=>vu(e)&&e.expand!==!1&&!_c(e),I_=e=>{const n=[];let o=e;for(;o;){if(un(o)&&o.data!==yc||o.childNodes.length>1)return[];Mn(o)&&n.push(o),o=o.firstChild}return n},Dv=e=>I_(e).length>0,Mw=e=>bu(e.dom)&&Dv(e.dom),Pp=Ll,ME=Av,L_=Tv,MF=Ev,H_=e=>zs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,PE=(e,n)=>{let o=n;for(;o;){if(Mn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},$E=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Ln=(e,n,o)=>$E(e,n,o,r=>xh(r)||Cg(r)),Dc=(e,n,o)=>$E(e,n,o,Ew),ab=(e,n,o,r,c,u)=>{let f;const v=e.getParent(o,e.isBlock)||n,w=(P,H,U)=>{const oe=dh(e),ge=c?oe.backwards:oe.forwards;return V.from(ge(P,H,(ce,be)=>Pp(ce.parentNode)?-1:(f=ce,U(c,ce,be)),v))};return w(o,r,Ln).bind(P=>u?w(P.container,P.offset+(c?-1:0),Dc):V.some(P)).orThunk(()=>f?V.some({container:f,offset:c?0:f.length}):V.none())},Oc=(e,n,o,r,c)=>{const u=r[c];un(r)&&is(r.data)&&u&&(r=u);const f=ME(e,r);for(let v=0;v<f.length;v++)for(let w=0;w<n.length;w++){const _=n[w];if(!(rt(_.collapsed)&&_.collapsed!==o.collapsed)&&vu(_)&&e.is(f[v],_.selector))return f[v]}return r},yu=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),v=n[0];if(ff(v)&&(u=v.wrapper?null:e.getParent(o,v.block,f)),!u){const w=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(un(o)?o.parentNode:o,_=>_!==f&&MF(e.schema,_),w)}if(u&&ff(v)&&v.wrapper&&(u=ME(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Ah(u,"br")););return u||o},Pw=(e,n,o,r)=>{const c=o.parentNode;return rt(o[r])?!1:c===n||gn(c)||e.isBlock(c)?!0:Pw(e,n,c,r)},kh=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",v=e.getRoot();if(un(o)&&!L_(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let w=u[f];w;w=w[f]){const _=un(w)&&!Pw(e,v,w,f);if(!Pp(w)&&!H_(w)&&!L_(w,_))return u}if(u===v||u.parentNode===v){o=u;break}u=u.parentNode}return o},cb=e=>Pp(e.parentNode)||Pp(e),_h=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:v}=n;const w=o[0];return Mn(c)&&c.hasChildNodes()&&(c=og(c,u),un(c)&&(u=0)),Mn(f)&&f.hasChildNodes()&&(f=og(f,n.collapsed?v:v-1),un(f)&&(v=f.data.length)),c=PE(e,c),f=PE(e,f),cb(c)&&(c=Pp(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,un(c)&&(u=n.collapsed?c.length:0)),cb(f)&&(f=Pp(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,un(f)&&(v=n.collapsed?0:f.length)),n.collapsed&&(ab(e,e.getRoot(),c,u,!0,r).each(({container:H,offset:U})=>{c=H,u=U}),ab(e,e.getRoot(),f,v,!1,r).each(({container:H,offset:U})=>{f=H,v=U})),(_c(w)||w.block_expand)&&((!_c(w)||!un(c)||u===0)&&(c=kh(e,o,c,u,!0)),(!_c(w)||!un(f)||v===f.data.length)&&(f=kh(e,o,f,v,!1))),Bw(w)&&(c=Oc(e,o,n,c,"previousSibling"),f=Oc(e,o,n,f,"nextSibling")),(ff(w)||vu(w))&&(c=yu(e,o,c,"previousSibling"),f=yu(e,o,f,"nextSibling"),ff(w)&&(e.isBlock(c)||(c=kh(e,o,c,u,!0),un(c)&&(u=0)),e.isBlock(f)||(f=kh(e,o,f,v,!1),un(f)&&(v=f.data.length)))),Mn(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Mn(f)&&f.parentNode&&(v=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:v}},ib=(e,n,o)=>{var r;const c=n.startOffset,u=og(n.startContainer,c),f=n.endOffset,v=og(n.endContainer,f-1),w=be=>{const Me=be[0];un(Me)&&Me===u&&c>=Me.data.length&&be.splice(0,1);const qe=be[be.length-1];return f===0&&be.length>0&&qe===v&&un(qe)&&be.splice(be.length-1,1),be},_=(be,Me,qe)=>{const Ze=[];for(;be&&be!==qe;be=be[Me])Ze.push(be);return Ze},P=(be,Me)=>e.getParent(be,qe=>qe.parentNode===Me,Me),H=(be,Me,qe)=>{const Ze=qe?"nextSibling":"previousSibling";for(let bt=be,Jt=bt.parentNode;bt&&bt!==Me;bt=Jt){Jt=bt.parentNode;const yn=_(bt===be?bt:bt[Ze],Ze);yn.length&&(qe||yn.reverse(),o(w(yn)))}};if(u===v)return o(w([u]));const U=(r=e.findCommonAncestor(u,v))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,v))return H(u,U,!0);if(e.isChildOf(v,u))return H(v,U);const oe=P(u,U)||u,ge=P(v,U)||v;H(u,oe,!0);const ce=_(oe===u?oe:oe.nextSibling,"nextSibling",ge===v?ge.nextSibling:ge);ce.length&&o(w(ce)),H(v,ge)},IE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],z_=e=>Js(e)&&Xf(e)===yc,V_=(e,n,o,r)=>xc(n).fold(()=>"skipping",c=>r==="br"||z_(n)?"valid":Ik(n)?"existing":bu(n.dom)?"caret":G(IE,u=>Ol(n,u))?"valid-block":!wg(e,o,r)||!wg(e,fe(c),o)?"invalid-child":"valid"),$p=(e,n)=>{const o=_h(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Dh=(e,n,o,r,c,u)=>{const{uid:f=n,...v}=o;Dl(e,gp()),or(e,`${hp()}`,f),or(e,`${gm()}`,r);const{attributes:w={},classes:_=[]}=c(f,v);if(Sc(e,w),OF(e,_),u){_.length>0&&or(e,`${Kf()}`,_.join(","));const P=xo(w);P.length>0&&or(e,`${hm()}`,P.join(","))}},$w=e=>{Ou(e,gp()),br(e,`${hp()}`),br(e,`${gm()}`),br(e,`${ih()}`);const n=Kr(e,`${hm()}`).map(r=>r.split(",")).getOr([]),o=Kr(e,`${Kf()}`).map(r=>r.split(",")).getOr([]);L(n,r=>br(e,r)),M1(e,o),br(e,`${Kf()}`),br(e,`${hm()}`)},Iw=(e,n,o,r,c)=>{const u=Fe.fromTag("span",e);return Dh(u,n,o,r,c,!1),u},El=(e,n,o,r,c,u)=>{const f=[],v=Iw(e.getDoc(),o,u,r,c),w=qc(),_=()=>{w.clear()},P=()=>w.get().getOrThunk(()=>{const ge=Yf(v);return f.push(ge),w.set(ge),ge}),H=ge=>{L(ge,U)},U=ge=>{switch(V_(e,ge,"span",fe(ge))){case"invalid-child":{_();const be=ja(ge);H(be),_();break}case"valid-block":{_(),Dh(ge,o,u,r,c,!0);break}case"valid":{const be=P();vd(ge,be);break}}},oe=ge=>{const ce=le(ge,Fe.fromDom);H(ce)};return ib(e.dom,n,ge=>{_(),oe(ge)}),f},wm=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Bp(e).length>0,v=C0("mce-annotation");if(u.collapsed&&!f&&$p(e,u),c.getRng().collapsed&&!f){const w=Iw(e.getDoc(),v,r,n,o.decorate);Pu(w,za),c.getRng().insertNode(w.dom),c.select(w.dom)}else Cv(c,!1,()=>{yv(e,w=>{El(e,w,v,n,o.decorate,r)})})})},Ov=e=>{const n=wC();y0(e,n);const o=CC(e,n),r=ia("span"),c=u=>{L(u,f=>{r(f)?Ki(f):$w(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(v=>{wm(e,u,v,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{uh(e,V.some(u)).each(({elements:f})=>{const v=e.selection.getBookmark();c(f),e.selection.moveToBookmark(v)})},removeAll:u=>{const f=e.selection.getBookmark();on(dx(e,u),(v,w)=>{c(v)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=dx(e,u);return Zo(f,v=>le(v,w=>w.dom))}}},qu=e=>({getBookmark:_e(OE,e),moveToBookmark:_e(df,e)});qu.isBookmarkNode=Ll;const Rv=(e,n,o)=>o.collapsed?!1:G(o.getClientRects(),r=>vx(r,e,n)),U_=(e,n)=>e.dispatch("PreProcess",n),Fv=(e,n)=>e.dispatch("PostProcess",n),Nv=e=>{e.dispatch("remove")},W_=e=>{e.dispatch("detach")},Z_=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},j_=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},G_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Bv=e=>{e.dispatch("PreInit")},LE=e=>{e.dispatch("PostRender")},q_=e=>{e.dispatch("Init")},Mv=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Qc=(e,n,o)=>{e.dispatch(n,o)},Cu=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Hl=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Pv=(e,n)=>e.dispatch("BeforeSetContent",n),lb=(e,n)=>e.dispatch("SetContent",n),PF=(e,n)=>e.dispatch("BeforeGetContent",n),ub=(e,n)=>e.dispatch("GetContent",n),K_=(e,n)=>{e.dispatch("AutocompleterStart",n)},HE=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},zE=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},VE=e=>{e.dispatch("AutocompleterEnd")},Y_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),UE=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),$v=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),WE=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),mn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||mn.metaKeyPressed(e),metaKeyPressed:e=>Ie.os.isMacOS()||Ie.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},zl="data-mce-selected",ZE="table,img,figure.image,hr,video,span.mce-preview-object,details",Lw=Math.abs,db=Math.round,Oh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Hw=e=>e.type==="longpress"||e.type.indexOf("touch")===0,mb=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,v,w,_,P,H,U,oe,ge,ce,be,Me,qe,Ze,bt,Jt,yn;const In=Pn=>rt(Pn)&&(sp(Pn)||o.is(Pn,"figure.image")),Pt=Pn=>Gc(Pn)||o.hasClass(Pn,"mce-preview-object"),At=(Pn,gs)=>{if(Hw(Pn)){const ws=Pn.touches[0];return In(Pn.target)&&!Rv(ws.clientX,ws.clientY,gs)}else return In(Pn.target)&&!Rv(Pn.clientX,Pn.clientY,gs)},Kt=Pn=>{const gs=Pn.target;At(Pn,n.selection.getRng())&&!Pn.isDefaultPrevented()&&n.selection.select(gs)},qn=Pn=>o.hasClass(Pn,"mce-preview-object")&&rt(Pn.firstElementChild)?[Pn,Pn.firstElementChild]:o.is(Pn,"figure.image")?[Pn.querySelector("img")]:[Pn],uo=Pn=>{const gs=Pl(n);return!gs||Pn.getAttribute("data-mce-resize")==="false"||Pn===n.getBody()?!1:o.hasClass(Pn,"mce-preview-object")&&rt(Pn.firstElementChild)?Ol(Fe.fromDom(Pn.firstElementChild),gs):Ol(Fe.fromDom(Pn),gs)},ps=(Pn,gs)=>{if(Pt(gs))return Pn.create("img",{src:Ie.transparentSrc});if(iu(gs)){const Bc=bo(_.name,"n")?to:Qo,er=gs.cloneNode(!0);return Bc(Pn.select("tr",er)).each(wc=>{const Wd=Pn.select("td,th",wc);Pn.setStyle(wc,"height",null),L(Wd,Af=>Pn.setStyle(Af,"height",null))}),er}else return gs.cloneNode(!0)},Cs=(Pn,gs,ws)=>{if(rt(ws)){const Bc=qn(Pn);L(Bc,er=>{er.style[gs]||!n.schema.isValid(er.nodeName.toLowerCase(),gs)?o.setStyle(er,gs,ws):o.setAttrib(er,gs,""+ws)})}},Xs=(Pn,gs,ws)=>{Cs(Pn,"width",gs),Cs(Pn,"height",ws)},fr=Pn=>{let gs,ws,Bc,er,wc;gs=Pn.screenX-H,ws=Pn.screenY-U,Ze=gs*_[2]+ce,bt=ws*_[3]+be,Ze=Ze<5?5:Ze,bt=bt<5?5:bt,(In(f)||Pt(f))&&W0(n)!==!1?Bc=!mn.modifierPressed(Pn):Bc=mn.modifierPressed(Pn),Bc&&(Lw(gs)>Lw(ws)?(bt=db(Ze*Me),Ze=db(bt/Me)):(Ze=db(bt/Me),bt=db(Ze*Me))),Xs(v,Ze,bt),er=_.startPos.x+gs,wc=_.startPos.y+ws,er=er>0?er:0,wc=wc>0?wc:0,o.setStyles(w,{left:er,top:wc,display:"block"}),w.innerHTML=Ze+" &times; "+bt,_[2]<0&&v.clientWidth<=Ze&&o.setStyle(v,"left",oe+(ce-Ze)),_[3]<0&&v.clientHeight<=bt&&o.setStyle(v,"top",ge+(be-bt)),gs=u.scrollWidth-Jt,ws=u.scrollHeight-yn,gs+ws!==0&&o.setStyles(w,{left:er-gs,top:wc-ws}),qe||(j_(n,f,ce,be,"corner-"+_.name),qe=!0)},Oa=()=>{const Pn=qe;qe=!1,Pn&&(Cs(f,"width",Ze),Cs(f,"height",bt)),o.unbind(r,"mousemove",fr),o.unbind(r,"mouseup",Oa),c!==r&&(o.unbind(c,"mousemove",fr),o.unbind(c,"mouseup",Oa)),o.remove(v),o.remove(w),o.remove(P),dc(f),Pn&&(G_(n,f,Ze,bt,"corner-"+_.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},dc=Pn=>{Nn();const gs=o.getPos(Pn,u),ws=gs.x,Bc=gs.y,er=Pn.getBoundingClientRect(),wc=er.width||er.right-er.left,Wd=er.height||er.bottom-er.top;f!==Pn&&(En(),f=Pn,Ze=bt=0);const Af=n.dispatch("ObjectSelected",{target:Pn});uo(Pn)&&!Af.isDefaultPrevented()?on(Oh,(il,ql)=>{const id=ld=>{const mo=qn(f)[0];H=ld.screenX,U=ld.screenY,ce=mo.clientWidth,be=mo.clientHeight,Me=be/ce,_=il,_.name=ql,_.startPos={x:wc*il[0]+ws,y:Wd*il[1]+Bc},Jt=u.scrollWidth,yn=u.scrollHeight,P=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(P,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=ps(o,f),o.addClass(v,"mce-clonedresizable"),o.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",o.setStyles(v,{left:ws,top:Bc,margin:0}),Xs(v,wc,Wd),v.removeAttribute(zl),u.appendChild(v),o.bind(r,"mousemove",fr),o.bind(r,"mouseup",Oa),c!==r&&(o.bind(c,"mousemove",fr),o.bind(c,"mouseup",Oa)),w=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ce+" &times; "+be)};let Kl=o.get("mceResizeHandle"+ql);Kl&&o.remove(Kl),Kl=o.add(u,"div",{id:"mceResizeHandle"+ql,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ql+"-resize; margin:0; padding:0"}),o.bind(Kl,"mousedown",ld=>{ld.stopImmediatePropagation(),ld.preventDefault(),id(ld)}),il.elm=Kl,o.setStyles(Kl,{left:wc*il[0]+ws-Kl.offsetWidth/2,top:Wd*il[1]+Bc-Kl.offsetHeight/2})}):En(!1)},Cr=N1(dc,0),En=(Pn=!0)=>{Cr.cancel(),Nn(),f&&Pn&&f.removeAttribute(zl),on(Oh,(gs,ws)=>{const Bc=o.get("mceResizeHandle"+ws);Bc&&(o.unbind(Bc),o.remove(Bc))})},co=(Pn,gs)=>o.isChildOf(Pn,gs),Us=Pn=>{if(qe||n.removed||n.composing)return;const gs=Pn.type==="mousedown"?Pn.target:e.getNode(),ws=ru(Fe.fromDom(gs),ZE).map(er=>er.dom).filter(er=>o.isEditable(er.parentElement)||er.nodeName==="IMG"&&o.isEditable(er)).getOrUndefined(),Bc=rt(ws)?o.getAttrib(ws,zl,"1"):"1";if(L(o.select(`img[${zl}],hr[${zl}]`),er=>{er.removeAttribute(zl)}),rt(ws)&&co(ws,u)&&n.hasFocus()){So();const er=e.getStart(!0);if(co(er,ws)&&co(e.getEnd(!0),ws)){o.setAttrib(ws,zl,Bc),Cr.throttle(ws);return}}En()},Nn=()=>{on(Oh,Pn=>{Pn.elm&&(o.unbind(Pn.elm),delete Pn.elm)})},So=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{So(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Us),n.on("keyup compositionend",Pn=>{f&&f.nodeName==="TABLE"&&Us(Pn)}),n.on("hide blur",En),n.on("contextmenu longpress",Kt,!0)}),n.on("remove",Nn),{isResizable:uo,showResizeRect:dc,hideResizeRect:En,updateResizeRect:Us,destroy:()=>{Cr.cancel(),f=v=P=null}}},jE=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},X_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},zw=(e,n,o)=>{const r=e.document.createRange();return jE(r,n),X_(r,o),r},fb=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Sg=Od.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),GE=(e,n,o)=>n(Fe.fromDom(o.startContainer),o.startOffset,Fe.fromDom(o.endContainer),o.endOffset),qE=(e,n)=>n.match({domRange:o=>({ltr:ve(o),rtl:V.none}),relative:(o,r)=>({ltr:Ft(()=>zw(e,o,r)),rtl:Ft(()=>V.some(zw(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Ft(()=>fb(e,o,r,c,u)),rtl:Ft(()=>V.some(fb(e,c,u,o,r)))})}),J_=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Sg.rtl(Fe.fromDom(c.endContainer),c.endOffset,Fe.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>GE(e,Sg.ltr,o)):GE(e,Sg.ltr,o)},Vw=(e,n)=>{const o=qE(e,n);return J_(e,o)};Sg.ltr,Sg.rtl;const Tl={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},wi=(e,n,o)=>{var r;return V.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(c=>{if(c.offsetNode===null)return V.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),V.some(u)})},Ip=(e,n,o)=>{var r;return V.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},$F=(e,n,o)=>e.caretPositionFromPoint?wi(e,n,o):e.caretRangeFromPoint?Ip(e,n,o):V.none(),e3=(e,n,o)=>{const r=e.document;return $F(r,n,o).map(c=>Tl.create(Fe.fromDom(c.startContainer),c.startOffset,Fe.fromDom(c.endContainer),c.endOffset))},Uw=Od.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Fs=(e,n,o,r)=>e.fold(n,o,r),t3=e=>e.fold(Rt,Rt,Rt),n3=Uw.before,KE=Uw.on,IF=Uw.after,Sm={before:n3,on:KE,after:IF,cata:Fs,getStart:t3},Iv=Od.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),o3=e=>Iv.exact(e.start,e.soffset,e.finish,e.foffset),s3=e=>e.match({domRange:n=>Fe.fromDom(n.startContainer),relative:(n,o)=>Sm.getStart(n),exact:(n,o,r,c)=>n}),YE=Iv.domRange,gb=Iv.relative,Ww=Iv.exact,XE=e=>{const n=s3(e);return tm(n)},LF=Tl.create,Lp={domRange:YE,relative:gb,exact:Ww,exactFromRange:o3,getWin:XE,range:LF},Zw=(e,n)=>{const o=fe(e);return o==="input"?Sm.after(e):I(["br","img"],o)?n===0?Sm.before(e):Sm.after(e):Sm.on(e,n)},HF=(e,n)=>{const o=e.fold(Sm.before,Zw,Sm.after),r=n.fold(Sm.before,Zw,Sm.after);return Lp.relative(o,r)},JE=(e,n,o,r)=>{const c=Zw(e,n),u=Zw(o,r);return Lp.relative(c,u)},r3=e=>e.match({domRange:n=>{const o=Fe.fromDom(n.startContainer),r=Fe.fromDom(n.endContainer);return JE(o,n.startOffset,r,n.endOffset)},relative:HF,exact:JE}),l=(e,n)=>{const r=document.createDocumentFragment();return L(e,c=>{r.appendChild(c.dom)}),Fe.fromDom(r)},m=e=>{const n=Lp.getWin(e).dom,o=(c,u,f,v)=>fb(n,c,u,f,v),r=r3(e);return Vw(n,r).match({ltr:o,rtl:o})},b=(e,n,o)=>e3(e,n,o),y=(e,n,o)=>{const r=tm(Fe.fromDom(o));return b(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},k=(e,n)=>rt(e)&&rt(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,B=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Z=(e,n,o)=>B(e,n,o)!==null,ne=(e,n,o)=>Z(e,n,r=>r.nodeName===o),he=(e,n)=>yl(e)&&!Z(e,n,bu),Pe=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Ec(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(zs(u))return!0}return!1},ft=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},fn=(e,n)=>{let o=n;for(;o&&o!==e;){if(Vs(o))return!0;o=o.parentNode}return!1},Fn=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),v=c.parentNode;let w,_;if(!v)return V.none();const P=e.getParent(v,e.isBlock)||u;if(r&&zs(c)&&n&&e.isEmpty(P))return V.some(Mt(v,e.nodeIndex(c)));const H=new Ec(c,P);for(;_=H[r?"prev":"next"]();){if(e.getContentEditableParent(_)==="false"||he(_,u))return V.none();if(un(_)&&_.data.length>0)return ne(_,u,"A")?V.none():V.some(Mt(_,r?_.data.length:0));if(e.isBlock(_)||f[_.nodeName.toLowerCase()])return V.none();w=_}return sc(w)?V.none():o&&w?V.some(Mt(w,0)):V.none()},kn=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,v=o?r.startContainer:r.endContainer,w=o?r.startOffset:r.endOffset;const _=Mn(v)&&w===v.childNodes.length,P=e.schema.getNonEmptyElements();let H=o;if(yl(v))return V.none();if(Mn(v)&&w>v.childNodes.length-1&&(H=!1),If(v)&&(v=c,w=0),v===c){if(H&&(u=v.childNodes[w>0?w-1:0],u&&(yl(u)||P[u.nodeName]||iu(u))))return V.none();if(v.hasChildNodes()){if(w=Math.min(!H&&w>0?w-1:w,v.childNodes.length-1),v=v.childNodes[w],w=un(v)&&_?v.data.length:0,!n&&v===c.lastChild&&iu(v)||fn(c,v)||yl(v)||Xi(v))return V.none();if(v.hasChildNodes()&&!iu(v)){u=v;const U=new Ec(v,c);do{if(Vs(u)||yl(u)){f=!1;break}if(un(u)&&u.data.length>0){w=H?0:u.data.length,v=u,f=!0;break}if(P[u.nodeName.toLowerCase()]&&!Va(u)){w=e.nodeIndex(u),v=u.parentNode,H||w++,f=!0;break}}while(u=H?U.next():U.prev())}}}return n&&(un(v)&&w===0&&Fn(e,_,n,!0,v).each(U=>{v=U.container(),w=U.offset(),f=!0}),Mn(v)&&(u=v.childNodes[w],u||(u=v.childNodes[w-1]),u&&zs(u)&&!ft(u,"A")&&!Pe(e,u,!1)&&!Pe(e,u,!0)&&Fn(e,_,n,!0,u).each(U=>{v=U.container(),w=U.offset(),f=!0}))),H&&!n&&un(v)&&w===v.data.length&&Fn(e,_,n,!1,v).each(U=>{v=U.container(),w=U.offset(),f=!0}),f&&v?V.some(Mt(v,w)):V.none()},Cn=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Mt.fromRangeStart(n);return kn(e,o,!0,r).each(u=>{(!o||!Mt.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||kn(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),k(n,r)?V.none():V.some(r)},Xn=(e,n)=>e.splitText(n),an=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&un(n)){if(o>0&&o<n.data.length)if(r=Xn(n,o),n=r.previousSibling,c>o){c=c-o;const u=Xn(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(un(n)&&o>0&&o<n.data.length&&(n=Xn(n,o),o=0),un(r)&&c>0&&c<r.data.length){const u=Xn(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},bn=e=>({walk:(u,f)=>ib(e,u,f),split:an,expand:(u,f={type:"word"})=>{if(f.type==="word"){const v=_h(e,u,[{inline:"span"}]),w=e.createRng();return w.setStart(v.startContainer,v.startOffset),w.setEnd(v.endContainer,v.endOffset),w}return u},normalize:u=>Cn(e,u).fold(Ne,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});bn.compareRanges=k,bn.getCaretRangeFromPoint=y,bn.getSelectedNode=Cl,bn.getNode=og;const Po=((e,n)=>{const o=(v,w)=>{if(!Ro(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);const _=v.dom;Bu(_)&&(_.style[e]=w+"px")},r=v=>{const w=n(v);if(w<=0||w===null){const _=Ma(v,e);return parseFloat(_)||0}return w},c=r,u=(v,w)=>Je(w,(_,P)=>{const H=Ma(v,P),U=H===void 0?0:parseInt(H,10);return isNaN(U)?_:_+U},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(v,w,_)=>{const P=u(v,_);return w>P?w-P:0}}})("height",e=>{const n=e.dom;return hd(e)?n.getBoundingClientRect().height:n.offsetHeight}),ao=e=>Po.get(e),sa=()=>Fe.fromDom(document),rr=(e,n)=>e.view(n).fold(ve([]),r=>{const c=e.owner(r),u=rr(e,c);return[r].concat(u)}),_a=(e,n)=>{const o=n.owner(e);return rr(n,o)};var Rh=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?V.none():V.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(Fe.fromDom)},owner:e=>Nu(e)});const Fh=e=>{const n=sa(),o=_o(n),r=_a(e,Rh),c=Xo(e),u=lt(r,(f,v)=>{const w=Xo(v);return{left:f.left+w.left,top:f.top+w.top}},{left:0,top:0});return Ee(u.left+c.left+o.left,u.top+c.top+o.top)},Qs=e=>fe(e)==="textarea",Rc=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Ii=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Ku=(e,n)=>{const o=ja(e);if(o.length===0||Qs(e))return{element:e,offset:n};if(n<o.length&&!Qs(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Qs(r)?{element:e,offset:n}:fe(r)==="img"?{element:r,offset:1}:Js(r)?{element:r,offset:Xf(r).length}:{element:r,offset:ja(r).length}}},Ul=(e,n)=>{const o=Eo(e),r=ao(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Hp=(e,n)=>{const o=Ku(e,n),r=Fe.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+yc+"</span>");return Pc(o.element,r),Ul(r,()=>mr(r))},Jo=e=>Ul(Fe.fromDom(e),je),Wl=(e,n,o,r)=>{Is(e,(c,u)=>xm(e,n,o,r),o)},Yu=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(Rc(e,u))return;const f=_o(n).top;o(e,n,f,r,c),Ii(e,u)},xm=(e,n,o,r)=>{const c=Fe.fromDom(e.getBody()),u=Fe.fromDom(e.getDoc());Ga(c);const f=Hp(Fe.fromDom(o.startContainer),o.startOffset);Yu(e,u,n,f,r),f.cleanup()},lc=(e,n,o,r)=>{const c=Fe.fromDom(e.getDoc());Yu(e,c,o,Jo(n),r)},Is=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(Fe.fromDom(r),Fe.fromDom(u));const v=e.dom.createRng();v.setStart(r,c),v.setEnd(u,f),e.selection.setRng(o)},jw=(e,n,o,r,c)=>{const u=n.pos;if(r)To(u.left,u.top,c);else{const f=u.top-o+n.height;To(-e.getBody().getBoundingClientRect().left,f,c)}},Gw=(e,n,o,r,c,u)=>{const f=r+o,v=c.pos.top,w=c.bottom,_=w-v>=r;v<o?jw(e,c,r,u!==!1,n):v>f?jw(e,c,r,_?u!==!1:u===!0,n):w>f&&!_&&jw(e,c,r,u===!0,n)},Lv=(e,n,o,r,c)=>{const u=tm(n).dom.innerHeight;Gw(e,n,o,u,r,c)},QE=(e,n,o,r,c)=>{const u=tm(n).dom.innerHeight;Gw(e,n,o,u,r,c);const f=Fh(r.element),v=cu(window);f.top<v.y?Er(r.element,c!==!1):f.top>v.bottom&&Er(r.element,c===!0)},hf=(e,n,o)=>Wl(e,Lv,n,o),Nh=(e,n,o)=>lc(e,n,Lv,o),zp=(e,n,o)=>Wl(e,QE,n,o),G8=(e,n,o)=>lc(e,n,QE,o),q8=(e,n,o)=>{(e.inline?Nh:G8)(e,n,o)},qw=(e,n,o)=>{(e.inline?hf:zp)(e,n,o)},Hv=(e,n=!1)=>e.dom.focus({preventScroll:n}),hb=e=>{const n=ul(e).dom;return e.dom===n.activeElement},a3=(e=sa())=>V.from(e.dom.activeElement).map(Fe.fromDom),zF=e=>a3(ul(e)).filter(n=>e.dom.contains(n.dom)),VF=(e,n)=>{const o=Js(n)?Xf(n).length:ja(n).length+1;return e>o?o:e<0?0:e},K8=e=>Lp.range(e.start,VF(e.soffset,e.start),e.finish,VF(e.foffset,e.finish)),UF=(e,n)=>!im(n.dom)&&(Ea(e,n)||os(e,n)),c3=e=>n=>UF(e,n.start)&&UF(e,n.finish),xK=e=>e.inline||Ie.browser.isFirefox(),Y8=e=>Lp.range(Fe.fromDom(e.startContainer),e.startOffset,Fe.fromDom(e.endContainer),e.endOffset),WF=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?V.none():V.from(n.getRangeAt(0))).map(Y8)},i3=e=>{const n=tm(e);return WF(n.dom).filter(c3(e))},l3=(e,n)=>V.from(n).filter(c3(e)).map(K8),u3=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),V.some(n)}catch{return V.none()}},Kw=e=>{const n=xK(e)?i3(Fe.fromDom(e.getBody())):V.none();e.bookmark=n.isSome()?n:e.bookmark},eT=e=>(e.bookmark?e.bookmark:V.none()).bind(o=>l3(Fe.fromDom(e.getBody()),o)).bind(u3),ZF=e=>{eT(e).each(n=>e.selection.setRng(n))},jF={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},GF=(e,n)=>(Ro(n)||(n=0),setTimeout(e,n)),X8=(e,n)=>(Ro(n)||(n=0),setInterval(e,n)),Xu={setEditorTimeout:(e,n,o)=>GF(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=X8(()=>{e.removed?clearInterval(r):n()},o);return r}},qF=e=>e.type==="nodechange"&&e.selectionChange,KF=(e,n)=>{const o=()=>{n.throttle()};jr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{jr.DOM.unbind(document,"mouseup",o)})},YF=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},XF=(e,n)=>{YF(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{qF(o)||Kw(e)})},J8=e=>{const n=N1(()=>{Kw(e)},0);e.on("init",()=>{e.inline&&KF(e,n),XF(e,n)}),e.on("remove",()=>{n.cancel()})};let zv;const m3=jr.DOM,Q8=e=>Mn(e)&&jF.isEditorUIElement(e),f3=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},tT=(e,n)=>{const o=Z1(e);return m3.getParent(n,c=>Q8(c)||(o?e.dom.is(c,o):!1))!==null},g3=e=>{try{const n=ul(Fe.fromDom(e.getElement()));return a3(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},eL=(e,n)=>{const o=n.editor;J8(o);const r=(c,u)=>{if(Q0(c)&&c.inline!==!0){const f=Fe.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;f3(g3(o))&&r(o,Dl),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Xu.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!f3(g3(o))||c!==o)&&r(o,Ou),!tT(o,g3(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),zv||(zv=c=>{const u=e.activeEditor;u&&Nf(c).each(f=>{const v=f;v.ownerDocument===document&&v!==document.body&&!tT(u,v)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},m3.bind(document,"focusin",zv))},nT=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&zv&&(m3.unbind(document,"focusin",zv),zv=null)},JF=e=>{e.on("AddEditor",_e(eL,e)),e.on("RemoveEditor",_e(nT,e))},tL=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),QF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,eN=e=>e.collapsed?V.from(og(e.startContainer,e.startOffset)).map(Fe.fromDom):V.none(),nL=(e,n)=>eN(n).bind(o=>gx(o)?V.some(o):Ea(e,o)?V.none():V.some(e)),tN=(e,n)=>{nL(Fe.fromDom(e.getBody()),n).bind(o=>Jc(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},oT=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},oL=e=>hb(e)||zF(e).isSome(),sL=e=>rt(e.iframeElement)&&hb(Fe.fromDom(e.iframeElement)),nN=e=>{const n=e.getBody();return n&&oL(Fe.fromDom(n))},oN=e=>{const n=ul(Fe.fromDom(e.getElement()));return a3(n).filter(o=>!f3(o.dom)&&tT(e,o.dom)).isSome()},Bh=e=>e.inline?nN(e):sL(e),sN=e=>Bh(e)||oN(e),rL=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const c=f=>{eT(f).each(v=>{f.selection.setRng(v),r=v})};!Bh(e)&&e.hasEditableRoot()&&c(e);const u=tL(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){QF(e,u)||oT(o),oT(u),e.hasEditableRoot()||c(e),tN(e,r),Yw(e);return}e.inline||(Ie.browser.isOpera()||oT(o),e.getWin().focus()),(Ie.browser.isFirefox()||e.inline)&&(oT(o),tN(e,r)),Yw(e)},Yw=e=>e.editorManager.setActive(e),aL=(e,n)=>{e.removed||(n?Yw(e):rL(e))},h3=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),p3=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return V.from(u).map(Fe.fromDom).map(v=>!r||!n.collapsed?oi(v,c(v,f)).getOr(v):v).bind(v=>Bs(v)?V.some(v):xc(v).filter(Bs)).map(v=>v.dom).getOr(e)},b3=(e,n,o=!1)=>p3(e,n,!0,o,(r,c)=>Math.min(om(r),c)),rN=(e,n,o=!1)=>p3(e,n,!1,o,(r,c)=>c>0?c-1:c),aN=(e,n)=>{const o=e;for(;e&&un(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},cL=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),un(o)&&un(r)&&(o.length===c?o=aN(o.nextSibling,!0):o=o.parentNode,u===0?r=aN(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const v=un(f)?f.parentNode:f;return dl(v)?v:e},iL=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||b3(u,n,n.collapsed),e.isBlock),v=e.getParent(r||rN(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&v&&f!==v){let w;const _=new Ec(f,u);for(;(w=_.next())&&w!==v;)e.isBlock(w)&&c.push(w)}return v&&f!==v&&v!==u&&c.push(v),c},sT=(e,n,o)=>V.from(n).bind(r=>V.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(_w(e,f,r,!0),_w(e,f,r,!1)),f})),rT=(e,n)=>le(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),cN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Xw=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},iN=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Yi(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},lN=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Al{static create(n,o){const r=new Al(n,cN[n]||1);return o&&on(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ie(n))return rt(n)&&on(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Al(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const v=r[u];v.name!=="id"&&(c[c.length]={name:v.name,value:v.value},c.map[v.name]=v.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=Xw(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=Xw(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(lN(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||lN(f))return!1}if(f.type===8||f.type===3&&!iN(f)||f.type===3&&f.parent&&o[f.parent.name]&&Yi((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=Xw(f,u));return!0}walk(n){return Xw(this,null,n)}}const lL=Qt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),uN=e=>ie(e.nodeValue)&&e.nodeValue.includes(yc),dN=e=>`${e.length===0?"":`${le(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,uL=(e,n)=>n.querySelectorAll(dN(e)),mN=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>uN(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),fN=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(uN(n)){const o=n.parentNode;return o&&Qn(lL,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),dL=e=>mN(e).nextNode()!==null,mL=e=>fN(e).nextNode()!==null,fL=(e,n)=>n.querySelector(dN(e))!==null,gL=(e,n)=>{L(uL(e,n),o=>{const r=Fe.fromDom(o);nc(r,"data-mce-bogus")==="all"?mr(r):L(e,c=>{Br(r,c)&&br(r,c)})})},Jw=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},gN=T(Jw,mN),hN=T(Jw,fN),pN=(e,n)=>{const o=[{condition:_e(fL,n),action:_e(gL,n)},{condition:dL,action:gN},{condition:mL,action:hN}];let r=e,c=!1;return L(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},bN=e=>{const n=$c(e,"[data-mce-bogus]");L(n,o=>{nc(o,"data-mce-bogus")==="all"?mr(o):vl(o)?(Pc(o,Fe.fromText(tp)),mr(o)):Ki(o)})},vN=e=>{const n=$c(e,"input");L(n,o=>{br(o,"name")})},hL=(e,n)=>{const o=Kc(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},pL=(e,n)=>{const o=e.getDoc(),r=ul(Fe.fromDom(e.getBody())),c=Fe.fromTag("div",o);or(c,"data-mce-bogus","all"),Yo(c,{position:"fixed",left:"-9999999px",top:"0"}),Pu(c,n.innerHTML),bN(c),vN(c);const u=Xh(r);na(u,c);const f=Fi(c.dom.innerText);return mr(c),f},bL=(e,n,o)=>{let r;return n.format==="raw"?r=Qt.trim(Fi(pN(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=pL(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=hL(e,e.serializer.serialize(o,n)),n.format!=="text"&&!S0(Fe.fromDom(o))&&ie(r)?Qt.trim(r):r},yN=(e,n)=>V.from(e.getBody()).fold(ve(n.format==="tree"?new Al("body",11):""),o=>bL(e,n,o)),CN=Qt.makeMap,v3=e=>{const n=[];e=e||{};const o=e.indent,r=CN(e.indent_before||""),c=CN(e.indent_after||""),u=Td.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(v,w,_)=>{if(o&&r[v]&&n.length>0){const P=n[n.length-1];P.length>0&&P!==`
`&&n.push(`
`)}if(n.push("<",v),w)for(let P=0,H=w.length;P<H;P++){const U=w[P];n.push(" ",U.name,'="',u(U.value,!0),'"')}if(!_||f?n[n.length]=">":n[n.length]=" />",_&&o&&c[v]&&n.length>0){const P=n[n.length-1];P.length>0&&P!==`
`&&n.push(`
`)}},end:v=>{let w;n.push("</",v,">"),o&&c[v]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:(v,w)=>{v.length>0&&(n[n.length]=w?v:u(v))},cdata:v=>{n.push("<![CDATA[",v,"]]>")},comment:v=>{n.push("<!--",v,"-->")},pi:(v,w)=>{w?n.push("<?",v," ",u(w),"?>"):n.push("<?",v,"?>"),o&&n.push(`
`)},doctype:v=>{n.push("<!DOCTYPE",v,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Mh=(e={},n=mm())=>{const o=v3(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:w=>{var _;o.text((_=w.value)!==null&&_!==void 0?_:"",w.raw)},8:w=>{var _;o.comment((_=w.value)!==null&&_!==void 0?_:"")},7:w=>{o.pi(w.name,w.value)},10:w=>{var _;o.doctype((_=w.value)!==null&&_!==void 0?_:"")},4:w=>{var _;o.cdata((_=w.value)!==null&&_!==void 0?_:"")},11:w=>{let _=w;if(_=_.firstChild)do v(_);while(_=_.next)}};o.reset();const v=w=>{var _;const P=f[w.type];if(P)P(w);else{const H=w.name,U=H in n.getVoidElements();let oe=w.attributes;if(u&&oe&&oe.length>1){const ge=[];ge.map={};const ce=n.getElementRule(w.name);if(ce){for(let be=0,Me=ce.attributesOrder.length;be<Me;be++){const qe=ce.attributesOrder[be];if(qe in oe.map){const Ze=oe.map[qe];ge.map[qe]=Ze,ge.push({name:qe,value:Ze})}}for(let be=0,Me=oe.length;be<Me;be++){const qe=oe[be].name;if(!(qe in ge.map)){const Ze=oe.map[qe];ge.map[qe]=Ze,ge.push({name:qe,value:Ze})}}oe=ge}}if(o.start(H,oe,U),Ta(H))ie(w.value)&&o.text(w.value,!0),o.end(H);else if(!U){let ge=w.firstChild;if(ge){(H==="pre"||H==="textarea")&&ge.type===3&&((_=ge.value)===null||_===void 0?void 0:_[0])===`
`&&o.text(`
`,!0);do v(ge);while(ge=ge.next)}o.end(H)}}};return c.type===1&&!e.inner?v(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},wN=new Set;L(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{wN.add(n)});const SN=new Set;L(["background-color"],n=>{SN.add(n)});const xN=["font","text-decoration","text-emphasis"],vL=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Vv=(e,n)=>xo(vL(e,n)),yL=e=>wN.has(e),CL=e=>SN.has(e),EN=(e,n)=>G(Vv(e,n),o=>yL(o)),wL=(e,n)=>EN(e,n)&&G(Vv(e,n),o=>CL(o)),SL=e=>ke(e,n=>G(xN,o=>bo(n,o))),xL=(e,n,o)=>{const r=Vv(e,n),c=Vv(e,o),u=f=>{var v,w;const _=(v=e.getStyle(n,f))!==null&&v!==void 0?v:"",P=(w=e.getStyle(o,f))!==null&&w!==void 0?w:"";return fo(_)&&fo(P)&&_!==P};return G(r,f=>{const v=w=>G(w,_=>_===f);if(!v(c)&&v(xN)){const w=SL(c);return G(w,u)}else return u(f)})},TN=(e,n,o)=>V.from(o.container()).filter(un).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),y3=_e(TN,!0,Cg),C3=_e(TN,!1,Cg),EL=e=>{const n=e.container();return un(n)&&(n.data.length===0||RC(n.data)&&qu.isBookmarkNode(n.parentNode))},Vp=(e,n)=>o=>gw(e?0:-1,o).filter(n).isSome(),AN=e=>sp(e)&&Ma(Fe.fromDom(e),"display")==="block",kN=e=>Vs(e)&&!Qg(e),TL=Vp(!0,AN),yo=Vp(!1,AN),Uv=Vp(!0,Gc),Wv=Vp(!1,Gc),_N=Vp(!0,iu),Qw=Vp(!1,iu),Up=Vp(!0,kN),Wp=Vp(!1,kN),AL=e=>e.slice(0,-1),kL=(e,n,o)=>Ea(n,e)?AL(ou(e,r=>o(r)||os(r,n))):[],DN=(e,n)=>kL(e,n,Ne),Em=(e,n)=>[e].concat(DN(e,n)),aT=(e,n,o)=>Cw(e,n,o,EL),EK=e=>n=>e.isBlock(fe(n)),ON=(e,n,o)=>Wt(Em(Fe.fromDom(n.container()),e),EK(o)),Uo=(e,n,o,r)=>aT(e,n.dom,o).forall(c=>ON(n,o,r).fold(()=>!Il(c,o,n.dom),u=>!Il(c,o,n.dom)&&Ea(u,Fe.fromDom(c.container())))),RN=(e,n,o,r)=>ON(n,o,r).fold(()=>aT(e,n.dom,o).forall(c=>!Il(c,o,n.dom)),c=>aT(e,c.dom,o).isNone()),ts=_e(RN,!1),w3=_e(RN,!0),TK=_e(Uo,!1),AK=_e(Uo,!0),_L=e=>cv(e).exists(vl),S3=(e,n,o,r)=>{const c=ke(Em(Fe.fromDom(o.container()),n),f=>r.isBlock(fe(f))),u=to(c).getOr(n);return sl(e,u.dom,o).filter(_L)},FN=(e,n,o)=>cv(n).exists(vl)||S3(!0,e,n,o).isSome(),cT=(e,n,o)=>SE(n).exists(vl)||S3(!1,e,n,o).isSome(),NN=_e(S3,!1),$o=_e(S3,!0),BN=e=>Mt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),MN=(e,n,o)=>{const r=ke(Em(Fe.fromDom(n.container()),e),c=>o.isBlock(fe(c)));return to(r).getOr(e)},PN=(e,n,o)=>BN(n)?C3(n):C3(n)||xl(MN(e,n,o).dom,n).exists(C3),Zv=(e,n,o)=>BN(n)?y3(n):y3(n)||rl(MN(e,n,o).dom,n).exists(y3),$N=e=>I(["pre","pre-wrap"],e),x3=e=>cv(e).bind(n=>Yr(n,Bs)).exists(n=>$N(Ma(n,"white-space"))),DL=(e,n)=>xl(e.dom,n).isNone(),OL=(e,n)=>rl(e.dom,n).isNone(),IN=(e,n,o)=>DL(e,n)||OL(e,n)||ts(e,n,o)||w3(e,n,o)||cT(e,n,o)||FN(e,n,o),RL=e=>rt(e)&&Vs(e)&&bE(e),FL=(e,n)=>o=>RL(new Ec(o,e)[n]()),kK=(e,n)=>{const o=rl(e.dom,n).getOr(n),r=FL(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},NL=(e,n)=>{const o=xl(e.dom,n).getOr(n),r=FL(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},LN=(e,n,o)=>x3(n)?!1:IN(e,n,o)||PN(e,n,o)||Zv(e,n,o),e2=(e,n,o)=>x3(n)?!1:ts(e,n,o)||TK(e,n,o)||cT(e,n,o)||PN(e,n,o)||NL(e,n),BL=e=>{const n=e.container(),o=e.offset();return un(n)&&o<n.data.length?Mt(n,o+1):e},jv=(e,n,o)=>x3(n)?!1:w3(e,n,o)||AK(e,n,o)||FN(e,n,o)||Zv(e,n,o)||kK(e,n),E3=(e,n,o)=>e2(e,n,o)||jv(e,BL(n),o),ds=(e,n)=>xh(e.charAt(n)),T3=(e,n)=>Cg(e.charAt(n)),iT=e=>{const n=e.container();return un(n)&&no(n.data,za)},HN=e=>{const n=e.split("");return le(n,(o,r)=>xh(o)&&r>0&&r<n.length-1&&Ew(n[r-1])&&Ew(n[r+1])?" ":o).join("")},A3=(e,n,o,r)=>{const c=n.data,u=Mt(n,0);return!o&&ds(c,0)&&!E3(e,u,r)?(n.data=" "+c.slice(1),!0):o&&T3(c,0)&&e2(e,u,r)?(n.data=za+c.slice(1),!0):!1},zN=e=>{const n=e.data,o=HN(n);return o!==n?(e.data=o,!0):!1},k3=(e,n,o,r)=>{const c=n.data,u=Mt(n,c.length-1);return!o&&ds(c,c.length-1)&&!E3(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&T3(c,c.length-1)&&jv(e,u,r)?(n.data=c.slice(0,-1)+za,!0):!1},VN=(e,n,o)=>{const r=n.container();if(!un(r))return V.none();if(iT(n)){const c=A3(e,r,!1,o)||zN(r)||k3(e,r,!1,o);return qr(c,n)}else if(E3(e,n,o)){const c=A3(e,r,!0,o)||k3(e,r,!0,o);return qr(c,n)}else return V.none()},ML=e=>{const n=Fe.fromDom(e.getBody());e.selection.isCollapsed()&&VN(n,Mt.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},_3=(e,n,o,r)=>{if(o===0)return;const c=Fe.fromDom(e),u=Wr(c,_=>r.isBlock(fe(_))).getOr(c),f=e.data.slice(n,n+o),v=n+o>=e.data.length&&jv(u,Mt(e,e.data.length),r),w=n===0&&e2(u,Mt(e,0),r);e.replaceData(n,o,Rl(f,4,w,v))},lT=(e,n,o)=>{const r=e.data.slice(n),c=r.length-wa(r).length;_3(e,n,c,o)},D3=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-la(r).length;_3(e,n-c,c,o)},O3=(e,n,o,r,c=!0)=>{const u=la(e.data).length,f=c?e:n,v=c?n:e;return c?f.appendData(v.data):f.insertData(0,v.data),mr(Fe.fromDom(v)),r&&lT(f,u,o),f},PL=(e,n)=>{const o=e.container(),r=e.offset();return!Mt.isTextPosition(e)&&o===n.parentNode&&r>Mt.before(n).offset()},$L=(e,n)=>PL(n,e)?Mt(n.container(),n.offset()-1):n,IL=e=>un(e)?Mt(e,0):Mt.before(e),LL=e=>un(e)?Mt(e,e.data.length):Mt.after(e),UN=e=>Bl(e.previousSibling)?V.some(LL(e.previousSibling)):e.previousSibling?pu(e.previousSibling):V.none(),uT=e=>Bl(e.nextSibling)?V.some(IL(e.nextSibling)):e.nextSibling?Jc(e.nextSibling):V.none(),R3=(e,n)=>V.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>xl(e,Mt.before(o))).orThunk(()=>rl(e,Mt.after(n))),HL=(e,n)=>rl(e,Mt.after(n)).orThunk(()=>xl(e,Mt.before(n))),zL=(e,n)=>UN(n).orThunk(()=>uT(n)).orThunk(()=>R3(e,n)),VL=(e,n)=>uT(n).orThunk(()=>UN(n)).orThunk(()=>HL(e,n)),UL=(e,n,o)=>e?VL(n,o):zL(n,o),WL=(e,n,o)=>UL(e,n,o).map(_e($L,o)),WN=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},ZL=e=>n=>n.dom===e,jL=(e,n)=>n&&Qn(e.schema.getBlockElements(),fe(n)),ZN=(e,n,o)=>{if(Or(e,n)){const r=Fe.fromHtml('<br data-mce-bogus="1">');return o?L(ja(n),c=>{Mw(c)||mr(c)}):yd(n),na(n,r),V.some(Mt.before(r.dom))}else return V.none()},GL=(e,n,o,r)=>{const c=su(e).filter(Js),u=Wc(e).filter(Js);return mr(e),hc(c,u,n,(f,v,w)=>{const _=f.dom,P=v.dom,H=_.data.length;return O3(_,P,o,r),w.container()===P?Mt(_,H):w}).orThunk(()=>(r&&(c.each(f=>D3(f.dom,f.dom.length,o)),u.each(f=>lT(f.dom,0,o))),n))},qL=(e,n)=>Qn(e.schema.getTextInlineElements(),fe(n)),Nd=(e,n,o,r=!0,c=!1)=>{const u=WL(n,e.getBody(),o.dom),f=Wr(o,_e(jL,e),ZL(e.getBody())),v=GL(o,u,e.schema,qL(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(w=>ZN(e.schema,w,c)).fold(()=>{r&&WN(e,n,v)},w=>{r&&WN(e,n,V.some(w))})},KL=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,jN=e=>KL.test(e),pb=(e,n)=>Ol(Fe.fromDom(n),Wx(e))&&!zu(e.schema,n)&&e.dom.isEditable(n),GN=e=>{var n;return jr.DOM.getStyle(e,"direction",!0)==="rtl"||jN((n=e.textContent)!==null&&n!==void 0?n:"")},qN=(e,n,o)=>ke(jr.DOM.getParents(o.container(),"*",n),e),Ph=(e,n,o)=>{const r=qN(e,n,o);return V.from(r[r.length-1])},KN=(e,n,o)=>{const r=bg(n,e),c=bg(o,e);return rt(r)&&r===c},YN=e=>FC(e)||vp(e),Pa=(e,n)=>{const o=n.container(),r=n.offset();return e?of(o)?un(o.nextSibling)?Mt(o.nextSibling,0):Mt.after(o):FC(n)?Mt(o,r+1):n:of(o)?un(o.previousSibling)?Mt(o.previousSibling,o.previousSibling.data.length):Mt.before(o):vp(n)?Mt(o,r-1):n},XN=_e(Pa,!0),JN=_e(Pa,!1),QN=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},YL=e=>{e.execCommand("delete")},dT=e=>QN(e,"Delete"),Zp=e=>QN(e,"ForwardDelete"),XL=e=>n=>Hs(xc(n),e,os),JL=e=>Wu(e)||mh(e),Qr=(e,n)=>Ea(e,n)?Yr(n,JL,XL(e)):V.none(),Gv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},bb=(e,n,o)=>qo(Jc(o),pu(o),(r,c)=>{const u=Pa(!0,r),f=Pa(!1,c),v=Pa(!1,n);return e?rl(o,v).exists(w=>w.isEqual(f)&&n.isEqual(u)):xl(o,v).exists(w=>w.isEqual(u)&&n.isEqual(f))}).getOr(!0),eB=e=>(go(e)?su(e):gd(e)).bind(eB).orThunk(()=>V.some(e)),vb=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=eB(o).getOr(o),f=Fe.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Gv(e,r):Or(e.schema,f,{checkRootAsContent:!1})&&(hu(f),r&&e.selection.setCursorLocation(f.dom,0)),!os(o,f)){const v=Hs(xc(f),o)?[]:Um(f);L(v.concat(ja(o)),w=>{!os(w,f)&&!Ea(w,f)&&Or(e.schema,w)&&mr(w)})}},Bd=e=>n=>os(e,n),yb=e=>$c(e,"td,th"),Ar=(e,n)=>sb(Fe.fromDom(e),n),t2=e=>qo(e.startTable,e.endTable,(n,o)=>{const r=ep(n,u=>os(u,o)),c=ep(o,u=>os(u,n));return!r&&!c?e:{...e,startTable:r?V.none():e.startTable,endTable:c?V.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),tB=e=>t2(e),nB=(e,n)=>{const o=Ar(e.startContainer,n),r=Ar(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=qo(o,r,os).getOr(!1);return tB({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},n2=(e,n)=>({start:e,end:n}),F3=(e,n,o)=>({rng:e,table:n,cells:o}),Cb=Od.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),qv=(e,n)=>ru(Fe.fromDom(e),"td,th",n),o2=e=>!os(e.start,e.end),mT=(e,n)=>sb(e.start,n).bind(o=>sb(e.end,n).bind(r=>qr(os(o,r),o))),oB=(e,n)=>!o2(e)&&mT(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),sB=(e,n)=>{const o=qv(e.startContainer,n),r=qv(e.endContainer,n);return qo(o,r,n2)},rB=e=>n=>sb(n,e).bind(o=>Qo(yb(o)).map(r=>n2(n,r))),aB=e=>n=>sb(n,e).bind(o=>to(yb(o)).map(r=>n2(r,n))),fT=e=>n=>mT(n,e).map(o=>F3(n,o,yb(o))),wb=(e,n,o,r)=>{if(o.collapsed||!e.forall(o2))return V.none();if(n.isSameTable){const c=e.bind(fT(r));return V.some({start:c,end:c})}else{const c=qv(o.startContainer,r),u=qv(o.endContainer,r),f=c.bind(rB(r)).bind(fT(r)),v=u.bind(aB(r)).bind(fT(r));return V.some({start:f,end:v})}},N3=(e,n)=>wn(e,o=>os(o,n)),s2=e=>qo(N3(e.cells,e.rng.start),N3(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),QL=(e,n,o)=>e.exists(r=>oB(r,o)&&vv(r.start,n)),cB=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},iB=(e,n,o,r)=>wb(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=s2(c).getOr([]);if(u&&c.cells.length===f.length)return V.some(Cb.fullTable(c.table));if(f.length>0){if(u)return V.some(Cb.partialTable(f,V.none()));{const v=cB(o,n);return V.some(Cb.partialTable(f,V.some({...n,rng:v})))}}else return V.none()}),lB=(e,n,o,r)=>wb(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(s2).getOr([]),v=u.bind(s2).getOr([]);if(f.length>0&&v.length>0){const w=cB(o,n);return V.some(Cb.multiTable(f,v,w))}else return V.none()}),uB=(e,n)=>{const o=Bd(e),r=sB(n,o),c=nB(n,o);return QL(r,n,o)?r.map(u=>Cb.singleCellTable(n,u.start)):c.isMultiTable?lB(r,c,n,o):iB(r,c,n,o)},r2=e=>L(e,n=>{br(n,"contenteditable"),hu(n)}),dB=(e,n)=>V.from(e.dom.getParent(n,e.dom.isBlock)).map(Fe.fromDom),mB=(e,n,o)=>{o.each(r=>{n?mr(r):(hu(r),e.selection.setCursorLocation(r.dom,0))})},gT=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),hT(e,c,n,!1).each(u=>u())},B3=e=>{const n=Bp(e),o=Fe.fromDom(e.selection.getNode());eh(o.dom)&&Or(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&G(n,r=>os(r,o))&&or(o,"data-mce-selected","1")},M3=(e,n,o)=>V.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const v=dB(e,f?u.endContainer:u.startContainer);u.deleteContents(),mB(e,f,v.filter(_e(Or,e.schema)));const w=f?n[0]:n[n.length-1];return gT(e,w,r,f),Or(e.schema,w)?V.none():V.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);r2(c),B3(e)}),fB=(e,n,o,r)=>V.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];gT(e,u,c,!0),gT(e,f,c,!1);const v=Or(e.schema,u)?n:n.slice(1),w=Or(e.schema,f)?o:o.slice(0,-1);r2(v.concat(w)),r.deleteContents(),B3(e)}),hT=(e,n,o,r=!0)=>V.some(()=>{vb(e,n,o,r)}),gB=(e,n)=>V.some(()=>Nd(e,!1,n)),hB=(e,n,o)=>uB(n,o).bind(r=>r.fold(_e(hT,e),_e(gB,e),_e(M3,e),_e(fB,e))),pB=(e,n)=>a2(e,n),P3=(e,n,o,r)=>pT(n,r).fold(()=>hB(e,n,o),c=>pB(e,c)),bB=(e,n,o)=>{const r=Fe.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?M3(e,o,V.none()):P3(e,r,c,n)},$3=(e,n)=>Wt(Em(n,e),$1),pT=(e,n)=>Wt(Em(n,e),ia("caption")),vB=(e,n,o,r,c)=>Ch(o,e.getBody(),c).bind(u=>$3(n,Fe.fromDom(u.getNode())).bind(f=>os(f,r)?V.none():V.some(je))),a2=(e,n)=>V.some(()=>{hu(n),e.selection.setCursorLocation(n.dom,0)}),yB=(e,n,o,r)=>Jc(e.dom).bind(c=>pu(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),I3=(e,n)=>a2(e,n),bT=(e,n,o)=>pT(e,Fe.fromDom(o.getNode())).fold(()=>V.some(je),r=>qr(!os(r,n),je)),L3=(e,n,o,r,c)=>Ch(o,e.getBody(),c).fold(()=>V.some(je),u=>yB(r,o,c,u)?I3(e,r):bT(n,r,u)),vT=(e,n,o,r)=>{const c=Mt.fromRangeStart(e.selection.getRng());return $3(o,r).bind(u=>Or(e.schema,u,{checkRootAsContent:!1})?a2(e,u):vB(e,o,n,u,c))},CB=(e,n,o,r)=>{const c=Mt.fromRangeStart(e.selection.getRng());return Or(e.schema,r)?a2(e,r):L3(e,o,n,r,c)},c2=(e,n)=>e?_N(n):Qw(n),H3=(e,n)=>{const o=Mt.fromRangeStart(e.selection.getRng());return c2(n,o)||sl(n,e.getBody(),o).exists(r=>c2(n,r))},i2=(e,n,o)=>{const r=Fe.fromDom(e.getBody());return pT(r,o).fold(()=>vT(e,n,r,o).orThunk(()=>qr(H3(e,n),je)),c=>CB(e,n,r,c))},l2=(e,n)=>{const o=Fe.fromDom(e.selection.getStart(!0)),r=Bp(e);return e.selection.isCollapsed()&&r.length===0?i2(e,n,o):bB(e,o,r)},jp=(e,n)=>{let o=n;for(;o&&o!==e;){if(Zt(o)||Vs(o))return o;o=o.parentNode}return null},Kv=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],z3=Qt.each,u2=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const v=_=>{const P={};return z3(n.getAttribs(_),H=>{const U=H.nodeName.toLowerCase();U!=="style"&&!c(U)&&(P[U]=n.getAttrib(_,U))}),P},w=(_,P)=>{for(const H in _)if(Qn(_,H)){const U=P[H];if(On(U)||_[H]!==U)return!1;delete P[H]}for(const H in P)if(Qn(P,H))return!1;return!0};return Mn(u)&&Mn(f)&&(!w(v(u),v(f))||!w(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ll(u)&&!Ll(f)},c=u=>G(Kv,f=>bo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Sb=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Gp=e=>e.name==="summary",wB=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},SB=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const v=e[u];if(v.name===c){const w=r.nodes[c];w?w.nodes.push(o):r.nodes[c]={filter:v,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const v=n[u],w=v.name;if(w in o.attributes.map){const _=r.attributes[w];_?_.nodes.push(o):r.attributes[w]={filter:v,nodes:[o]}}}},e7=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&wB(o,c=>{SB(e,n,c,r)}),r},V3=(e,n)=>{const o=(r,c)=>{on(r,u=>{const f=ss(u.nodes);L(u.filter.callbacks,v=>{for(let w=f.length-1;w>=0;w--){const _=f[w];(!(c?_.attr(u.filter.name)!==void 0:_.name===u.filter.name)||gn(_.parent))&&f.splice(w,1)}f.length>0&&v(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},U3=(e,n,o,r={})=>{const c=e7(e,n,o);V3(c,r)},W3=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Al("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Al("#text",3)).value=za},t7=e=>{var n;return $h(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===za},$h=(e,n)=>{const o=e==null?void 0:e.firstChild;return rt(o)&&o===e.lastChild&&o.name===n},xb=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},yT=(e,n,o,r)=>r.isEmpty(n,o,c=>xb(e,c)),di=(e,n)=>rt(e)&&(n(e)||e.name==="br"),n7=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return V.from(n)},Z3=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Z3(c,n,o);e.unwrap()}},pf=(e,n,o,r=je)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),v=Qt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),w=new Set,_=P=>P!==o&&!v[P.name];for(let P=0;P<e.length;P++){const H=e[P];let U,oe,ge;if(!H.parent||w.has(H))continue;if(c[H.name]&&H.parent.name==="li"){let be=H.next;for(;be&&c[be.name];){be.name="li",w.add(be),H.parent.insert(be,H.parent);be=be.next}H.unwrap();continue}const ce=[H];for(U=H.parent;U&&!n.isValidChild(U.name,H.name)&&_(U);U=U.parent)ce.push(U);if(U&&ce.length>1)if(xB(n,H,U))Z3(H,n);else{ce.reverse(),oe=ce[0].clone(),r(oe);let be=oe;for(let Me=0;Me<ce.length-1;Me++){n.isValidChild(be.name,ce[Me].name)&&Me>0?(ge=ce[Me].clone(),r(ge),be.append(ge)):ge=be;for(let qe=ce[Me].firstChild;qe&&qe!==ce[Me+1];){const Ze=qe.next;ge.append(qe),qe=Ze}be=ge}yT(n,u,f,oe)?U.insert(H,ce[0],!0):(U.insert(oe,ce[0],!0),U.insert(H,oe)),U=ce[0],(yT(n,u,f,U)||$h(U,"br"))&&U.empty().remove()}else if(H.parent){if(H.name==="li"){let be=H.prev;if(be&&(be.name==="ul"||be.name==="ol")){be.append(H);continue}if(be=H.next,be&&(be.name==="ul"||be.name==="ol")&&be.firstChild){be.insert(H,be.firstChild,!0);continue}const Me=new Al("ul",1);r(Me),H.wrap(Me);continue}if(n.isValidChild(H.parent.name,"div")&&n.isValidChild("div",H.name)){const be=new Al("div",1);r(be),H.wrap(be)}else Z3(H,n)}}},qs=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},xB=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&qs(o,"a")?!0:Gp(o)&&Sb(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,o7=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},s7=e=>{const n=Mt.fromRangeStart(e),o=Mt.fromRangeEnd(e),r=e.commonAncestorContainer;return sl(!1,r,o).map(c=>!Il(n,o,r)&&Il(n,c,r)?o7(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Ir=e=>e.collapsed?e:s7(e),EB=e=>rt(e.firstChild)&&e.firstChild===e.lastChild,d2=e=>e.name==="br"||e.value===za,m2=(e,n)=>e.getBlockElements()[n.name]&&EB(n)&&d2(n.firstChild),f2=(e,n)=>{const o=e.getNonEmptyElements();return rt(n)&&(n.isEmpty(o)||m2(e,n))},g2=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),f2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},TB=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},_K=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return TB(c)},DK=e=>{var n;return ke((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},OK=e=>e.data===za||zs(e),RK=e=>rt(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&OK(e.firstChild),r7=e=>!e.firstChild||RK(e),FK=e=>e.length>0&&r7(e[e.length-1])?e.slice(0,-1):e,j3=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},a7=(e,n)=>!!j3(e,n),NK=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},c7=(e,n)=>{const o=Mt.before(e),c=Fd(n).next(o);return c?c.toRange():null},Da=(e,n)=>{const o=Mt.after(e),c=Fd(n).prev(o);return c?c.toRange():null},AB=(e,n,o,r)=>{const c=NK(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Qt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),Da(n[n.length-1],o)},kB=(e,n,o)=>{const r=e.parentNode;return r&&Qt.each(n,c=>{r.insertBefore(c,e)}),c7(e,o)},i7=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),Da(n[0],o)),l7=(e,n,o,r)=>{const c=_K(n,e,r),u=j3(n,o.startContainer),f=FK(DK(c.firstChild)),v=1,w=2,_=n.getRoot(),P=H=>{const U=Mt.fromRangeStart(o),oe=Fd(n.getRoot()),ge=H===v?oe.prev(U):oe.next(U),ce=ge==null?void 0:ge.getNode();return ce?j3(n,ce)!==u:!0};return u?P(v)?kB(u,f,_):P(w)?i7(u,f,_,n):AB(u,f,_,o):null},u7=["pre"],wu=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,v=f.attr("data-mce-type")==="bookmark"?f.prev:f,w=u===v,_=I(u7,u.name);if(w&&_){const P=u.attr("contenteditable")!=="false",H=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,U=V.from(jp(r,o)).forall(Zt);return P&&H&&U}else return!1},Md=eh,d7=(e,n,o)=>{if(rt(o)){const r=e.getParent(n.endContainer,Md);return o===r&&vv(Fe.fromDom(o),n)}else return!1},G3=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},q3=(e,n,o)=>{V.from(e.getParent(n,"td,th")).map(Fe.fromDom).each(r=>x0(r,o))},m7=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=u2(e),f="*[data-mce-fragment]",v=r.select(f);Qt.each(v,w=>{const _=U=>rt(o[U.nodeName.toLowerCase()]),P=U=>U.childNodes.length===1;if((U=>!(EN(r,U)||wL(r,U)))(w)&&_(w)&&P(w)){const U=Vv(r,w),oe=(Me,qe)=>Xt(Me,Ze=>I(qe,Ze)),ge=Me=>P(w)&&r.is(Me,f)&&_(Me)&&(Me.nodeName===w.nodeName&&oe(U,Vv(r,Me))||ge(Me.children[0])),ce=Me=>rt(Me)&&Me!==c&&(u.compare(w,Me)||ce(Me.parentElement)),be=Me=>rt(Me)&&Me!==c&&r.is(Me,f)&&(xL(r,w,Me)||be(Me.parentElement));(ge(w.children[0])||ce(w.parentElement)&&!be(w.parentElement))&&r.remove(w,!0)}})}},f7=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},h2=e=>{Qt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},CT=e=>!!e.getAttribute("data-mce-fragment"),K3=(e,n)=>rt(n)&&!e.schema.getVoidElements()[n.nodeName],g7=(e,n)=>{var o,r,c;let u;const f=e.dom,v=e.selection;if(!n)return;v.scrollIntoView(n);const w=jp(e.getBody(),n);if(w&&f.getContentEditable(w)==="false"){f.remove(n),v.select(w);return}let _=f.createRng();const P=n.previousSibling;if(un(P)){_.setStart(P,(r=(o=P.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const oe=n.nextSibling;un(oe)&&(P.appendData(oe.data),(c=oe.parentNode)===null||c===void 0||c.removeChild(oe))}else _.setStartBefore(n),_.setEndBefore(n);const H=oe=>{let ge=Mt.fromRangeStart(oe);return ge=Fd(e.getBody()).next(ge),ge==null?void 0:ge.toRange()},U=f.getParent(n,f.isBlock);if(f.remove(n),U&&f.isEmpty(U)){const oe=Md(U);yd(Fe.fromDom(U)),_.setStart(U,0),_.setEnd(U,0),!oe&&!CT(U)&&(u=H(_))?(_=u,f.remove(U)):f.add(U,f.create("br",oe?{}:{"data-mce-bogus":"1"}))}v.setRng(_)},bf=e=>{const n=e.dom,o=Ir(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Md);d7(n,o,r)?hT(e,o,Fe.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&un(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},h7=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return V.some(n);return V.none()},p7=(e,n,o)=>{var r;return G(o.children(),Sb)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Pd=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,v=e.parser,w=o.merge,_=Mh({validate:!0},e.schema),P='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Fi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,P);let H=u.getRng();const U=H.startContainer,oe=e.getBody();U===oe&&u.isCollapsed()&&f.isBlock(oe.firstChild)&&K3(e,oe.firstChild)&&f.isEmpty(oe.firstChild)&&(H=f.createRng(),H.setStart(oe.firstChild,0),H.setEnd(oe.firstChild,0),u.setRng(H)),u.isCollapsed()||bf(e);const ge=u.getNode(),ce={context:ge.nodeName.toLowerCase(),data:o.data,insert:!0},be=v.parse(n,ce);if(o.paste===!0&&g2(e.schema,be)&&a7(f,ge))return H=l7(_,f,u.getRng(),be),H&&u.setRng(H),n;o.paste===!0&&wu(f,be,ge,e.getBody())&&((r=be.firstChild)===null||r===void 0||r.unwrap()),f7(be);let Me=be.lastChild;if(Me&&Me.attr("id")==="mce_marker"){const qe=Me;for(Me=Me.prev;Me;Me=Me.walk(!0))if(Me.type===3||!f.isBlock(Me.name)){Me.parent&&e.schema.isValidChild(Me.parent.name,"span")&&Me.parent.insert(qe,Me,Me.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ge),!ce.invalid&&!p7(f,ge,be))n=_.serialize(be),G3(e,n,ge);else{e.selection.setContent(P);let qe=u.getNode(),Ze;const bt=e.getBody();for(If(qe)?qe=Ze=bt:Ze=qe;Ze&&Ze!==bt;)qe=Ze,Ze=Ze.parentNode;n=qe===bt?bt.innerHTML:f.getOuterHTML(qe);const Jt=v.parse(n),yn=h7(Jt),In=yn.bind(n7).getOr(Jt);yn.each(qn=>qn.replace(be));const Pt=be.children(),At=(c=be.parent)!==null&&c!==void 0?c:Jt;be.unwrap();const Kt=ke(Pt,qn=>xB(e.schema,qn,At));pf(Kt,e.schema,In),U3(v.getNodeFilters(),v.getAttributeFilters(),Jt),n=_.serialize(Jt),qe===bt?f.setHTML(bt,n):f.setOuterHTML(qe,n)}return m7(e,w),g7(e,f.get("mce_marker")),h2(e.getBody()),q3(f,u.getStart(),e.schema),tl(e.schema,e.getBody(),u.getStart()),n},qp=e=>e instanceof Al,Tm=e=>{Bh(e)&&Jc(e.getBody()).each(n=>{const o=n.getNode(),r=iu(o)?Jc(o).getOr(n):n;e.selection.setRng(r.toRange())})},Y3=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Tm(e)},vr=(e,n,o,r)=>{if(o=Fi(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=Kc(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ug(e),o)):o||(o=c),Y3(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Mh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=S0(Fe.fromDom(n))?o:Qt.trim(o);return Y3(e,c,r.no_selection),{content:c,html:c}}},Yv=(e,n,o,r)=>{U3(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Mh({validate:!1},e.schema).serialize(o),u=Fi(S0(Fe.fromDom(n))?c:Qt.trim(c));return Y3(e,u,r.no_selection),{content:o,html:u}},wT=(e,n,o)=>V.from(e.getBody()).map(r=>qp(n)?Yv(e,r,n,o):vr(e,r,n,o)).getOr({content:n,html:qp(o.content)?"":o.content}),X3=e=>we(e)?e:Ne,J3=(e,n,o)=>{let r=e.dom;const c=X3(o);for(;r.parentNode;){r=r.parentNode;const u=Fe.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return V.none()},p2=(e,n,o)=>{const r=n(e),c=X3(o);return r.orThunk(()=>c(e)?V.none():J3(e,n,c))},Q3=Ah,ST=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(vu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},eD=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,v=>ST(e,v,o)?!0:v.parentNode===u||!!Am(e,v,o,r,!0));return!!Am(e,f,o,r,c)},b2=(e,n,o)=>_c(o)&&Q3(n,o.inline)||ff(o)&&Q3(n,o.block)?!0:vu(o)?Mn(n)&&e.is(n,o.selector):!1,tD=(e,n,o,r,c,u)=>{const f=o[r],v=r==="attributes";if(we(o.onmatch))return o.onmatch(n,o,r);if(f){if(xn(f)){for(let w=0;w<f.length;w++)if(v?e.getAttrib(n,f[w]):rb(e,n,f[w]))return!0}else for(const w in f)if(Qn(f,w)){const _=v?e.getAttrib(n,w):rb(e,n,w),P=mf(f[w],u),H=gn(_)||is(_);if(H&&gn(P))continue;if(c&&H&&!o.exact||(!c||o.exact)&&!Q3(_,FE(P,w)))return!1}}return!0},Am=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Mn(n))for(let v=0;v<u.length;v++){const w=u[v];if(b2(e.dom,n,w)&&tD(f,n,w,"attributes",c,r)&&tD(f,n,w,"styles",c,r)){const _=w.classes;if(_){for(let P=0;P<_.length;P++)if(!e.dom.hasClass(n,mf(_[P],r)))return}return w}}},xT=(e,n,o,r,c)=>{if(r)return eD(e,r,n,o,c);if(r=e.selection.getNode(),eD(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&eD(e,u,n,o,c))},ET=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let v=0;v<n.length;v++){const w=n[v];!c[w]&&Am(e,f,w,o)&&(c[w]=!0,r.push(w))}},e.dom.getRoot()),r},b7=(e,n)=>{const o=c=>os(c,Fe.fromDom(e.getBody())),r=(c,u)=>Am(e,c.dom,u)?V.some(u):V.none();return V.from(e.selection.getStart(!0)).bind(c=>p2(Fe.fromDom(c),u=>Lo(n,f=>r(u,f)),o)).getOrNull()},v7=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Av(r,c);for(let f=o.length-1;f>=0;f--){const v=o[f];if(!vu(v))return!0;for(let w=u.length-1;w>=0;w--)if(r.is(u[w],v.selector))return!0}}return!1},y7=(e,n,o)=>Je(o,(r,c)=>{const u=Nw(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),v2=yc,C7=(e,n)=>e.importNode(n,!0),nD=e=>{if(e){const n=new Ec(e,e);for(let o=n.current();o;o=n.next())if(un(o))return o}return null},oD=e=>{const n=Fe.fromTag("span");return Sc(n,{id:mv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&na(n,Fe.fromText(v2)),n},w7=e=>{const n=nD(e);return n&&n.data.charAt(0)===v2&&n.deleteData(0,1),n},TT=(e,n,o)=>{const r=e.dom,c=e.selection;if(Dv(n))Nd(e,!1,Fe.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),v=u.startContainer,w=u.startOffset,_=u.endContainer,P=u.endOffset,H=w7(n);r.remove(n,!0),v===H&&w>0&&u.setStart(H,w-1),_===H&&P>0&&u.setEnd(H,P-1),f&&r.isEmpty(f)&&hu(Fe.fromDom(f)),c.setRng(u)}},AT=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)TT(e,n,o);else if(n=wh(e.getBody(),c.getStart()),!n)for(;n=r.get(mv);)TT(e,n,o)},S7=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,_e(Ev,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Qf(Fe.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},_B=(e,n)=>(e.appendChild(n),n),sD=(e,n)=>{var o;const r=lt(e,(u,f)=>_B(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _B(r,c.createTextNode(v2))},x7=(e,n,o,r,c,u)=>{const f=e.formatter,v=e.dom,w=ke(xo(f.get()),H=>H!==r&&!no(H,"removeformat")),_=y7(e,o,w);if(ke(_,H=>!NE(e,H,r)).length>0){const H=o.cloneNode(!1);return v.add(n,H),f.remove(r,c,H,u),v.remove(H),V.some(H)}else return V.none()},rD=e=>_C(e,Xf(e).replace(new RegExp(`${za}$`)," ")),Ju=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&su(Fe.fromDom(n)).each(r=>{Js(r)?rD(r):Gg(r,c=>Js(c)).each(c=>{Js(c)&&rD(c)})})};e.once("input",r=>{r.data&&!Cg(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},E7=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let v=f.startOffset;const _=f.startContainer.nodeValue;r=wh(e.getBody(),c.getStart());const P=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(_&&v>0&&v<_.length&&P.test(_.charAt(v))&&P.test(_.charAt(v-1))){const H=c.getBookmark();f.collapse(!0);let U=_h(e.dom,f,u);U=an(U),e.formatter.apply(n,o,U),c.moveToBookmark(H)}else{let H=r?nD(r):null;(!r||(H==null?void 0:H.data)!==v2)&&(r=C7(e.getDoc(),oD(!0).dom),H=r.firstChild,f.insertNode(r),v=1,Ju(e,r)),e.formatter.apply(n,o,r),c.setCursorLocation(H,v)}},DB=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const v=e.formatter.get(n);if(!v)return;const w=u.getRng(),_=w.startContainer,P=w.startOffset;let H=_;un(_)&&(P!==_.data.length&&(f=!0),H=H.parentNode);const U=[];let oe;for(;H;){if(Am(e,H,n,o,r)){oe=H;break}H.nextSibling&&(f=!0),U.push(H),H=H.parentNode}if(oe)if(f){const ge=u.getBookmark();w.collapse(!0);let ce=_h(c,w,v,!0);ce=an(ce),e.formatter.remove(n,o,ce,r),u.moveToBookmark(ge)}else{const ge=wh(e.getBody(),oe),ce=rt(ge)?c.getParents(oe.parentNode,dt,ge):[],be=oD(!1).dom;S7(e,be,ge??oe);const Me=x7(e,be,oe,n,o,r),qe=sD([...U,...Me.toArray(),...ce],be);ge&&TT(e,ge,rt(ge)),u.setCursorLocation(qe,1),Ju(e,be),c.isEmpty(oe)&&c.remove(oe)}},aD=(e,n,o)=>{const r=e.selection,c=e.getBody();AT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===v2&&AT(e,wh(c,r.getStart()),!0),(n===37||n===39)&&AT(e,wh(c,r.getStart()),!0)},cD=e=>un(e)&&hs(e.data,za),OB=e=>{e.on("mouseup keydown",n=>{aD(e,n.keyCode,cD(e.selection.getRng().endContainer))})},iD=e=>{const n=oD(!1),o=sD(e,n.dom);return{caretContainer:n,caretPosition:Mt(o,0)}},RB=(e,n)=>{const{caretContainer:o,caretPosition:r}=iD(n);return Pc(Fe.fromDom(e),o),mr(Fe.fromDom(e)),r},T7=(e,n)=>{const{caretContainer:o,caretPosition:r}=iD(n);return e.insertNode(o.dom),r},kT=(e,n)=>{if(bu(n.dom))return!1;const o=e.schema.getTextInlineElements();return Qn(o,fe(n))&&!bu(n.dom)&&!qm(n.dom)},Xv={},Qu=Fl(["pre"]),A7=(e,n)=>{Xv[e]||(Xv[e]=[]),Xv[e].push(n)},k7=(e,n)=>{Qn(Xv,e)&&L(Xv[e],o=>{o(n)})};A7("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Qu(f)&&I(c,f)},r=(c,u)=>{const f=Fe.fromDom(u),v=Nu(f).dom;mr(f),Mu(Fe.fromDom(c),[Fe.fromTag("br",v),Fe.fromTag("br",v),...ja(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=ke(ke(c,Qu),o(c));L(u,f=>{r(f.previousSibling,f)})}});const _7=["fontWeight","fontStyle","color","fontSize","fontFamily"],lD=e=>St(e.styles)&&G(xo(e.styles),n=>I(_7,n)),D7=e=>Wt(e,n=>_c(n)&&n.inline==="span"&&lD(n)),O7=(e,n)=>{const o=e.get(n);return vt(o)?D7(o):V.none()},FB=(e,n)=>xl(n,Mt.fromRangeStart(e)).isNone(),_T=(e,n)=>rl(n,Mt.fromRangeEnd(e)).exists(o=>!zs(o.getNode())||rl(n,o).isSome())===!1,km=e=>n=>u0(n)&&e.isEditable(n),uD=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return FB(o,n[0])&&_T(o,n[0])?n:[];{const r=to(n).filter(f=>FB(o,f)).toArray(),c=Qo(n).filter(f=>_T(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},DT=e=>ke(uD(e),km(e.dom)),OT=e=>ke(e.getSelectedBlocks(),km(e.dom)),dD=Qt.each,RT=e=>Mn(e)&&!Ll(e)&&!bu(e)&&!qm(e),NB=(e,n)=>{for(let o=e;o;o=o[n]){if(un(o)&&fo(o.data))return e;if(Mn(o)&&!Ll(o))return o}return e},mD=(e,n,o)=>{const r=u2(e),c=dl(n)&&e.dom.isEditable(n),u=dl(o)&&e.dom.isEditable(o);if(c&&u){const f=NB(n,"previousSibling"),v=NB(o,"nextSibling");if(r.compare(f,v)){for(let w=f.nextSibling;w&&w!==v;){const _=w;w=w.nextSibling,f.appendChild(_)}return e.dom.remove(v),Qt.each(Qt.grep(v.childNodes),w=>{f.appendChild(w)}),f}}return o},FT=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=mD(e,xv(r),r))!==null&&c!==void 0?c:r;mD(e,u,xv(u,!0))}},R7=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";dD(e.select(r,o),c=>{RT(c)&&e.isEditable(c)&&dD(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},NT=(e,n,o)=>{dD(e.childNodes,r=>{RT(r)&&(n(r)&&o(r),r.hasChildNodes()&&NT(r,n,o))})},F7=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},Kp=(e,n)=>o=>!!(o&&rb(e,o,n)),fD=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),F7(e,r)},Eb=Od.generate([{keep:[]},{rename:["name"]},{removed:[]}]),BB=/^(src|href|style)$/,gD=Qt.each,BT=Ah,N7=e=>/^(TR|TH|TD)$/.test(e.nodeName),MB=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),PB=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Mn(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return un(r)&&o&&c>=r.data.length&&(r=new Ec(r,e.getBody()).next()||r),un(r)&&!o&&c===0&&(r=new Ec(r,e.getBody()).prev()||r),r},hD=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return N7(e)&&r?e.nodeName==="TR"&&r[o]||r:e},pD=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},MT=(e,n,o,r,c)=>{const u=Fe.fromDom(n),f=Fe.fromDom(e.create(r,c)),v=o?nm(u):Wg(u);return Mu(f,v),o?(Pc(u,f),Mf(f,u)):(yi(u,f),na(f,u)),f.dom},Tb=(e,n)=>n.links&&e.nodeName==="A",$B=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=Kc(e);ff(o)&&r===u.getRoot()&&(!o.list_block||!BT(n,o.list_block))&&L(ss(n.childNodes),v=>{wg(e,f,v.nodeName.toLowerCase())?c?c.appendChild(v):(c=pD(u,v,f),u.setAttribs(c,ug(e))):c=null}),!(gf(o)&&!BT(o.inline,n))&&u.remove(n,!0)},IB=(e,n,o)=>Ro(e)?{name:n,value:null}:{name:e,value:mf(n,o)},y2=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},bD=(e,n,o,r,c)=>{let u=!1;gD(o.styles,(f,v)=>{const{name:w,value:_}=IB(v,f,r),P=FE(_,w);(o.remove_similar||J(_)||!Mn(c)||BT(rb(e,c,w),P))&&e.setStyle(n,w,""),u=!0}),u&&y2(e,n)},LB=(e,n,o)=>{n==="removeformat"?L(OT(e.selection),r=>{L(_7,c=>e.dom.setStyle(r,c,"")),y2(e.dom,r)}):O7(e.formatter,n).each(r=>{L(OT(e.selection),c=>bD(e.dom,c,r,o,null))})},HB=(e,n,o,r,c)=>{const u=e.dom,f=u2(e),v=e.schema;if(_c(n)&&uu(v,n.inline)&&zu(v,r)&&r.parentElement===e.getBody())return $B(e,r,n),Eb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!b2(u,r,n)&&!Tb(r,n))return Eb.keep();const w=r,_=n.preserve_attributes;if(_c(n)&&n.remove==="all"&&vt(_)){const P=ke(u.getAttribs(w),H=>I(_,H.name.toLowerCase()));if(u.removeAllAttribs(w),L(P,H=>u.setAttrib(w,H.name,H.value)),P.length>0)return Eb.rename("span")}if(n.remove!=="all"){bD(u,w,n,o,c),gD(n.attributes,(H,U)=>{const{name:oe,value:ge}=IB(U,H,o);if(n.remove_similar||J(ge)||!Mn(c)||BT(u.getAttrib(c,oe),ge)){if(oe==="class"){const ce=u.getAttrib(w,oe);if(ce){let be="";if(L(ce.split(/\s+/),Me=>{/mce\-\w+/.test(Me)&&(be+=(be?" ":"")+Me)}),be){u.setAttrib(w,oe,be);return}}}if(BB.test(oe)&&w.removeAttribute("data-mce-"+oe),oe==="style"&&Fl(["li"])(w)&&u.getStyle(w,"list-style-type")==="none"){w.removeAttribute(oe),u.setStyle(w,"list-style-type","none");return}oe==="class"&&w.removeAttribute("className"),w.removeAttribute(oe)}}),gD(n.classes,H=>{H=mf(H,o),(!Mn(c)||u.hasClass(c,H))&&u.removeClass(w,H)});const P=u.getAttribs(w);for(let H=0;H<P.length;H++){const U=P[H].nodeName;if(!f.isAttributeInternal(U))return Eb.keep()}}return n.remove!=="none"?($B(e,w,n),Eb.removed()):Eb.keep()},zB=(e,n,o,r,c)=>{let u;return n.parentNode&&L(Av(e.dom,n.parentNode).reverse(),f=>{if(!u&&Mn(f)&&f.id!=="_start"&&f.id!=="_end"){const v=Am(e,f,o,r,c);v&&v.split!==!1&&(u=f)}}),u},B7=(e,n,o,r)=>HB(e,n,o,r,r).fold(ve(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),ve(null)),Ab=(e,n,o,r,c,u,f,v)=>{var w,_;let P,H;const U=e.dom;if(o){const oe=o.parentNode;for(let ge=r.parentNode;ge&&ge!==oe;ge=ge.parentNode){let ce=U.clone(ge,!1);for(let be=0;be<n.length&&(ce=B7(e,n[be],v,ce),ce!==null);be++);ce&&(P&&ce.appendChild(P),H||(H=ce),P=ce)}(!f.mixed||!U.isBlock(o))&&(r=(w=U.split(o,r))!==null&&w!==void 0?w:r),P&&H&&((_=c.parentNode)===null||_===void 0||_.insertBefore(P,c),H.appendChild(c),_c(f)&&FT(e,f,v,P))}return r},VB=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],v=e.dom,w=e.selection,_=ce=>{const be=zB(e,ce,n,o,c);return Ab(e,u,be,ce,ce,!0,f,o)},P=ce=>Ll(ce)&&Mn(ce)&&(ce.id==="_start"||ce.id==="_end"),H=ce=>G(u,be=>Jv(e,be,o,ce,ce)),U=ce=>{const be=ss(ce.childNodes),qe=H(ce)||G(u,Jt=>b2(v,ce,Jt)),Ze=ce.parentNode;if(!qe&&rt(Ze)&&Bw(f)&&H(Ze),f.deep&&be.length)for(let Jt=0;Jt<be.length;Jt++)U(be[Jt]);L(["underline","line-through","overline"],Jt=>{Mn(ce)&&e.dom.getStyle(ce,"text-decoration")===Jt&&ce.parentNode&&Fw(v,ce.parentNode)===Jt&&Jv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Jt}},void 0,ce)})},oe=ce=>{const be=v.get(ce?"_start":"_end");if(be){let Me=be[ce?"firstChild":"lastChild"];return P(Me)&&(Me=Me[ce?"firstChild":"lastChild"]),un(Me)&&Me.data.length===0&&(Me=ce?be.previousSibling||be.nextSibling:be.nextSibling||be.previousSibling),v.remove(be,!0),Me}else return null},ge=ce=>{let be,Me,qe=_h(v,ce,u,ce.collapsed);if(f.split){if(qe=an(qe),be=PB(e,qe,!0),Me=PB(e,qe),be!==Me){if(be=hD(be,!0),Me=hD(Me,!1),MB(v,be,Me)){const bt=V.from(be.firstChild).getOr(be);_(MT(v,bt,!0,"span",{id:"_start","data-mce-type":"bookmark"})),oe(!0);return}if(MB(v,Me,be)){const bt=V.from(Me.lastChild).getOr(Me);_(MT(v,bt,!1,"span",{id:"_end","data-mce-type":"bookmark"})),oe(!1);return}be=pD(v,be,"span",{id:"_start","data-mce-type":"bookmark"}),Me=pD(v,Me,"span",{id:"_end","data-mce-type":"bookmark"});const Ze=v.createRng();Ze.setStartAfter(be),Ze.setEndBefore(Me),ib(v,Ze,bt=>{L(bt,Jt=>{!Ll(Jt)&&!Ll(Jt.parentNode)&&_(Jt)})}),_(be),_(Me),be=oe(!0),Me=oe()}else be=Me=_(be);qe.startContainer=be.parentNode?be.parentNode:be,qe.startOffset=v.nodeIndex(be),qe.endContainer=Me.parentNode?Me.parentNode:Me,qe.endOffset=v.nodeIndex(Me)+1}ib(v,qe,Ze=>{L(Ze,U)})};if(r){if(wv(r)){const ce=v.createRng();ce.setStartBefore(r),ce.setEndAfter(r),ge(ce)}else ge(r);Hl(e,n,r,o);return}!w.isCollapsed()||!_c(f)||Bp(e).length?(Cm(e,()=>yv(e,ge),ce=>_c(f)&&xT(e,n,o,ce)),e.nodeChanged()):DB(e,n,o,c),LB(e,n,o),Hl(e,n,r,o)},vD=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&VB(e,n,o,r,c)},Jv=(e,n,o,r,c)=>HB(e,n,o,r,c).fold(Ne,u=>(e.dom.rename(r,u),!0),dt),C2=Qt.each,UB=(e,n,o,r)=>{const c=u=>{if(dl(u)&&Mn(u.parentNode)&&e.isEditable(u)){const f=Fw(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Qt.walk(r,c,"childNodes"),c(r))},M7=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=Kp(e,"fontSize");NT(r,u=>c(u)&&e.isEditable(u),fD(e,"backgroundColor",mf(n.styles.backgroundColor,o)))}},WB=(e,n,o,r)=>{if(_c(n)&&(n.inline==="sub"||n.inline==="sup")){const c=Kp(e,"fontSize");NT(r,f=>c(f)&&e.isEditable(f),fD(e,"fontSize",""));const u=ke(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},P7=(e,n,o,r)=>{C2(n,c=>{_c(c)&&C2(e.dom.select(c.inline,r),u=>{RT(u)&&Jv(e,c,o,u,c.exact?u:null)}),R7(e.dom,c,r)})},$7=(e,n,o,r,c)=>{const u=c.parentNode;Am(e,u,o,r)&&Jv(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Am(e,f,o,r)?(Jv(e,n,r,c),!0):!1)},kb=Qt.each,ZB=(e,n,o,r)=>{if(Gx(e)&&_c(n)&&o.parentNode){const c=f0(e.schema),u=c0(Fe.fromDom(o),f=>bu(f.dom));return Ns(c,r)&&Hu(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},PT=(e,n,o,r)=>{if(kb(o.styles,(c,u)=>{e.setStyle(n,u,mf(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},I7=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),v=e.dom,w=e.selection,_=(ge,ce=u)=>{we(ce.onformat)&&ce.onformat(ge,ce,o,r),PT(v,ge,ce,o),kb(ce.attributes,(be,Me)=>{v.setAttrib(ge,Me,mf(be,o))}),kb(ce.classes,be=>{const Me=mf(be,o);v.hasClass(ge,Me)||v.addClass(ge,Me)})},P=(ge,ce)=>{let be=!1;return kb(ge,Me=>vu(Me)?v.getContentEditable(ce)==="false"&&!Me.ceFalseOverride||rt(Me.collapsed)&&Me.collapsed!==f?!0:v.is(ce,Me.selector)&&!bu(ce)?(_(ce,Me),be=!0,!1):!0:!1),be},H=ge=>{if(ie(ge)){const ce=v.create(ge);return _(ce),ce}else return null},U=(ge,ce,be)=>{const Me=[];let qe=!0;const Ze=u.inline||u.block,bt=H(Ze),Jt=Pt=>_v(u)&&Am(e,Pt,n,o),yn=(Pt,At,Kt)=>{const qn=BE(u)&&Ev(e.schema,Pt)&&wg(e,At,Ze);return Kt&&qn},In=(Pt,At,Kt,qn)=>{const uo=Pt.nodeName.toLowerCase(),ps=wg(e,Ze,uo)&&wg(e,At,Ze),Cs=!be&&un(Pt)&&RC(Pt.data),Xs=bu(Pt),fr=!_c(u)||!ge.isBlock(Pt);return(Kt||qn)&&ps&&!Cs&&!Xs&&fr};ib(ge,ce,Pt=>{let At;const Kt=qn=>{let uo=!1,ps=qe,Cs=!1;const Xs=qn.parentNode,fr=Xs.nodeName.toLowerCase(),Oa=ge.getContentEditable(qn);rt(Oa)&&(ps=qe,qe=Oa==="true",uo=!0,Cs=Rw(e,qn));const dc=qe&&!uo;if(zs(qn)&&!ZB(e,u,qn,fr)){At=null,ff(u)&&ge.remove(qn);return}if(Jt(qn)){At=null;return}if(yn(qn,fr,dc)){const Cr=ge.rename(qn,Ze);_(Cr),Me.push(Cr),At=null;return}if(vu(u)){let Cr=P(c,qn);if(!Cr&&rt(Xs)&&Bw(u)&&(Cr=P(c,Xs)),!_c(u)||Cr){At=null;return}}rt(bt)&&In(qn,fr,dc,Cs)?(At||(At=ge.clone(bt,!1),Xs.insertBefore(At,qn),Me.push(At)),Cs&&uo&&(qe=ps),At.appendChild(qn)):(At=null,L(ss(qn.childNodes),Kt),uo&&(qe=ps),At=null)};L(Pt,Kt)}),u.links===!0&&L(Me,Pt=>{const At=Kt=>{Kt.nodeName==="A"&&_(Kt,u),L(ss(Kt.childNodes),At)};At(Pt)}),L(Me,Pt=>{const At=uo=>{let ps=0;return L(uo.childNodes,Cs=>{!Dw(Cs)&&!Ll(Cs)&&ps++}),ps},Kt=uo=>Wt(uo.childNodes,Sv).filter(Cs=>ge.getContentEditable(Cs)!=="false"&&b2(ge,Cs,u)).map(Cs=>{const Xs=ge.clone(Cs,!1);return _(Xs),ge.replace(Xs,uo,!0),ge.remove(Cs,!0),Xs}).getOr(uo),qn=At(Pt);if((Me.length>1||!ge.isBlock(Pt))&&qn===0){ge.remove(Pt,!0);return}(_c(u)||ff(u)&&u.wrapper)&&(!u.exact&&qn===1&&(Pt=Kt(Pt)),P7(e,c,o,Pt),$7(e,u,n,o,Pt),M7(ge,u,o,Pt),UB(ge,u,o,Pt),WB(ge,u,o,Pt),FT(e,u,o,Pt))})},oe=wv(r)?r:w.getNode();if(v.getContentEditable(oe)==="false"&&!Rw(e,oe)){r=oe,P(c,r),Cu(e,n,r,o);return}if(u){if(r)if(wv(r)){if(!P(c,r)){const ge=v.createRng();ge.setStartBefore(r),ge.setEndAfter(r),U(v,_h(v,ge,c),!0)}}else U(v,r,!0);else!f||!_c(u)||Bp(e).length?(w.setRng(Ir(w.getRng())),Cm(e,()=>{yv(e,(ge,ce)=>{const be=ce?ge:_h(v,ge,c);U(v,be,!1)})},dt),e.nodeChanged()):E7(e,n,o),O7(e.formatter,n).each(ge=>{L(DT(e.selection),ce=>PT(v,ce,ge,o))});k7(n,e)}Cu(e,n,r,o)},jB=(e,n,o,r)=>{(r||e.selection.isEditable())&&I7(e,n,o,r)},yD=e=>Qn(e,"vars"),CD=(e,n)=>{e.set({}),n.on("NodeChange",o=>{KB(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=V.from(o.node).map(c=>wv(c)?c:c.startContainer).bind(c=>Mn(c)?V.some(c):V.from(c.parentElement)).getOrThunk(()=>wD(n));KB(n,r,e.get())})},wD=e=>e.selection.getStart(),GB=(e,n,o,r,c)=>cn(n,v=>{const w=e.formatter.matchNode(v,o,c??{},r);return!On(w)},v=>ST(e,v,o)?!0:r?!1:rt(e.formatter.matchNode(v,o,c,!0))),qB=(e,n)=>{const o=n??wD(e);return ke(Av(e.dom,o),r=>Mn(r)&&!qm(r))},KB=(e,n,o)=>{const r=qB(e,n);on(o,(c,u)=>{const f=v=>{const w=GB(e,r,u,v.similar,yD(v)?v.vars:void 0),_=w.isSome();if(v.state.get()!==_){v.state.set(_);const P=w.getOr(n);yD(v)?v.callback(_,{node:P,format:u,parents:r}):L(v.callbacks,H=>H(_,{node:P,format:u,parents:r}))}};L([c.withSimilar,c.withoutSimilar],f),L(c.withVars,f)})},$T=(e,n,o,r,c,u)=>{const f=n.get();L(o.split(","),v=>{const w=bs(f,v).getOrThunk(()=>{const P={withSimilar:{state:et(!1),similar:!0,callbacks:[]},withoutSimilar:{state:et(!1),similar:!1,callbacks:[]},withVars:[]};return f[v]=P,P}),_=()=>{const P=qB(e);return GB(e,P,v,c,u).isSome()};if(On(u)){const P=c?w.withSimilar:w.withoutSimilar;P.callbacks.push(r),P.callbacks.length===1&&P.state.set(_())}else w.withVars.push({state:et(_()),similar:c,vars:u,callback:r})}),n.set(f)},Ih=(e,n,o)=>{const r=e.get();L(n.split(","),c=>bs(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ke(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ke(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ke(u.withVars,f=>f.callback!==o)}})),e.set(r)},L7=(e,n,o,r,c,u)=>($T(e,n,o,r,c,u),{unbind:()=>Ih(n,o,r)}),SD=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(xT(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?vD(e,n,o,r):jB(e,n,o,r))},Ua=Qt.explode,IT=()=>{const e={};return{addFilter:(c,u)=>{L(Ua(c),f=>{Qn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Gr(e),removeFilter:(c,u)=>{L(Ua(c),f=>{if(Qn(e,f))if(rt(u)){const v=e[f],w=ke(v.callbacks,_=>_!==u);w.length>0?v.callbacks=w:delete e[f]}else delete e[f]})}}},xD=(e,n)=>{L(n,o=>{e.attr(o,null)})},Lh=(e,n,o)=>{e.addNodeFilter("font",r=>{L(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),v=c.attr("face"),w=c.attr("size");f&&(u.color=f),v&&(u["font-family"]=v),w&&aa(w).each(_=>{u["font-size"]=o[_-1]}),c.name="span",c.attr("style",n.serialize(u)),xD(c,["color","face","size"])})})},YB=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";L(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},XB=(e,n,o)=>{var r;const c=dC();n.convert_fonts_to_spans&&Lh(e,c,Qt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),YB(e,o,c)},w2=(e,n,o)=>{n.inline_styles&&XB(e,n,o)},H7=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),z7=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Yp=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?z7(r):decodeURIComponent(r);return V.some({type:c[1],data:f,base64Encoded:u})}else return V.none()},JB=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return V.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return V.some(new Blob([c],{type:e}))},_b=e=>new Promise((n,o)=>{Yp(e).bind(({type:r,data:c,base64Encoded:u})=>JB(r,c,u)).fold(()=>o("Invalid data URI"),n)}),V7=e=>bo(e,"blob:")?H7(e):bo(e,"data:")?_b(e):Promise.reject("Unknown URI format"),Hh=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let U7=0;const $d=e=>"blobid"+U7++,Qv=(e,n,o)=>Yp(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return V.none();{const f=u?r:btoa(r);return o(f,c)}}),LT=(e,n,o)=>{const r=e.create($d(),n,o);return e.add(r),r},HT=(e,n,o=!1)=>Qv(n,o,(r,c)=>V.from(e.getByData(r,c)).orThunk(()=>JB(c,r).map(u=>LT(e,u,r)))),W7=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(bo(n,"blob:")){const r=e.getByUri(n);return rt(r)?Promise.resolve(r):V7(n).then(c=>Hh(c).then(u=>Qv(u,!1,f=>V.some(LT(e,c,f))).getOrThunk(o)))}else return bo(n,"data:")?HT(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},zT=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,Z7=e=>V.from(e.match(zT)).bind(n=>Ds(n,1)).map(n=>bo(n,"www.")?n.substring(4):n),Id=(e,n)=>{V.from(e.attr("src")).bind(Z7).forall(o=>!I(n,o))&&e.attr("sandbox","")},ey=(e,n)=>bo(e,`${n}/`),QB=e=>On(e)?"iframe":ey(e,"image")?"img":ey(e,"video")?"video":ey(e,"audio")?"audio":"iframe",ED=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=QB(e),v=new Al(f,1);return v.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&v.attr("controls",""),f==="iframe"&&c&&Id(v,u),v},TD=e=>rt(e.attr("data-mce-bogus")),Db=e=>e.attr("src")===Ie.transparentSrc||rt(e.attr("data-mce-placeholder")),AD=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");Db(c)||TD(c)||gn(u)||HT(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>L(c,r))}},j7=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",w=>{let _=w.length;const P=U=>U.split(" ").filter(ge=>ge.length>0).concat(["noopener"]).sort().join(" "),H=U=>{const oe=U?Qt.trim(U):"";return/\b(noopener)\b/g.test(oe)?oe:P(oe)};if(!n.allow_unsafe_link_target)for(;_--;){const U=w[_];U.name==="a"&&U.attr("target")==="_blank"&&U.attr("rel",H(U.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",w=>{let _=w.length,P,H,U,oe;for(;_--;)if(oe=w[_],oe.name==="a"&&oe.firstChild&&!oe.attr("href"))for(U=oe.parent,P=oe.lastChild;P&&U;)H=P.prev,U.insert(P,oe),P=H}),n.fix_list_elements&&e.addNodeFilter("ul,ol",w=>{let _=w.length,P,H;for(;_--;)if(P=w[_],H=P.parent,H&&(H.name==="ul"||H.name==="ol"))if(P.prev&&P.prev.name==="li")P.prev.append(P);else{const U=new Al("li",1);U.attr("style","list-style-type: none"),P.wrap(U)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",w=>{var _;let P=w.length;for(;P--;){const H=w[P],U=(_=H.attr("class"))!==null&&_!==void 0?_:"",oe=Qt.explode(U," ");let ge="";for(let ce=0;ce<oe.length;ce++){const be=oe[ce];let Me=!1,qe=u["*"];qe&&qe[be]&&(Me=!0),qe=u[H.name],!Me&&qe&&qe[be]&&(Me=!0),Me&&(ge&&(ge+=" "),ge+=be)}ge.length||(ge=null),H.attr("class",ge)}}),AD(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,v=ir((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",w=>L(w,_=>{_.replace(ED({type:_.attr("type"),src:_.name==="object"?_.attr("data"):_.attr("src"),width:_.attr("width"),height:_.attr("height")},f,v))})),f&&e.addNodeFilter("iframe",w=>L(w,_=>Id(_,v)))},{entries:kD,setPrototypeOf:eM,isFrozen:G7,getPrototypeOf:q7,getOwnPropertyDescriptor:K7}=Object;let{freeze:Li,seal:vf,create:tM}=Object,{apply:S2,construct:_D}=typeof Reflect<"u"&&Reflect;S2||(S2=function(n,o,r){return n.apply(o,r)}),Li||(Li=function(n){return n}),vf||(vf=function(n){return n}),_D||(_D=function(n,o){return new n(...o)});const nM=_m(Array.prototype.forEach),oM=_m(Array.prototype.pop),x2=_m(Array.prototype.push),VT=_m(String.prototype.toLowerCase),DD=_m(String.prototype.toString),Y7=_m(String.prototype.match),yf=_m(String.prototype.replace),X7=_m(String.prototype.indexOf),J7=_m(String.prototype.trim),Ld=_m(RegExp.prototype.test),E2=Q7(TypeError);function _m(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return S2(e,n,r)}}function Q7(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return _D(e,o)}}function yr(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:VT,eM&&eM(e,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const f=o(u);f!==u&&(G7(n)||(n[c]=f),u=f)}e[u]=!0}return e}function ty(e){const n=tM(null);for(const[o,r]of kD(e))n[o]=r;return n}function T2(e,n){for(;e!==null;){const r=K7(e,n);if(r){if(r.get)return _m(r.get);if(typeof r.value=="function")return _m(r.value)}e=q7(e)}function o(r){return console.warn("fallback value for",r),null}return o}const sM=Li(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xp=Li(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),OD=Li(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),e9=Li(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),RD=Li(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),t9=Li(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),FD=Li(["#text"]),rM=Li(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ND=Li(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aM=Li(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),UT=Li(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),n9=vf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),o9=vf(/<%[\w\W]*|[\w\W]*%>/gm),s9=vf(/\${[\w\W]*}/gm),r9=vf(/^data-[\-\w.\u00B7-\uFFFF]/),a9=vf(/^aria-[\-\w]+$/),cM=vf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),BD=vf(/^(?:\w+script|data):/i),iM=vf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),c9=vf(/^html$/i);var ny=Object.freeze({__proto__:null,MUSTACHE_EXPR:n9,ERB_EXPR:o9,TMPLIT_EXPR:s9,DATA_ATTR:r9,ARIA_ATTR:a9,IS_ALLOWED_URI:cM,IS_SCRIPT_OR_DATA:BD,ATTR_WHITESPACE:iM,DOCTYPE_NAME:c9});const i9=()=>typeof window>"u"?null:window,lM=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function uM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i9();const n=Ss=>uM(Ss);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:c}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:v,Element:w,NodeFilter:_,NamedNodeMap:P=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:H,DOMParser:U,trustedTypes:oe}=e,ge=w.prototype,ce=T2(ge,"cloneNode"),be=T2(ge,"nextSibling"),Me=T2(ge,"childNodes"),qe=T2(ge,"parentNode");if(typeof f=="function"){const Ss=c.createElement("template");Ss.content&&Ss.content.ownerDocument&&(c=Ss.content.ownerDocument)}let Ze,bt="";const{implementation:Jt,createNodeIterator:yn,createDocumentFragment:In,getElementsByTagName:Pt}=c,{importNode:At}=o;let Kt={};n.isSupported=typeof kD=="function"&&typeof qe=="function"&&Jt&&Jt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:qn,ERB_EXPR:uo,TMPLIT_EXPR:ps,DATA_ATTR:Cs,ARIA_ATTR:Xs,IS_SCRIPT_OR_DATA:fr,ATTR_WHITESPACE:Oa}=ny;let{IS_ALLOWED_URI:dc}=ny,Cr=null;const En=yr({},[...sM,...Xp,...OD,...RD,...FD]);let co=null;const Us=yr({},[...rM,...ND,...aM,...UT]);let Nn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),So=null,fs=null,Pn=!0,gs=!0,ws=!1,Bc=!0,er=!1,wc=!1,Wd=!1,Af=!1,il=!1,ql=!1,id=!1,Kl=!0,ld=!1;const mo="user-content-";let _s=!0,ra=!1,Ra={},Xa=null;const Vc=yr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ja=null;const Qa=yr({},["audio","video","img","source","image","track"]);let Vi=null;const Zd=yr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jd="http://www.w3.org/1998/Math/MathML",Gd="http://www.w3.org/2000/svg",Eu="http://www.w3.org/1999/xhtml";let Rg=Eu,qh=!1,Yb=null;const pk=yr({},[jd,Gd,Eu],DD);let Fg;const Ly=["application/xhtml+xml","text/html"],lF="text/html";let Si,Xb=null;const uF=c.createElement("form"),dF=function(Ot){return Ot instanceof RegExp||Ot instanceof Function},Ng=function(Ot){if(!(Xb&&Xb===Ot)){if((!Ot||typeof Ot!="object")&&(Ot={}),Ot=ty(Ot),Fg=Ly.indexOf(Ot.PARSER_MEDIA_TYPE)===-1?Fg=lF:Fg=Ot.PARSER_MEDIA_TYPE,Si=Fg==="application/xhtml+xml"?DD:VT,Cr="ALLOWED_TAGS"in Ot?yr({},Ot.ALLOWED_TAGS,Si):En,co="ALLOWED_ATTR"in Ot?yr({},Ot.ALLOWED_ATTR,Si):Us,Yb="ALLOWED_NAMESPACES"in Ot?yr({},Ot.ALLOWED_NAMESPACES,DD):pk,Vi="ADD_URI_SAFE_ATTR"in Ot?yr(ty(Zd),Ot.ADD_URI_SAFE_ATTR,Si):Zd,Ja="ADD_DATA_URI_TAGS"in Ot?yr(ty(Qa),Ot.ADD_DATA_URI_TAGS,Si):Qa,Xa="FORBID_CONTENTS"in Ot?yr({},Ot.FORBID_CONTENTS,Si):Vc,So="FORBID_TAGS"in Ot?yr({},Ot.FORBID_TAGS,Si):{},fs="FORBID_ATTR"in Ot?yr({},Ot.FORBID_ATTR,Si):{},Ra="USE_PROFILES"in Ot?Ot.USE_PROFILES:!1,Pn=Ot.ALLOW_ARIA_ATTR!==!1,gs=Ot.ALLOW_DATA_ATTR!==!1,ws=Ot.ALLOW_UNKNOWN_PROTOCOLS||!1,Bc=Ot.ALLOW_SELF_CLOSE_IN_ATTR!==!1,er=Ot.SAFE_FOR_TEMPLATES||!1,wc=Ot.WHOLE_DOCUMENT||!1,il=Ot.RETURN_DOM||!1,ql=Ot.RETURN_DOM_FRAGMENT||!1,id=Ot.RETURN_TRUSTED_TYPE||!1,Af=Ot.FORCE_BODY||!1,Kl=Ot.SANITIZE_DOM!==!1,ld=Ot.SANITIZE_NAMED_PROPS||!1,_s=Ot.KEEP_CONTENT!==!1,ra=Ot.IN_PLACE||!1,dc=Ot.ALLOWED_URI_REGEXP||cM,Rg=Ot.NAMESPACE||Eu,Nn=Ot.CUSTOM_ELEMENT_HANDLING||{},Ot.CUSTOM_ELEMENT_HANDLING&&dF(Ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Nn.tagNameCheck=Ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ot.CUSTOM_ELEMENT_HANDLING&&dF(Ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Nn.attributeNameCheck=Ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ot.CUSTOM_ELEMENT_HANDLING&&typeof Ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Nn.allowCustomizedBuiltInElements=Ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),er&&(gs=!1),ql&&(il=!0),Ra&&(Cr=yr({},[...FD]),co=[],Ra.html===!0&&(yr(Cr,sM),yr(co,rM)),Ra.svg===!0&&(yr(Cr,Xp),yr(co,ND),yr(co,UT)),Ra.svgFilters===!0&&(yr(Cr,OD),yr(co,ND),yr(co,UT)),Ra.mathMl===!0&&(yr(Cr,RD),yr(co,aM),yr(co,UT))),Ot.ADD_TAGS&&(Cr===En&&(Cr=ty(Cr)),yr(Cr,Ot.ADD_TAGS,Si)),Ot.ADD_ATTR&&(co===Us&&(co=ty(co)),yr(co,Ot.ADD_ATTR,Si)),Ot.ADD_URI_SAFE_ATTR&&yr(Vi,Ot.ADD_URI_SAFE_ATTR,Si),Ot.FORBID_CONTENTS&&(Xa===Vc&&(Xa=ty(Xa)),yr(Xa,Ot.FORBID_CONTENTS,Si)),_s&&(Cr["#text"]=!0),wc&&yr(Cr,["html","head","body"]),Cr.table&&(yr(Cr,["tbody"]),delete So.tbody),Ot.TRUSTED_TYPES_POLICY){if(typeof Ot.TRUSTED_TYPES_POLICY.createHTML!="function")throw E2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ot.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw E2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ze=Ot.TRUSTED_TYPES_POLICY,bt=Ze.createHTML("")}else Ze===void 0&&(Ze=lM(oe,r)),Ze!==null&&typeof bt=="string"&&(bt=Ze.createHTML(""));Li&&Li(Ot),Xb=Ot}},HS=yr({},["mi","mo","mn","ms","mtext"]),Et=yr({},["foreignobject","desc","title","annotation-xml"]),kt=yr({},["title","style","font","a","script"]),Sn=yr({},Xp);yr(Sn,OD),yr(Sn,e9);const pn=yr({},RD);yr(pn,t9);const No=function(Ot){let so=qe(Ot);(!so||!so.tagName)&&(so={namespaceURI:Rg,tagName:"template"});const Vo=VT(Ot.tagName),Wa=VT(so.tagName);return Yb[Ot.namespaceURI]?Ot.namespaceURI===Gd?so.namespaceURI===Eu?Vo==="svg":so.namespaceURI===jd?Vo==="svg"&&(Wa==="annotation-xml"||HS[Wa]):!!Sn[Vo]:Ot.namespaceURI===jd?so.namespaceURI===Eu?Vo==="math":so.namespaceURI===Gd?Vo==="math"&&Et[Wa]:!!pn[Vo]:Ot.namespaceURI===Eu?so.namespaceURI===Gd&&!Et[Wa]||so.namespaceURI===jd&&!HS[Wa]?!1:!pn[Vo]&&(kt[Vo]||!Sn[Vo]):!!(Fg==="application/xhtml+xml"&&Yb[Ot.namespaceURI]):!1},xs=function(Ot){x2(n.removed,{element:Ot});try{Ot.parentNode.removeChild(Ot)}catch{Ot.remove()}},ga=function(Ot,so){try{x2(n.removed,{attribute:so.getAttributeNode(Ot),from:so})}catch{x2(n.removed,{attribute:null,from:so})}if(so.removeAttribute(Ot),Ot==="is"&&!co[Ot])if(il||ql)try{xs(so)}catch{}else try{so.setAttribute(Ot,"")}catch{}},qd=function(Ot){let so,Vo;if(Af)Ot="<remove></remove>"+Ot;else{const t=Y7(Ot,/^[\r\n\t ]+/);Vo=t&&t[0]}Fg==="application/xhtml+xml"&&Rg===Eu&&(Ot='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ot+"</body></html>");const Wa=Ze?Ze.createHTML(Ot):Ot;if(Rg===Eu)try{so=new U().parseFromString(Wa,Fg)}catch{}if(!so||!so.documentElement){so=Jt.createDocument(Rg,"template",null);try{so.documentElement.innerHTML=qh?bt:Wa}catch{}}const ll=so.body||so.documentElement;return Ot&&Vo&&ll.insertBefore(c.createTextNode(Vo),ll.childNodes[0]||null),Rg===Eu?Pt.call(so,wc?"html":"body")[0]:wc?so.documentElement:ll},Hy=function(Ot){return yn.call(Ot.ownerDocument||Ot,Ot,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},lq=function(Ot){return Ot instanceof H&&(typeof Ot.nodeName!="string"||typeof Ot.textContent!="string"||typeof Ot.removeChild!="function"||!(Ot.attributes instanceof P)||typeof Ot.removeAttribute!="function"||typeof Ot.setAttribute!="function"||typeof Ot.namespaceURI!="string"||typeof Ot.insertBefore!="function"||typeof Ot.hasChildNodes!="function")},bk=function(Ot){return typeof v=="object"?Ot instanceof v:Ot&&typeof Ot=="object"&&typeof Ot.nodeType=="number"&&typeof Ot.nodeName=="string"},Bg=function(Ot,so,Vo){Kt[Ot]&&nM(Kt[Ot],Wa=>{Wa.call(n,so,Vo,Xb)})},u8=function(Ot){let so;if(Bg("beforeSanitizeElements",Ot,null),lq(Ot))return xs(Ot),!0;const Vo=Si(Ot.nodeName);if(Bg("uponSanitizeElement",Ot,{tagName:Vo,allowedTags:Cr}),Ot.hasChildNodes()&&!bk(Ot.firstElementChild)&&(!bk(Ot.content)||!bk(Ot.content.firstElementChild))&&Ld(/<[/\w]/g,Ot.innerHTML)&&Ld(/<[/\w]/g,Ot.textContent))return xs(Ot),!0;if(!Cr[Vo]||So[Vo]){if(!So[Vo]&&m8(Vo)&&(Nn.tagNameCheck instanceof RegExp&&Ld(Nn.tagNameCheck,Vo)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Vo)))return!1;if(_s&&!Xa[Vo]){const Wa=qe(Ot)||Ot.parentNode,ll=Me(Ot)||Ot.childNodes;if(ll&&Wa){const t=ll.length;for(let s=t-1;s>=0;--s)Wa.insertBefore(ce(ll[s],!0),be(Ot))}}return xs(Ot),!0}return Ot instanceof w&&!No(Ot)||(Vo==="noscript"||Vo==="noembed"||Vo==="noframes")&&Ld(/<\/no(script|embed|frames)/i,Ot.innerHTML)?(xs(Ot),!0):(er&&Ot.nodeType===3&&(so=Ot.textContent,so=yf(so,qn," "),so=yf(so,uo," "),so=yf(so,ps," "),Ot.textContent!==so&&(x2(n.removed,{element:Ot.cloneNode()}),Ot.textContent=so)),Bg("afterSanitizeElements",Ot,null),!1)},d8=function(Ot,so,Vo){if(Kl&&(so==="id"||so==="name")&&(Vo in c||Vo in uF))return!1;if(!(gs&&!fs[so]&&Ld(Cs,so))){if(!(Pn&&Ld(Xs,so))){if(!co[so]||fs[so]){if(!(m8(Ot)&&(Nn.tagNameCheck instanceof RegExp&&Ld(Nn.tagNameCheck,Ot)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Ot))&&(Nn.attributeNameCheck instanceof RegExp&&Ld(Nn.attributeNameCheck,so)||Nn.attributeNameCheck instanceof Function&&Nn.attributeNameCheck(so))||so==="is"&&Nn.allowCustomizedBuiltInElements&&(Nn.tagNameCheck instanceof RegExp&&Ld(Nn.tagNameCheck,Vo)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Vo))))return!1}else if(!Vi[so]){if(!Ld(dc,yf(Vo,Oa,""))){if(!((so==="src"||so==="xlink:href"||so==="href")&&Ot!=="script"&&X7(Vo,"data:")===0&&Ja[Ot])){if(!(ws&&!Ld(fr,yf(Vo,Oa,"")))){if(Vo)return!1}}}}}}return!0},m8=function(Ot){return Ot.indexOf("-")>0},f8=function(Ot){let so,Vo,Wa,ll;Bg("beforeSanitizeAttributes",Ot,null);const{attributes:t}=Ot;if(!t)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:co};for(ll=t.length;ll--;){so=t[ll];const{name:a,namespaceURI:i}=so;Vo=a==="value"?so.value:J7(so.value);const d=Vo;if(Wa=Si(a),s.attrName=Wa,s.attrValue=Vo,s.keepAttr=!0,s.forceKeepAttr=void 0,Bg("uponSanitizeAttribute",Ot,s),Vo=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){ga(a,Ot);continue}if(!Bc&&Ld(/\/>/i,Vo)){ga(a,Ot);continue}er&&(Vo=yf(Vo,qn," "),Vo=yf(Vo,uo," "),Vo=yf(Vo,ps," "));const g=Si(Ot.nodeName);if(!d8(g,Wa,Vo)){ga(a,Ot);continue}if(ld&&(Wa==="id"||Wa==="name")&&(ga(a,Ot),Vo=mo+Vo),Ze&&typeof oe=="object"&&typeof oe.getAttributeType=="function"&&!i)switch(oe.getAttributeType(g,Wa)){case"TrustedHTML":{Vo=Ze.createHTML(Vo);break}case"TrustedScriptURL":{Vo=Ze.createScriptURL(Vo);break}}if(Vo!==d)try{i?Ot.setAttributeNS(i,a,Vo):Ot.setAttribute(a,Vo)}catch{ga(a,Ot)}}Bg("afterSanitizeAttributes",Ot,null)},uq=function Ss(Ot){let so;const Vo=Hy(Ot);for(Bg("beforeSanitizeShadowDOM",Ot,null);so=Vo.nextNode();)Bg("uponSanitizeShadowNode",so,null),!u8(so)&&(so.content instanceof u&&Ss(so.content),f8(so));Bg("afterSanitizeShadowDOM",Ot,null)};return n.sanitize=function(Ss){let Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},so,Vo,Wa,ll;if(qh=!Ss,qh&&(Ss="<!-->"),typeof Ss!="string"&&!bk(Ss))if(typeof Ss.toString=="function"){if(Ss=Ss.toString(),typeof Ss!="string")throw E2("dirty is not a string, aborting")}else throw E2("toString is not a function");if(!n.isSupported)return Ss;if(Wd||Ng(Ot),n.removed=[],typeof Ss=="string"&&(ra=!1),ra){if(Ss.nodeName){const a=Si(Ss.nodeName);if(!Cr[a]||So[a])throw E2("root node is forbidden and cannot be sanitized in-place")}}else if(Ss instanceof v)so=qd("<!---->"),Vo=so.ownerDocument.importNode(Ss,!0),Vo.nodeType===1&&Vo.nodeName==="BODY"||Vo.nodeName==="HTML"?so=Vo:so.appendChild(Vo);else{if(!il&&!er&&!wc&&Ss.indexOf("<")===-1)return Ze&&id?Ze.createHTML(Ss):Ss;if(so=qd(Ss),!so)return il?null:id?bt:""}so&&Af&&xs(so.firstChild);const t=Hy(ra?Ss:so);for(;Wa=t.nextNode();)u8(Wa)||(Wa.content instanceof u&&uq(Wa.content),f8(Wa));if(ra)return Ss;if(il){if(ql)for(ll=In.call(so.ownerDocument);so.firstChild;)ll.appendChild(so.firstChild);else ll=so;return(co.shadowroot||co.shadowrootmode)&&(ll=At.call(o,ll,!0)),ll}let s=wc?so.outerHTML:so.innerHTML;return wc&&Cr["!doctype"]&&so.ownerDocument&&so.ownerDocument.doctype&&so.ownerDocument.doctype.name&&Ld(c9,so.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+so.ownerDocument.doctype.name+`>
`+s),er&&(s=yf(s,qn," "),s=yf(s,uo," "),s=yf(s,ps," ")),Ze&&id?Ze.createHTML(s):s},n.setConfig=function(Ss){Ng(Ss),Wd=!0},n.clearConfig=function(){Xb=null,Wd=!1},n.isValidAttribute=function(Ss,Ot,so){Xb||Ng({});const Vo=Si(Ss),Wa=Si(Ot);return d8(Vo,Wa,so)},n.addHook=function(Ss,Ot){typeof Ot=="function"&&(Kt[Ss]=Kt[Ss]||[],x2(Kt[Ss],Ot))},n.removeHook=function(Ss){if(Kt[Ss])return oM(Kt[Ss])},n.removeHooks=function(Ss){Kt[Ss]&&(Kt[Ss]=[])},n.removeAllHooks=function(){Kt={}},n}var oy=uM();const MD=Qt.each,Fc=Qt.trim,BK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],MK={ftp:21,http:80,https:443,mailto:25},PK=["img","video"],$K=(e,n)=>rt(e)?!e:rt(n)?!I(PK,n):!0,Dm=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},A2=(e,n,o)=>{const r=Dm(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?$K(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Hi{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Td.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!A2(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Fc(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const v=r?r.path:new Hi(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(v,n);else{const w=/([^#?]*)([#?]?.*)/.exec(n);w&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(v,w[1])+w[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&MD(BK,(v,w)=>{let _=f[w];_&&(_=_.replace(/\(mce_at\)/g,"@@")),c[v]=_}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Hi(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Hi(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?MK[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const v=n.substring(0,n.lastIndexOf("/")).split("/"),w=o.split("/");if(v.length>=w.length){for(u=0,f=v.length;u<f;u++)if(u>=w.length||v[u]!==w[u]){r=u+1;break}}if(v.length<w.length){for(u=0,f=w.length;u<f;u++)if(u>=v.length||v[u]!==w[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=v.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=w.length;u<f;u++)u!==r-1?c+="/"+w[u]:c+=w[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),v=[];MD(u,H=>{H&&v.push(H)});const w=[];for(let H=f.length-1;H>=0;H--)if(!(f[H].length===0||f[H]===".")){if(f[H]===".."){r++;continue}if(r>0){r--;continue}w.push(f[H])}const _=v.length-r;let P;return _<=0?P=sn(w).join("/"):P=v.slice(0,_).join("/")+"/"+sn(w).join("/"),P.indexOf("/")!==0&&(P="/"+P),c&&P.lastIndexOf("/")!==P.length-1&&(P+=c),P}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Jp=Qt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),PD="data-mce-type";let dM=0;const Ob=(e,n,o,r,c)=>{var u,f,v,w;const _=n.validate,P=o.getSpecialElements();e.nodeType===La&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const H=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){rt(c)&&(c.allowedTags[H]=!0);return}if(e.nodeType!==Tu||H==="body")return;const U=Fe.fromDom(e),oe=Br(U,PD),ge=nc(U,"data-mce-bogus");if(!oe&&ie(ge)){ge==="all"?mr(U):Ki(U);return}const ce=o.getElementRule(H);if(_&&!ce){Qn(P,H)?mr(U):Ki(U);return}else rt(c)&&(c.allowedTags[H]=!0);if(_&&ce&&!oe){if(L((v=ce.attributesForced)!==null&&v!==void 0?v:[],be=>{or(U,be.name,be.value==="{$uid}"?`mce_${dM++}`:be.value)}),L((w=ce.attributesDefault)!==null&&w!==void 0?w:[],be=>{Br(U,be.name)||or(U,be.name,be.value==="{$uid}"?`mce_${dM++}`:be.value)}),ce.attributesRequired&&!G(ce.attributesRequired,be=>Br(U,be))){Ki(U);return}if(ce.removeEmptyAttrs&&Au(U)){Ki(U);return}ce.outputName&&ce.outputName!==H&&mx(U,ce.outputName)}},sy=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:v}=c;c.keepAttr=Rb(n,o,r,u,f,v),c.keepAttr?(c.allowedAttributes[f]=!0,ZT(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&bo(v,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):WT(e,f)&&(c.forceKeepAttr=!0)},Rb=(e,n,o,r,c,u)=>o!=="html"&&!Ta(r)?!0:!(c in Jp&&A2(e,u,r))&&(!e.validate||n.isValid(r,c)||bo(c,"data-")||bo(c,"aria-")),WT=(e,n)=>e.hasAttribute(PD)&&(n==="id"||n==="class"||n==="style"),ZT=(e,n)=>e in n.getBoolAttrs(),mM=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],v=f.name,w=f.value;!Rb(n,o,r,e.tagName.toLowerCase(),v,w)&&!WT(e,v)?e.removeAttribute(v):ZT(v,o)&&e.setAttribute(v,v)}},fM=(e,n,o)=>{const r=oy();return r.addHook("uponSanitizeElement",(c,u)=>{Ob(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{sy(c,e,n,o.current(),u)}),r},l9=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},u9=e=>{const n=tC(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};oy().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};oy().sanitize(e,o)}else throw new Error("Not a namespace element")},gM=(e,n)=>{const o=R();if(e.sanitize){const r=fM(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,l9(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:u9}}else return{sanitizeHtmlElement:(u,f)=>{const v=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=v.nextNode();){const _=o.track(w);Ob(w,e,n,_),Mn(w)&&mM(w,e,n,_)}o.reset()},sanitizeNamespaceElement:je}},hM=Qt.makeMap,pM=Qt.extend,bM=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea"&&c!=="noscript",f=n.childNodes;for(let v=0,w=f.length;v<w;v++){const _=f[v],P=new Al(_.nodeName.toLowerCase(),_.nodeType);if(Mn(_)){const H=_.attributes;for(let U=0,oe=H.length;U<oe;U++){const ge=H[U];P.attr(ge.name,ge.value)}Ta(P.name)&&(r(_),P.value=_.innerHTML)}else un(_)?(P.value=_.data,u&&(P.raw=!0)):(sc(_)||jc(_)||lu(_))&&(P.value=_.data);Ta(P.name)||bM(P,_,o,r),e.append(P)}},d9=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;L(n,v=>v(f)),gn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];L(o,f=>f(u))}},m9=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),v=pM(hM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),w=f0(n),_=/[ \t\r\n]+/g,P=/^[ \t\r\n]+/,H=/[ \t\r\n]+$/,U=qe=>{let Ze=qe.parent;for(;rt(Ze);){if(Ze.name in f)return!0;Ze=Ze.parent}return!1},oe=qe=>{let Ze=qe;for(;rt(Ze);){if(Ze.name in w)return yT(n,u,f,Ze);Ze=Ze.parent}return!1},ge=qe=>qe.name in v||ml(n,qe)||Ta(qe.name)&&qe.parent===e,ce=(qe,Ze)=>{const bt=Ze?qe.prev:qe.next;return rt(bt)||gn(qe.parent)?!1:ge(qe.parent)&&(qe.parent!==e||r.isRootContent===!0)};return[qe=>{var Ze;if(qe.type===3&&!U(qe)){let bt=(Ze=qe.value)!==null&&Ze!==void 0?Ze:"";bt=bt.replace(_," "),(di(qe.prev,ge)||ce(qe,!0))&&(bt=bt.replace(P,"")),bt.length===0||bt===" "&&qe.prev&&qe.prev.type===La&&qe.next&&qe.next.type===La?qe.remove():qe.value=bt}},qe=>{var Ze;if(qe.type===1){const bt=n.getElementRule(qe.name);if(c&&bt){const Jt=yT(n,u,f,qe);bt.paddInEmptyBlock&&Jt&&oe(qe)?W3(o,r,ge,qe):bt.removeEmpty&&Jt?ge(qe)?qe.remove():qe.unwrap():bt.paddEmpty&&(Jt||t7(qe))&&W3(o,r,ge,qe)}}else if(qe.type===3&&!U(qe)){let bt=(Ze=qe.value)!==null&&Ze!==void 0?Ze:"";(qe.next&&ge(qe.next)||ce(qe,!1))&&(bt=bt.replace(H,"")),bt.length===0?qe.remove():qe.value=bt}}]},vM=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},ry=(e={},n=mm())=>{const o=IT(),r=IT(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=gM(c,n),v=(Ze,bt,Jt="html")=>{const yn=Jt==="xhtml"?"application/xhtml+xml":"text/html",In=Qn(n.getSpecialElements(),bt.toLowerCase()),Pt=In?`<${bt}>${Ze}</${bt}>`:Ze,At=()=>Jt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Pt}</body></html>`:/^[\s]*<head/i.test(Ze)||/^[\s]*<html/i.test(Ze)||/^[\s]*<!DOCTYPE/i.test(Ze)?`<html>${Pt}</html>`:`<body>${Pt}</body>`,Kt=u.parseFromString(At(),yn).body;return f.sanitizeHtmlElement(Kt,yn),In?Kt.firstChild:Kt},w=o.addFilter,_=o.getFilters,P=o.removeFilter,H=r.addFilter,U=r.getFilters,oe=r.removeFilter,ge=(Ze,bt)=>{xB(n,Ze)&&bt.push(Ze)},ce=(Ze,bt)=>{const Jt=ie(bt.attr(PD)),yn=bt.type===1&&!Qn(Ze,bt.name)&&!ml(n,bt)&&!Ta(bt.name);return bt.type===3||yn&&!Jt},be=(Ze,bt)=>{const Jt=pM(hM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),yn=/^[ \t\r\n]+/,In=/[ \t\r\n]+$/;let Pt=Ze.firstChild,At=null;const Kt=qn=>{var uo,ps;qn&&(Pt=qn.firstChild,Pt&&Pt.type===3&&(Pt.value=(uo=Pt.value)===null||uo===void 0?void 0:uo.replace(yn,"")),Pt=qn.lastChild,Pt&&Pt.type===3&&(Pt.value=(ps=Pt.value)===null||ps===void 0?void 0:ps.replace(In,"")))};if(n.isValidChild(Ze.name,bt.toLowerCase())){for(;Pt;){const qn=Pt.next;ce(Jt,Pt)?(At||(At=new Al(bt,1),At.attr(c.forced_root_block_attrs),Ze.insert(At,Pt)),At.append(Pt)):(Kt(At),At=null),Pt=qn}Kt(At)}},qe={schema:n,addAttributeFilter:H,getAttributeFilters:U,removeAttributeFilter:oe,addNodeFilter:w,getNodeFilters:_,removeNodeFilter:P,parse:(Ze,bt={})=>{var Jt;const yn=c.validate,In=(Jt=bt.context)!==null&&Jt!==void 0?Jt:c.root_name,Pt=v(Ze,In,bt.format);Gs(n,Pt);const At=new Al(In,11);bM(At,Pt,n.getSpecialElements(),f.sanitizeNamespaceElement),Pt.innerHTML="";const[Kt,qn]=m9(At,n,c,bt),uo=[],ps=yn?Oa=>ge(Oa,uo):je,Cs={nodes:{},attributes:{}},Xs=Oa=>SB(_(),U(),Oa,Cs);if(d9(At,[Kt,Xs],[qn,ps]),uo.reverse(),yn&&uo.length>0)if(bt.context){const{pass:Oa,fail:dc}=He(uo,Cr=>Cr.parent===At);pf(dc,n,At,Xs),bt.invalid=Oa.length>0}else pf(uo,n,At,Xs);const fr=vM(c,bt);return fr&&(At.name==="body"||bt.isRootContent)&&be(At,fr),bt.invalid||V3(Cs,bt),At}};return j7(qe,c),w2(qe,c,n),qe},k2=e=>qp(e)?Mh({validate:!1}).serialize(e):e,$D=(e,n,o)=>{const r=k2(e),c=n(r);if(c.isDefaultPrevented())return c;if(qp(e))if(c.content!==r){const u=ry({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},yM=e=>({sanitize:Xc(e),sandbox_iframes:iE(e),sandbox_iframes_exclusions:ev(e)}),ID=(e,n)=>{if(n.no_events)return Mi.value(n);{const o=PF(e,n);return o.isDefaultPrevented()?Mi.error(ub(e,{content:"",...o}).content):Mi.value(o)}},CM=(e,n,o)=>o.no_events?n:$D(n,c=>ub(e,{...o,content:c}),yM(e)).content,jT=(e,n)=>{if(n.no_events)return Mi.value(n);{const o=$D(n.content,r=>Pv(e,{...n,content:r}),yM(e));return o.isDefaultPrevented()?(lb(e,o),Mi.error(void 0)):Mi.value(o)}},LD=(e,n,o)=>{o.no_events||lb(e,{...o,content:n})},HD=(e,n,o)=>({element:e,width:n,rows:o}),zD=(e,n)=>({element:e,cells:n}),wM=(e,n)=>({x:e,y:n}),VD=(e,n)=>Kr(e,n).bind(aa).getOr(1),SM=(e,n,o,r,c)=>{const u=VD(c,"rowspan"),f=VD(c,"colspan"),v=e.rows;for(let w=o;w<o+u;w++){v[w]||(v[w]=zD(EC(r),[]));for(let _=n;_<n+f;_++){const P=v[w].cells;P[_]=w===o&&_===n?c:Yf(c)}}},xM=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},EM=(e,n,o)=>{for(;xM(e,n,o);)n++;return n},TM=e=>Je(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),AM=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(os(c[u],n))return V.some(wM(u,r))}return V.none()},kM=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let v=o;v<=c;v++){const w=f[v].cells,_=n<r?w.slice(n,r+1):w.slice(r,n+1);u.push(zD(f[v].element,_))}return u},UD=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,v=c<f?kM(e,r,c,u,f):kM(e,r,f,u,c);return HD(e.element,TM(v),v)},_2=(e,n)=>{const o=Yf(e.element),r=Fe.fromTag("tbody");return Mu(r,n),na(o,r),o},_M=e=>le(e.rows,n=>{const o=le(n.cells,c=>{const u=EC(c);return br(u,"colspan"),br(u,"rowspan"),u}),r=Yf(n.element);return Mu(r,o),r}),DM=e=>{const n=HD(Yf(e),0,[]);return L($c(e,"tr"),(o,r)=>{L($c(o,"td,th"),(c,u)=>{SM(n,EM(n,u,r),r,o,c)})}),HD(n.element,TM(n.rows),n.rows)},GT=e=>_2(e,_M(e)),f9=(e,n,o)=>AM(e,n).bind(r=>AM(e,o).map(c=>UD(e,r,c))),g9=e=>Wt(e,n=>fe(n)==="ul"||fe(n)==="ol"),Fb=(e,n)=>Wt(e,o=>fe(o)==="li"&&vv(o,n)).fold(ve([]),o=>g9(e).map(r=>{const c=Fe.fromTag(fe(r)),u=ys(Zc(r),(f,v)=>bo(v,"list-style"));return Yo(c,u),[Fe.fromTag("li"),c]}).getOr([])),WD=(e,n)=>{const o=Je(n,(r,c)=>(na(c,r),c),e);return n.length>0?l([o]):o},OM=e=>mh(e)?xc(e).filter(Jf).fold(ve([]),n=>[e,n]):Jf(e)?[e]:[],D2=(e,n,o)=>{const r=Fe.fromDom(n.commonAncestorContainer),c=Em(r,e),u=ke(c,w=>o.isWrapper(fe(w))),f=Fb(c,n),v=u.concat(f.length?f:OM(r));return le(v,Yf)},ZD=()=>l([]),jD=(e,n,o)=>WD(Fe.fromDom(n.cloneContents()),D2(e,n,o)),RM=(e,n)=>Ba(n,"table",_e(os,e)),FM=(e,n)=>RM(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=DM(o);return f9(u,r,c).map(f=>l([GT(f)]))}).getOrThunk(ZD),h9=(e,n,o)=>n.length>0&&n[0].collapsed?ZD():jD(e,n[0],o),p9=(e,n,o)=>{const r=Tw(n,e);return r.length>0?FM(e,r):h9(e,n,o)},qT=(e,n)=>n>=0&&n<e.length&&Cg(e.charAt(n)),KT=e=>Fi(e.innerText),b9=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),NM=e=>V.from(e.selection.getRng()).map(n=>{var o;const r=V.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=b9(r),f=Fe.fromDom(n.cloneContents());bN(f),vN(f);const v=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),w=KT(v),_=Fi((o=v.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(v),qT(_,0)||qT(_,_.length-1)){const P=r.getOr(c),H=KT(P),U=H.indexOf(w);if(U===-1)return w;{const oe=qT(H,U-1),ge=qT(H,U+w.length);return(oe?" ":"")+w+(ge?" ":"")}}else return w}).getOr(""),v9=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=rT(e,pv(c)),f=n.contextual?p9(Fe.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},y9=(e,n)=>{if(n.format==="text")return NM(e);{const o=v9(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},C9=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),w9=(e,n,o={})=>{const r=C9(o,n);return ID(e,r).fold(Rt,c=>{const u=y9(e,c);return CM(e,u,c)})},GD=0,BM=1,MM=2,S9=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(P,H,U)=>({start:P,end:H,diag:U}),f=(P,H,U,oe,ge)=>{const ce=w(P,H,U,oe);if(ce===null||ce.start===H&&ce.diag===H-oe||ce.end===P&&ce.diag===P-U){let be=P,Me=U;for(;be<H||Me<oe;)be<H&&Me<oe&&e[be]===n[Me]?(ge.push([GD,e[be]]),++be,++Me):H-P>oe-U?(ge.push([MM,e[be]]),++be):(ge.push([BM,n[Me]]),++Me)}else{f(P,ce.start,U,ce.start-ce.diag,ge);for(let be=ce.start;be<ce.end;++be)ge.push([GD,e[be]]);f(ce.end,H,ce.end-ce.diag,oe,ge)}},v=(P,H,U,oe)=>{let ge=P;for(;ge-H<oe&&ge<U&&e[ge]===n[ge-H];)++ge;return u(P,ge,H)},w=(P,H,U,oe)=>{const ge=H-P,ce=oe-U;if(ge===0||ce===0)return null;const be=ge-ce,Me=ce+ge,qe=(Me%2===0?Me:Me+1)/2;r[1+qe]=P,c[1+qe]=H+1;let Ze,bt,Jt,yn,In;for(Ze=0;Ze<=qe;++Ze){for(bt=-Ze;bt<=Ze;bt+=2){for(Jt=bt+qe,bt===-Ze||bt!==Ze&&r[Jt-1]<r[Jt+1]?r[Jt]=r[Jt+1]:r[Jt]=r[Jt-1]+1,yn=r[Jt],In=yn-P+U-bt;yn<H&&In<oe&&e[yn]===n[In];)r[Jt]=++yn,++In;if(be%2!==0&&be-Ze<=bt&&bt<=be+Ze&&c[Jt-be]<=r[Jt])return v(c[Jt-be],bt+P-U,H,oe)}for(bt=be-Ze;bt<=be+Ze;bt+=2){for(Jt=bt+qe-be,bt===be-Ze||bt!==be+Ze&&c[Jt+1]<=c[Jt-1]?c[Jt]=c[Jt+1]-1:c[Jt]=c[Jt-1],yn=c[Jt]-1,In=yn-P+U-bt;yn>=P&&In>=U&&e[yn]===n[In];)c[Jt]=yn--,In--;if(be%2===0&&-Ze<=bt&&bt<=Ze&&c[Jt]<=r[Jt+be])return v(c[Jt],bt+P-U,H,oe)}}return null},_=[];return f(0,e.length,0,n.length,_),_},PM=e=>Mn(e)?e.outerHTML:un(e)?Td.encodeRaw(e.data,!1):sc(e)?"<!--"+e.data+"-->":"",x9=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},E9=(e,n,o)=>{const r=x9(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},YT=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},al=(e,n)=>{let o=0;L(e,r=>{r[0]===GD?o++:r[0]===BM?(E9(n,r[1],o),o++):r[0]===MM&&YT(n,o)})},T9=(e,n)=>ke(le(ss(e.childNodes),T(Fi,PM)),o=>o.length>0),XT=(e,n)=>{const o=le(ss(n.childNodes),PM);return al(S9(o,e),n),n},Nb=Ft(()=>document.implementation.createHTMLDocument("undo")),$M=e=>e.querySelector("iframe")!==null,Su=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Bb=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),O2=e=>{const n=e.serializer.getTempAttrs(),o=pN(e.getBody(),n);return $M(o)?Su(T9(o)):Bb(Fi(o.innerHTML))},qD=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?XT(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:rt(r)&&_E(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},JT=e=>e.type==="fragmented"?e.fragments.join(""):e.content,IM=e=>{const n=Fe.fromTag("body",Nb());return Pu(n,JT(e)),L($c(n,"*[data-mce-bogus]"),Ki),xr(n)},LM=(e,n)=>JT(e)===JT(n),R2=(e,n)=>IM(e)===IM(n),F2=(e,n)=>!e||!n?!1:LM(e,n)?!0:R2(e,n),KD=e=>e.get()===0,N2=(e,n,o)=>{KD(o)&&(e.typing=n)},HM=(e,n)=>{e.typing&&(N2(e,!1,n),e.add())},YD=e=>{e.typing&&(e.typing=!1,e.add())},XD=(e,n,o)=>{KD(n)&&o.set(GC(e.selection))},A9=(e,n,o,r,c,u,f)=>{const v=O2(e),w=Qt.extend(u||{},v);if(!KD(r)||e.removed)return null;const _=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:_,originalEvent:f}).isDefaultPrevented()||_&&F2(_,w))return null;n.data[o.get()]&&c.get().each(U=>{n.data[o.get()].beforeBookmark=U});const P=p_(e);if(P&&n.data.length>P){for(let U=0;U<n.data.length-1;U++)n.data[U]=n.data[U+1];n.data.length--,o.set(n.data.length)}w.bookmark=GC(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(w),o.set(n.data.length-1);const H={level:w,lastLevel:_,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",H),e.dispatch("change",H)):e.dispatch("AddUndo",H),w},k9=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},xg=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];qD(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},JD=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],qD(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},_9=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,N2(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],qD(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},QT=e=>{e.clear(),e.add()},QD=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!F2(O2(e),n.data[0]),zM=(e,n)=>n.get()<e.data.length-1&&!e.typing,VM=(e,n,o)=>(HM(e,n),e.beforeChange(),e.ignore(o),e.add()),UM=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},D9=(e,n)=>{const o=e.dom,r=rt(n)?n:e.getBody();L(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=ow(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const v=o.getAttrib(c,"name")||c.id,w=sw(e);v&&e.hasVisual?o.addClass(c,w):o.removeClass(c,w)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},WM=e=>({init:{bindEvents:je},undoManager:{beforeChange:(n,o)=>XD(e,n,o),add:(n,o,r,c,u,f)=>A9(e,n,o,r,c,u,f),undo:(n,o,r)=>_9(e,n,o,r),redo:(n,o)=>JD(e,n,o),clear:(n,o)=>k9(e,n,o),reset:n=>QT(n),hasUndo:(n,o)=>QD(e,n,o),hasRedo:(n,o)=>zM(n,o),transact:(n,o,r)=>VM(n,o,r),ignore:(n,o)=>UM(n,o),extra:(n,o,r,c)=>xg(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>xT(e,n,o,r,c),matchAll:(n,o)=>ET(e,n,o),matchNode:(n,o,r,c)=>Am(e,n,o,r,c),canApply:n=>v7(e,n),closest:n=>b7(e,n),apply:(n,o,r)=>jB(e,n,o,r),remove:(n,o,r,c)=>vD(e,n,o,r,c),toggle:(n,o,r)=>SD(e,n,o,r),formatChanged:(n,o,r,c,u)=>L7(e,n,o,r,c,u)},editor:{getContent:n=>yN(e,n),setContent:(n,o)=>wT(e,n,o),insertContent:(n,o)=>Pd(e,n,o),addVisual:n=>D9(e,n)},selection:{getContent:(n,o)=>w9(e,n,o)},autocompleter:{addDecoration:je,removeDecoration:je},raw:{getModel:()=>V.none()}}),O9=e=>{const n=_=>St(_)?_:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:v,raw:w}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(_,P,H)=>r.transact(H),ignore:(_,P)=>r.ignore(P),extra:(_,P,H,U)=>r.extra(H,U)},formatter:{match:(_,P,H,U)=>c.match(_,n(P),U),matchAll:c.matchAll,matchNode:c.matchNode,canApply:_=>c.canApply(_),closest:_=>c.closest(_),apply:(_,P,H)=>c.apply(_,n(P)),remove:(_,P,H,U)=>c.remove(_,n(P)),toggle:(_,P,H)=>c.toggle(_,n(P)),formatChanged:(_,P,H,U,oe)=>c.formatChanged(P,H,U,oe)},editor:{getContent:_=>u.getContent(_),setContent:(_,P)=>({content:u.setContent(_,P),html:""}),insertContent:(_,P)=>(u.insertContent(_),""),addVisual:u.addVisual},selection:{getContent:(_,P)=>f.getContent(P)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>V.some(w.getRawModel())}}},R9=()=>{const e=ve(null),n=ve("");return{init:{bindEvents:je},undoManager:{beforeChange:je,add:e,undo:e,redo:e,clear:je,reset:je,hasUndo:Ne,hasRedo:Ne,transact:e,ignore:je,extra:je},formatter:{match:Ne,matchAll:ve([]),matchNode:ve(void 0),canApply:Ne,closest:n,apply:je,remove:je,toggle:je,formatChanged:ve({unbind:je})},editor:{getContent:n,setContent:ve({content:"",html:""}),insertContent:ve(""),addVisual:je},selection:{getContent:n},autocompleter:{addDecoration:je,removeDecoration:je},raw:{getModel:ve(V.none())}}},Eg=e=>Qn(e.plugins,"rtc"),ZM=e=>bs(e.plugins,"rtc").bind(n=>V.from(n.setup)),F9=e=>{const n=e;return ZM(e).fold(()=>(n.rtcInstance=WM(e),V.none()),o=>(n.rtcInstance=R9(),V.some(()=>o().then(r=>(n.rtcInstance=O9(r),r.rtc.isRemote)))))},e4=e=>e.rtcInstance?e.rtcInstance:WM(e),zc=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},jM=(e,n,o)=>{zc(e).undoManager.beforeChange(n,o)},t4=(e,n,o,r,c,u,f)=>zc(e).undoManager.add(n,o,r,c,u,f),n4=(e,n,o,r)=>zc(e).undoManager.undo(n,o,r),GM=(e,n,o)=>zc(e).undoManager.redo(n,o),o4=(e,n,o)=>{zc(e).undoManager.clear(n,o)},qM=(e,n)=>{zc(e).undoManager.reset(n)},KM=(e,n,o)=>zc(e).undoManager.hasUndo(n,o),s4=(e,n,o)=>zc(e).undoManager.hasRedo(n,o),YM=(e,n,o,r)=>zc(e).undoManager.transact(n,o,r),XM=(e,n,o)=>{zc(e).undoManager.ignore(n,o)},JM=(e,n,o,r,c)=>{zc(e).undoManager.extra(n,o,r,c)},N9=(e,n,o,r,c)=>zc(e).formatter.match(n,o,r,c),r4=(e,n,o)=>zc(e).formatter.matchAll(n,o),B9=(e,n,o,r,c)=>zc(e).formatter.matchNode(n,o,r,c),eA=(e,n)=>zc(e).formatter.canApply(n),M9=(e,n)=>zc(e).formatter.closest(n),P9=(e,n,o,r)=>{zc(e).formatter.apply(n,o,r)},$9=(e,n,o,r,c)=>{zc(e).formatter.remove(n,o,r,c)},QM=(e,n,o,r)=>{zc(e).formatter.toggle(n,o,r)},eP=(e,n,o,r,c,u)=>zc(e).formatter.formatChanged(n,o,r,c,u),I9=(e,n)=>e4(e).editor.getContent(n),L9=(e,n,o)=>e4(e).editor.setContent(n,o),H9=(e,n,o)=>e4(e).editor.insertContent(n,o),z9=(e,n,o)=>zc(e).selection.getContent(n,o),V9=(e,n)=>zc(e).editor.addVisual(n),a4=e=>zc(e).init.bindEvents(),IK=(e,n={})=>{const o=n.format?n.format:"html";return z9(e,o,n)},tP=e=>e.dom.length===0?(mr(e),V.none()):V.some(e),U9=(e,n)=>e.filter(o=>qu.isBookmarkNode(o.dom)).bind(n?Wc:su),W9=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,v=r?u.length:f.length;r?(O3(u,f,c,!1,!r),o.setStart(f,v)):(O3(f,u,c,!1,!r),o.setEnd(f,v))},Z9=(e,n,o)=>{xc(e).each(r=>{const c=e.dom;n&&e2(r,Mt(c,0),o)?lT(c,0,o):!n&&jv(r,Mt(c,c.length),o)&&D3(c,c.length,o)})},nP=(e,n,o,r,c)=>{e.bind(u=>((r?D3:lT)(u.dom,r?u.dom.length:0,c),n.filter(Js).map(v=>W9(u,v,o,r,c)))).orThunk(()=>U9(n,r).or(n).filter(Js).map(f=>Z9(f,r,c)))},j9=(e,n,o)=>{const r=V.from(n.firstChild).map(Fe.fromDom),c=V.from(n.lastChild).map(Fe.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(su).filter(Js).bind(tP),f=c.bind(Wc).filter(Js).bind(tP);nP(u,r,e,!0,o),nP(f,c,e,!1,o),e.collapse(!1)},G9=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),oP=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Mh({validate:!1},e.schema).serialize(u)}else return n.content},q9=(e,n,o={})=>{const r=G9(o,n);jT(e,r).each(c=>{const u=oP(e,c),f=e.selection.getRng();j9(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),qw(e,f),LD(e,u,c)})},sP=(e,n,o)=>{if(Qn(e,n)){const r=ke(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var K9=(e,n)=>{let o,r;const c=(v,w)=>Wt(w,_=>e.is(_,v)),u=v=>e.getParents(v,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",v=>{const w=v.element,_=u(w),P={};on(o,(H,U)=>{c(U,_).each(oe=>{r[U]||(L(H,ge=>{ge(!0,{node:oe,selector:U,parents:_})}),r[U]=H),P[U]=H})}),on(r,(H,U)=>{P[U]||(delete r[U],L(H,oe=>{oe(!1,{node:w,selector:U,parents:_})}))})})};return{selectorChangedWithUnbind:(v,w)=>(o||f(),o[v]||(o[v]=[]),o[v].push(w),c(v,u(n.selection.getStart())).each(()=>{r[v]=o[v]}),{unbind:()=>{sP(o,v,w),sP(r,v,w)}})}};const rP=e=>!!(e&&e.ownerDocument)&&Ea(Fe.fromDom(e.ownerDocument),Fe.fromDom(e)),Y9=e=>e?rP(e.startContainer)&&rP(e.endContainer):!1,X9=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=K9(e,r),v=(En,co)=>{const Us=e.createRng();rt(En)&&rt(co)?(Us.setStart(En,co),Us.setEnd(En,co),bt(Us),Me(!1)):(_w(e,Us,r.getBody(),!0),bt(Us))},w=En=>IK(r,En),_=(En,co)=>q9(r,En,co),P=En=>b3(r.getBody(),Ze(),En),H=En=>rN(r.getBody(),Ze(),En),U=(En,co)=>dc.getBookmark(En,co),oe=En=>dc.moveToBookmark(En),ge=(En,co)=>(sT(e,En,co).each(bt),En),ce=()=>{const En=Ze(),co=qe();return!En||En.item?!1:En.compareEndPoints?En.compareEndPoints("StartToEnd",En)===0:!co||En.collapsed},be=()=>{const En=Ze(),co=r.getBody().querySelectorAll('[data-mce-selected="1"]');return co.length>0?Xt(co,Us=>e.isEditable(Us.parentElement)):h3(e,En)},Me=En=>{const co=Ze();co.collapse(!!En),bt(co)},qe=()=>n.getSelection?n.getSelection():n.document.selection,Ze=()=>{let En;const co=(Nn,So,fs)=>{try{return So.compareBoundaryPoints(Nn,fs)}catch{return-1}},Us=n.document;if(rt(r.bookmark)&&!Bh(r)){const Nn=eT(r);if(Nn.isSome())return Nn.map(So=>rT(r,[So])[0]).getOr(Us.createRange())}try{const Nn=qe();Nn&&!im(Nn.anchorNode)&&(Nn.rangeCount>0?En=Nn.getRangeAt(0):En=Us.createRange(),En=rT(r,[En])[0])}catch{}if(En||(En=Us.createRange()),If(En.startContainer)&&En.collapsed){const Nn=e.getRoot();En.setStart(Nn,0),En.setEnd(Nn,0)}return c&&u&&(co(En.START_TO_START,En,c)===0&&co(En.END_TO_END,En,c)===0?En=u:(c=null,u=null)),En},bt=(En,co)=>{if(!Y9(En))return;const Us=qe();if(En=r.dispatch("SetSelectionRange",{range:En,forward:co}).range,Us){u=En;try{Us.removeAllRanges(),Us.addRange(En)}catch{}co===!1&&Us.extend&&(Us.collapse(En.endContainer,En.endOffset),Us.extend(En.startContainer,En.startOffset)),c=Us.rangeCount>0?Us.getRangeAt(0):null}if(!En.collapsed&&En.startContainer===En.endContainer&&(Us!=null&&Us.setBaseAndExtent)&&En.endOffset-En.startOffset<2&&En.startContainer.hasChildNodes()){const So=En.startContainer.childNodes[En.startOffset];So&&So.nodeName==="IMG"&&(Us.setBaseAndExtent(En.startContainer,En.startOffset,En.endContainer,En.endOffset),(Us.anchorNode!==En.startContainer||Us.focusNode!==En.endContainer)&&Us.setBaseAndExtent(So,0,So,1))}r.dispatch("AfterSetSelectionRange",{range:En,forward:co})},Jt=En=>(_(e.getOuterHTML(En)),En),yn=()=>cL(r.getBody(),Ze()),In=(En,co)=>iL(e,Ze(),En,co),Pt=()=>{const En=qe(),co=En==null?void 0:En.anchorNode,Us=En==null?void 0:En.focusNode;if(!En||!co||!Us||im(co)||im(Us))return!0;const Nn=e.createRng(),So=e.createRng();try{Nn.setStart(co,En.anchorOffset),Nn.collapse(!0),So.setStart(Us,En.focusOffset),So.collapse(!0)}catch{return!0}return Nn.compareBoundaryPoints(Nn.START_TO_START,So)<=0},Oa={dom:e,win:n,serializer:o,editor:r,expand:(En={type:"word"})=>bt(bn(e).expand(Ze(),En)),collapse:Me,setCursorLocation:v,getContent:w,setContent:_,getBookmark:U,moveToBookmark:oe,select:ge,isCollapsed:ce,isEditable:be,isForward:Pt,setNode:Jt,getNode:yn,getSel:qe,setRng:bt,getRng:Ze,getStart:P,getEnd:H,getSelectedBlocks:In,normalize:()=>{const En=Ze(),co=qe();if(!M_(co)&&Mp(r)){const Us=Cn(e,En);return Us.each(Nn=>{bt(Nn,Pt())}),Us.getOr(En)}return En},selectorChanged:(En,co)=>(f(En,co),Oa),selectorChangedWithUnbind:f,getScrollContainer:()=>{let En,co=e.getRoot();for(;co&&co.nodeName!=="BODY";){if(co.scrollHeight>co.clientHeight){En=co;break}co=co.parentNode}return En},scrollIntoView:(En,co)=>{rt(En)?q8(r,En,co):qw(r,Ze(),co)},placeCaretAt:(En,co)=>bt(y(En,co,r.getDoc())),getBoundingClientRect:()=>{const En=Ze();return En.collapsed?Mt.fromRangeStart(En).getClientRects()[0]:En.getBoundingClientRect()},destroy:()=>{n=c=u=null,Cr.destroy()}},dc=qu(Oa),Cr=mb(Oa,r);return Oa.bookmarkManager=dc,Oa.controlSelection=Cr,Oa},LK=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Qt.extend({},o.getBlockElements()),v=o.getNonEmptyElements(),w=o.getWhitespaceElements();f.body=1;const _=P=>P.name in f||ml(o,P);for(let P=0,H=r.length;P<H;P++){let U=r[P],oe=U.parent;if(oe&&_(oe)&&U===oe.lastChild){let ge=U.prev;for(;ge;){const ce=ge.name;if(ce!=="span"||ge.attr("data-mce-type")!=="bookmark"){ce==="br"&&(U=null);break}ge=ge.prev}if(U&&(U.remove(),yT(o,v,w,oe))){const ce=o.getElementRule(oe.name);ce&&(ce.removeEmpty?oe.remove():ce.paddEmpty&&W3(e,u,_,oe))}}else{let ge=U;for(;oe&&oe.firstChild===ge&&oe.lastChild===ge&&(ge=oe,!f[oe.name]);)oe=oe.parent;if(ge===oe){const ce=new Al("#text",3);ce.value=za,U.replace(ce)}}}})},J9=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,v=n.url_converter_scope;let w=r.length;for(;w--;){const _=r[w];let P=_.attr(u);P!==void 0?(_.attr(c,P.length>0?P:null),_.attr(u,null)):(P=_.attr(c),c==="style"?P=o.serializeStyle(o.parseStyle(P),_.name):f&&(P=f.call(v,P,c,_.name)),_.attr(c,P.length>0?P:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const v=r[f];v.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(V.from(v.firstChild).exists(_=>{var P;return!RC((P=_.value)!==null&&P!==void 0?P:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=r.length;for(;v--;){const w=r[v],_=w.firstChild,P=(u=_==null?void 0:_.value)!==null&&u!==void 0?u:"";if(c==="script"){const H=w.attr("type");H&&w.attr("type",H==="mce-no/type"?null:H.replace(/^mce\-/,"")),n.element_format==="xhtml"&&_&&P.length>0&&(_.value=`// <![CDATA[
`+f(P)+`
// ]]>`)}else n.element_format==="xhtml"&&_&&P.length>0&&(_.value=`<!--
`+f(P)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{L(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&LK(n,e,e.schema)},Q9=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},HK=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const v=f.createHTMLDocument("");Qt.each(u.nodeName==="BODY"?u.childNodes:[u],w=>{v.body.appendChild(v.importNode(w,!0))}),u.nodeName!=="BODY"?u=v.body.firstChild:u=v.body,r=c.doc,c.doc=v}return U_(e,{...o,node:u}),r&&(c.doc=r),u},eH=(e,n)=>rt(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,$a=(e,n,o)=>eH(e,o)?HK(e,n,o):n,c4=(e,n,o)=>{Qt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},zK=(e,n,o)=>!n.no_events&&e?Fv(e,{...n,content:o}).content:o,tH=(e,n,o)=>{const r=Fi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||S0(Fe.fromDom(n))?r:Qt.trim(r)},nH=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return Q9(c),c},ay=(e,n,o)=>Mh(e,n).serialize(o),VK=(e,n,o,r,c)=>{const u=ay(n,o,r);return zK(e,c,u)},UK=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:jr.DOM,u=n&&n.schema?n.schema:mm(r),f=ry(r,u);J9(f,r,c);const v=(w,_={})=>{const P={format:"html",..._},H=$a(n,w,P),U=tH(c,H,P),oe=nH(f,U,P);return P.format==="tree"?oe:VK(n,r,u,oe,P)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:v,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:_e(c4,f,o),getTempAttrs:ve(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},mi=(e,n)=>{const o=UK(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},aP="html",cP=(e,n)=>({...e,format:n,get:!0,getInner:!0}),iP=(e,n={})=>{const o=n.format?n.format:aP,r=cP(n,o);return ID(e,r).fold(Rt,c=>{const u=I9(e,c);return CM(e,u,c)})},oH="html",sH=(e,n)=>({format:oH,...e,set:!0,content:n}),cy=(e,n,o={})=>{const r=sH(o,n);return jT(e,r).map(c=>{const u=L9(e,c.content,c);return LD(e,u.html,c),u.content}).getOr(n)},rH="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),i4=[],aH="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),l4=[],u4=(e,n)=>{const o=ke(n,r=>Qn(e,r));return ro(o)},d4=e=>{const n=u4(e,rH),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),ro(n)},lP=e=>u4(e,i4),tA=(e,n)=>{const o=Qt.makeMap(e.plugins," "),c=ke(n,u=>Qn(o,u));return ro(c)},cH=e=>tA(e,aH),iH=e=>tA(e,l4.map(n=>n.name)),lH=(e,n)=>{const o=d4(e),r=cH(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const v=`
- `,w=f?`

Themes:${v}mobile`:"",_=c?`

Plugins:${v}${r.join(v)}`:"",P=u?`

Options:${v}${o.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+w+_+P)}},Hd=e=>Wt(l4,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),uH=(e,n)=>{const o=lP(e),r=iH(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,v=c?`

Plugins:${f}${r.map(Hd).join(f)}`:"",w=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+w)}},dH=(e,n)=>{lH(e,n),uH(e,n)},nA=jr.DOM,mH=e=>{nA.setStyle(e.id,"display",e.orgDisplay)},oA=e=>V.from(e).each(n=>n.destroy()),uP=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},fH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),nA.unbind(n,"submit reset",e.formEventDelegate))},gH=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&rt(c==null?void 0:c.nextSibling)&&nA.remove(c.nextSibling),Nv(e),e.editorManager.remove(e),!e.inline&&r&&mH(e),W_(e),nA.remove(e.getContainer()),oA(n),oA(o),e.destroy()}},hH=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),oA(o),oA(r)),fH(e),uP(e),e.destroyed=!0}},sA=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Qn(e,c)}})(),iy=Ri.ModelManager,f4=(e,n)=>n.dom[e],rA=(e,n)=>parseInt(Ma(n,e),10),pH=_e(f4,"clientWidth"),bH=_e(f4,"clientHeight"),WK=_e(rA,"margin-top"),vH=_e(rA,"margin-left"),B2=e=>e.dom.getBoundingClientRect(),dP=(e,n,o)=>{const r=pH(e),c=bH(e);return n>=0&&o>=0&&n<=r&&o<=c},mP=(e,n,o,r)=>{const c=B2(n),u=e?c.left+n.dom.clientLeft+vH(n):0,f=e?c.top+n.dom.clientTop+WK(n):0,v=o-u,w=r-f;return{x:v,y:w}},yH=(e,n,o)=>{const r=Fe.fromDom(e.getBody()),c=e.inline?r:zm(r),u=mP(e.inline,c,n,o);return dP(c,u.x,u.y)},fP=e=>V.from(e).map(Fe.fromDom),CH=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return fP(n).map(hd).getOr(!1)};var wH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const gP=e=>{const n=[],o=()=>{const U=e.theme;return U&&U.getNotificationManagerImpl?U.getNotificationManagerImpl():wH()},r=()=>V.from(n[0]),c=(U,oe)=>U.type===oe.type&&U.text===oe.text&&!U.progressBar&&!U.timeout&&!oe.progressBar&&!oe.timeout,u=()=>{r().each(U=>{U.reposition()})},f=U=>{n.push(U)},v=U=>{wn(n,oe=>oe===U).each(oe=>{n.splice(oe,1)})},w=(U,oe=!0)=>e.removed||!CH(e)?{}:(oe&&e.dispatch("BeforeOpenNotification",{notification:U}),Wt(n,ge=>c(o().getArgs(ge),U)).getOrThunk(()=>{e.editorManager.setActive(e);const ge=o().open(U,()=>{v(ge)},()=>sN(e));return f(ge),u(),e.dispatch("OpenNotification",{notification:{...ge}}),ge})),_=()=>{r().each(U=>{o().close(U),v(U),u()})},P=ve(n);return(U=>{U.on("SkinLoaded",()=>{const oe=Pi(U);oe&&w({text:oe,type:"warning",timeout:0},!1),u()}),U.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),U.on("remove",()=>{L(n.slice(),oe=>{o().close(oe)})}),U.addShortcut("alt+F12","Focus to notification",()=>r().map(oe=>Fe.fromDom(oe.getEl())).each(oe=>Hv(oe)))})(e),{open:w,close:_,getNotifications:P}},ly=Ri.PluginManager,Qp=Ri.ThemeManager;var SH=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const hP=e=>{let n=[];const o=()=>{const ce=e.theme;return ce&&ce.getWindowManagerImpl?ce.getWindowManagerImpl():SH()},r=(ce,be)=>(...Me)=>be?be.apply(ce,Me):void 0,c=ce=>{e.dispatch("OpenWindow",{dialog:ce})},u=ce=>{e.dispatch("CloseWindow",{dialog:ce})},f=ce=>{n.push(ce),c(ce)},v=ce=>{u(ce),n=ke(n,be=>be!==ce),n.length===0&&e.focus()},w=()=>V.from(n[n.length-1]),_=ce=>{e.editorManager.setActive(e),Kw(e),e.ui.show();const be=ce();return f(be),be},P=(ce,be)=>_(()=>o().open(ce,be,v)),H=ce=>_(()=>o().openUrl(ce,v)),U=(ce,be,Me)=>{const qe=o();qe.alert(ce,r(Me||qe,be))},oe=(ce,be,Me)=>{const qe=o();qe.confirm(ce,r(Me||qe,be))},ge=()=>{w().each(ce=>{o().close(ce),v(ce)})};return e.on("remove",()=>{L(n,ce=>{o().close(ce)})}),{open:P,openUrl:H,alert:U,confirm:oe,close:ge}},uy=(e,n)=>{e.notificationManager.open({type:"error",text:n})},M2=(e,n)=>{e._skinLoaded?uy(e,n):e.on("SkinLoaded",()=>{uy(e,n)})},pP=(e,n)=>{M2(e,Ac.translate(["Failed to upload image: {0}",n]))},P2=(e,n,o)=>{Qc(e,n,{message:o}),console.error(o)},$2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,xH=(e,n,o)=>{P2(e,"PluginLoadError",$2("plugin",n,o))},bP=(e,n,o)=>{P2(e,"IconsLoadError",$2("icons",n,o))},EH=(e,n,o)=>{P2(e,"LanguageLoadError",$2("language",n,o))},TH=(e,n,o)=>{P2(e,"ThemeLoadError",$2("theme",n,o))},AH=(e,n,o)=>{P2(e,"ModelLoadError",$2("model",n,o))},kH=(e,n,o)=>{const r=Ac.translate(["Failed to initialize plugin: {0}",n]);Qc(e,"PluginLoadError",{message:r}),g4(r,o),M2(e,r)},g4=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},Cf=e=>/^[a-z0-9\-]+$/i.test(e),I2=e=>"content/"+e+"/content.css",_H=e=>tinymce.Resource.has(I2(e)),DH=e=>vP(e,m_(e)),OH=e=>vP(e,ol(e)),vP=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return le(n,u=>_H(u)?u:Cf(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},ar=e=>{e.contentCSS=e.contentCSS.concat(DH(e),OH(e))},RH=e=>e?ss(e.getElementsByTagName("img")):[],L2=(e,n)=>{const o={};return{findAll:(c,u=dt)=>{const f=ke(RH(c),w=>{const _=w.src;return w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!_||_===Ie.transparentSrc?!1:bo(_,"blob:")?!e.isUploaded(_)&&u(w):bo(_,"data:")?u(w):!1}),v=le(f,w=>{const _=w.src;if(Qn(o,_))return o[_].then(P=>ie(P)?P:{image:w,blobInfo:P.blobInfo});{const P=W7(n,_).then(H=>(delete o[_],{image:w,blobInfo:H})).catch(H=>(delete o[_],H));return o[_]=P,P}});return Promise.all(v)}}},yP=()=>{let o={};const r=(U,oe)=>({status:U,resultUri:oe}),c=U=>U in o;return{hasBlobUri:c,getResultUri:U=>{const oe=o[U];return oe?oe.resultUri:null},isPending:U=>c(U)?o[U].status===1:!1,isUploaded:U=>c(U)?o[U].status===2:!1,markPending:U=>{o[U]=r(1,null)},markUploaded:(U,oe)=>{o[U]=r(2,oe)},removeFailed:U=>{delete o[U]},destroy:()=>{o={}}}};let FH=0;const NH=()=>{const e=()=>Math.round(xC()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},CP=e=>e+FH+++NH(),e1=()=>{let e=[];const n=H=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[H.toLowerCase()]||"dat",o=(H,U,oe,ge,ce)=>{if(ie(H))return r({id:H,name:ge,filename:ce,blob:U,base64:oe});if(St(H))return r(H);throw new Error("Unknown input type")},r=H=>{if(!H.blob||!H.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const U=H.id||CP("blobid"),oe=H.name||U,ge=H.blob;return{id:ve(U),name:ve(oe),filename:ve(H.filename||oe+"."+n(ge.type)),blob:ve(ge),base64:ve(H.base64),blobUri:ve(H.blobUri||URL.createObjectURL(ge)),uri:ve(H.uri)}},c=H=>{f(H.id())||e.push(H)},u=H=>Wt(e,H).getOrUndefined(),f=H=>u(U=>U.id()===H);return{create:o,add:c,get:f,getByUri:H=>u(U=>U.blobUri()===H),getByData:(H,U)=>u(oe=>oe.base64()===H&&oe.blob().type===U),findFirst:u,removeByUri:H=>{e=ke(e,U=>U.blobUri()===H?(URL.revokeObjectURL(U.blobUri()),!1):!0)},destroy:()=>{L(e,H=>{URL.revokeObjectURL(H.blobUri())}),e=[]}}},Zl=(e,n)=>{const o={},r=(ce,be)=>ce?ce.replace(/\/$/,"")+"/"+be.replace(/^\//,""):be,c=(ce,be)=>new Promise((Me,qe)=>{const Ze=new XMLHttpRequest;Ze.open("POST",n.url),Ze.withCredentials=n.credentials,Ze.upload.onprogress=Jt=>{be(Jt.loaded/Jt.total*100)},Ze.onerror=()=>{qe("Image upload failed due to a XHR Transport error. Code: "+Ze.status)},Ze.onload=()=>{if(Ze.status<200||Ze.status>=300){qe("HTTP Error: "+Ze.status);return}const Jt=JSON.parse(Ze.responseText);if(!Jt||!ie(Jt.location)){qe("Invalid JSON: "+Ze.responseText);return}Me(r(n.basePath,Jt.location))};const bt=new FormData;bt.append("file",ce.blob(),ce.filename()),Ze.send(bt)}),u=we(n.handler)?n.handler:c,f=()=>new Promise(ce=>{ce([])}),v=(ce,be)=>({url:be,blobInfo:ce,status:!0}),w=(ce,be)=>({url:"",blobInfo:ce,status:!1,error:be}),_=(ce,be)=>{Qt.each(o[ce],Me=>{Me(be)}),delete o[ce]},P=(ce,be,Me)=>(e.markPending(ce.blobUri()),new Promise(qe=>{let Ze,bt;try{const Jt=()=>{Ze&&(Ze.close(),bt=je)},yn=Pt=>{Jt(),e.markUploaded(ce.blobUri(),Pt),_(ce.blobUri(),v(ce,Pt)),qe(v(ce,Pt))},In=Pt=>{Jt(),e.removeFailed(ce.blobUri()),_(ce.blobUri(),w(ce,Pt)),qe(w(ce,Pt))};bt=Pt=>{Pt<0||Pt>100||V.from(Ze).orThunk(()=>V.from(Me).map(nt)).each(At=>{Ze=At,At.progressBar.value(Pt)})},be(ce,bt).then(yn,Pt=>{In(ie(Pt)?{message:Pt}:Pt)})}catch(Jt){qe(w(ce,Jt))}})),H=ce=>ce===c,U=ce=>{const be=ce.blobUri();return new Promise(Me=>{o[be]=o[be]||[],o[be].push(Me)})},oe=(ce,be)=>(ce=Qt.grep(ce,Me=>!e.isUploaded(Me.blobUri())),Promise.all(Qt.map(ce,Me=>e.isPending(Me.blobUri())?U(Me):P(Me,u,be))));return{upload:(ce,be)=>!n.url&&H(u)?f():oe(ce,be)}},dy=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),zh=(e,n)=>Zl(n,{url:H0(e),basePath:z0(e),credentials:zx(e),handler:Vx(e)}),Tg=e=>{const n=yP(),o=zh(e,n);return{upload:(r,c=!0)=>o.upload(r,c?dy(e):void 0)}},H2=(e,n)=>e.dom.isEmpty(n.dom)&&rt(e.schema.getTextBlockElements()[fe(n)]),h4=e=>n=>{H2(e,n)&&na(n,Fe.fromHtml('<br data-mce-bogus="1" />'))},p4=e=>{const n=e1();let o,r;const c=yP(),u=[],f=Ze=>bt=>e.selection?Ze(bt):[],v=Ze=>Ze+(Ze.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(Ze,bt,Jt)=>{let yn=0;do yn=Ze.indexOf(bt,yn),yn!==-1&&(Ze=Ze.substring(0,yn)+Jt+Ze.substr(yn+bt.length),yn+=Jt.length-bt.length+1);while(yn!==-1);return Ze},_=(Ze,bt,Jt)=>{const yn=`src="${Jt}"${Jt===Ie.transparentSrc?' data-mce-placeholder="1"':""}`;return Ze=w(Ze,`src="${bt}"`,yn),Ze=w(Ze,'data-mce-src="'+bt+'"','data-mce-src="'+Jt+'"'),Ze},P=(Ze,bt)=>{L(e.undoManager.data,Jt=>{Jt.type==="fragmented"?Jt.fragments=le(Jt.fragments,yn=>_(yn,Ze,bt)):Jt.content=_(Jt.content,Ze,bt)})},H=(Ze,bt)=>{const Jt=e.convertURL(bt,"src");P(Ze.src,bt),Sc(Fe.fromDom(Ze),{src:sr(e)?v(bt):bt,"data-mce-src":Jt})},U=()=>(o||(o=zh(e,c)),be().then(f(Ze=>{const bt=le(Ze,Jt=>Jt.blobInfo);return o.upload(bt,dy(e)).then(f(Jt=>{const yn=[];let In=!1;const Pt=le(Jt,(At,Kt)=>{const{blobInfo:qn,image:uo}=Ze[Kt];let ps=!1;return At.status&&Yc(e)?(At.url&&!no(uo.src,At.url)&&(In=!0),n.removeByUri(uo.src),Eg(e)||H(uo,At.url)):At.error&&(At.error.remove&&(P(uo.src,Ie.transparentSrc),yn.push(uo),ps=!0),pP(e,At.error.message)),{element:uo,status:At.status,uploadUri:At.url,blobInfo:qn,removed:ps}});return yn.length>0&&!Eg(e)?e.undoManager.transact(()=>{L(au(yn),At=>{const Kt=xc(At);mr(At),Kt.each(h4(e)),n.removeByUri(At.dom.src)})}):In&&e.undoManager.dispatchChange(),Pt}))}))),oe=()=>ka(e)?U():Promise.resolve([]),ge=Ze=>Xt(u,bt=>bt(Ze)),ce=Ze=>{u.push(Ze)},be=()=>(r||(r=L2(c,n)),r.findAll(e.getBody(),ge).then(f(Ze=>{const bt=ke(Ze,Jt=>ie(Jt)?(M2(e,Jt),!1):Jt.uriType!=="blob");return Eg(e)||L(bt,Jt=>{P(Jt.image.src,Jt.blobInfo.blobUri()),Jt.image.src=Jt.blobInfo.blobUri(),Jt.image.removeAttribute("data-mce-src")}),bt}))),Me=()=>{n.destroy(),c.destroy(),r=o=null},qe=Ze=>Ze.replace(/src="(blob:[^"]+)"/g,(bt,Jt)=>{const yn=c.getResultUri(Jt);if(yn)return'src="'+yn+'"';let In=n.getByUri(Jt);return In||(In=Je(e.editorManager.get(),(Pt,At)=>Pt||At.editorUpload&&At.editorUpload.blobCache.getByUri(Jt),void 0)),In?'src="data:'+In.blob().type+";base64,"+In.base64()+'"':bt});return e.on("SetContent",()=>{ka(e)?oe():be()}),e.on("RawSaveContent",Ze=>{Ze.content=qe(Ze.content)}),e.on("GetContent",Ze=>{Ze.source_view||Ze.format==="raw"||Ze.format==="tree"||(Ze.content=qe(Ze.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ze=>{L(Ze,bt=>{const Jt=bt.attr("src");if(!Jt||n.getByUri(Jt))return;const yn=c.getResultUri(Jt);yn&&bt.attr("src",yn)})})}),{blobCache:n,addFilter:ce,uploadImages:U,uploadImagesAuto:oe,scanForImages:be,destroy:Me}},wP=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Mn(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Qt.each(f,(v,w)=>{n.setAttrib(c,w,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Qt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},b4={remove_similar:!0,inherit:!1},my={selector:"td,th",...b4},BH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...my},tablecellverticalalign:{styles:{"vertical-align":"%value"},...my},tablecellbordercolor:{styles:{borderColor:"%value"},...my},tablecellclass:{classes:["%value"],...my},tableclass:{selector:"table",classes:["%value"],...b4},tablecellborderstyle:{styles:{borderStyle:"%value"},...my},tablecellborderwidth:{styles:{borderWidth:"%value"},...my}},SP=ve(BH),xP=e=>{const n={},o=f=>rt(f)?n[f]:n,r=f=>Qn(n,f),c=(f,v)=>{f&&(ie(f)?(vt(v)||(v=[v]),L(v,w=>{On(w.deep)&&(w.deep=!vu(w)),On(w.split)&&(w.split=!vu(w)||_c(w)),On(w.remove)&&vu(w)&&!_c(w)&&(w.remove="none"),vu(w)&&_c(w)&&(w.mixed=!0,w.block_expand=!0),ie(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[f]=v):on(f,(w,_)=>{c(_,w)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(wP(e)),c(SP()),c(jx(e)),{get:o,has:r,register:c,unregister:u}},z2=Qt.each,ed=jr.DOM,V2=e=>rt(e)&&St(e),MH=(e,n)=>{const o=n&&n.schema||mm({}),r=(w,_)=>{_.classes.length>0&&ed.addClass(w,_.classes.join(" ")),ed.setAttribs(w,_.attrs)},c=w=>{const _=ie(w)?{name:w,classes:[],attrs:{}}:w,P=ed.create(_.name);return r(P,_),P},u=(w,_)=>{const P=o.getElementRule(w.nodeName.toLowerCase()),H=P==null?void 0:P.parentsRequired;return H&&H.length?_&&I(H,_)?_:H[0]:!1},f=(w,_,P)=>{let H;const U=_[0],oe=V2(U)?U.name:void 0,ge=u(w,oe);if(ge)oe===ge?(H=U,_=_.slice(1)):H=ge;else if(U)H=U,_=_.slice(1);else if(!P)return w;const ce=H?c(H):ed.create("div");ce.appendChild(w),P&&Qt.each(P,Me=>{const qe=c(Me);ce.insertBefore(qe,w)});const be=V2(H)?H.siblings:void 0;return f(ce,_,be)},v=ed.create("div");if(e.length>0){const w=e[0],_=c(w),P=V2(w)?w.siblings:void 0;v.appendChild(f(_,e.slice(1),P))}return v},PH=e=>{e=Qt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,v)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Qt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const w=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(o.attrs[w[1]]=w[2])}return""})),o.name=n||"div",o},ZK=e=>ie(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Qt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Qt.map(n.split(/(?:~\+|~|\+)/),PH),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],$H=(e,n)=>{let o="",r=tw(e);if(r==="")return"";const c=U=>ie(U)?U.replace(/%(\w+)/g,""):"",u=(U,oe)=>ed.getStyle(oe??e.getBody(),U,!0);if(ie(n)){const U=e.formatter.get(n);if(!U)return"";n=U[0]}if("preview"in n){const U=n.preview;if(U===!1)return"";r=U||r}let f=n.block||n.inline||"span",v;const w=ZK(n.selector);w.length>0?(w[0].name||(w[0].name=f),f=n.selector,v=MH(w,e)):v=MH([f],e);const _=ed.select(f,v)[0]||v.firstChild;z2(n.styles,(U,oe)=>{const ge=c(U);ge&&ed.setStyle(_,oe,ge)}),z2(n.attributes,(U,oe)=>{const ge=c(U);ge&&ed.setAttrib(_,oe,ge)}),z2(n.classes,U=>{const oe=c(U);ed.hasClass(_,oe)||ed.addClass(_,oe)}),e.dispatch("PreviewFormats"),ed.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const P=u("fontSize"),H=/px$/.test(P)?parseInt(P,10):0;return z2(r.split(" "),U=>{let oe=u(U,_);if(!(U==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(oe)&&(oe=u(U),kd(oe).toLowerCase()==="#ffffff"))&&!(U==="color"&&kd(oe).toLowerCase()==="#000000")){if(U==="font-size"&&/em|%$/.test(oe)){if(H===0)return;oe=parseFloat(oe)/(/%$/.test(oe)?100:1)*H+"px"}U==="border"&&oe&&(o+="padding:0 2px;"),o+=U+":"+oe+";"}}),e.dispatch("AfterPreviewFormats"),ed.remove(v),o},IH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},wf=e=>{const n=xP(e),o=et({});return IH(e),OB(e),Eg(e)||CD(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{P9(e,r,c,u)},remove:(r,c,u,f)=>{$9(e,r,c,u,f)},toggle:(r,c,u)=>{QM(e,r,c,u)},match:(r,c,u,f)=>N9(e,r,c,u,f),closest:r=>M9(e,r),matchAll:(r,c)=>r4(e,r,c),matchNode:(r,c,u,f)=>B9(e,r,c,u,f),canApply:r=>eA(e,r),formatChanged:(r,c,u,f)=>eP(e,o,r,c,u,f),getCssText:_e($H,e)}},LH=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},jK=(e,n,o)=>{const r=et(!1),c=w=>{N2(n,!1,o),n.add({},w)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",w=>{const _=w.command;LH(_)||(HM(n,o),n.beforeChange())}),e.on("ExecCommand",w=>{const _=w.command;LH(_)||c(w)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",w=>{const _=w.keyCode;if(w.isDefaultPrevented())return;const P=Ie.os.isMacOS()&&w.key==="Meta";(_>=33&&_<=36||_>=37&&_<=40||_===45||w.ctrlKey||P)&&(c(),e.nodeChanged()),(_===46||_===8)&&e.nodeChanged(),r.get()&&n.typing&&!F2(O2(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",w=>{const _=w.keyCode;if(w.isDefaultPrevented())return;if(_>=33&&_<=36||_>=37&&_<=40||_===45){n.typing&&c(w);return}const P=w.ctrlKey&&!w.altKey||w.metaKey;if((_<16||_>20)&&_!==224&&_!==91&&!n.typing&&!P){n.beforeChange(),N2(n,!0,o),n.add({},w),r.set(!0);return}(Ie.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&n.beforeChange()}),e.on("mousedown",w=>{n.typing&&c(w)});const u=w=>w.inputType==="insertReplacementText",f=w=>w.inputType==="insertText"&&w.data===null,v=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(u(w)||f(w)||v(w))&&c(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},HH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},fy=e=>{const n=qc(),o=et(0),r=et(0),c={data:[],typing:!1,beforeChange:()=>{jM(e,o,n)},add:(u,f)=>t4(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=O2(e);u.bookmark=GC(e.selection),e.dispatch("change",{level:u,lastLevel:Ds(c.data,r.get()).getOrUndefined()})},undo:()=>n4(e,c,o,r),redo:()=>GM(e,r,c.data),clear:()=>{o4(e,c,r)},reset:()=>{qM(e,c)},hasUndo:()=>KM(e,c,r),hasRedo:()=>s4(e,c,r),transact:u=>YM(e,c,o,u),ignore:u=>{XM(e,o,u)},extra:(u,f)=>{JM(e,c,r,u,f)}};return Eg(e)||jK(e,c,o),HH(e),c},zH=[9,27,mn.HOME,mn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,mn.DOWN,mn.UP,mn.LEFT,mn.RIGHT].concat(Ie.browser.isFirefox()?[224]:[]),v4="data-mce-placeholder",y4=e=>e.type==="keydown"||e.type==="keyup",C4=e=>{const n=e.keyCode;return n===mn.BACKSPACE||n===mn.DELETE},VH=e=>{if(y4(e)){const n=e.keyCode;return!C4(e)&&(mn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||I(zH,n))}else return!1},UH=e=>y4(e)&&!(C4(e)||e.type==="keyup"&&e.keyCode===229),t1=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},WH=e=>{var n;const o=e.dom,r=Kc(e),c=(n=U1(e))!==null&&n!==void 0?n:"",u=(f,v)=>{if(VH(f))return;const w=e.getBody(),_=UH(f)?!1:t1(o,w,r);(o.getAttrib(w,v4)!==""!==_||v)&&(o.setAttrib(w,v4,_?c:null),Mv(e,_),e.on(_?"keydown":"keyup",u),e.off(_?"keyup":"keydown",u))};fo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",v=>Xu.setEditorTimeout(e,()=>u(v)))})},ZH=(e,n)=>({block:e,position:n}),jH=(e,n)=>({from:e,to:n}),w4=(e,n)=>{const o=Fe.fromDom(e),r=Fe.fromDom(n.container());return Qr(o,r).map(c=>ZH(c,n))},GH=e=>!(Ea(e.to.block,e.from.block)||Ea(e.from.block,e.to.block)),qH=e=>!os(e.from.block,e.to.block),EP=(e,n)=>Yr(n,c=>$1(c)||Zt(c.dom),c=>os(c,e)).filter(Bs).getOr(e),KH=(e,n)=>{const o=Fe.fromDom(e);return os(EP(o,n.from.block),EP(o,n.to.block))},YH=e=>Vs(e.from.block.dom)===!1&&Vs(e.to.block.dom)===!1,aA=e=>{const n=o=>Wu(o)||Tc(o.dom)||mh(o);return n(e.from.block)&&n(e.to.block)},XH=(e,n,o,r)=>zs(r.position.getNode())&&!Or(e,r.block)?yg(!1,r.block.dom).bind(c=>c.isEqual(r.position)?sl(o,n,c).bind(u=>w4(n,u)):V.some(r)).getOr(r):r,JH=(e,n,o,r)=>{const c=w4(n,Mt.fromRangeStart(r)),u=c.bind(f=>sl(o,n,f.position).bind(v=>w4(n,v).map(w=>XH(e,n,o,w))));return qo(c,u,jH).filter(f=>qH(f)&&KH(n,f)&&YH(f)&&aA(f)&&GH(f))},GK=(e,n,o,r)=>r.collapsed?JH(e,n,o,r):V.none(),U2=(e,n)=>{const o=ja(e);return wn(o,r=>n.isBlock(fe(r))).fold(ve(o),r=>o.slice(0,r))},TP=(e,n)=>{const o=U2(e,n);return L(o,mr),o},cA=(e,n,o)=>{const r=Em(o,n);return Wt(r.reverse(),c=>Or(e,c)).each(mr)},QH=(e,n)=>ke(Wg(n),o=>!Or(e,o)).length===0,ez=(e,n,o,r,c)=>{if(Or(r,o))return hu(o),Jc(o.dom);QH(r,c)&&Or(r,n)&&Pc(c,Fe.fromTag("br"));const u=xl(o.dom,Mt.before(c.dom));return L(TP(n,r),f=>{Pc(c,f)}),cA(r,e,n),u},tz=(e,n)=>e.isInline(fe(n)),nz=(e,n,o,r)=>{if(Or(r,o)){if(Or(r,n)){const f=lt((v=>{const w=(_,P)=>Mc(_).fold(()=>P,H=>tz(r,H)?w(H,P.concat(Yf(H))):P);return w(v,[])})(o),(v,w)=>(vd(v,w),w),fh());yd(n),na(n,f)}return mr(o),Jc(n.dom)}const c=pu(o.dom);return L(TP(n,r),u=>{na(o,u)}),cA(r,e,n),c},Mb=(e,n)=>{const o=Em(n,e);return V.from(o[o.length-1])},Pb=(e,n)=>Ea(n,e)?Mb(n,e):V.none(),W2=(e,n)=>{yg(e,n.dom).bind(o=>V.from(o.getNode())).map(Fe.fromDom).filter(vl).each(mr)},Z2=(e,n,o,r)=>(W2(!0,n),W2(!1,o),Pb(n,o).fold(_e(nz,e,n,o,r),_e(ez,e,n,o,r))),n1=(e,n,o,r,c)=>n?Z2(e,r,o,c):Z2(e,o,r,c),Vh=(e,n)=>{const o=Fe.fromDom(e.getBody());return GK(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{n1(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},iA=(e,n,o)=>{const r=n.getRng();return qo(Qr(e,Fe.fromDom(r.startContainer)),Qr(e,Fe.fromDom(r.endContainer)),(c,u)=>os(c,u)?V.none():V.some(()=>{r.deleteContents(),n1(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(V.none())},j2=(e,n)=>{const o=Fe.fromDom(n),r=_e(os,e);return Wr(o,$1,r).isSome()},AP=(e,n)=>j2(e,n.startContainer)||j2(e,n.endContainer),S4=(e,n)=>{const o=xl(e.dom,Mt.fromRangeStart(n)).isNone(),r=rl(e.dom,Mt.fromRangeEnd(n)).isNone();return!AP(e,n)&&o&&r},x4=e=>V.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),kP=e=>{const n=Fe.fromDom(e.getBody()),o=e.selection.getRng();return S4(n,o)?x4(e):iA(n,e.selection,e.schema)},lA=(e,n)=>e.selection.isCollapsed()?V.none():kP(e),td=(e,n,o,r,c)=>V.from(n._selectionOverrides.showCaret(e,o,r,c)),_P=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},gy=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?V.none():V.some(_P(n)),DP=(e,n,o)=>{const r=Hc(1,e.getBody(),n),c=Mt.fromRangeStart(r),u=c.getNode();if(Ap(u))return td(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Ap(f))return td(1,e,f,!1,!1);const v=jp(e.dom.getRoot(),c.getNode());return Ap(v)?td(1,e,v,!1,o):V.none()},hy=(e,n,o)=>n.collapsed?DP(e,n,o).getOr(n):n,OP=e=>Up(e)||Uv(e),RP=e=>Wp(e)||Wv(e),FP=(e,n)=>{un(n)&&n.data.length===0&&e.remove(n)},E4=(e,n,o,r,c,u)=>{td(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const v=n.cloneRange();c?v.setEnd(f.startContainer,f.startOffset):v.setStart(f.endContainer,f.endOffset),v.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),FP(e.dom,o)},Uh=(e,n)=>{const o=e.selection.getRng();if(!un(o.commonAncestorContainer))return V.none();const r=n?Ya.Forwards:Ya.Backwards,c=Fd(e.getBody()),u=_e(hw,n?c.next:c.prev),f=n?OP:RP,v=J1(r,e.getBody(),o),w=u(v),_=w&&Pa(n,w);if(!_||!iv(v,_))return V.none();if(f(_))return V.some(()=>E4(e,o,v.getNode(),r,n,_));const P=u(_);return P&&f(P)&&iv(_,P)?V.some(()=>E4(e,o,v.getNode(),r,n,P)):V.none()},Ag=(e,n)=>Uh(e,n),nd=(e,n)=>{const o=e.getBody();return n?Jc(o).filter(Up):pu(o).filter(Wp)},T4=e=>{const n=e.selection.getRng();return!n.collapsed&&(nd(e,!0).exists(o=>o.isEqual(Mt.fromRangeStart(n)))||nd(e,!1).exists(o=>o.isEqual(Mt.fromRangeEnd(n))))},oz=e=>rt(e)&&($1(Fe.fromDom(e))||mh(Fe.fromDom(e))),od=Od.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),sz=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Mn(o)&&o.getAttribute("data-mce-caret")===r},rz=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Il(o,r,e);return av(!n,o).fold(()=>av(n,r).fold(Ne,u),u)},NP=(e,n,o,r,c)=>{const u=c.getNode(!o);return Qr(Fe.fromDom(n),Fe.fromDom(r.getNode())).map(f=>Or(e,f)?od.remove(f.dom):od.moveToElement(u)).orThunk(()=>V.some(od.moveToElement(u)))},BP=(e,n,o,r)=>sl(n,e,o).bind(c=>oz(c.getNode())||rz(e,n,o,c,r)?V.none():n&&Vs(c.getNode())||!n&&Vs(c.getNode(!0))?NP(r,e,n,o,c):n&&Wp(o)||!n&&Up(o)?V.some(od.moveToPosition(c)):V.none()),az=(e,n)=>gn(n)?V.none():e&&Vs(n.nextSibling)?V.some(od.moveToElement(n.nextSibling)):!e&&Vs(n.previousSibling)?V.some(od.moveToElement(n.previousSibling)):V.none(),cz=(e,n,o)=>o.fold(r=>V.some(od.remove(r)),r=>V.some(od.moveToElement(r)),r=>Il(n,r,e)?V.none():V.some(od.moveToPosition(r))),iz=(e,n,o,r)=>sz(n,o)?az(n,o.getNode(!n)).orThunk(()=>BP(e,n,o,r)):BP(e,n,o,r).bind(c=>cz(e,o,c)),lz=(e,n,o,r)=>{const c=Hc(n?1:-1,e,o),u=Mt.fromRangeStart(c),f=Fe.fromDom(e);return!n&&Wp(u)?V.some(od.remove(u.getNode(!0))):n&&Up(u)?V.some(od.remove(u.getNode())):!n&&Up(u)&&cT(f,u,r)?NN(f,u,r).map(v=>od.remove(v.getNode())):n&&Wp(u)&&FN(f,u,r)?$o(f,u,r).map(v=>od.remove(v.getNode())):iz(e,n,u,r)},uz=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Nd(e,n,Fe.fromDom(o)),!0),A4=(e,n)=>o=>{const r=n?Mt.before(o):Mt.after(o);return e.selection.setRng(r.toRange()),!0},k4=e=>n=>(e.selection.setRng(n.toRange()),!0),_4=(e,n)=>V.from(jp(e.getBody(),n)),dz=(e,n)=>{const o=e.selection.getNode();return _4(e,o).filter(Vs).fold(()=>lz(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(uz(e,n),A4(e,n),k4(e))),()=>V.some(je))},mz=e=>{L($c(e,".mce-offscreen-selection"),mr)},MP=(e,n)=>{const o=e.selection.getNode();return Vs(o)&&!eh(o)?_4(e,o.parentNode).filter(Vs).fold(()=>V.some(()=>{mz(Fe.fromDom(e.getBody())),Nd(e,n,Fe.fromDom(e.selection.getNode())),Gv(e)}),()=>V.some(je)):T4(e)?V.some(()=>{vb(e,e.selection.getRng(),Fe.fromDom(e.getBody()))}):V.none()},D4=e=>{const n=e.dom,o=e.selection,r=jp(e.getBody(),o.getNode());if(Zt(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Mt.before(c).toRange())}return!0},G2=(e,n)=>e.selection.isCollapsed()?dz(e,n):MP(e,n),O4=e=>e.hasOwnProperty("text"),R4=e=>e.hasOwnProperty("marker"),uA=(e,n)=>{const o=(u,f)=>{if(un(u))return{text:u,offset:f};{const v=n(),w=u.childNodes;return f<w.length?(u.insertBefore(v,w[f]),{marker:v,before:!0}):(u.appendChild(v),{marker:v,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},PP=e=>{var n,o;const{start:r,end:c}=e,u=new window.Range;return O4(r)?u.setStart(r.text,r.offset):R4(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),O4(c)?u.setEnd(c.text,c.offset):R4(c)&&(c.before?u.setEndBefore(c.marker):u.setEndAfter(c.marker),(o=c.marker.parentNode)===null||o===void 0||o.removeChild(c.marker)),u},F4=(e,n)=>{var o;const r=e.dom,c=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=c==null?void 0:c.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&c&&u&&c===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const w=c.cloneNode(!1),_=()=>{if(n?Zp(e):dT(e),f.firstChild!==c){const P=uA(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(H=>w.appendChild(H)),f.appendChild(w),e.selection.setRng(PP(P))}};return V.some(_)}return V.none()},kg=(e,n)=>{const o=Mt.fromRangeStart(e.selection.getRng());return sl(n,e.getBody(),o).filter(r=>n?TL(r):yo(r)).bind(r=>gw(n?0:-1,r)).map(r=>()=>e.selection.select(r))},sd=(e,n)=>e.selection.isCollapsed()?kg(e,n):V.none(),Wh=un,N4=e=>Wh(e)&&e.data[0]===yc,q2=e=>Wh(e)&&e.data[e.data.length-1]===yc,B4=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(yc)},$P=e=>{var n;if(Wh(e.previousSibling))return q2(e.previousSibling)||e.previousSibling.appendData(yc),e.previousSibling;if(Wh(e))return N4(e)||e.insertData(0,yc),e;{const o=B4(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},IP=e=>{var n,o;if(Wh(e.nextSibling))return N4(e.nextSibling)||e.nextSibling.insertData(0,yc),e.nextSibling;if(Wh(e))return q2(e)||e.appendData(yc),e;{const r=B4(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},K2=(e,n)=>e?$P(n):IP(n),LP=_e(K2,!0),HP=_e(K2,!1),Y2=(e,n)=>un(e.container())?K2(n,e.container()):K2(n,e.getNode()),dA=(e,n)=>{const o=n.get();return o&&e.container()===o&&of(o)},M4=(e,n)=>n.fold(o=>{vh(e.get());const r=LP(o);return e.set(r),V.some(Mt(r,r.length-1))},o=>Jc(o).map(r=>{if(dA(r,e)){const c=e.get();return Mt(c,1)}else{vh(e.get());const c=Y2(r,!0);return e.set(c),Mt(c,1)}}),o=>pu(o).map(r=>{if(dA(r,e)){const c=e.get();return Mt(c,c.length-1)}else{vh(e.get());const c=Y2(r,!1);return e.set(c),Mt(c,c.length-1)}}),o=>{vh(e.get());const r=HP(o);return e.set(r),V.some(Mt(r,1))}),zP=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return V.none()},kl=Od.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),VP=(e,n)=>{const o=bg(n,e);return o||e},UP=(e,n,o)=>{const r=XN(o),c=VP(n,r.container());return Ph(e,c,r).fold(()=>rl(c,r).bind(_e(Ph,e,c)).map(u=>kl.before(u)),V.none)},fz=(e,n)=>wh(e,n)===null,WP=(e,n,o)=>Ph(e,n,o).filter(_e(fz,n)),P4=(e,n,o)=>{const r=JN(o);return WP(e,n,r).bind(c=>xl(c,r).isNone()?V.some(kl.start(c)):V.none())},gz=(e,n,o)=>{const r=XN(o);return WP(e,n,r).bind(c=>rl(c,r).isNone()?V.some(kl.end(c)):V.none())},hz=(e,n,o)=>{const r=JN(o),c=VP(n,r.container());return Ph(e,c,r).fold(()=>xl(c,r).bind(_e(Ph,e,c)).map(u=>kl.after(u)),V.none)},ZP=e=>!GN($4(e)),_g=(e,n,o)=>zP([UP,P4,gz,hz],[e,n,o]).filter(ZP),$4=e=>e.fold(Rt,Rt,Rt,Rt),jP=e=>e.fold(ve("before"),ve("start"),ve("end"),ve("after")),mA=e=>e.fold(kl.before,kl.before,kl.after,kl.after),py=e=>e.fold(kl.start,kl.start,kl.end,kl.end),I4=(e,n)=>jP(e)===jP(n)&&$4(e)===$4(n),pz=(e,n,o,r,c,u)=>qo(Ph(n,o,r),Ph(n,o,c),(f,v)=>f!==v&&KN(o,f,v)?kl.after(e?f:v):u).getOr(u),bz=(e,n)=>e.fold(dt,o=>!I4(o,n)),vz=(e,n,o,r,c)=>{const u=Pa(e,c);return sl(e,o,u).map(_e(Pa,e)).fold(()=>r.map(mA),w=>_g(n,o,w).map(_e(pz,e,n,o,u,w)).filter(_e(bz,r))).filter(ZP)},yz=(e,n)=>e?n.fold(T(V.some,kl.start),V.none,T(V.some,kl.after),V.none):n.fold(V.none,T(V.some,kl.before),V.none,T(V.some,kl.end)),GP=(e,n,o,r)=>{const c=Pa(e,r),u=_g(n,o,c);return _g(n,o,c).bind(_e(yz,e)).orThunk(()=>vz(e,n,o,u,r))},Cz=e=>we(e.selection.getSel().modify),qP=(e,n,o)=>{const r=e?1:-1;return n.setRng(Mt(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},L4=(e,n)=>{const o=n.selection.getRng(),r=e?Mt.fromRangeEnd(o):Mt.fromRangeStart(o);return Cz(n)?e&&FC(r)?qP(!0,n.selection,r):!e&&vp(r)?qP(!1,n.selection,r):!1:!1};var Dg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Dg||(Dg={}));const fA=(e,n)=>e===Ya.Backwards?sn(n):n,wz=(e,n,o)=>e===Ya.Forwards?n.next(o):n.prev(o),Sz=(e,n,o,r)=>zs(r.getNode(n===Ya.Forwards))?Dg.Br:Il(o,r)===!1?Dg.Block:Dg.Wrap,KP=(e,n,o,r)=>{const c=Fd(o);let u=r;const f=[];for(;u;){const v=wz(n,c,u);if(!v)break;if(zs(v.getNode(!1)))return n===Ya.Forwards?{positions:fA(n,f).concat([v]),breakType:Dg.Br,breakAt:V.some(v)}:{positions:fA(n,f),breakType:Dg.Br,breakAt:V.some(v)};if(!v.isVisible()){u=v;continue}if(e(u,v)){const w=Sz(o,n,u,v);return{positions:fA(n,f),breakType:w,breakAt:V.some(v)}}f.push(v),u=v}return{positions:fA(n,f),breakType:Dg.Eol,breakAt:V.none()}},YP=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Ya.Backwards?u.concat(c):[c].concat(u)}).getOr([]),H4=(e,n)=>Je(e,(o,r)=>o.fold(()=>V.some(r),c=>qo(to(c.getClientRects()),to(r.getClientRects()),(u,f)=>{const v=Math.abs(n-u.left);return Math.abs(n-f.left)<=v?r:c}).or(o)),V.none()),$b=(e,n)=>to(n.getClientRects()).bind(o=>H4(e,o.left)),o1=_e(KP,Mt.isAbove,-1),X2=_e(KP,Mt.isBelow,1),XP=_e(YP,-1,o1),J2=_e(YP,1,X2),JP=(e,n)=>o1(e,n).breakAt.isNone(),QP=(e,n)=>X2(e,n).breakAt.isNone(),xz=e=>Jc(e).map(n=>[n].concat(X2(e,n).positions)).getOr([]),Ez=e=>pu(e).map(n=>o1(e,n).positions.concat(n)).getOr([]),Tz=(e,n)=>$b(XP(e,n),n),Az=(e,n)=>$b(J2(e,n),n),kz=Vs,e5=(e,n)=>Math.abs(e.left-n),t5=(e,n)=>Math.abs(e.right-n),_z=e=>Ns(e,"node"),n5=(e,n)=>Ae(e,(o,r)=>{const c=Math.min(e5(o,n),t5(o,n)),u=Math.min(e5(r,n),t5(r,n));return u===c&&_z(r)&&kz(r.node)||u<c?r:o}),qK=e=>{const n=o=>le(o,r=>{const c=ng(r);return c.node=e,c});if(Mn(e))return n(e.getClientRects());if(un(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},zd=e=>mt(e,qK);var Ib;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ib||(Ib={}));const o5=(e,n,o,r)=>{let c=r;for(;c=kp(c,e,_0,n);)if(o(c))return},z4=(e,n,o,r,c,u)=>{let f=0;const v=[],w=H=>{let U=zd([H]);e===-1&&(U=U.reverse());for(let oe=0;oe<U.length;oe++){const ge=U[oe];if(!o(ge,_)){if(v.length>0&&n(ge,ht(v))&&f++,ge.line=f,c(ge))return!0;v.push(ge)}}return!1},_=ht(u.getClientRects());if(!_)return v;const P=u.getNode();return P&&(w(P),o5(e,r,w,P)),v},Dz=(e,n)=>n.line>e,s5=(e,n)=>n.line===e,Oz=_e(z4,Ib.Up,L1,$r),r5=_e(z4,Ib.Down,$r,L1),a5=e=>ht(e.getClientRects()),Rz=(e,n,o,r)=>{const c=Fd(n);let u,f,v,w;const _=[];let P=0;e===1?(u=c.next,f=$r,v=L1,w=Mt.after(r)):(u=c.prev,f=L1,v=$r,w=Mt.before(r));const H=a5(w);do{if(!w.isVisible())continue;const U=a5(w);if(v(U,H))continue;_.length>0&&f(U,ht(_))&&P++;const oe=ng(U);if(oe.position=w,oe.line=P,o(oe))return _;_.push(oe)}while(w=u(w));return _},c5=e=>n=>Dz(e,n),s1=e=>n=>s5(e,n),Og=(e,n)=>{e.selection.setRng(n),qw(e,e.selection.getRng())},gA=(e,n,o)=>V.some(hy(e,n,o)),V4=(e,n,o,r,c,u)=>{const f=n===Ya.Forwards,v=Fd(e.getBody()),w=_e(hw,f?v.next:v.prev),_=f?r:c;if(!o.collapsed){const ge=Cl(o);if(u(ge))return td(n,e,ge,n===Ya.Backwards,!1);if(T4(e)){const ce=o.cloneRange();return ce.collapse(n===Ya.Backwards),V.from(ce)}}const P=J1(n,e.getBody(),o);if(_(P))return gy(e,P.getNode(!f));let H=w(P);const U=E0(o);if(H)H=Pa(f,H);else return U?V.some(o):V.none();if(_(H))return td(n,e,H.getNode(!f),f,!1);const oe=w(H);return oe&&_(oe)&&iv(H,oe)?td(n,e,oe.getNode(!f),f,!1):U?gA(e,H.toRange(),!1):V.none()},hA=(e,n,o,r,c,u)=>{const f=J1(n,e.getBody(),o),v=ht(f.getClientRects()),w=n===Ib.Down,_=e.getBody();if(!v)return V.none();if(T4(e)){const be=w?Mt.fromRangeEnd(o):Mt.fromRangeStart(o);return(w?Az:Tz)(_,be).orThunk(()=>V.from(be)).map(qe=>qe.toRange())}const H=(w?r5:Oz)(_,c5(1),f),U=ke(H,s1(1)),oe=v.left,ge=n5(U,oe);if(ge&&u(ge.node)){const be=Math.abs(oe-ge.left),Me=Math.abs(oe-ge.right);return td(n,e,ge.node,be<Me,!1)}let ce;if(r(f)?ce=f.getNode():c(f)?ce=f.getNode(!0):ce=Cl(o),ce){const be=Rz(n,_,c5(1),ce);let Me=n5(ke(be,s1(1)),oe);if(Me||(Me=ht(ke(be,s1(0))),Me))return gA(e,Me.position.toRange(),!1)}return U.length===0?U4(e,w).filter(w?c:r).map(be=>hy(e,be.toRange(),!1)):V.none()},U4=(e,n)=>{const o=e.selection.getRng(),r=n?Mt.fromRangeEnd(o):Mt.fromRangeStart(o),c=rv(r.container(),e.getBody());if(n){const u=X2(c,r);return Qo(u.positions)}else{const u=o1(c,r);return to(u.positions)}},i5=(e,n,o)=>U4(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),pA=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},l5=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},Fz=(e,n,o)=>M4(n,o).map(r=>(pA(e,r),o)),KK=(e,n,o)=>{const r=Mt.fromRangeStart(e);if(e.collapsed)return r;{const c=Mt.fromRangeEnd(e);return o?xl(n,c).getOr(c):rl(n,r).getOr(r)}},YK=(e,n,o)=>{const r=e.getBody(),c=KK(e.selection.getRng(),r,o),u=_e(pb,e);return GP(o,u,r,c).bind(v=>Fz(e,n,v))},Om=(e,n,o)=>{const r=le($c(Fe.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ke(r,e),u=ke(o,e);L(lo(c,u),_e(l5,!1)),L(lo(u,c),_e(l5,!0))},Nz=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Mt.fromRangeStart(e.selection.getRng());Mt.isTextPosition(r)&&!YN(r)&&(pA(e,mE(o,r)),n.set(null))}},Bz=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=ke(r,e);L(c,u=>{const f=Mt.fromRangeStart(n.selection.getRng());_g(e,n.getBody(),f).bind(v=>Fz(n,o,v))})}},r1=(e,n,o)=>lf(e)?YK(e,n,o).isSome():!1,W4=(e,n,o)=>lf(n)?L4(e,n):!1,Mz=e=>{const n=et(null),o=_e(pb,e);return e.on("NodeChange",r=>{lf(e)&&(Om(o,e.dom,r.parents),Nz(e,n),Bz(o,e,n,r.parents))}),n},bA=_e(W4,!0),Pz=_e(W4,!1),vA=(e,n,o)=>{if(lf(e)){const r=U4(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Mt.fromRangeEnd(c):Mt.fromRangeStart(c)});return _g(_e(pb,e),e.getBody(),r).exists(c=>{const u=mA(c);return M4(o,u).exists(f=>(pA(e,f),!0))})}else return!1},$z=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},Iz=e=>qo(Jc(e),pu(e),(n,o)=>{const r=Pa(!0,n),c=Pa(!1,o);return rl(e,r).forall(u=>u.isEqual(c))}).getOr(!0),Z4=(e,n)=>o=>M4(n,o).map(r=>()=>pA(e,r)),u5=(e,n,o,r)=>{const c=e.getBody(),u=_e(pb,e);e.undoManager.ignore(()=>{e.selection.setRng($z(o,r)),dT(e),_g(u,c,Mt.fromRangeStart(e.selection.getRng())).map(py).bind(Z4(e,n)).each(rn)}),e.nodeChanged()},Zh=(e,n)=>{const o=bg(n,e);return o||e},Lz=(e,n,o,r)=>{const c=Zh(e.getBody(),r.container()),u=_e(pb,e),f=_g(u,c,r);return f.bind(w=>o?w.fold(ve(V.some(py(w))),V.none,ve(V.some(mA(w))),V.none):w.fold(V.none,ve(V.some(mA(w))),V.none,ve(V.some(py(w))))).map(Z4(e,n)).getOrThunk(()=>{const w=Ch(o,c,r),_=w.bind(P=>_g(u,c,P));return qo(f,_,()=>Ph(u,c,r).bind(P=>Iz(P)?V.some(()=>{Nd(e,o,Fe.fromDom(P))}):V.none())).getOrThunk(()=>_.bind(()=>w.map(P=>()=>{o?u5(e,n,r,P):u5(e,n,P,r)})))})},j4=(e,n,o)=>{if(e.selection.isCollapsed()&&lf(e)){const r=Mt.fromRangeStart(e.selection.getRng());return Lz(e,n,o,r)}return V.none()},Hz=e=>om(e)>1,d5=(e,n)=>{const o=Fe.fromDom(e.getBody()),r=Fe.fromDom(e.selection.getStart()),c=Em(r,o);return wn(c,n).fold(ve(c),u=>c.slice(0,u))},zz=e=>om(e)===1,G4=e=>d5(e,n=>e.schema.isBlock(fe(n))||Hz(n)),q4=e=>d5(e,n=>e.schema.isBlock(fe(n))),yA=(e,n)=>{const o=_e(kT,e);return mt(n,r=>o(r)?[r.dom]:[])},K4=e=>{const n=q4(e);return yA(e,n)},m5=(e,n,o,r)=>{const c=yA(n,r);if(c.length===0)Nd(n,e,o);else{const u=RB(o.dom,c);n.selection.setRng(u.toRange())}},f5=(e,n)=>{const o=ke(G4(e),zz);return Qo(o).bind(r=>{const c=Mt.fromRangeStart(e.selection.getRng());return bb(n,c,r.dom)&&!Mw(r)?V.some(()=>m5(n,e,r,o)):V.none()})},Vz=(e,n)=>{const o=n.parentElement;return zs(n)&&!J(o)&&e.dom.isEmpty(o)},Q2=e=>Mw(Fe.fromDom(e)),eS=(e,n)=>{const o=e.selection.getStart(),r=Vz(e,o)||Q2(o)?RB(o,n):T7(e.selection.getRng(),n);e.selection.setRng(r.toRange())},g5=(e,n)=>{const o=lo(n,K4(e));o.length>0&&eS(e,o)},Y4=e=>un(e.startContainer),h5=e=>e.startOffset===0&&Y4(e),p5=(e,n)=>{const o=n.startContainer.parentElement;return!J(o)&&kT(e,Fe.fromDom(o))},CA=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!J(n)&&!J(o)&&n.isEqualNode(o)},X4=e=>{const n=e.endContainer;return e.endOffset===(un(n)?n.length:n.childNodes.length)},tS=e=>CA(e)&&X4(e),Uz=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),b5=e=>tS(e)||Uz(e),Wz=e=>{const n=e.selection.getRng();return h5(n)&&p5(e,n)&&b5(n)},Zz=e=>{if(Wz(e)){const n=K4(e);return V.some(()=>{dT(e),g5(e,n)})}else return V.none()},wA=(e,n)=>e.selection.isCollapsed()?f5(e,n):Zz(e),jz=(e,n)=>Yg(e,o=>bu(o.dom),o=>n.isBlock(fe(o))),v5=e=>jz(Fe.fromDom(e.selection.getStart()),e.schema),XK=e=>{const n=e.selection.getRng();return n.collapsed&&(Y4(n)||e.dom.isEmpty(n.startContainer))&&!v5(e)},nS=e=>(XK(e)&&eS(e,[]),!0),J4=(e,n,o)=>rt(o)?V.some(()=>{e._selectionOverrides.hideFakeCaret(),Nd(e,n,Fe.fromDom(o))}):V.none(),Gz=(e,n)=>{const o=n?Uv:Wv,r=n?Ya.Forwards:Ya.Backwards,c=J1(r,e.getBody(),e.selection.getRng());return o(c)?J4(e,n,c.getNode(!n)):V.from(Pa(n,c)).filter(u=>o(u)&&iv(c,u)).bind(u=>J4(e,n,u.getNode(!n)))},qz=(e,n)=>{const o=e.selection.getNode();return Gc(o)?J4(e,n,o):V.none()},Q4=(e,n)=>e.selection.isCollapsed()?Gz(e,n):qz(e,n),Kz=e=>Yr(e,n=>Zt(n.dom)||Vs(n.dom)).exists(n=>Zt(n.dom)),eO=e=>aa(e??"").getOr(0),y5=(e,n)=>{const o=e||Hk(n)?"margin":"padding",r=Ma(n,"direction")==="rtl"?"-right":"-left";return o+r},C5=(e,n,o,r,c,u)=>{const f=y5(o,Fe.fromDom(u)),v=eO(e.getStyle(u,f));if(n==="outdent"){const w=Math.max(0,v-r);e.setStyle(u,f,w?w+c:"")}else{const w=v+r+c;e.setStyle(u,f,w)}},Yz=(e,n)=>Xt(n,o=>{const r=y5(d_(e),o),c=vc(o,r).map(eO).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),a1=e=>{const n=oO(e);return!e.mode.isReadOnly()&&(n.length>1||Yz(e,n))},tO=e=>Jf(e)||mh(e),nO=e=>xc(e).exists(tO),oO=e=>ke(au(e.selection.getSelectedBlocks()),n=>!tO(n)&&!nO(n)&&Kz(n)),SA=(e,n)=>{var o,r;const{dom:c}=e,u=Sp(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",v=eO(u),w=d_(e);L(oO(e),_=>{C5(c,n,w,v,f,_.dom)})},c1=e=>SA(e,"indent"),sO=e=>SA(e,"outdent"),rd=e=>{if(e.selection.isCollapsed()&&a1(e)){const n=e.dom,o=e.selection.getRng(),r=Mt.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&ts(Fe.fromDom(c),r,e.schema))return V.some(()=>sO(e))}return V.none()},i1=(e,n,o)=>Lo([rd,G2,Ag,(r,c)=>j4(r,n,c),Vh,l2,sd,Q4,lA,wA,F4],r=>r(e,o)).filter(r=>e.selection.isEditable()),rO=(e,n)=>{i1(e,n,!1).fold(()=>{e.selection.isEditable()&&(dT(e),Gv(e))},rn)},Xz=(e,n)=>{i1(e,n,!0).fold(()=>{e.selection.isEditable()&&Zp(e)},rn)},w5=(e,n)=>{e.addCommand("delete",()=>{rO(e,n)}),e.addCommand("forwardDelete",()=>{Xz(e,n)})},S5=5,Jz=400,x5=e=>e.touches===void 0||e.touches.length!==1?V.none():V.some(e.touches[0]),Qz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>S5||r>S5},eV=e=>{const n=qc(),o=et(!1),r=qf(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},Jz);e.on("touchstart",c=>{x5(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),x5(c).each(u=>{n.on(f=>{Qz(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},xA=(e,n)=>Qn(e,n.nodeName),tV=(e,n)=>un(n)?!0:Mn(n)?!xA(e.getBlockElements(),n)&&!Ll(n)&&!zu(e,n)&&!da(n):!1,nV=(e,n,o)=>G(DN(Fe.fromDom(o),Fe.fromDom(n)),r=>xA(e,r.dom)),by=(e,n)=>{if(un(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||xA(e,n.nextSibling)||da(n.nextSibling)}return!1},vy=e=>e.dom.create(Kc(e),ug(e)),E5=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let v,w,_=null;const P=Kc(e);if(!u||!Mn(u))return;const H=f.nodeName.toLowerCase();if(!r.isValidChild(H,P.toLowerCase())||nV(c,f,u))return;if(f.firstChild===f.lastChild&&zs(f.firstChild)){v=vy(e),v.appendChild(fh().dom),f.replaceChild(v,f.firstChild),e.selection.setCursorLocation(v,0),e.nodeChanged();return}let U=f.firstChild;for(;U;)if(Mn(U)&&Xr(r,U),tV(r,U)){if(by(c,U)){w=U,U=U.nextSibling,n.remove(w);continue}if(!v){if(!_&&e.hasFocus()&&(_=uA(e.selection.getRng(),()=>document.createElement("span"))),!U.parentNode){U=null;break}v=vy(e),f.insertBefore(v,U)}w=U,U=U.nextSibling,v.appendChild(w)}else v=null,U=U.nextSibling;_&&(e.selection.setRng(PP(_)),e.nodeChanged())},aO=(e,n,o)=>{const r=Fe.fromDom(vy(e)),c=fh();na(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},cO=e=>{e.on("NodeChange",()=>E5(e))},T5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,oV=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const v=n.lastIndexOf("<",u);if(v!==-1&&n.substring(v,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},sV=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],oV(e,c,aE(e)));o.content=c}},rV=(e,n)=>Xt(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),aV=e=>{const n="contenteditable",o=" "+Qt.trim(S_(e))+" ",r=" "+Qt.trim(aE(e))+" ",c=T5(o),u=T5(r),f=ju(e);f.length>0&&e.on("BeforeSetContent",v=>{sV(e,f,v)}),e.parser.addAttributeFilter("class",v=>{let w=v.length;for(;w--;){const _=v[w];c(_)?_.attr(n,"true"):u(_)&&_.attr(n,"false")}}),e.serializer.addAttributeFilter(n,v=>{let w=v.length;for(;w--;){const _=v[w];if(!c(_)&&!u(_))continue;const P=_.attr("data-mce-content");f.length>0&&P?rV(f,P)?(_.name="#text",_.type=3,_.raw=!0,_.value=P):_.remove():_.attr(n,null)}})},cV=e=>oo(Fe.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),A5=(e,n)=>{n.hasAttribute("data-mce-caret")&&(pm(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},k5=(e,n)=>{const o=cV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),A5(e,o);return}bx(o)&&(A5(e,o),e.undoManager.add())}},iV=e=>{e.on("keyup compositionstart",_e(k5,e))},_5=Vs,ad=(e,n,o)=>V4(n,e,o,Up,Wp,_5),lV=(e,n,o)=>hA(n,e,o,u=>Up(u)||_N(u),u=>Wp(u)||Qw(u),_5),iO=e=>{const n=e.dom.create(Kc(e));return n.innerHTML='<br data-mce-bogus="1">',n},lO=(e,n,o)=>{const r=Fd(e.getBody()),c=_e(hw,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Mt.fromRangeStart(o))){const v=Fe.fromDom(iO(e));n===1?yi(Fe.fromDom(u),v):Pc(Fe.fromDom(u),v),e.selection.select(v.dom,!0),e.selection.collapse()}}},uO=(e,n)=>{const o=n?Ya.Forwards:Ya.Backwards,r=e.selection.getRng();return ad(o,e,r).orThunk(()=>(lO(e,o,r),V.none()))},uV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return lV(o,e,r).orThunk(()=>(lO(e,o,r),V.none()))},dV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return GN(o)?!n:n},D5=(e,n)=>uO(e,dV(e.selection,n)).exists(o=>(Og(e,o),!0)),O5=(e,n)=>uV(e,n).exists(o=>(Og(e,o),!0)),R5=(e,n)=>i5(e,n,n?Wp:Up),oS=(e,n)=>nd(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Og(e,o),!0)),mV=e=>I(["figcaption"],fe(e)),fV=(e,n,o)=>{const r=_e(os,n);return Yr(Fe.fromDom(e.container()),c=>o.isBlock(fe(c)),r).filter(mV)},sS=(e,n,o)=>n?QP(e.dom,o):JP(e.dom,o),jh=(e,n)=>{const o=Fe.fromDom(e.getBody()),r=Mt.fromRangeStart(e.selection.getRng());return fV(r,o,e.schema).exists(()=>{if(sS(o,n,r)){const u=aO(e,o,n?na:Mf);return e.selection.setRng(u),!0}else return!1})},l1=(e,n)=>e.selection.isCollapsed()?jh(e,n):!1,EA=(e,n,o)=>{const r=e.selection.getRng(),c=Mt.fromRangeStart(r);return e.getBody().firstChild===n&&JP(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},dO=(e,n)=>{const o=e.selection.getRng(),r=Mt.fromRangeStart(o);return e.getBody().lastChild===n&&QP(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},mO=(e,n)=>n?V.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>dO(e,o)).getOr(!1):V.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>V.from(e.dom.getParent(o,"details")).map(r=>EA(e,r,o))).getOr(!1),fO=(e,n)=>mO(e,n),F5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},N5=e=>le(e,n=>({...F5,...n})),B5=e=>le(e,n=>({...F5,...n})),M5=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,gV=(e,n)=>mt(N5(e),o=>M5(o,n)?[o]:[]),hV=(e,n)=>mt(B5(e),o=>M5(o,n)?[o]:[]),Wo=(e,...n)=>()=>e.apply(null,n),rS=(e,n)=>Wt(gV(e,n),o=>o.action()),P5=(e,n)=>Lo(hV(e,n),o=>o.action()),gO=(e,n)=>{const o=n?Ya.Forwards:Ya.Backwards,r=e.selection.getRng();return V4(e,o,r,Uv,Wv,Gc).exists(c=>(Og(e,c),!0))},hO=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return hA(e,o,r,Uv,Wv,Gc).exists(c=>(Og(e,c),!0))},pV=(e,n)=>i5(e,n,n?Wv:Uv),bV=Od.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),aS={...bV,none:e=>bV.none(e)},JK=(e,n)=>vV(e,n,dt),vV=(e,n,o)=>mt(ja(e),r=>Ol(r,n)?o(r)?[r]:[]:vV(r,n,o)),yV=(e,n,o=Ne)=>{if(o(n))return V.none();if(I(e,fe(n)))return V.some(n);const r=c=>Ol(c,"table")||o(c);return Ba(n,e.join(","),r)},CV=(e,n)=>yV(["td","th"],e,n),QK=e=>JK(e,"th,td"),$5=(e,n)=>ru(e,"table",n),cl=(e,n,o,r,c=dt)=>{const u=r===1;if(!u&&o<=0)return aS.first(e[0]);if(u&&o>=e.length-1)return aS.last(e[e.length-1]);{const f=o+r,v=e[f];return c(v)?aS.middle(n,v):cl(e,n,f,r,c)}},pO=(e,n)=>$5(e,n).bind(o=>{const r=QK(o);return wn(r,u=>os(e,u)).map(u=>({index:u,all:r}))}),cS=(e,n,o)=>pO(e,o).fold(()=>aS.none(e),c=>cl(c.all,e,c.index,1,n)),wV=(e,n,o)=>pO(e,o).fold(()=>aS.none(),c=>cl(c.all,e,c.index,-1,n)),I5=e=>bp(e).filter(n=>n.trim().length!==0||n.indexOf(za)>-1).isSome(),L5=e=>Mo(e)&&nc(e,"contenteditable")==="false",bO=["img","br"],SV=e=>I5(e)||I(bO,fe(e))||L5(e),xV=e=>Gg(e,SV),H5=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),EV=(e,n)=>mt(n,o=>{const r=H5(ng(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),TV=(e,n,o)=>Je(e,(r,c)=>r.fold(()=>V.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),v=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return V.some(v<f?c:u)}),V.none()),z5=(e,n,o,r,c)=>{const u=$c(Fe.fromDom(o),"td,th,caption").map(v=>v.dom),f=ke(EV(e,u),v=>n(v,c));return TV(f,r,c).map(v=>v.cell)},vO=e=>e.bottom,AV=e=>e.top,kV=(e,n)=>e.y<n,eY=(e,n)=>e.y>n,_V=_e(z5,vO,kV),V5=_e(z5,AV,eY),tY=(e,n)=>to(n.getClientRects()).bind(o=>_V(e,o.left,o.top)).bind(o=>$b(Ez(o),n)),DV=(e,n)=>Qo(n.getClientRects()).bind(o=>V5(e,o.left,o.top)).bind(o=>$b(xz(o),n)),OV=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),RV=e=>e.breakType===Dg.Wrap&&e.positions.length===0,yO=e=>e.breakType===Dg.Br&&e.positions.length===1,iS=(e,n,o)=>{const r=e(n,o);return RV(r)||!zs(o.getNode())&&yO(r)?!OV(e,n,r):r.breakAt.isNone()},U5=_e(iS,o1),W5=_e(iS,X2),FV=(e,n,o)=>{const r=Mt.fromRangeStart(n);return yg(!e,o).exists(c=>c.isEqual(r))},NV=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return __()&&FV(n,c,o)?(td(u,e,o,!n,!1).each(f=>{Og(e,f)}),!0):!1},CO=(e,n,o)=>tY(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>H4(XP(e,Mt.before(n)),r.left))).getOr(Mt.before(n)),BV=(e,n,o)=>DV(n,o).orThunk(()=>to(o.getClientRects()).bind(r=>H4(J2(e,Mt.after(n)),r.left))).getOr(Mt.after(n)),Z5=(e,n)=>{const o=n.getNode(e);return iu(o)?V.some(o):V.none()},MV=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?yi:Pc,c=aO(n,Fe.fromDom(o),r);Og(n,c)})},j5=(e,n,o)=>{const r=Z5(!!n,o),c=n===!1;r.fold(()=>Og(e,o.toRange()),u=>yg(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Og(e,o.toRange()),f=>MV(n,e,u)))},Rm=(e,n,o,r)=>{const c=e.selection.getRng(),u=Mt.fromRangeStart(c),f=e.getBody();if(!n&&U5(r,u)){const v=CO(f,o,u);return j5(e,n,v),!0}else if(n&&W5(r,u)){const v=BV(f,o,u);return j5(e,n,v),!0}else return!1},wO=(e,n,o)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>V.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),SO=(e,n)=>wO(e,n,NV),G5=(e,n)=>wO(e,n,Rm),nY=e=>{const n=Lp.exact(e,0,e,0);return m(n)},PV=(e,n,o)=>o.fold(V.none,V.none,(r,c)=>xV(c).map(u=>nY(u)),r=>(e.execCommand("mceTableInsertRowAfter"),$V(e,n,r))),$V=(e,n,o)=>PV(e,n,cS(o,oc)),IV=(e,n,o)=>PV(e,n,wV(o,oc)),lS=(e,n)=>{const o=["table","li","dl"],r=Fe.fromDom(e.getBody()),c=v=>{const w=fe(v);return os(v,r)||I(o,w)},u=e.selection.getRng(),f=Fe.fromDom(n?u.endContainer:u.startContainer);return CV(f,c).map(v=>($5(v,c).each(P=>{e.model.table.clearSelectedCells(P.dom)}),e.selection.collapse(!n),(n?$V:IV)(e,c,v).each(P=>{e.selection.setRng(P)}),!0)).getOr(!1)},LV=(e,n,o)=>{const r=Ie.os.isMacOS()||Ie.os.isiOS();rS([{keyCode:mn.RIGHT,action:Wo(D5,e,!0)},{keyCode:mn.LEFT,action:Wo(D5,e,!1)},{keyCode:mn.UP,action:Wo(O5,e,!1)},{keyCode:mn.DOWN,action:Wo(O5,e,!0)},...r?[{keyCode:mn.UP,action:Wo(oS,e,!1),metaKey:!0,shiftKey:!0},{keyCode:mn.DOWN,action:Wo(oS,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:mn.RIGHT,action:Wo(SO,e,!0)},{keyCode:mn.LEFT,action:Wo(SO,e,!1)},{keyCode:mn.UP,action:Wo(G5,e,!1)},{keyCode:mn.DOWN,action:Wo(G5,e,!0)},{keyCode:mn.UP,action:Wo(G5,e,!1)},{keyCode:mn.UP,action:Wo(fO,e,!1)},{keyCode:mn.DOWN,action:Wo(fO,e,!0)},{keyCode:mn.RIGHT,action:Wo(gO,e,!0)},{keyCode:mn.LEFT,action:Wo(gO,e,!1)},{keyCode:mn.UP,action:Wo(hO,e,!1)},{keyCode:mn.DOWN,action:Wo(hO,e,!0)},{keyCode:mn.RIGHT,action:Wo(r1,e,n,!0)},{keyCode:mn.LEFT,action:Wo(r1,e,n,!1)},{keyCode:mn.RIGHT,ctrlKey:!r,altKey:r,action:Wo(bA,e,n)},{keyCode:mn.LEFT,ctrlKey:!r,altKey:r,action:Wo(Pz,e,n)},{keyCode:mn.UP,action:Wo(l1,e,!1)},{keyCode:mn.DOWN,action:Wo(l1,e,!0)}],o).each(c=>{o.preventDefault()})},xO=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||LV(e,n,o)})},Fm=(e,n)=>({container:e,offset:n}),uS=jr.DOM,dS=e=>n=>e===n?-1:0,HV=e=>n=>e.isBlock(n)||I(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",EO=(e,n,o)=>{if(un(e)&&n>=0)return V.some(Fm(e,n));{const r=dh(uS);return V.from(r.backwards(e,n,dS(e),o)).map(c=>Fm(c.container,c.container.data.length))}},zV=(e,n,o)=>{if(un(e)&&n>=e.length)return V.some(Fm(e,n));{const r=dh(uS);return V.from(r.forwards(e,n,dS(e),o)).map(c=>Fm(c.container,0))}},TO=(e,n,o)=>{if(!un(e))return V.none();const r=e.data;if(n>=0&&n<=r.length)return V.some(Fm(e,n));{const c=dh(uS);return V.from(c.backwards(e,n,dS(e),o)).bind(u=>{const f=u.container.data;return TO(u.container,n+f.length,o)})}},mS=(e,n,o)=>{if(!un(e))return V.none();const r=e.data;if(n<=r.length)return V.some(Fm(e,n));{const c=dh(uS);return V.from(c.forwards(e,n,dS(e),o)).bind(u=>mS(u.container,n-r.length,o))}},AO=(e,n,o,r,c)=>{const u=dh(e,HV(e));return V.from(u.backwards(n,o,r,c))},VV=e=>e.collapsed&&un(e.startContainer),UV=e=>Fi(e.toString().replace(/\u00A0/g," ")),TA=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,WV=(e,n)=>e.substring(n.length),ZV=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&TA(f))return V.none();if(u===f&&no(e,o,c,n))break}return V.some(c)},AA=(e,n,o,r=!1)=>{if(!VV(n))return V.none();const c={text:"",offset:0},u=(v,w,_)=>(c.text=_+c.text,c.offset+=w,ZV(c.text,c.offset,o,r).getOr(w)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return AO(e,n.startContainer,n.startOffset,u,f).bind(v=>{const w=n.cloneRange();if(w.setStart(v.container,v.offset),w.setEnd(n.endContainer,n.endOffset),w.collapsed)return V.none();const _=UV(w);return _.lastIndexOf(o)!==0?V.none():V.some({text:WV(_,o),range:w,trigger:o})})},jV=e=>e.nodeType===ae,GV=e=>e.nodeType===Tu,q5=e=>{if(jV(e))return Fm(e,e.data.length);{const n=e.childNodes;return n.length>0?q5(n[n.length-1]):Fm(e,n.length)}},K5=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?K5(o[n],0):o.length>0&&GV(e)&&o.length===n?q5(o[o.length-1]):Fm(e,n)},qV=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return AO(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!TA(u)}).isSome()},KV=e=>n=>{const o=K5(n.startContainer,n.startOffset);return!qV(e,o)},kO=(e,n,o)=>Lo(o.triggers,r=>AA(e,n,r)),YV=(e,n)=>{const o=n(),r=e.selection.getRng();return kO(e.dom,r,o).bind(c=>_O(e,n,c))},_O=(e,n,o,r={})=>{var c;const u=n(),v=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",w=ke(u.lookupByTrigger(o.trigger),P=>o.text.length>=P.minChars&&P.matches.getOrThunk(()=>KV(e.dom))(o.range,v,o.text));if(w.length===0)return V.none();const _=Promise.all(le(w,P=>P.fetch(o.text,P.maxResults,r).then(U=>({matchText:o.text,items:U,columns:P.columns,onAction:P.onAction,highlightOn:P.highlightOn}))));return V.some({lookupData:_,context:o})};var Sf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Sf||(Sf={}));const DO=(e,n,o)=>e.stype===Sf.Error?n(e.serror):o(e.svalue),XV=e=>{const n=[],o=[];return L(e,r=>{DO(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},JV=(e,n)=>e.stype===Sf.Error?{stype:Sf.Error,serror:n(e.serror)}:e,QV=(e,n)=>e.stype===Sf.Value?{stype:Sf.Value,svalue:n(e.svalue)}:e,eU=(e,n)=>e.stype===Sf.Value?n(e.svalue):e,Nc=(e,n)=>e.stype===Sf.Error?n(e.serror):e,Y5=e=>({stype:Sf.Value,svalue:e}),X5=e=>({stype:Sf.Error,serror:e}),ti={fromResult:e=>e.fold(X5,Y5),toResult:e=>DO(e,Mi.error,Mi.value),svalue:Y5,partition:XV,serror:X5,bind:eU,bindError:Nc,map:QV,mapError:JV,fold:DO},kA=e=>St(e)&&xo(e).length>100?" removed due to size":JSON.stringify(e,null,2),u1=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ve("... (only showing first ten failures)")}]):e;return le(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},yy=(e,n)=>ti.serror([{path:e,getErrorInfo:n}]),J5=(e,n,o)=>yy(e,()=>'Could not find valid *required* value for "'+n+'" in '+kA(o)),OO=(e,n)=>yy(e,()=>'Choice schema did not contain choice key: "'+n+'"'),RO=(e,n,o)=>yy(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+kA(n)),FO=(e,n)=>yy(e,ve(n)),Q5=(e,n,o,r)=>bs(o,r).fold(()=>RO(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),_A=(e,n)=>({extract:(c,u)=>bs(u,e).fold(()=>OO(c,e),v=>Q5(c,u,n,v)),toString:()=>"chooseOn("+e+"). Possible values: "+xo(n)}),DA=(e,n)=>n,fS=(e,n)=>Wn(e)&&Wn(n)?xu(e,n):n,Cy=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)Qn(c,u)&&(o[u]=e(o[u],c[u]))}return o},xu=Cy(fS),wy=Cy(DA),NO=()=>({tag:"required",process:{}}),e$=e=>({tag:"defaultedThunk",process:e}),t$=e=>e$(ve(e)),n$=()=>({tag:"option",process:{}}),nU=(e,n)=>e.length>0?ti.svalue(xu(n,wy.apply(void 0,e))):ti.svalue(n),o$=e=>T(ti.serror,ot)(e),oU={consolidateObj:(e,n)=>{const o=ti.partition(e);return o.errors.length>0?o$(o.errors):nU(o.values,n)},consolidateArr:e=>{const n=ti.partition(e);return n.errors.length>0?o$(n.errors):ti.svalue(n.values)}},sU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),rU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),s$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},BO=e=>{const n=(r,c)=>ti.bindError(e(c),u=>FO(r,u)),o=ve("val");return{extract:n,toString:o}},aU=BO(ti.svalue),cU=(e,n,o,r)=>bs(n,o).fold(()=>J5(e,o,n),r),r$=(e,n,o,r)=>{const c=bs(e,n).getOrThunk(()=>o(e));return r(c)},iU=(e,n,o)=>o(bs(e,n)),lU=(e,n,o,r)=>{const c=bs(e,n).map(u=>u===!0?o(e):u);return r(c)},uU=(e,n,o,r,c)=>{const u=v=>c.extract(n.concat([r]),v),f=v=>v.fold(()=>ti.svalue(V.none()),w=>{const _=c.extract(n.concat([r]),w);return ti.map(_,V.some)});switch(e.tag){case"required":return cU(n,o,r,u);case"defaultedThunk":return r$(o,r,e.process,u);case"option":return iU(o,r,f);case"defaultedOptionThunk":return lU(o,r,e.process,f);case"mergeWithThunk":return r$(o,r,ve({}),v=>{const w=xu(e.process(o),v);return u(w)})}},dU=(e,n,o)=>{const r={},c=[];for(const u of o)s$(u,(f,v,w,_)=>{const P=uU(w,e,n,f,_);ti.fold(P,H=>{c.push(...H)},H=>{r[v]=H})},(f,v)=>{r[f]=v(n)});return c.length>0?ti.serror(c):ti.svalue(r)},MO=e=>({extract:(r,c)=>dU(r,c,e),toString:()=>`obj{
`+le(e,c=>s$(c,(u,f,v,w)=>u+" -> "+w.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),PO=e=>({extract:(r,c)=>{const u=le(c,(f,v)=>e.extract(r.concat(["["+v+"]"]),f));return oU.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),a$=e=>BO(n=>e(n).fold(ti.serror,ti.svalue)),c$=(e,n,o)=>{const r=n.extract([e],o);return ti.mapError(r,c=>({input:o,errors:c}))},mU=(e,n,o)=>ti.toResult(c$(e,n,o)),fU=e=>`Errors: 
`+u1(e.errors).join(`
`)+`

Input object: `+kA(e.input),i$=(e,n)=>_A(e,Zo(n,MO)),gU=ve(aU),gS=(e,n)=>BO(o=>{const r=typeof o;return e(o)?ti.svalue(o):ti.serror(`Expected type: ${n} but got: ${r}`)}),hU=gS(Ro,"number"),hS=gS(ie,"string"),pU=gS(Yt,"boolean"),RA=gS(we,"function"),Sy=sU,l$=rU,bU=e=>a$(n=>I(e,n)?Mi.value(n):Mi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),u$=(e,n)=>Sy(e,e,NO(),n),d$=e=>u$(e,hS),$O=e=>u$(e,RA),vU=(e,n)=>Sy(e,e,NO(),PO(n)),IO=(e,n)=>Sy(e,e,n$(),n),pS=e=>IO(e,hS),yU=e=>IO(e,RA),CU=(e,n)=>Sy(e,e,t$(n),gU()),Lb=(e,n,o)=>Sy(e,e,t$(n),o),m$=(e,n)=>Lb(e,n,hU),wU=(e,n)=>Lb(e,n,hS),f$=(e,n,o)=>Lb(e,n,bU(o)),FA=(e,n)=>Lb(e,n,pU),NA=(e,n)=>Lb(e,n,RA),SU=(e,n,o)=>Lb(e,n,PO(o)),xU=d$("type"),EU=$O("fetch"),LO=$O("onAction"),TU=NA("onSetup",()=>je),AU=pS("text"),kU=pS("icon"),_U=pS("tooltip"),rY=pS("label"),DU=FA("active",!1),BA=FA("enabled",!0),HO=FA("primary",!1),g$=e=>CU("columns",e),bS=e=>wU("type",e),h$=MO([xU,d$("trigger"),m$("minChars",1),g$(1),m$("maxResults",10),yU("matches"),EU,LO,SU("highlightOn",[],hS)]),p$=e=>mU("Autocompleter",h$,e),zO=[BA,_U,kU,AU,TU],b$=[DU].concat(zO),OU=[NA("predicate",Ne),f$("scope","node",["node","editor"]),f$("position","selection",["node","selection","line"])],v$=zO.concat([bS("contextformbutton"),HO,LO,l$("original",Rt)]),RU=b$.concat([bS("contextformbutton"),HO,LO,l$("original",Rt)]),VO=zO.concat([bS("contextformbutton")]),FU=b$.concat([bS("contextformtogglebutton")]),NU=i$("type",{contextformbutton:v$,contextformtogglebutton:RU});MO([bS("contextform"),NA("initValue",ve("")),rY,vU("commands",NU),IO("launch",i$("type",{contextformbutton:VO,contextformtogglebutton:FU}))].concat(OU));const BU=e=>{const n=e.ui.registry.getAll().popups,o=Zo(n,f=>p$(f).fold(v=>{throw new Error(fU(v))},Rt)),r=xt(ea(o,f=>f.trigger)),c=Gr(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ke(c,v=>v.trigger===f)}},y$=(e,n)=>{const o=qf(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},MU=e=>{const n=qc(),o=et(!1),r=n.isSet,c=()=>{r()&&(VE(e),o.set(!1),n.clear())},u=H=>{r()||n.set({trigger:H.trigger,matchLength:H.text.length})},f=Ft(()=>BU(e)),v=H=>n.get().map(U=>AA(e.dom,e.selection.getRng(),U.trigger,!0).bind(oe=>_O(e,f,oe,H))).getOrThunk(()=>YV(e,f)),w=H=>{v(H).fold(c,U=>{u(U.context),U.lookupData.then(oe=>{n.get().map(ge=>{const ce=U.context;ge.trigger===ce.trigger&&(n.set({...ge,matchLength:ce.text.length}),o.get()?(zE(e,{range:ce.range}),HE(e,{lookupData:oe})):(o.set(!0),zE(e,{range:ce.range}),K_(e,{lookupData:oe})))})})})},_=(H,U)=>{const oe=H.compareBoundaryPoints(window.Range.START_TO_START,U),ge=H.compareBoundaryPoints(window.Range.END_TO_END,U);return oe>=0&&ge<=0},P=()=>n.get().bind(({trigger:H})=>{const U=e.selection.getRng();return AA(e.dom,U,H,o.get()).filter(({range:oe})=>_(U,oe)).map(({range:oe})=>oe)});e.addCommand("mceAutocompleterReload",(H,U)=>{const oe=St(U)?U.fetchOptions:{};w(oe)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{P().each(H=>{zE(e,{range:H})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>P().isSome()),y$(e,{cancelIfNecessary:c,load:w})},PU=dn().browser.isSafari(),C$=e=>hu(Fe.fromDom(e)),w$=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},uc=(e,n)=>V.from(e.getParent(n.container(),"details")),xf=(e,n)=>uc(e,n).isSome(),$U=(e,n)=>{const o=V.from(e.getParent(n.startContainer,"details")),r=V.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>V.from(e.select("summary",u)[0]));return V.some({startSummary:c,startDetails:o,endDetails:r})}else return V.none()},cY=(e,n)=>Jc(n).exists(o=>o.isEqual(e)),IU=(e,n)=>pu(n).exists(o=>zs(o.getNode())&&xl(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),LU=(e,n)=>n.startSummary.exists(o=>cY(e,o)),HU=(e,n)=>n.startSummary.exists(o=>IU(e,o)),zU=(e,n)=>n.startDetails.exists(o=>xl(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),S$=(e,n,o)=>o.startDetails.exists(r=>rl(e,n).forall(c=>!r.contains(c.container()))),Hb=(e,n)=>{const o=n.getNode();On(o)||e.selection.setCursorLocation(o,n.offset())},VU=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?Jc(c):pu(c)).each(f=>Hb(e,f))}else Hb(e,n)},UU=(e,n)=>{const o=w=>w.contains(e.startContainer),r=w=>w.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(w=>n.endDetails.forall(_=>w!==_));return(c||u)&&!(c&&u)||f},x$=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Mt.fromRangeStart(c.getRng()),v=r.getParent(f.container(),r.isBlock),w=uc(r,f),_=v&&r.isEmpty(v),P=J(v==null?void 0:v.previousSibling),H=J(v==null?void 0:v.nextSibling);return _&&(n?H:P)&&Ch(!n,u,f).exists(ge=>xf(r,ge)&&!pa(w,uc(r,ge)))?!0:Ch(n,u,f).fold(Ne,U=>{const oe=uc(r,U);if(xf(r,U)&&!pa(w,oe)){if(n||VU(e,U,!1),v&&_){if(n&&P)return!0;if(!n&&H)return!0;VU(e,U,n),e.dom.remove(v)}return!0}else return!1})}else return!1},Ef=(e,n,o,r)=>{const u=e.selection.getRng(),f=Mt.fromRangeStart(u),v=e.getBody();return r==="selection"?UU(u,n):o?HU(f,n)||S$(v,f,n):LU(f,n)||zU(f,n)},WU=(e,n,o)=>$U(e.dom,e.selection.getRng()).fold(()=>x$(e,n,o),r=>Ef(e,r,n,o)||x$(e,n,o)),ZU=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Mt.fromRangeStart(u);return eC(c)?(o==="selection"&&w$(u,c)||bb(n,f,c)?C$(c):e.undoManager.transact(()=>{const v=r.getSel();let{anchorNode:w,anchorOffset:_,focusNode:P,focusOffset:H}=v??{};const U=()=>{rt(w)&&rt(_)&&rt(P)&&rt(H)&&(v==null||v.setBaseAndExtent(w,_,P,H))},oe=()=>{w=v==null?void 0:v.anchorNode,_=v==null?void 0:v.anchorOffset,P=v==null?void 0:v.focusNode,H=v==null?void 0:v.focusOffset},ge=(be,Me)=>{L(be.childNodes,qe=>{wv(qe)&&Me.appendChild(qe)})},ce=e.dom.create("span",{"data-mce-bogus":"1"});ge(c,ce),c.appendChild(ce),U(),(o==="word"||o==="line")&&(v==null||v.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&w$(r.getRng(),ce)?C$(c):(e.execCommand(n?"ForwardDelete":"Delete"),oe(),ge(ce,c),U()),e.dom.remove(ce)}),!0):!1},d1=(e,n,o)=>WU(e,n,o)||PU&&ZU(e,n,o)?V.some(je):V.none(),E$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:je,inputType:o},f=Uu(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},zb=E$("input"),Vd=E$("beforeinput"),UO=dn(),WO=UO.os,T$=WO.isMacOS()||WO.isiOS(),jO=UO.browser.isFirefox(),A$=(e,n,o)=>{const r=o.keyCode===mn.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=v=>c?v?"word":"line":"selection";P5([{keyCode:mn.BACKSPACE,action:Wo(rd,e)},{keyCode:mn.BACKSPACE,action:Wo(G2,e,!1)},{keyCode:mn.DELETE,action:Wo(G2,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(Ag,e,!1)},{keyCode:mn.DELETE,action:Wo(Ag,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(j4,e,n,!1)},{keyCode:mn.DELETE,action:Wo(j4,e,n,!0)},{keyCode:mn.BACKSPACE,action:Wo(l2,e,!1)},{keyCode:mn.DELETE,action:Wo(l2,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(d1,e,!1,u)},{keyCode:mn.DELETE,action:Wo(d1,e,!0,u)},...T$?[{keyCode:mn.BACKSPACE,altKey:!0,action:Wo(d1,e,!1,f(!0))},{keyCode:mn.DELETE,altKey:!0,action:Wo(d1,e,!0,f(!0))},{keyCode:mn.BACKSPACE,metaKey:!0,action:Wo(d1,e,!1,f(!1))}]:[{keyCode:mn.BACKSPACE,ctrlKey:!0,action:Wo(d1,e,!1,f(!0))},{keyCode:mn.DELETE,ctrlKey:!0,action:Wo(d1,e,!0,f(!0))}],{keyCode:mn.BACKSPACE,action:Wo(sd,e,!1)},{keyCode:mn.DELETE,action:Wo(sd,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(Q4,e,!1)},{keyCode:mn.DELETE,action:Wo(Q4,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(lA,e,!1)},{keyCode:mn.DELETE,action:Wo(lA,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(Vh,e,!1)},{keyCode:mn.DELETE,action:Wo(Vh,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(wA,e,!1)},{keyCode:mn.DELETE,action:Wo(wA,e,!0)},{keyCode:mn.BACKSPACE,action:Wo(F4,e,!1)},{keyCode:mn.DELETE,action:Wo(F4,e,!0)}],o).filter(v=>e.selection.isEditable()).each(v=>{o.preventDefault(),Vd(e,r).isDefaultPrevented()||(v(),zb(e,r))})},k$=(e,n,o)=>rS([{keyCode:mn.BACKSPACE,action:Wo(D4,e)},{keyCode:mn.DELETE,action:Wo(D4,e)},...T$?[{keyCode:mn.BACKSPACE,altKey:!0,action:Wo(nS,e)},{keyCode:mn.DELETE,altKey:!0,action:Wo(nS,e)},...o?[{keyCode:jO?224:91,action:Wo(nS,e)}]:[]]:[{keyCode:mn.BACKSPACE,ctrlKey:!0,action:Wo(nS,e)},{keyCode:mn.DELETE,ctrlKey:!0,action:Wo(nS,e)}]],n),jU=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===mn.BACKSPACE,r.isDefaultPrevented()||A$(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||k$(e,r,o),o=!1})},GU=e=>{for(;e;){if(Mn(e)||un(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},xy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=GU(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(za),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ec(n,n);let f=n,v;for(;v=u.current();){if(un(v)){c.setStart(v,0),c.setEnd(v,0);break}if(r[v.nodeName.toLowerCase()]){c.setStartBefore(v),c.setEndBefore(v);break}f=v,v=u.next()}v||(c.setStart(f,0),c.setEnd(f,0))}else zs(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),qw(e,c)},vS=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},GO=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),_$=e=>GO(e).fold(ve(""),n=>n.nodeName.toUpperCase()),qU=e=>GO(e).filter(n=>mh(Fe.fromDom(n))).isSome(),qO=e=>{e.innerHTML='<br data-mce-bogus="1">'},KU=(e,n,o)=>{const r=e.dom;V.from(o.style).map(r.parseStyle).each(w=>{const P={...Zc(Fe.fromDom(n)),...w};r.setStyles(n,P)});const c=V.from(o.class).map(w=>w.split(/\s+/)),u=V.from(n.className).map(w=>ke(w.split(/\s+/),_=>_!==""));qo(c,u,(w,_)=>{const P=ke(_,U=>!I(w,U)),H=[...w,...P];r.setAttrib(n,"class",H.join(" "))});const f=["style","class"],v=ys(o,(w,_)=>!I(f,_));r.setAttribs(n,v)},yS=(e,n)=>{if(Kc(e).toLowerCase()===n.tagName.toLowerCase()){const r=ug(e);KU(e,n,r)}},D$=(e,n,o,r,c=!0,u,f)=>{const v=e.dom,w=e.schema,_=Kc(e),P=o?o.nodeName.toUpperCase():"";let H=n;const U=w.getTextInlineElements();let oe;u||P==="TABLE"||P==="HR"?oe=v.create(u||_,f||{}):oe=o.cloneNode(!1);let ge=oe;if(!c)v.setAttrib(oe,"style",null),v.setAttrib(oe,"class",null);else do if(U[H.nodeName]){if(bu(H)||Ll(H))continue;const ce=H.cloneNode(!1);v.setAttrib(ce,"id",""),oe.hasChildNodes()?(ce.appendChild(oe.firstChild),oe.appendChild(ce)):(ge=ce,oe.appendChild(ce))}while((H=H.parentNode)&&H!==r);return yS(e,oe),qO(ge),oe},O$=(e,n)=>e.dom.getParent(n,Xi),R$=(e,n,o)=>{let r=n;for(;r&&r!==e&&J(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return Xi(c);r=c}return!1},YU=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Kc(e)&&e.dom.isEmpty(o)&&R$(e.getBody(),o,r=>Qn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),XU=(e,n,o)=>{var r,c,u;const f=n(Kc(e)),v=O$(e,o);v&&(e.dom.insertAfter(f,v),xy(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},iY=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,KO=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},F$=(e,n)=>{const o=e==null?void 0:e.parentNode;return rt(o)&&o.nodeName===n},N$=e=>rt(e)&&/^(OL|UL|LI)$/.test(e.nodeName),YO=e=>rt(e)&&/^(LI|DT|DD)$/.test(e.nodeName),B$=e=>N$(e)&&N$(e.parentNode),MA=e=>{const n=e.parentNode;return YO(n)?n:e},CS=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Mn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},M$=e=>Je(ea(Zc(Fe.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),JU=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),v=o.parentNode;if(o===e.getBody()||!v)return;B$(o)&&(c="LI");const w=YO(r)?M$(r):void 0;let _=YO(r)&&w?n(c,{style:M$(r)}):n(c);if(CS(o,r,!0)&&CS(o,r,!1))if(F$(o,"LI")){const P=MA(o);u.insertAfter(_,P),KO(o)?u.remove(P):u.remove(o)}else u.replace(_,o);else if(CS(o,r,!0))F$(o,"LI")?(u.insertAfter(_,MA(o)),_.appendChild(u.doc.createTextNode(" ")),_.appendChild(o)):v.insertBefore(_,o),u.remove(r);else if(CS(o,r,!1))u.insertAfter(_,MA(o)),u.remove(r);else{o=MA(o);const P=f.cloneRange();P.setStartAfter(r),P.setEndAfter(o);const H=P.extractContents();if(c==="LI"&&iY(H,"LI")){const U=ke(le(_.children,Fe.fromDom),Dt(ia("br")));_=H.firstChild,u.insertAfter(H,o),L(U,oe=>Mf(Fe.fromDom(_),oe)),w&&_.setAttribute("style",w)}else u.insertAfter(H,o),u.insertAfter(_,o);u.remove(r)}xy(e,_)},lY=e=>{L(Kg(Fe.fromDom(e),Js),n=>{const o=n.dom;o.nodeValue=Fi(o.data)})},zi=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},QU=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),XO=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,JO=(e,n)=>rt(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",eW=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Mn(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||QU(e,u))&&e.remove(u)},QO=(e,n,o)=>un(n)?e?o===1&&n.data.charAt(o-1)===yc?0:o:o===n.data.length-1&&n.data.charAt(o)===yc?n.data.length:o:o,tW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,QO(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,QO(!1,e.endContainer,e.endOffset)),n},nW=e=>{let n=e;do un(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},PA=(e,n,o,r,c)=>{var u,f;const v=e.dom,w=(u=vS(v,r))!==null&&u!==void 0?u:v.getRoot();let _=v.getParent(r,v.isBlock);if(!_||!JO(v,_)){if(_=_||w,!_.hasChildNodes()){const oe=v.create(n);return yS(e,oe),_.appendChild(oe),o.setStart(oe,0),o.setEnd(oe,0),oe}let P=r;for(;P&&P.parentNode!==_;)P=P.parentNode;let H;for(;P&&!v.isBlock(P);)H=P,P=P.previousSibling;const U=(f=H==null?void 0:H.parentElement)===null||f===void 0?void 0:f.nodeName;if(H&&U&&e.schema.isValidChild(U,n.toLowerCase())){const oe=H.parentNode,ge=v.create(n);for(yS(e,ge),oe.insertBefore(ge,H),P=H;P&&!v.isBlock(P);){const ce=P.nextSibling;ge.appendChild(P),P=ce}o.setStart(r,c),o.setEnd(r,c)}}return r},oW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Mn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},sW=(e,n)=>{const o=ac(e);return gn(n)?!1:ie(o)?I(Qt.explode(o),n.nodeName.toLowerCase()):o},I$={insert:(e,n)=>{let o,r,c,u,f=!1;const v=e.dom,w=e.schema,_=w.getNonEmptyElements(),P=e.selection.getRng(),H=Kc(e),U=Fe.fromDom(P.startContainer),oe=oi(U,P.startOffset),ge=oe.exists(Kt=>Mo(Kt)&&!oc(Kt)),ce=P.collapsed&&ge,be=(Kt,qn)=>D$(e,o,yn,Jt,u_(e),Kt,qn),Me=Kt=>{const qn=QO(Kt,o,r);if(un(o)&&(Kt?qn>0:qn<o.data.length))return!1;if((o.parentNode===yn||o===yn)&&f&&!Kt||Kt&&Mn(o)&&o===yn.firstChild)return!0;if(XO(o,"TABLE")||XO(o,"HR"))return f&&!Kt||!f&&Kt;const uo=new Ec(o,yn);un(o)&&(Kt&&qn===0?uo.prev():!Kt&&qn===o.data.length&&uo.next());let ps;for(;ps=uo.current();){if(Mn(ps)){if(!ps.getAttribute("data-mce-bogus")){const Cs=ps.nodeName.toLowerCase();if(_[Cs]&&Cs!=="br")return!1}}else if(un(ps)&&!Yi(ps.data))return!1;Kt?uo.prev():uo.next()}return!0},qe=()=>{let Kt;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&In!=="HGROUP"?Kt=be(H):Kt=be(),sW(e,u)&&JO(v,u)&&v.isEmpty(yn,void 0,{includeZwsp:!0})?Kt=v.split(u,yn):v.insertAfter(Kt,yn),xy(e,Kt),Kt};Cn(v,P).each(Kt=>{P.setStart(Kt.startContainer,Kt.startOffset),P.setEnd(Kt.endContainer,Kt.endOffset)}),o=P.startContainer,r=P.startOffset;const Ze=!!(n&&n.shiftKey),bt=!!(n&&n.ctrlKey);Mn(o)&&o.hasChildNodes()&&!ce&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&un(o)?r=o.data.length:r=0);const Jt=vS(v,o);if(!Jt||zi(e,o))return;Ze||(o=PA(e,H,P,o,r));let yn=v.getParent(o,v.isBlock)||v.getRoot();u=rt(yn==null?void 0:yn.parentNode)?v.getParent(yn.parentNode,v.isBlock):null,c=yn?yn.nodeName.toUpperCase():"";const In=u?u.nodeName.toUpperCase():"";if(In==="LI"&&!bt){const Kt=u;yn=Kt,u=Kt.parentNode,c=In}if(Mn(u)&&YU(e,Ze,yn))return XU(e,be,yn);if(/^(LI|DT|DD)$/.test(c)&&Mn(u)&&v.isEmpty(yn)){JU(e,be,u,yn,H);return}if(!ce&&(yn===e.getBody()||!JO(v,yn)))return;const Pt=yn.parentNode;let At;if(ce)At=be(H),oe.fold(()=>{na(U,Fe.fromDom(At))},Kt=>{Pc(Kt,Fe.fromDom(At))}),e.selection.setCursorLocation(At,0);else if(eg(yn))At=pm(yn),v.isEmpty(yn)&&qO(yn),yS(e,At),xy(e,At);else if(Me(!1))At=qe();else if(Me(!0)&&Pt){const Kt=Mt.fromRangeStart(P),qn=Qw(Kt),uo=Fe.fromDom(yn),Cs=cT(uo,Kt,e.schema)?NN(uo,Kt,e.schema).bind(fr=>V.from(fr.getNode())):V.none();At=Pt.insertBefore(be(),yn);const Xs=XO(yn,"HR")||qn?At:Cs.getOr(yn);xy(e,Xs)}else{const Kt=tW(P).cloneRange();Kt.setEndAfter(yn);const qn=Kt.extractContents();lY(qn),nW(qn),At=qn.firstChild,v.insertAfter(qn,yn),eW(v,_,At),oW(v,yn),v.isEmpty(yn)&&qO(yn),At.normalize(),v.isEmpty(At)?(v.remove(At),qe()):(yS(e,At),xy(e,At))}v.setAttrib(At,"id",""),e.dispatch("NewBlock",{newBlock:At})},fakeEventName:"insertParagraph"},uY=(e,n,o)=>{const r=new Ec(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||un(c)&&c.length>0)return!0;return!1},rW=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),qw(e,r)},dY=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Cn(r,c).each(oe=>{c.setStart(oe.startContainer,oe.startOffset),c.setEnd(oe.endContainer,oe.endOffset)});let v=c.startOffset,w=c.startContainer;if(Mn(w)&&w.hasChildNodes()){const oe=v>w.childNodes.length-1;w=w.childNodes[Math.min(v,w.childNodes.length-1)]||w,oe&&un(w)?v=w.data.length:v=0}let _=r.getParent(w,r.isBlock);const P=_&&_.parentNode?r.getParent(_.parentNode,r.isBlock):null,H=P?P.nodeName.toUpperCase():"",U=!!(n&&n.ctrlKey);H==="LI"&&!U&&(_=P),un(w)&&v>=w.data.length&&(uY(e.schema,w,_||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),F0(r,c,u),rW(e,u,f),e.undoManager.add()},aW=(e,n)=>{const o=Fe.fromTag("br");Pc(Fe.fromDom(n),o),e.undoManager.add()},cW=(e,n)=>{iW(e.getBody(),n)||yi(Fe.fromDom(n),Fe.fromTag("br"));const o=Fe.fromTag("br");yi(Fe.fromDom(n),o),rW(e,o.dom,!1),e.undoManager.add()},mY=e=>zs(e.getNode()),iW=(e,n)=>mY(Mt.after(n))?!0:rl(e,Mt.after(n)).map(o=>zs(o.getNode())).getOr(!1),Nm=e=>e&&e.nodeName==="A"&&"href"in e,lW=e=>e.fold(Ne,Nm,Nm,Ne),L$=e=>{const n=_e(pb,e),o=Mt.fromRangeStart(e.selection.getRng());return _g(n,e.getBody(),o).filter(lW)},uW=(e,n)=>{n.fold(je,_e(aW,e),_e(cW,e),je)},H$={insert:(e,n)=>{const o=L$(e);o.isSome()?o.each(_e(uW,e)):dY(e,n)},fakeEventName:"insertLineBreak"},z$=(e,n)=>GO(e).filter(o=>n.length>0&&Ol(Fe.fromDom(o),n)).isSome(),dW=e=>z$(e,Hx(e)),mW=e=>z$(e,l_(e)),jl=Od.generate([{br:[]},{block:[]},{none:[]}]),V$=(e,n)=>mW(e),wS=e=>(n,o)=>qU(n)===e,U$=(e,n)=>(o,r)=>_$(o)===e.toUpperCase()===n,fW=e=>{const n=vS(e.dom,e.selection.getStart());return gn(n)},SS=e=>U$("pre",e),gW=()=>U$("summary",!0),$A=e=>(n,o)=>Lx(n)===e,W$=(e,n)=>dW(e),IA=(e,n)=>n,Z$=e=>{const n=Kc(e),o=vS(e.dom,e.selection.getStart());return rt(o)&&e.schema.isValidChild(o.nodeName,n)},j$=e=>{const n=e.selection.getRng(),o=Fe.fromDom(n.startContainer),c=oi(o,n.startOffset).map(u=>Mo(u)&&!oc(u));return n.collapsed&&c.getOr(!0)},Ud=(e,n)=>(o,r)=>Je(e,(u,f)=>u&&f(o,r),!0)?V.some(n):V.none(),hW=(e,n)=>zP([Ud([V$],jl.none()),Ud([SS(!0),fW],jl.none()),Ud([gW()],jl.br()),Ud([SS(!0),$A(!1),IA],jl.br()),Ud([SS(!0),$A(!1)],jl.block()),Ud([SS(!0),$A(!0),IA],jl.block()),Ud([SS(!0),$A(!0)],jl.br()),Ud([wS(!0),IA],jl.br()),Ud([wS(!0)],jl.block()),Ud([W$],jl.br()),Ud([IA],jl.br()),Ud([Z$],jl.block()),Ud([j$],jl.block())],[e,!!(n&&n.shiftKey)]).getOr(jl.none()),Ey=(e,n,o)=>{n.selection.isCollapsed()||YL(n),!(rt(o)&&Vd(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),rt(o)&&zb(n,e.fakeEventName))},G$=(e,n)=>{const o=()=>Ey(H$,e,n),r=()=>Ey(I$,e,n),c=hW(e,n);switch(cf(e)){case"linebreak":c.fold(o,o,je);break;case"block":c.fold(r,r,je);break;case"invert":c.fold(r,o,je);break;default:c.fold(o,r,je);break}},q$=dn(),LA=q$.os.isiOS()&&q$.browser.isSafari(),K$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),YD(e.undoManager),e.undoManager.transact(()=>{G$(e,n)}))},eR=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(un(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},tR=e=>{let n=V.none();const o=c=>{n=V.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(je,f=>c.selection.moveToBookmark(f)),K$(c,u),n=V.none()};e.on("keydown",c=>{c.keyCode===mn.ENTER&&(LA&&eR(e.selection.getRng())?o(e):K$(e,c))}),e.on("keyup",c=>{c.keyCode===mn.ENTER&&n.each(()=>r(e,c))})},Y$=(e,n,o)=>{const r=Ie.os.isMacOS()||Ie.os.isiOS();rS([{keyCode:mn.END,action:Wo(R5,e,!0)},{keyCode:mn.HOME,action:Wo(R5,e,!1)},...r?[]:[{keyCode:mn.HOME,action:Wo(oS,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:mn.END,action:Wo(oS,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:mn.END,action:Wo(pV,e,!0)},{keyCode:mn.HOME,action:Wo(pV,e,!1)},{keyCode:mn.END,action:Wo(vA,e,!0,n)},{keyCode:mn.HOME,action:Wo(vA,e,!1,n)}],o).each(c=>{o.preventDefault()})},pW=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Y$(e,n,o)})},hY=e=>{e.on("input",n=>{n.isComposing||ML(e)})},m1=dn(),bW=(e,n,o)=>{rS([{keyCode:mn.PAGE_UP,action:Wo(vA,e,!1,n)},{keyCode:mn.PAGE_DOWN,action:Wo(vA,e,!0,n)}],o)},X$=e=>e.stopImmediatePropagation(),J$=e=>e.keyCode===mn.PAGE_UP||e.keyCode===mn.PAGE_DOWN,xS=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",X$,!0):!o&&e.get()&&n.off("NodeChange",X$),e.set(o)},Q$=(e,n)=>{if(m1.os.isMacOS())return;const o=et(!1);e.on("keydown",r=>{J$(r)&&xS(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||bW(e,n,r),J$(r)&&o.get()&&(xS(o,e,!1),e.nodeChanged())})},eI=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||G(n.getTargetRanges(),o=>!h3(e.dom,o)))&&n.preventDefault()})},tI=(e,n)=>{const o=n.container(),r=n.offset();return un(o)?(o.insertData(r,e),V.some(Mt(o,r+e.length))):cv(n).map(c=>{const u=Fe.fromText(e);return n.isAtEnd()?yi(c,u):Pc(c,u),Mt(u.dom,e.length)})},nR=_e(tI,za),nI=_e(tI," "),vW=(e,n,o)=>LN(e,n,o)?nR(n):nI(n),yW=e=>n=>n.fold(o=>xl(e.dom,Mt.before(o)),o=>Jc(o),o=>pu(o),o=>rl(e.dom,Mt.after(o))),oR=(e,n,o)=>r=>LN(e,r,o)?nR(n):nI(n),HA=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},CW=(e,n)=>e.isEditable(e.getParent(n,"summary")),sR=e=>{const n=Mt.fromRangeStart(e.selection.getRng()),o=Fe.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=_e(pb,e),c=Mt.fromRangeStart(e.selection.getRng());return _g(r,e.getBody(),c).bind(yW(o)).map(u=>()=>oR(o,n,e.schema)(u).each(HA(e)))}else return V.none()},oI=e=>{const n=()=>{const o=Fe.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Mt.fromRangeStart(e.selection.getRng());vW(o,r,e.schema).each(HA(e))};return qr(Ie.browser.isFirefox()&&e.selection.isEditable()&&CW(e.dom,e.selection.getRng().startContainer),n)},zA=(e,n)=>{P5([{keyCode:mn.SPACEBAR,action:Wo(sR,e)},{keyCode:mn.SPACEBAR,action:Wo(oI,e)}],n).each(o=>{n.preventDefault(),Vd(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),zb(e,"insertText",{data:" "}))})},sI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||zA(e,n)})},rI=e=>E_(e)?[{keyCode:mn.TAB,action:Wo(lS,e,!0)},{keyCode:mn.TAB,shiftKey:!0,action:Wo(lS,e,!1)}]:[],wW=(e,n)=>{rS([...rI(e)],n).each(o=>{n.preventDefault()})},SW=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||wW(e,n)})},VA=e=>{if(e.addShortcut("Meta+P","","mcePrint"),MU(e),Eg(e))return et(null);{const n=Mz(e);return eI(e),iV(e),xO(e,n),jU(e,n),tR(e),sI(e),hY(e),SW(e),pW(e,n),Q$(e,n),n}};class aI{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!k(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{Kw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Mp(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Mp(n)&&(n.selection.getNode().nodeName==="IMG"?Xu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!G0(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=sn(r.dom.getParents(n,dt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const cI=C0("image"),xW=e=>{const n=e;return V.from(n[cI])},iI=(e,n)=>{const o=e;o[cI]=n},rR=C0("event"),EW=e=>{const n=e;return V.from(n[rR])},UA=e=>n=>{const o=n;o[rR]=e},TW=(e,n)=>UA(n)(e),lI=UA(0),uI=UA(2),AW=UA(1),_W=(e=>n=>{const o=n;return V.from(o[rR]).exists(r=>r===e)})(0),DW=()=>Object.freeze({length:0,item:e=>null}),aR=C0("mode"),OW=e=>{const n=e;return V.from(n[aR])},WA=e=>n=>{const o=n;o[aR]=e},Vb=(e,n)=>WA(n)(e),dI=WA(0),cR=WA(2),mI=WA(1),fI=e=>n=>{const o=n;return V.from(o[aR]).exists(r=>r===e)},Ty=fI(0),gI=fI(1),hI=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Ty(e))if(ie(o)){if(!On(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Ty(e)&&n.remove(o)},clear:()=>{Ty(e)&&n.clear()}}),RW=["none","copy","link","move"],FW=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],pI=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){I(RW,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){_W(r)&&I(FW,c)&&(o=c)},get items(){return hI(r,e.items)},get files(){return gI(r)?DW():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{Ty(r)&&(iI(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>gI(r)?"":e.getData(c),setData:(c,u)=>{Ty(r)&&e.setData(c,u)},clearData:c=>{Ty(r)&&e.clearData(c)}};return dI(r),r},ZA=e=>{const n=pI(),o=OW(e);return cR(e),lI(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,xW(e).each(r=>n.setDragImage(r.image,r.x,r.y)),L(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),L(e.files,r=>n.items.add(r)),EW(e).each(r=>{TW(n,r)}),o.each(r=>{Vb(e,r),Vb(n,r)}),n},NW=e=>{const n=e.getData("text/html");return n===""?V.none():V.some(n)},bI=(e,n)=>e.setData("text/html",n),vI="x-tinymce/html",jA=ve(vI),iR="<!-- "+vI+" -->",BW=e=>iR+e,MW=e=>e.replace(iR,""),yI=e=>e.indexOf(iR)!==-1,PW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),$W=(e,n)=>{let o="<"+e;const r=ea(n,(c,u)=>u+'="'+Td.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},IW=(e,n,o)=>{const r=e.split(/\n\n/),c=$W(n,o),u="</"+n+">",f=le(r,w=>w.split(/\n/).join("<br />")),v=w=>c+w+u;return f.length===1?f[0]:le(f,v).join("")},CI="%MCEPASTEBIN%",LW=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},CI);Ie.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},Lr=(e,n)=>{const o=e.dom;if(lR(e)){let r;const c=n.get();for(;r=lR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},lR=e=>e.dom.get("mcepastebin"),wI=e=>rt(e)&&e.id==="mcepastebin",HW=e=>{const n=e.dom,o=(f,v)=>{f.appendChild(v),n.remove(v,!0)},[r,...c]=ke(e.getBody().childNodes,wI);L(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const v=n.create("div");r.insertBefore(v,u[f]),o(v,u[f])}return r?r.innerHTML:""},GA=e=>e===CI,SI=e=>{const n=et(null);return{create:()=>LW(e,n),remove:()=>Lr(e,n),getEl:()=>lR(e),getHtml:()=>HW(e),getLastRng:n.get}},xI=(e,n)=>(Qt.each(n,o=>{Qe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),zW=e=>{const n=mm(),o=ry({},n);let r="";const c=n.getVoidElements(),u=Qt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),v=w=>{const _=w.name,P=w;if(_==="br"){r+=`
`;return}if(_!=="wbr"){if(c[_]&&(r+=" "),u[_]){r+=" ";return}if(w.type===3&&(r+=w.value),!(w.name in n.getVoidElements())){let H=w.firstChild;if(H)do v(H);while(H=H.next)}f[_]&&P.next&&(r+=`
`,_==="p"&&(r+=`
`))}};return e=xI(e,[/<!\[[^\]]+\]>/g]),v(o.parse(e)),r},uR=e=>(e=xI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":za],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),dR=e=>{let n=0;return()=>e+n++},VW=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Qt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},UW=(e,n)=>{const o=ry({sanitize:Xc(e),sandbox_iframes:iE(e),sandbox_iframes_exclusions:ev(e),convert_unsafe_embeds:q1(e)},e.schema);o.addNodeFilter("meta",c=>{Qt.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Mh({validate:!0},e.schema).serialize(r)},EI=(e,n)=>({content:e,cancelled:n}),TI=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=UE(e,r,o);return EI(c.node.innerHTML,c.isDefaultPrevented())},WW=(e,n,o)=>{const r=Y_(e,n,o),c=UW(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?TI(e,c,o):EI(c,r.isDefaultPrevented())},ZW=(e,n,o)=>WW(e,n,o),f1=(e,n)=>(e.insertContent(n,{merge:oE(e),paste:!0}),!0),mR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Ay=(e,n)=>mR(n)&&G(G1(e),o=>hs(n.toLowerCase(),`.${o.toLowerCase()}`)),ES=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),jW=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),GW=(e,n,o)=>!e.selection.isCollapsed()&&mR(n)?jW(e,n,o):!1,ky=(e,n,o)=>Ay(e,n)?ES(e,n,o):!1,qW=(e,n)=>{Qt.each([GW,ky,f1],o=>!o(e,n,f1))},fR=(e,n,o)=>{o||!w_(e)?f1(e,n):qW(e,n)},KW=dR("mceclip"),AI=e=>{const n=pI();return bI(n,e),cR(n),n},gR=(e,n,o,r,c)=>{const u=ZW(e,n,o);if(!u.cancelled){const f=u.content,v=()=>fR(e,f,r);c?Vd(e,"insertFromPaste",{dataTransfer:AI(f)}).isDefaultPrevented()||(v(),zb(e,"insertFromPaste")):v()}},_y=(e,n,o,r)=>{const c=o||yI(n);gR(e,MW(n),c,!1,r)},qA=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Rl(r,sE(e)),u=IW(c,Kc(e),ug(e));gR(e,u,!1,!0,o)},kI=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},g1=(e,n)=>n in e&&e[n].length>0,hR=e=>g1(e,"text/html")||g1(e,"text/plain"),YW=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return rt(o)?e.dom.encode(o[1]):void 0},_I=(e,n,o,r)=>{const c=KW(),u=sr(e)&&rt(o.name),f=u?YW(e,o.name):c,v=u?o.name:void 0,w=n.create(c,o,r,f,v);return n.add(w),w},pR=(e,n)=>{Yp(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,v=e.editorUpload.blobCache,w=v.getByData(u,r),_=w??_I(e,v,f,u);_y(e,`<img src="${_.blobUri()}">`,!1,!0)})},DI=e=>e.type==="paste",XW=e=>Promise.all(le(e,n=>Hh(n).then(o=>({file:n,uri:o})))),JW=e=>{const n=G1(e);return o=>bo(o.type,"image/")&&G(n,r=>VW(r)===o.type)},QW=(e,n)=>{const o=n.items?mt(ss(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?ss(n.files):[];return ke(o.length>0?o:r,JW(e))},bR=(e,n,o)=>{const r=DI(n)?n.clipboardData:n.dataTransfer;if(xp(e)&&r){const c=QW(e,r);if(c.length>0)return n.preventDefault(),XW(c).then(u=>{o&&e.selection.setRng(o),L(u,f=>{pR(e,f)})}),!0}return!1},vR=e=>{var n,o;return Ie.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},eZ=e=>mn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,KA=(e,n,o,r,c)=>{let u=uR(o);const f=g1(n,jA())||yI(o),v=!f&&PW(u),w=mR(u);(GA(u)||!u.length||v&&!w)&&(r=!0),(r||w)&&(g1(n,"text/plain")&&v?u=n["text/plain"]:u=zW(u)),!GA(u)&&(r?qA(e,u,c):_y(e,u,f,c))},OI=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{eZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||vR(u))return;const f=o.get()==="text"||r;r=!1;const v=kI(u.clipboardData);!hR(v)&&bR(e,u,c())||(g1(v,"text/html")?(u.preventDefault(),KA(e,v,v["text/html"],f,!0)):g1(v,"text/plain")&&g1(v,"text/uri-list")?(u.preventDefault(),KA(e,v,v["text/plain"],f,!0)):(n.create(),Xu.setEditorTimeout(e,()=>{const w=n.getHtml();n.remove(),KA(e,v,w,f,!1)},0)))})},tZ=e=>{const n=c=>bo(c,"webkit-fake-url"),o=c=>bo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!xp(e)&&r(f))for(const v of c){const w=v.attr("src");ie(w)&&!v.attr("data-mce-object")&&w!==Ie.transparentSrc&&(n(w)||!Ep(e)&&o(w))&&v.remove()}})},RI=(e,n,o)=>{OI(e,n,o),tZ(e)},nZ=(e,n)=>{n.get()==="text"?(n.set("html"),$v(e,!1)):(n.set("text"),$v(e,!0)),e.focus()},oZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{nZ(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&_y(e,r.html,r.internal,!1),r.text&&qA(e,r.text,!1)})},sZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(jA(),n),!0}catch{return!1}else return!1},FI=(e,n,o,r)=>{sZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},NI=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const v=c.getRng();f.focus();const w=r.createRng();w.selectNodeContents(f),c.setRng(w),Xu.setEditorTimeout(e,()=>{c.setRng(v),r.remove(u),o()},0)},TS=e=>({html:BW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),rZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),yR=e=>!e.selection.isCollapsed()||rZ(e),aZ=e=>n=>{!n.isDefaultPrevented()&&yR(e)&&e.selection.isEditable()&&FI(n,TS(e),NI(e),()=>{if(Ie.browser.isChromium()||Ie.browser.isFirefox()){const o=e.selection.getRng();Xu.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},cZ=e=>n=>{!n.isDefaultPrevented()&&yR(e)&&FI(n,TS(e),NI(e),je)},BI=e=>{e.on("cut",aZ(e)),e.on("copy",cZ(e))},CR=(e,n)=>{var o,r;return bn.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},iZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},MI=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},lZ=e=>G(e.files,n=>/^image\//.test(n.type)),uZ=(e,n,o,r)=>{const c=e.getParent(o,f=>zu(n,f));if(!J(e.getParent(o,"summary")))return!0;if(c&&Qn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!J(f.querySelector(c.nodeName.toLowerCase()))}else return!1},dZ=e=>{e.on("input",n=>{const o=r=>J(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=ke(e.dom.select("details"),o);L(r,c=>{zs(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(fh().dom),c.prepend(u)})}})},PI=(e,n)=>{Jx(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),xp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&lZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=CR(e,o);if(gn(r))return;const c=kI(o.dataTransfer),u=g1(c,jA());if((!hR(c)||iZ(c))&&bR(e,o,r))return;const f=c[jA()],v=f||c["text/html"]||c["text/plain"],w=uZ(e.dom,e.schema,r.startContainer,c),_=n.get();_&&!w||v&&(o.preventDefault(),Xu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||_&&w)&&e.execCommand("Delete"),MI(e,r);const P=uR(v);c["text/html"]?_y(e,P,u,!0):qA(e,P,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{xp(e)&&!n.get()&&(o.preventDefault(),MI(e,CR(e,o))),o.type==="dragend"&&n.set(!1)}),dZ(e)},mZ=e=>{const n=c=>u=>{c(e,u)},o=Qx(e);we(o)&&e.on("PastePreProcess",n(o));const r=eE(e);we(r)&&e.on("PastePostProcess",n(r))},fZ=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},gZ=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,$I=e=>Qt.trim(e).replace(gZ,kd).toLowerCase(),hZ=(e,n,o)=>{const r=C_(e);if(o||r==="all"||!nE(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,w,_,P)=>{const H=u.parseStyle(u.decode(_)),U={};for(let ge=0;ge<c.length;ge++){const ce=H[c[ge]];let be=ce,Me=u.getStyle(f,c[ge],!0);/color/.test(c[ge])&&(be=$I(be),Me=$I(Me)),Me!==be&&(U[c[ge]]=ce)}const oe=u.serializeStyle(U,"span");return oe?w+' style="'+oe+'"'+P:w+P})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,v,w)=>f+' style="'+v+'"'+w),n},pZ=e=>{(Ie.browser.isChromium()||Ie.browser.isSafari())&&fZ(e,hZ)},bZ=e=>{const n=et(!1),o=et(X0(e)?"text":"html"),r=SI(e);pZ(e),oZ(e,o),mZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{BI(e),PI(e,n),RI(e,r,o)})},vZ=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},II=e=>{e.parser.addNodeFilter("details",n=>{const o=cE(e);L(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=uw(e);L(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},LI=e=>{vZ(e),II(e)},yZ=zs,HI=un,CZ=e=>Vs(e.dom),wZ=e=>Zt(e.dom),zI=e=>n=>os(Fe.fromDom(e),n),SZ=(e,n,o)=>Yr(Fe.fromDom(e),r=>wZ(r)||o.isBlock(fe(r)),zI(n)).getOr(Fe.fromDom(n)).dom,VI=(e,n)=>Yr(Fe.fromDom(e),CZ,zI(n)),AS=(e,n,o)=>{const r=new Ec(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!yZ(f);f=c())Bl(f)&&(u=f);return u},UI=(e,n,o)=>{const c=Mt.fromRangeStart(e).getNode(),u=SZ(c,n,o),f=AS(c,u,!1),v=AS(c,u,!0),w=document.createRange();return VI(f,u).fold(()=>{HI(f)?w.setStart(f,0):w.setStartBefore(f)},_=>w.setStartBefore(_.dom)),VI(v,u).fold(()=>{HI(v)?w.setEnd(v,v.data.length):w.setEndAfter(v)},_=>w.setEndAfter(_.dom)),w},xZ=e=>{const n=UI(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Ir(n))},WI=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),xZ(e))})};var Ub;(function(e){e.Before="before",e.After="after"})(Ub||(Ub={}));const wR=(e,n)=>Math.abs(e.left-n),EZ=(e,n)=>Math.abs(e.right-n),ZI=(e,n)=>e>=n.top&&e<=n.bottom,TZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,jI=(e,n)=>{const o=hh(e,n)/Math.min(e.height,n.height);return TZ(e,n)&&o>.5},AZ=(e,n)=>{const o=ke(e,r=>ZI(n,r));return Wk(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=He(e,f=>jI(f,r));return[c,u]})},GI=(e,n)=>({node:e.node,position:wR(e,n)<EZ(e,n)?Ub.Before:Ub.After}),kZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),SR=(e,n,o,r)=>{const c=H=>Bl(H.node)?V.some(H):Mn(H.node)?SR(ss(H.node.childNodes),n,o,!1):V.none(),u=(H,U,oe)=>c(U).filter(ge=>Math.abs(oe(H,n,o)-oe(ge,n,o))<2&&un(ge.node)),f=(H,U)=>{const oe=ro(H,(ge,ce)=>U(ge,n,o)-U(ce,n,o));return Lo(oe,c).map(ge=>r&&!un(ge.node)&&oe.length>1?u(ge,oe[1],U).getOr(ge):ge)},[v,w]=AZ(zd(e),o),{pass:_,fail:P}=He(w,H=>H.top<o);return f(v,kZ).orThunk(()=>f(P,yx)).orThunk(()=>f(_,yx))},_Z=(e,n,o,r)=>{const c=(u,f)=>{const v=_=>Mn(_)&&_.classList.contains("mce-drag-container"),w=ke(u.dom.childNodes,Dt(v));return f.fold(()=>SR(w,o,r,!0),_=>{const P=ke(w,H=>H!==_.dom);return SR(P,o,r,!0)}).orThunk(()=>(os(u,e)?V.none():Vm(u)).bind(P=>c(P,V.some(u))))};return c(n,V.none())},kS=(e,n,o)=>{const r=Fe.fromDom(e),c=Nu(r),f=Fe.fromPoint(c,n,o).filter(v=>Ea(r,v)).getOr(r);return _Z(r,f,n,o)},qI=(e,n,o)=>kS(e,n,o).filter(r=>vm(r.node)).map(r=>GI(r,n)),KI=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},YI=e=>e.inline?KI(e.getBody()):{left:0,top:0},DZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},OZ=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},RZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=KI(e.getContentAreaContainer()),r=OZ(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},FZ=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),NZ=(e,n)=>FZ(YI(e),DZ(e),RZ(e,n)),_S=e=>({target:e,srcElement:e}),XI=(e,n,o,r)=>({...n,dataTransfer:r,type:e,..._S(o)}),JI=(e,n,o)=>{const r=An("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:je,stopImmediatePropagation:je,stopPropagation:je,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,..._S(n)}},BZ=(e,n)=>{const o=ZA(e);return n==="dragstart"?(lI(o),dI(o)):n==="drop"?(uI(o),cR(o)):(AW(o),mI(o)),o},MZ=(e,n,o,r)=>{const c=BZ(o,e);return On(r)?JI(e,n,c):XI(e,r,n,c)},YA=32,pY=100,XA=8,DS=16,JA=Vs,QA=Zk(JA,Zt),PZ=(e,n,o)=>JA(o)&&o!==n&&e.isEditable(o.parentElement),$Z=(e,n,o)=>gn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),QI=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},IZ=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Dy=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},xR=Dy("left",-YA),e6=Dy("left",YA),t6=Dy("top",-YA),ER=Dy("top",YA),LZ=(e,n,o,r,c,u,f,v,w,_,P,H)=>{let U=0,oe=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(U=n.pageX+o-c),n.pageY+r>u&&(oe=n.pageY+r-u),e.style.width=o-U+"px",e.style.height=r-oe+"px";const ge=w.clientHeight,ce=w.clientWidth,be=f+w.getBoundingClientRect().top,Me=v+w.getBoundingClientRect().left;P.on(qe=>{qe.intervalId.clear(),qe.dragging&&H&&(f+XA>=ge?qe.intervalId.set(ER(_)):f-XA<=0?qe.intervalId.set(t6(_)):v+XA>=ce?qe.intervalId.set(e6(_)):v-XA<=0?qe.intervalId.set(xR(_)):be+DS>=window.innerHeight?qe.intervalId.set(ER(window)):be-DS<=0?qe.intervalId.set(t6(window)):Me+DS>=window.innerWidth?qe.intervalId.set(e6(window)):Me-DS<=0&&qe.intervalId.set(xR(window)))})},HZ=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},zZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);HZ(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&hu(Fe.fromDom(o))},VZ=e=>e.button===0,UZ=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),n6=(e,n)=>o=>{if(VZ(o)){const r=Wt(n.dom.getParents(o.target),QA).getOr(null);if(rt(r)&&PZ(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:pI(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:QI(n,r,r.offsetWidth,r.offsetHeight),intervalId:Hf(pY)})}}},WZ=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),qI(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Ub.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},Oy=(e,n,o,r,c)=>{n==="dragstart"&&bI(r,e.dom.getOuterHTML(o));const u=MZ(n,o,r,c);return e.dispatch(n,u)},ZZ=(e,n)=>{const o=N1((c,u)=>WZ(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const v=Oy(n,"dragstart",u.element,u.dataTransfer,c);if(rt(v.dataTransfer)&&(u.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const v=c.currentTarget===n.getDoc().documentElement,w=UZ(u,NZ(n,c));IZ(u.ghost,n.getBody()),LZ(u.ghost,w,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,v),o.throttle(c.clientX,c.clientY)}})},jZ=e=>{const n=e.getSel();if(rt(n)){const r=n.getRangeAt(0).startContainer;return un(r)?r.parentNode:r}else return null},GZ=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if($Z(n,jZ(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();Oy(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{zZ(n.dom,r.element),NW(r.dataTransfer).each(v=>n.insertContent(v)),n._selectionOverrides.hideFakeCaret()})}Oy(n,"dragend",n.getBody(),r.dataTransfer,o)}}),TR(e)},o6=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Oy(n,"dragend",r.element,r.dataTransfer),c=>Oy(n,"dragend",r.element,r.dataTransfer,c))}),TR(e)},qZ=(e,n)=>o=>o6(e,n,V.some(o)),TR=e=>{e.on(n=>{n.intervalId.clear(),HZ(n.ghost)}),e.clear()},bY=e=>{const n=qc(),o=jr.DOM,r=document,c=n6(n,e),u=ZZ(n,e),f=GZ(n,e),v=qZ(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",v),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",v)}),e.on("keydown",w=>{w.keyCode===mn.ESC&&o6(n,e,V.none())})},KZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(I(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&M2(e,"Dropped file type is not supported"))}},o=c=>{tT(e,c.target)&&n(c)},r=()=>{const c=jr.DOM,u=e.dom,f=document,v=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];L(w,_=>{c.bind(f,_,o),u.bind(v,_,n)}),e.on("remove",()=>{L(w,_=>{c.unbind(f,_,o),u.unbind(v,_,n)})})};e.on("init",()=>{Xu.setEditorTimeout(e,r,0)})},s6=e=>{bY(e),Yx(e)&&KZ(e)},YZ=e=>{const n=N1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=hy(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},AR=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Gc(o)){const r=jp(e.getBody(),o),c=Vs(r)?r:o;e.selection.getNode()!==c&&gy(e,c).each(u=>e.selection.setRng(u))}})})},OS=Vs,r6=(e,n)=>jp(e.getBody(),n),XZ=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=BF(e,r,o.isBlock,()=>Bh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let v;const w=In=>rt(In)&&o.hasClass(In,"mce-offscreen-selection"),_=In=>In!==r&&(OS(In)||Gc(In))&&o.isChildOf(In,r)&&o.isEditable(In.parentNode),P=In=>{In&&n.setRng(In)},H=(In,Pt,At,Kt=!0)=>e.dispatch("ShowCaret",{target:Pt,direction:In,before:At}).isDefaultPrevented()?null:(Kt&&n.scrollIntoView(Pt,In===-1),c.show(At,Pt)),U=In=>{In.hasAttribute("data-mce-caret")&&(pm(In),n.scrollIntoView(In))},oe=()=>{e.on("click",Pt=>{o.isEditable(Pt.target)||(Pt.preventDefault(),e.focus())}),e.on("blur NewBlock",bt),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Pt=>{const At=Pt.target,Kt=r6(e,At);OS(Kt)?(Pt.preventDefault(),gy(e,Kt).each(Ze)):_(At)&&gy(e,At).each(Ze)},!0),e.on("mousedown",Pt=>{const At=Pt.target;if(At!==r&&At.nodeName!=="HTML"&&!o.isChildOf(At,r)||!yH(e,Pt.clientX,Pt.clientY))return;bt(),yn();const Kt=r6(e,At);OS(Kt)?(Pt.preventDefault(),gy(e,Kt).each(Ze)):qI(r,Pt.clientX,Pt.clientY).each(qn=>{Pt.preventDefault();const uo=H(1,qn.node,qn.position===Ub.Before,!1);P(uo),dl(Kt)?Kt.focus():e.getBody().focus()})}),e.on("keypress",Pt=>{mn.modifierPressed(Pt)||OS(n.getNode())&&Pt.preventDefault()}),e.on("GetSelectionRange",Pt=>{let At=Pt.range;if(v){if(!v.parentNode){v=null;return}At=At.cloneRange(),At.selectNode(v),Pt.range=At}}),e.on("SetSelectionRange",Pt=>{Pt.range=be(Pt.range);const At=Ze(Pt.range,Pt.forward);At&&(Pt.range=At)});const In=Pt=>Mn(Pt)&&Pt.id==="mcepastebin";e.on("AfterSetSelectionRange",Pt=>{const At=Pt.range,Kt=At.startContainer.parentElement;!ce(At)&&!In(Kt)&&yn(),w(Kt)||bt()}),s6(e),YZ(e),AR(e)},ge=In=>yl(In)||tg(In)||Es(In),ce=In=>ge(In.startContainer)||ge(In.endContainer),be=In=>{const Pt=e.schema.getVoidElements(),At=o.createRng(),Kt=In.startContainer,qn=In.startOffset,uo=In.endContainer,ps=In.endOffset;return Qn(Pt,Kt.nodeName.toLowerCase())?qn===0?At.setStartBefore(Kt):At.setStartAfter(Kt):At.setStart(Kt,qn),Qn(Pt,uo.nodeName.toLowerCase())?ps===0?At.setEndBefore(uo):At.setEndAfter(uo):At.setEnd(uo,ps),At},Me=(In,Pt)=>{const At=Fe.fromDom(e.getBody()),Kt=e.getDoc(),qn=oo(At,"#"+u).getOrThunk(()=>{const Cs=Fe.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Kt);return or(Cs,"id",u),na(At,Cs),Cs}),uo=o.createRng();yd(qn),Mu(qn,[Fe.fromText(za,Kt),Fe.fromDom(Pt),Fe.fromText(za,Kt)]),uo.setStart(qn.dom.firstChild,1),uo.setEnd(qn.dom.lastChild,0),Yo(qn,{top:o.getPos(In,e.getBody()).y+"px"}),Hv(qn);const ps=n.getSel();return ps&&(ps.removeAllRanges(),ps.addRange(uo)),uo},qe=In=>{const Pt=In.cloneNode(!0),At=e.dispatch("ObjectSelected",{target:In,targetClone:Pt});if(At.isDefaultPrevented())return null;const Kt=Me(In,At.targetClone),qn=Fe.fromDom(In);return L($c(Fe.fromDom(e.getBody()),`*[${f}]`),uo=>{os(qn,uo)||br(uo,f)}),o.getAttrib(In,f)||In.setAttribute(f,"1"),v=In,yn(),Kt},Ze=(In,Pt)=>{if(!In)return null;if(In.collapsed){if(!ce(In)){const uo=Pt?1:-1,ps=J1(uo,r,In),Cs=ps.getNode(!Pt);if(rt(Cs)){if(vm(Cs))return H(uo,Cs,Pt?!ps.isAtEnd():!1,!1);if(of(Cs)&&Vs(Cs.nextSibling)){const fr=o.createRng();return fr.setStart(Cs,0),fr.setEnd(Cs,0),fr}}const Xs=ps.getNode(Pt);if(rt(Xs)){if(vm(Xs))return H(uo,Xs,Pt?!1:!ps.isAtEnd(),!1);if(of(Xs)&&Vs(Xs.previousSibling)){const fr=o.createRng();return fr.setStart(Xs,1),fr.setEnd(Xs,1),fr}}}return null}let At=In.startContainer,Kt=In.startOffset;const qn=In.endOffset;if(un(At)&&Kt===0&&OS(At.parentNode)&&(At=At.parentNode,Kt=o.nodeIndex(At),At=At.parentNode),!Mn(At))return null;if(qn===Kt+1&&At===In.endContainer){const uo=At.childNodes[Kt];if(_(uo))return qe(uo)}return null},bt=()=>{v&&v.removeAttribute(f),oo(Fe.fromDom(e.getBody()),"#"+u).each(mr),v=null},Jt=()=>{c.destroy(),v=null},yn=()=>{c.hide()};return Eg(e)||oe(),{showCaret:H,showBlockCaretContainer:U,hideFakeCaret:yn,destroy:Jt}},a6=(e,n)=>{let o=n;for(let r=e.previousSibling;un(r);r=r.previousSibling)o+=r.data.length;return o},RS=(e,n,o,r,c)=>{if(un(o)&&(r<0||r>o.data.length))return[];const u=c&&un(o)?[a6(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},ek=(e,n,o,r,c,u,f=!1)=>{const v=RS(e,n,o,r,f),w=RS(e,n,c,u,f);return{start:v,end:w}},kR=(e,n)=>{const o=n.slice(),r=o.pop();return Ro(r)?Je(o,(u,f)=>u.bind(v=>V.from(v.childNodes[f])),V.some(e)).bind(u=>un(u)&&(r<0||r>u.data.length)?V.none():V.some({node:u,offset:r})):V.none()},c6=(e,n)=>kR(e,n.start).bind(({node:o,offset:r})=>kR(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),JZ=(e,n,o,r=!1)=>ek(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Wb=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,un(n.firstChild)&&Yi(n.firstChild.data)),Wb(e,r,o)}},tk=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(un(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),un(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Wb(e,c,o),c!==u&&Wb(e,u,o))},nk=(e,n)=>V.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),_R=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:KC(r).concat(e.blockPatterns),inlinePatterns:Px(r).concat(e.inlinePatterns)}},FS=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},i6=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),ok=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},l6=(e,n,o)=>{const r=c6(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),v=r.startOffset===0?c:c.splitText(r.startOffset),w=v.parentNode,_=f.parentNode;return{prefix:n,end:_.insertBefore(i6(e,n+"-end"),f),start:w.insertBefore(i6(e,n+"-start"),v)}},u6=(e,n,o)=>{Wb(e,e.get(n.prefix+"-end"),o),Wb(e,e.get(n.prefix+"-start"),o)},DR=e=>e.start.length===0,QZ=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},OR=(e,n,o,r)=>{const c=n.start;return AO(e,r.container,r.offset,QZ(c),o).bind(f=>{var v,w;const _=(w=(v=o.textContent)===null||v===void 0?void 0:v.indexOf(c))!==null&&w!==void 0?w:-1;if(_!==-1&&f.offset>=_+c.length){const H=e.createRng();return H.setStart(f.container,f.offset-c.length),H.setEnd(f.container,f.offset),V.some(H)}else{const H=f.offset-c.length;return TO(f.container,H,o).map(U=>{const oe=e.createRng();return oe.setStart(U.container,U.offset),oe.setEnd(f.container,f.offset),oe}).filter(U=>U.toString()===c).orThunk(()=>OR(e,n,o,Fm(f.container,0)))}})},d6=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),V.some(f)}return EO(o,r,c).bind(f=>OR(e,n,c,f).bind(w=>{var _;if(u){if(w.endContainer===f.container&&w.endOffset===f.offset)return V.none();if(f.offset===0&&((_=w.endContainer.textContent)===null||_===void 0?void 0:_.length)===w.endOffset)return V.none()}return V.some(w)}))},RR=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,v=o.position.container,w=o.position.offset;return TO(v,w-o.pattern.end.length,n).bind(_=>{const P=ek(c,u,_.container,_.offset,v,w,r);if(DR(f))return V.some({matches:[{pattern:f,startRng:P,endRng:P}],position:_});{const H=Ry(e,o.remainingPatterns,_.container,_.offset,n,r),U=H.getOr({matches:[],position:_}),oe=U.position;return d6(c,f,oe.container,oe.offset,n,H.isNone()).map(ce=>{const be=JZ(c,u,ce,r);return{matches:U.matches.concat([{pattern:f,startRng:be,endRng:P}]),position:Fm(ce.startContainer,ce.startOffset)}})}})},Ry=(e,n,o,r,c,u)=>{const f=e.dom;return EO(o,r,f.getRoot()).bind(v=>{const w=FS(f,c,o,r);for(let _=0;_<n.length;_++){const P=n[_];if(!hs(w,P.end))continue;const H=n.slice();H.splice(_,1);const U=RR(e,c,{pattern:P,remainingPatterns:H,position:v},u);if(U.isNone()&&r>0)return Ry(e,n,o,r-1,c,u);if(U.isSome())return U}return V.none()})},m6=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?L(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},FR=(e,n,o,r)=>{const c=ok(e.dom,o);tk(e.dom,c,r),m6(e,n,c)},ej=(e,n,o,r,c)=>{const u=e.dom,f=ok(u,r),v=ok(u,o);tk(u,v,c),tk(u,f,c);const w={prefix:o.prefix,start:o.end,end:r.start},_=ok(u,w);m6(e,n,_)},tj=(e,n)=>{const o=C0("mce_textpattern"),r=lt(n,(c,u)=>{const f=l6(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return lt(r,(c,u)=>{const f=r.length-c.length-1,v=DR(u.pattern)?u.endMarker:l6(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:v}])},[])},f6=e=>ro(e,(n,o)=>o.end.length-n.end.length),nj=(e,n)=>{const o=Xt(e,r=>G(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},g6=(e,n,o,r,c,u)=>{const f=Ry(e,c.inlinePatterns,o,r,n,u).fold(()=>[],w=>w.matches),v=Ry(e,f6(c.inlinePatterns),o,r,n,u).fold(()=>[],w=>w.matches);return nj(f,v)},h6=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=tj(o,n);L(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),v=w=>w===f;DR(u.pattern)?FR(e,u.pattern,u.endMarker,v):ej(e,u.pattern,u.startMarker,u.endMarker,v),u6(o,u.endMarker,v),u6(o,u.startMarker,v)}),e.selection.moveToBookmark(r)},p6=(e,n,o)=>zV(n,0,n).map(r=>{const c=r.container;return mS(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),tk(e,f,v=>v===n)}),c}),b6=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=c6(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(v,w)=>{const _=w.get(v);return vt(_)&&to(_).exists(P=>Qn(P,"block"))};return nk(n,u).each(v=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,v,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,v,c),n.execCommand(c.cmd,!1,c.value)})}),!0},oj=e=>ro(e,(n,o)=>o.start.length-n.start.length),v6=e=>(n,o)=>{const r=oj(n),c=o.replace(za," ");return Wt(r,u=>e(u,o,c))},NR=(e,n)=>(o,r,c,u,f)=>{var v;f===void 0&&(f=(v=r.textContent)!==null&&v!==void 0?v:"");const w=o.dom,_=Kc(o);return w.is(r,_)?e(c.blockPatterns,f).map(P=>n&&Qt.trim(f).length===P.start.length?[]:[{pattern:P,range:ek(w,w.getRoot(),r,0,r,0,u)}]).getOr([]):[]},sj=e=>/^\s[^\s]/.test(e),rj=b6((e,n,o)=>{p6(e,n,o).each(r=>{const c=Fe.fromDom(r),u=Xf(c);sj(u)&&_C(c,u.slice(1))})}),aj=v6((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),cj=NR(aj,!0),ij=(e,n)=>{const o=e.selection.getRng();return nk(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=_R(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),v=g6(e,r,o.startContainer,u,f,!0),w=cj(e,r,f,!0);return{inlineMatches:v,blockMatches:w}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},lj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();L(n,r=>rj(e,r)),e.selection.moveToBookmark(o)},uj=b6(p6),sk=v6((e,n,o)=>n===e.start||o===e.start),dj=NR(sk,!1),mj=(e,n)=>{const o=e.selection.getRng();return nk(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=FS(e.dom,r,o.startContainer,c),f=_R(n,r,u);return dj(e,r,f,!1,u)}).filter(r=>r.length>0)},fj=(e,n)=>{L(n,o=>uj(e,o))},gj=(e,n)=>ij(e,n).fold(Ne,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{zk(e),h6(e,o),lj(e,r);const c=e.selection.getRng(),u=EO(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const v=f.container;v.data.charAt(f.offset-1)===tp&&(v.deleteData(f.offset-1,1),Wb(e.dom,v.parentNode,w=>w===e.dom.getRoot()))})}),!0)),hj=(e,n)=>{const o=e.selection.getRng();nk(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=FS(e.dom,r,o.startContainer,c),f=_R(n,r,u),v=g6(e,r,o.startContainer,c,f,!1);v.length>0&&e.undoManager.transact(()=>{h6(e,v)})})},pj=(e,n)=>mj(e,n).fold(Ne,o=>(e.undoManager.transact(()=>{fj(e,o)}),!0)),C6=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},bj=(e,n)=>C6(e,n,(o,r)=>o===r.keyCode&&!mn.modifierPressed(r)),vj=(e,n)=>C6(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),w6=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>bh(rE(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),iw(e)),c=()=>$l(e);e.on("keydown",f=>{if(f.keyCode===13&&!mn.modifierPressed(f)&&e.selection.isCollapsed()){const v=kc(r(),"enter");(v.inlinePatterns.length>0||v.blockPatterns.length>0||c())&&gj(e,v)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const v=kc(r(),"space");(v.blockPatterns.length>0||c())&&pj(e,v)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=kc(r(),"space");(f.inlinePatterns.length>0||c())&&hj(e,f)}};e.on("keyup",f=>{bj(o,f)&&u()}),e.on("keypress",f=>{vj(n,f)&&Xu.setEditorTimeout(e,u)})},yj=e=>{w6(e)},S6=e=>{const n=Qt.each,o=mn.BACKSPACE,r=mn.DELETE,c=e.dom,u=e.selection,f=e.parser,v=Ie.browser,w=v.isFirefox(),_=v.isChromium()||v.isSafari(),P=Ie.deviceType.isiPhone()||Ie.deviceType.isiPad(),H=Ie.os.isMacOS()||Ie.os.isiOS(),U=(Nn,So)=>{try{e.getDoc().execCommand(Nn,!1,String(So))}catch{}},oe=Nn=>Nn.isDefaultPrevented(),ge=()=>{const Nn=fs=>{const Pn=c.create("body"),gs=fs.cloneContents();return Pn.appendChild(gs),u.serializer.serialize(Pn,{format:"html"})},So=fs=>{const Pn=Nn(fs),gs=c.createRng();gs.selectNode(e.getBody());const ws=Nn(gs);return Pn===ws};e.on("keydown",fs=>{const Pn=fs.keyCode;if(!oe(fs)&&(Pn===r||Pn===o)&&e.selection.isEditable()){const gs=e.selection.isCollapsed(),ws=e.getBody();if(gs&&!Hu(e.schema,ws)||!gs&&!So(e.selection.getRng()))return;fs.preventDefault(),e.setContent(""),ws.firstChild&&c.isBlock(ws.firstChild)?e.selection.setCursorLocation(ws.firstChild,0):e.selection.setCursorLocation(ws,0),e.nodeChanged()}})},ce=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},be=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Nn=>{let So;if(Nn.target===e.getDoc().documentElement)if(So=u.getRng(),e.getBody().focus(),Nn.type==="mousedown"){if(yl(So.startContainer))return;u.placeCaretAt(Nn.clientX,Nn.clientY)}else u.setRng(So)})},Me=()=>{e.on("keydown",Nn=>{if(!oe(Nn)&&Nn.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const So=u.getNode(),fs=So.previousSibling;if(So.nodeName==="HR"){c.remove(So),Nn.preventDefault();return}fs&&fs.nodeName&&fs.nodeName.toLowerCase()==="hr"&&(c.remove(fs),Nn.preventDefault())}}})},qe=()=>{Range.prototype.getClientRects||e.on("mousedown",Nn=>{if(!oe(Nn)&&Nn.target.nodeName==="HTML"){const So=e.getBody();So.blur(),Xu.setEditorTimeout(e,()=>{So.focus()})}})},Ze=()=>{const Nn=sw(e);e.on("click",So=>{const fs=So.target;/^(IMG|HR)$/.test(fs.nodeName)&&c.isEditable(fs)&&(So.preventDefault(),e.selection.select(fs),e.nodeChanged()),fs.nodeName==="A"&&c.hasClass(fs,Nn)&&fs.childNodes.length===0&&c.isEditable(fs.parentNode)&&(So.preventDefault(),u.select(fs))})},bt=()=>{const Nn=()=>{const fs=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Pn=u.getStart();Pn!==e.getBody()&&(c.setAttrib(Pn,"style",null),n(fs,gs=>{Pn.setAttributeNode(gs.cloneNode(!0))}))}},So=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",fs=>{let Pn;return!oe(fs)&&(fs.keyCode===8||fs.keyCode===46)&&So()?(Pn=Nn(),e.getDoc().execCommand("delete",!1),Pn(),fs.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",fs=>{if(!oe(fs)&&So()){const Pn=Nn();Xu.setEditorTimeout(e,()=>{Pn()})}})},Jt=()=>{e.on("keydown",Nn=>{if(!oe(Nn)&&Nn.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const So=u.getNode().previousSibling;if(So&&So.nodeName&&So.nodeName.toLowerCase()==="table")return Nn.preventDefault(),!1}return!0})},yn=()=>{e.on("keydown",Nn=>{if(oe(Nn)||Nn.keyCode!==mn.BACKSPACE)return;let So=u.getRng();const fs=So.startContainer,Pn=So.startOffset,gs=c.getRoot();let ws=fs;if(!(!So.collapsed||Pn!==0)){for(;ws.parentNode&&ws.parentNode.firstChild===ws&&ws.parentNode!==gs;)ws=ws.parentNode;ws.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ws),So=c.createRng(),So.setStart(fs,0),So.setEnd(fs,0),u.setRng(So))}})},In=()=>{const Nn=()=>{U("StyleWithCSS",!1),U("enableInlineTableEditing",!1),Pl(e)||U("enableObjectResizing",!1)};Kx(e)||e.on("BeforeExecCommand mousedown",Nn)},Pt=()=>{const Nn=()=>{n(c.select("a:not([data-mce-block])"),So=>{var fs;let Pn=So.parentNode;const gs=c.getRoot();if((Pn==null?void 0:Pn.lastChild)===So){for(;Pn&&!c.isBlock(Pn);){if(((fs=Pn.parentNode)===null||fs===void 0?void 0:fs.lastChild)!==Pn||Pn===gs)return;Pn=Pn.parentNode}c.add(Pn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",So=>{(So.type==="setcontent"||So.command==="mceInsertLink")&&Nn()})},At=()=>{e.on("init",()=>{U("DefaultParagraphSeparator",Kc(e))})},Kt=Nn=>{const So=Nn.getBody(),fs=Nn.selection.getRng();return fs.startContainer===fs.endContainer&&fs.startContainer===So&&fs.startOffset===0&&fs.endOffset===So.childNodes.length},qn=()=>{e.on("keyup focusin mouseup",Nn=>{!mn.modifierPressed(Nn)&&!Kt(e)&&u.normalize()},!0)},uo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ps=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Cs=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Nn=>{let So;Nn.target.nodeName==="HTML"&&(So=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(So),e.selection.normalize(),e.nodeChanged())}))},Xs=()=>{H&&e.on("keydown",Nn=>{mn.metaKeyPressed(Nn)&&!Nn.shiftKey&&(Nn.keyCode===37||Nn.keyCode===39)&&(Nn.preventDefault(),e.selection.getSel().modify("move",Nn.keyCode===37?"backward":"forward","lineboundary"))})},fr=()=>{e.on("click",Nn=>{let So=Nn.target;do if(So.tagName==="A"){Nn.preventDefault();return}while(So=So.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Oa=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Nn=>{Nn.preventDefault()})})},dc=()=>{f.addNodeFilter("br",Nn=>{let So=Nn.length;for(;So--;)Nn[So].attr("class")==="Apple-interchange-newline"&&Nn[So].remove()})},Cr=je,En=()=>{if(!w||e.removed)return!1;const Nn=e.selection.getSel();return!Nn||!Nn.rangeCount||Nn.rangeCount===0},co=()=>{_&&(be(),Ze(),Oa(),ce(),P&&(ps(),Cs(),fr())),w&&(qe(),In(),uo(),Xs())},Us=()=>{yn(),ge(),Ie.windowsPhone||qn(),_&&(be(),Ze(),At(),Oa(),Jt(),dc(),P?(ps(),Cs(),fr()):ce()),w&&(Me(),qe(),bt(),In(),Pt(),uo(),Xs(),Jt())};return Eg(e)?co():Us(),{refreshContentEditable:Cr,isHidden:En}},Cj=e=>e.toLowerCase()==="gpl",wj=e=>e.length>=64&&e.length<=255,x6=e=>Cj(e)||wj(e)?"VALID":"INVALID",NS=e=>{const n=lE(e);!ie(uE(e))&&(On(n)||x6(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},BR=jr.DOM,E6=(e,n)=>{const o=Fe.fromDom(e.getBody()),r=Wm(ul(o)),c=Fe.fromTag("style");or(c,"type","text/css"),na(c,Fe.fromText(n)),na(r,c),e.on("remove",()=>{mr(c)})},Sj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,MR=e=>ys(e,n=>On(n)===!1),T6=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return MR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Sj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:ev(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},A6=e=>{const n=e.options.get;return MR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},k6=e=>{const n=e.options.get;return{...T6(e),...A6(e),...MR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},xj=e=>{const n=ry(T6(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const v=o[f];let w=v.attr(r);if(w&&!v.attr(u)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;r==="style"?(w=c.serializeStyle(c.parseStyle(w),v.name),w.length||(w=null),v.attr(u,w),v.attr(r,w)):r==="tabindex"?(v.attr(u,w),v.attr(r,null)):v.attr(u,e.convertURL(w,r,v.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),J0(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Al("br",1))}}),n},_6=e=>{const n=Xx(e);n&&Xu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Ej=e=>{const n=e.dom.getRoot();!e.inline&&(!Mp(e)||e.selection.getStart(!0)===n)&&Jc(n).each(o=>{const r=o.getNode(),c=iu(r)?Jc(r).getOr(o):o;e.selection.setRng(c.toRange())})},Tj=e=>{e.bindPendingEventDelegates(),e.initialized=!0,q_(e),e.focus(!0),Ej(e),e.nodeChanged({initial:!0});const n=y_(e);we(n)&&n.call(e,e),_6(e)},PR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Aj=(e,n,o)=>{const{pass:r,fail:c}=He(n,v=>tinymce.Resource.has(I2(v))),f=[...r.map(v=>{const w=tinymce.Resource.get(I2(v));return ie(w)?Promise.resolve(PR(e).loadRawCss(v,w)):Promise.resolve()}),PR(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},D6=e=>{const n=PR(e),o=ol(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let w="";Qt.each(e.contentStyles,_=>{w+=_+`\r
`}),e.dom.addStyle(w)}const f=Promise.all(Aj(e,r,o)).then(u).catch(u),v=f_(e);return v&&E6(e,v),f},kj=e=>{const n=e.getDoc(),o=e.getBody();Bv(e),aw(e)||(n.body.spellcheck=!1,BR.setAttrib(o,"spellcheck","false")),e.quirks=S6(e),LE(e);const r=FF(e);r!==void 0&&(o.dir=r);const c=cw(e);c&&e.on("BeforeSetContent",u=>{Qt.each(c,f=>{u.content=u.content.replace(f,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},_j=e=>{Eg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},$R=e=>{e.removed!==!0&&(_j(e),Tj(e))},Dj=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},IR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(BR.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Kx(e),e._editableRoot=b_(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&BR.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=p4(e),e.schema=mm(A6(e)),e.dom=jr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Ux(e),referrerPolicy:V0(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=xj(e),e.serializer=mi(k6(e),e),e.selection=X9(e.dom,e.getWin(),e.serializer,e),e.annotator=Ov(e),e.formatter=wf(e),e.undoManager=fy(e),e._nodeChangeDispatcher=new aI(e),e._selectionOverrides=XZ(e),eV(e),LI(e),aV(e),Eg(e)||(WI(e),yj(e));const c=VA(e);w5(e,c),cO(e),WH(e),bZ(e);const u=F9(e);kj(e),NS(e),u.fold(()=>{const f=Dj(e);D6(e).then(()=>{$R(e),f()})},f=>{e.setProgressState(!0),D6(e).then(()=>{f().then(v=>{e.setProgressState(!1),$R(e),a4(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),$R(e),a4(e)})})})},LR=dt,O6=(e,n,o)=>A(e,n,LR,o),rk=jr.DOM,Oj=(e,n,o,r)=>{const c=Fe.fromTag("iframe");return r.each(u=>or(c,"tabindex",u)),Sc(c,o),Sc(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Dl(c,"tox-edit-area__iframe"),c},Rj=e=>{let n=c_(e)+"<html><head>";Lc(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=i_(e),r=lg(e),c=e.translate(rw(e));return QC(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+QC(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},Fj=(e,n)=>{const o=Ie.browser.isFirefox()?rw(e):"Rich Text Area",r=e.translate(o),c=Kr(Fe.fromDom(e.getElement()),"tabindex").bind(aa),u=Oj(e.id,r,Ix(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=Rj(e),rk.add(n.iframeContainer,u)},R6=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,IR(e)};if(NF(e)||Ie.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=O6(Fe.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},F6=(e,n)=>{Fj(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=rk.isHidden(n.editorContainer)),e.getElement().style.display="none",rk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,R6(e)},N6=jr.DOM,Nj=(e,n,o)=>{const r=ly.get(o),c=ly.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Qt.trim(o),r&&Qt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,we(u.init)&&(u.init(e,c),n.push(o))}catch(u){kH(e,o,u)}}},HR=e=>e.replace(/^\-/,""),ak=e=>{const n=[];L(q0(e),o=>{Nj(e,n,HR(o))})},ck=e=>{const n=Qt.trim(cc(e)),o=e.ui.registry.getAll().icons,r={...sA.get("default").icons,...sA.get(n).icons};on(r,(c,u)=>{Qn(o,u)||e.ui.registry.addIcon(u,c)})},Gh=e=>{const n=mg(e);if(ie(n)){const o=Qp.get(n);e.theme=o(e,Qp.urls[n])||{},we(e.theme.init)&&e.theme.init(e,Qp.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},ik=e=>{const n=Z0(e),o=iy.get(n);e.model=o(e,iy.urls[n])},Fy=e=>{const n=e.theme.renderUI;return n?n():zR(e)},B6=e=>{const n=e.getElement(),r=mg(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},M6=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Bj=e=>{const n=N6.create("div");return N6.insertAfter(n,e),M6(n,n)},zR=e=>{const n=e.getElement();return e.inline?M6(null):Bj(n)},Mj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ie(mg(e))?Fy(e):we(mg(e))?B6(e):zR(e)},VR=(e,n)=>{const o={show:V.from(n.show).getOr(je),hide:V.from(n.hide).getOr(je),isEnabled:V.from(n.isEnabled).getOr(dt),setEnabled:r=>{e.mode.isReadOnly()||V.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},lk=async e=>{e.dispatch("ScriptsLoaded"),ck(e),Gh(e),ik(e),ak(e);const n=await Mj(e);VR(e,V.from(n.api).getOr({})),e.editorContainer=n.editorContainer,ar(e),e.inline?IR(e):F6(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},cd=jr.DOM,h1=e=>e.charAt(0)==="-",P6=(e,n)=>{const o=dg(n),r=U0(n);if(!Ac.hasCode(o)&&o!=="en"){const c=fo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{EH(n,c,o)})}},Pj=(e,n)=>{const o=mg(e);if(ie(o)&&!h1(o)&&!Qn(Qp.urls,o)){const r=ew(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Qp.load(o,c).catch(()=>{TH(e,c,o)})}},$j=(e,n)=>{const o=Z0(e);if(o!=="plugin"&&!Qn(iy.urls,o)){const r=Zx(e),c=ie(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;iy.load(o,c).catch(()=>{AH(e,c,o)})}},Ij=e=>V.from(ic(e)).filter(fo).map(n=>({url:n,name:V.none()})),$6=(e,n,o)=>V.from(n).filter(r=>fo(r)&&!sA.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:V.some(r)})),Lj=(e,n,o)=>{const r=$6(n,"default",o),c=Ij(n).orThunk(()=>$6(n,cc(n),""));L(gc([r,c]),u=>{e.add(u.url).catch(()=>{bP(n,u.url,u.name.getOrUndefined())})})},Hj=(e,n)=>{const o=(r,c)=>{ly.load(r,c).catch(()=>{xH(e,c,r)})};on(v_(e),(r,c)=>{o(c,r),e.options.set("plugins",q0(e).concat(c))}),L(q0(e),r=>{r=Qt.trim(r),r&&!ly.urls[r]&&!h1(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},I6=e=>{const n=mg(e);return!ie(n)||rt(Qp.get(n))},zj=e=>{const n=Z0(e);return rt(iy.get(n))},Vj=(e,n)=>{const o=_d.ScriptLoader,r=()=>{!e.removed&&I6(e)&&zj(e)&&lk(e)};Pj(e,n),$j(e,n),P6(o,e),Lj(o,e,n),Hj(e,n),o.loadQueue().then(r,r)},Uj=(e,n)=>Tr.forElement(e,{contentCssCors:nw(n),referrerPolicy:V0(n)}),vY=e=>{const n=e.id;Ac.setCode(dg(e));const o=()=>{cd.unbind(window,"ready",o),e.render()};if(!Gf.Event.domLoaded){cd.bind(window,"ready",o);return}if(!e.getElement())return;const r=Fe.fromDom(e.getElement()),c=ku(r);e.on("remove",()=>{ye(r.dom.attributes,f=>br(r,f.name)),Sc(r,c)}),e.ui.styleSheetLoader=Uj(r,e),j1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||cd.getParent(n,"form");u&&(e.formElement=u,g_(e)&&!oa(e.getElement())&&(cd.insertAfter(cd.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},cd.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),j0(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=hP(e),e.notificationManager=gP(e),fg(e)&&e.on("GetContent",f=>{f.save&&(f.content=cd.encode(f.content))}),h_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),qx(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Vj(e,e.suffix)},Wj=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),WE(e,n))},UR=e=>e._editableRoot,Zj=(e,n)=>({sections:ve(e),options:ve(n)}),L6=dn().deviceType,WR=L6.isPhone(),jj=L6.isTablet(),Ny=e=>{if(gn(e))return[];{const n=vt(e)?e:e.split(/[ ,]/),o=le(n,Ls);return ke(o,fo)}},Gj=(e,n)=>{const o=_r(n,(r,c)=>I(e,c));return Zj(o.t,o.f)},ZR=(e,n,o={})=>{const r=e.sections(),c=bs(r,n).getOr({});return Qt.extend({},o,c)},jR=(e,n)=>Qn(e.sections(),n),qj=(e,n)=>jR(e,n)?e.sections()[n]:{},Kj=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:bs(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Yj=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Qt.extend({},e.external_plugins,r):r},H6=(e,n)=>[...Ny(e),...Ny(n)],GR=(e,n,o,r)=>e&&jR(n,"mobile")?r:o,z6=(e,n,o,r)=>{const c=Ny(o.forced_plugins),u=Ny(r.plugins),f=qj(n,"mobile"),v=f.plugins?Ny(f.plugins):u,w=GR(e,n,u,v),_=H6(c,w);return Qt.extend(r,{forced_plugins:c,plugins:_})},qR=(e,n)=>e&&jR(n,"mobile"),Xj=(e,n,o,r,c)=>{var u;const f=e?{mobile:Kj((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},v=Gj(["mobile"],xu(f,c)),w=Qt.extend(o,r,v.options(),qR(e,v)?ZR(v,"mobile"):{},{external_plugins:Yj(r,v.options())});return z6(e,v,r,w)},yY=(e,n)=>{const o=wy(n);return Xj(WR||jj,WR,o,e,o)},CY=(e,n)=>V9(e,n),Jj=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{L("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},V6=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return G(c,u=>rt(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Qj=e=>{Jj(e),V6(e)},eG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ie.os.isMacOS()||Ie.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},tG=(e,n,o,r)=>{const c=Fe.fromDom(e.getRoot());return e2(c,Mt.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),jv(c,Mt.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},wY=e=>{if(typeof e!="string"){const n=Qt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},SY=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?tG(r,o.getRng(),n,e.schema):n},BS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=wY(n);jT(e,{...r,content:SY(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=H9(e,c.content,r);LD(e,u,c),e.addVisual()})}},U6=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{BS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{BS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{BS(e,r)},mceInsertContent:(n,o,r)=>{BS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(tE(e))}})},nG={"font-size":"size","font-family":"face"},oG=ia("font"),sG=(e,n,o)=>{const r=u=>vc(u,e).orThunk(()=>oG(u)?bs(nG,e).bind(f=>Kr(u,f)):V.none()),c=u=>os(Fe.fromDom(n),u);return p2(Fe.fromDom(o),u=>r(u),c)},xY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),EY=(e,n)=>V.from(jr.DOM.getStyle(n,e,!0)),rG=e=>(n,o)=>V.from(o).map(Fe.fromDom).filter(Bs).bind(r=>sG(e,n,r.dom).or(EY(e,r.dom))).getOr(""),aG=rG("font-size"),TY=T(xY,rG("font-family")),cG=e=>Jc(e.getBody()).bind(n=>{const o=n.container();return V.from(un(o)?o.parentNode:o)}),Zb=e=>V.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?V.none():V.from(e.selection.getStart(!0))}),KR=(e,n)=>Zb(e).orThunk(_e(cG,e)).map(Fe.fromDom).filter(Bs).bind(n),By=(e,n)=>KR(e,it(V.some,n)),YR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=lw(e),c=x_(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},W6=e=>{const n=e.split(/\s*,\s*/);return le(n,o=>o.indexOf(" ")!==-1&&!(bo(o,'"')||bo(o,"'"))?`'${o}'`:o).join(",")},Z6=(e,n)=>{const o=YR(e,n);e.formatter.toggle("fontname",{value:W6(o)}),e.nodeChanged()},iG=e=>By(e,n=>TY(e.getBody(),n.dom)).getOr(""),lG=(e,n)=>{e.formatter.toggle("fontsize",{value:YR(e,n)}),e.nodeChanged()},uG=e=>By(e,n=>aG(e.getBody(),n.dom)).getOr(""),dG=e=>By(e,n=>{const o=Fe.fromDom(e.getBody()),r=p2(n,u=>vc(u,"line-height"),_e(os,o)),c=()=>{const u=parseFloat(Ma(n,"line-height")),f=parseFloat(Ma(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),mG=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},fG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Z6(e,c)},FontSize:(o,r,c)=>{lG(e,c)},LineHeight:(o,r,c)=>{mG(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ie(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},p1=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>iG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>uG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>dG(e))},gG=e=>{fG(e),p1(e)},j6=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},hG=e=>{e.editorCommands.addCommands({Indent:()=>{c1(e)},Outdent:()=>{sO(e)}}),e.editorCommands.addCommands({Outdent:()=>a1(e)},"state")},uk=e=>{const n=(o,r,c)=>{const u=ie(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");St(u)&&ie(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},pG=(e,n,o,r)=>{const c=e.dom,u=v=>c.isBlock(v)&&v.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return V.from(f).map(Fe.fromDom)},G6=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=vS(o,u);if(!f||!f.isContentEditable)return;const v=n?Pc:yi,w=Kc(e);pG(e,c,f,u).each(_=>{const P=D$(e,u,_.dom,f,!1,w);v(_,Fe.fromDom(P)),e.selection.setCursorLocation(P,0),e.dispatch("NewBlock",{newBlock:P}),zb(e,"insertParagraph")})},bG=e=>G6(e,!0),q6=e=>G6(e,!1),vG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{bG(e)},InsertNewBlockAfter:()=>{q6(e)}})},yG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Ey(I$,e)},mceInsertNewLine:(n,o,r)=>{G$(e,r)},InsertLineBreak:(n,o,r)=>{Ey(H$,e)}})},CG=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Mn(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Zt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},wG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{aL(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},XR=e=>{Qj(e),eG(e),j6(e),CG(e),U6(e),uk(e),hG(e),vG(e),yG(e),gG(e),wG(e)},SG=["toggleview"],K6=e=>I(SG,e.toLowerCase());class Cc{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),v=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!v?u.focus():ZF(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const _=this.commands.exec[f];return we(_)?(_(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!K6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return we(r)?r(o):!1}queryCommandValue(n){if(!K6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return we(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;on(n,(c,u)=>{L(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,v)=>o.call(r??this.editor,f,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const jb="data-mce-contenteditable",xG=(e,n,o)=>{tu(e,n)&&!o?Ou(e,n):o&&Dl(e,n)},MS=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},PS=(e,n)=>{e.dom.contentEditable=n?"true":"false"},JR=e=>{L($c(e,'*[contenteditable="true"]'),n=>{or(n,jb,"true"),PS(n,!1)})},EG=e=>{L($c(e,`*[${jb}="true"]`),n=>{br(n,jb),PS(n,!0)})},TG=e=>{V.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},AG=e=>{e.selection.setRng(e.selection.getRng())},kG=(e,n)=>{const o=Fe.fromDom(e.getBody());xG(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),TG(e),e.readonly=!0,PS(o,!1),JR(o)):(e.readonly=!1,e.hasEditableRoot()&&PS(o,!0),EG(o),MS(e,"StyleWithCSS",!1),MS(e,"enableInlineTableEditing",!1),MS(e,"enableObjectResizing",!1),sN(e)&&e.focus(),AG(e),e.nodeChanged())},Gb=e=>e.readonly,Y6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Gb(e)&&L(n,o=>{o.attr(jb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(jb,n=>{Gb(e)&&L(n,o=>{o.attr("contenteditable",o.attr(jb))})}),e.serializer.addTempAttr(jb)},_G=e=>{e.serializer?Y6(e):e.on("PreInit",()=>{Y6(e)})},DG=e=>e.type==="click",My=["copy"],Tf=e=>I(My,e.type),OG=(e,n)=>ru(n,"a",r=>os(r,Fe.fromDom(e.getBody()))).bind(r=>Kr(r,"href")),RG=(e,n)=>{if(DG(n)&&!mn.metaKeyPressed(n)){const o=Fe.fromDom(n.target);OG(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${zn(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Tf(n)&&e.dispatch(n.type,n)},FG=e=>{e.on("ShowCaret",n=>{Gb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Gb(e)&&n.preventDefault()})},NG=Qt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class QR{static isNative(n){return!!NG[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ne}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=fC(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,v=u.length;f<v;f++){const w=u[f];if(!w.removed){if(w.once&&this.off(r,w.func),c.isImmediatePropagationStopped())return c;if(w.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ne),o){const u={func:o,removed:!1};c&&Qt.extend(u,c);const f=n.toLowerCase().split(" ");let v=f.length;for(;v--;){const w=f[v];let _=this.bindings[w];_||(_=[],this.toggleEvent(w,!0)),r?_=[u,..._]:_=[..._,u],this.bindings[w]=_}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return on(this.bindings,(v,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(f){if(!o)f.length=0;else{const v=He(f,w=>w.func===o);f=v.fail,this.bindings[u]=f,L(v.pass,w=>{w.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else on(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const $S=e=>(e._eventDispatcher||(e._eventDispatcher=new QR({scope:e,toggleEvent:(n,o)=>{QR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),eF={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return fC(e.toLowerCase(),n??{},r);const c=$S(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return $S(this).on(e,n,o)},off(e,n){return $S(this).off(e,n)},once(e,n){return $S(this).once(e,n)},hasEventListeners(e){return $S(this).has(e)}},dk=jr.DOM;let qb;const tF=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Rd(e);return o?(e.eventRoot||(e.eventRoot=dk.select(o)[0]),e.eventRoot):e.getBody()},BG=e=>!e.hidden&&!Gb(e),X6=(e,n,o)=>{BG(e)?e.dispatch(n,o):Gb(e)&&RG(e,o)},J6=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=tF(e,n);if(Rd(e)){if(qb||(qb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||qb&&(on(qb,(c,u)=>{e.dom.unbind(tF(e,u))}),qb=null)})),qb[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let v=f.length;for(;v--;){const w=f[v].getBody();(w===u||dk.isChildOf(u,w))&&X6(f[v],n,c)}};qb[n]=r,dk.bind(o,n,r)}else{const r=c=>{X6(e,n,c)};dk.bind(o,n,r),e.delegates[n]=r}},Q6={...eF,bindPendingEventDelegates(){const e=this;Qt.each(e._pendingNativeEvents,n=>{J6(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?J6(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(tF(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(on(e.delegates,(r,c)=>{e.dom.unbind(tF(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},MG=e=>ie(e)?{value:e.split(/[ ,]/),valid:!0}:Ve(e,ie)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},PG=e=>{const n=(()=>{switch(e){case"array":return vt;case"boolean":return Yt;case"function":return we;case"number":return Ro;case"object":return St;case"string":return ie;case"string[]":return MG;case"object[]":return o=>Ve(o,St);case"regexp":return o=>Qe(o,RegExp);default:return dt}})();return o=>nF(o,n,`The value must be a ${e}.`)},AY=e=>ie(e.processor),e8=(e,n)=>{const o=is(n.message)?"":`. ${n.message}`;return e+o},t8=e=>e.valid,nF=(e,n,o="")=>{const r=n(e);return Yt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},$G=(e,n,o)=>{if(!On(n)){const r=nF(n,o);if(t8(r))return r.value;console.error(e8(`Invalid default value passed for the "${e}" option`,r))}},IG=(e,n,o=n)=>{const r={},c={},u=(oe,ge,ce)=>{const be=nF(ge,ce);return t8(be)?(c[oe]=be.value,!0):(console.warn(e8(`Invalid value passed for the ${oe} option`,be)),!1)},f=(oe,ge)=>{const ce=AY(ge)?PG(ge.processor):ge.processor,be=$G(oe,ge.default,ce);r[oe]={...ge,default:be,processor:ce},bs(c,oe).orThunk(()=>bs(n,oe)).each(qe=>u(oe,qe,ce))},v=oe=>Qn(r,oe);return{register:f,isRegistered:v,get:oe=>bs(c,oe).orThunk(()=>bs(r,oe).map(ge=>ge.default)).getOrUndefined(),set:(oe,ge)=>{if(v(oe)){const ce=r[oe];return ce.immutable?(console.error(`"${oe}" is an immutable option and cannot be updated`),!1):u(oe,ge,ce.processor)}else return console.warn(`"${oe}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:oe=>{const ge=v(oe);return ge&&delete c[oe],ge},isSet:oe=>Qn(c,oe),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(oe,ge)=>Yt(ge)||Ro(ge)||ie(ge)||J(ge)||vt(ge)||Wn(ge)?ge:Object.prototype.toString.call(ge))))}catch(oe){console.error(oe)}}}},LG=["design","readonly"],n8=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&kG(e,u.editorReadOnly),n.set(r),Z_(e,r)},HG=(e,n,o,r)=>{if(r!==o.get()){if(!Qn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?n8(e,o,n,r):e.on("init",()=>n8(e,o,n,r))}},zG=(e,n,o)=>{if(I(LG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},VG=e=>{const n=et("design"),o=et({design:{activate:je,deactivate:je,editorReadOnly:!1},readonly:{activate:je,deactivate:je,editorReadOnly:!0}});return _G(e),FG(e),{isReadOnly:()=>Gb(e),set:r=>HG(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(zG(o.get(),r,c))}}},oF=Qt.each,sF=Qt.explode,UG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},o8=Qt.makeMap("alt,ctrl,shift,meta,access"),WG=e=>e in o8,ZG=e=>{const n={},o=Ie.os.isMacOS()||Ie.os.isiOS();oF(sF(e.toLowerCase(),"+"),u=>{WG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=UG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in o8)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class rF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(oF(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return oF(sF(Qt.trim(n)),v=>{const w=u.createShortcut(v,o,f,c);u.shortcuts[w.id]=w}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Qt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Qt.map(sF(n,">"),ZG);return u[u.length-1]=Qt.extend(u[u.length-1],{func:r,scope:c||this.editor}),Qt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const jG=()=>{const e={},n={},o={},r={},c={},u={},f={},v={},w=(P,H)=>(U,oe)=>{P[U.toLowerCase()]={...oe,type:H}},_=(P,H)=>r[P.toLowerCase()]=H;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(n,"menuitem"),addNestedMenuItem:w(n,"nestedmenuitem"),addToggleMenuItem:w(n,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(c,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:w(u,"contextform"),addSidebar:w(f,"sidebar"),addView:w(v,"views"),addIcon:_,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:v})}},GG=()=>{const e=jG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Kb=jr.DOM,s8=Qt.extend,qG=Qt.each;class mk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,s8(this,Q6);const c=this;this.id=n,this.hidden=!1;const u=yY(r.defaultOptions,o);this.options=IG(c,u,o),$x(c);const f=this.options.get;f("deprecation_warnings")&&dH(o,u);const v=f("suffix");v&&(r.suffix=v),this.suffix=r.suffix;const w=f("base_url");w&&r._setBaseUrl(w),this.baseUri=r.baseURI;const _=V0(c);_&&(_d.ScriptLoader._setReferrerPolicy(_),jr.DOM.styleSheetLoader._setReferrerPolicy(_));const P=nw(c);rt(P)&&jr.DOM.styleSheetLoader._setContentCssCors(P),Ri.languageLoad=f("language_load"),Ri.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Hi(Lc(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=j1(c),this.hasVisual=$i(c),this.shortcuts=new rF(this),this.editorCommands=new Cc(this),XR(this);const H=f("cache_suffix");H&&(Ie.cacheSuffix=H.replace(/^[\?\&]+/,"")),this.ui={registry:GG(),styleSheetLoader:void 0,show:je,hide:je,setEnabled:je,isEnabled:dt},this.mode=VG(c),r.dispatch("SetupEditor",{editor:this});const U=K0(c);we(U)&&U.call(c,c)}render(){vY(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Bh(this)}translate(n){return Ac.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(rt(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:dt,default:o})),!c.isSet(n)&&!On(o)?o:c.get(n)}hasPlugin(n,o){return I(q0(this),n)?o?ly.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Kb.show(n.getContainer()),Kb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Kb.hide(n.getContainer()),Kb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=oa(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,oa(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const v=Kb.getParent(o.id,"form");v&&qG(v.elements,w=>w.name===o.id?(w.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return cy(this,n,o)}getContent(n){return iP(this,n)}insertContent(n,o){o&&(n=s8({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?cy(this,this.startContent,{format:"raw"}):cy(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Kb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Kb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Y0(c);if(we(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||St(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const v=new Hi(n);return v.protocol!=="http"&&v.protocol!=="https"&&v.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){CY(this,n)}setEditableRoot(n){Wj(this,n)}hasEditableRoot(){return UR(this)}remove(){gH(this)}destroy(n){hH(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Py=jr.DOM,fk=Qt.each;let aF=!1,gk,Gl=[];const hk=e=>{const n=e.type;fk(b1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},r8=e=>{if(e!==aF){const n=jr.DOM;e?(n.bind(window,"resize",hk),n.bind(window,"scroll",hk)):(n.unbind(window,"resize",hk),n.unbind(window,"scroll",hk)),aF=e}},a8=e=>{const n=Gl;return Gl=ke(Gl,o=>e!==o),b1.activeEditor===e&&(b1.activeEditor=Gl.length>0?Gl[0]:null),b1.focusedEditor===e&&(b1.focusedEditor=null),n.length!==Gl.length},KG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(a8(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},YG=document.compatMode!=="CSS1Compat",b1={...eF,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:Ac,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Hi.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const v=u[f].src||"";if(v==="")continue;const w=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){w.indexOf(".min")!==-1&&(o=".min"),n=v.substring(0,v.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Hi(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Hi(e.baseURL),e.suffix=o,JF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&on(r,(c,u)=>{Ri.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Qt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(P,H)=>P.inline&&H.tagName.toLowerCase()in r,u=P=>{let H=P.id;return H||(H=bs(P,"name").filter(U=>!Py.get(U)).getOrThunk(Py.uniqueId),P.setAttribute("id",H)),H},f=P=>{const H=e[P];if(H)return H.apply(n,[])},v=P=>Ie.browser.isIE()||Ie.browser.isEdge()?(g4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):YG?(g4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ie(P.selector)?Py.select(P.selector):rt(P.target)?[P.target]:[];let w=P=>{o=P};const _=()=>{let P=0;const H=[];let U;const oe=(ge,ce,be)=>{const Me=new mk(ge,ce,n);H.push(Me),Me.on("init",()=>{++P===U.length&&w(H)}),Me.targetElm=Me.targetElm||be,Me.render()};Py.unbind(window,"ready",_),f("onpageload"),U=ir(v(e)),Qt.each(U,ge=>{KG(n.get(ge.id))}),U=Qt.grep(U,ge=>!n.get(ge.id)),U.length===0?w([]):fk(U,ge=>{c(e,ge)?g4("Could not initialize inline editor on invalid inline target element",ge):oe(u(ge),e,ge)})};return Py.bind(window,"ready",_),new Promise(P=>{o?P(o):w=H=>{P(H)}})},get(e){return arguments.length===0?Gl.slice(0):ie(e)?Wt(Gl,n=>n.id===e).getOr(null):Ro(e)&&Gl[e]?Gl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Gl.push(e),r8(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),gk||(gk=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",gk))),e},createEditor(e,n){return this.add(new mk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Gl.length-1;r>=0;r--)n.remove(Gl[r]);return}if(ie(e)){fk(Py.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,J(n.get(o.id))?null:(a8(o)&&n.dispatch("RemoveEditor",{editor:o}),Gl.length===0&&window.removeEventListener("beforeunload",gk),o.remove(),r8(Gl.length>0),o)},execCommand(e,n,o){var r;const c=this,u=St(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new mk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{fk(Gl,e=>{e.save()})},addI18n:(e,n)=>{Ac.add(e,n)},translate:e=>Ac.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Hi(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Hi(this.baseURL)}};b1.setup();const kY=(()=>{const e=qc(),n=u=>({items:u,types:xo(u),getType:f=>bs(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),cF=Math.min,$y=Math.max,IS=Math.round,c8=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,v=n.w,w=n.h,_=(o||"").split("");return _[0]==="b"&&(c+=w),_[1]==="r"&&(r+=v),_[0]==="c"&&(c+=IS(w/2)),_[1]==="c"&&(r+=IS(v/2)),_[3]==="b"&&(c-=f),_[4]==="r"&&(r-=u),_[3]==="c"&&(c-=IS(f/2)),_[4]==="c"&&(r-=IS(u/2)),Iy(r,c,u,f)},JG=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=c8(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},QG=(e,n,o)=>Iy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),eq=(e,n)=>{const o=$y(e.x,n.x),r=$y(e.y,n.y),c=cF(e.x+e.w,n.x+n.w),u=cF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Iy(o,r,c-o,u-r)},tq=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const v=n.x+n.w,w=n.y+n.h,_=$y(0,n.x-r),P=$y(0,n.y-c),H=$y(0,u-v),U=$y(0,f-w);return r+=_,c+=P,o&&(u+=_,f+=P,r-=H,c-=U),u-=H,f-=U,Iy(r,c,u-r,f-c)},Iy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),iF={inflate:QG,relativePosition:c8,findBestRelativePosition:JG,intersect:eq,clamp:tq,create:Iy,fromClientRect:e=>Iy(e.left,e.top,e.width,e.height)},nq=(e,n,o=1e3)=>{let r=!1,c=null;const u=_=>(...P)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),_.apply(null,P))},f=u(e),v=u(n);return{start:(..._)=>{!r&&c===null&&(c=setTimeout(()=>v.apply(null,_),o))},resolve:f,reject:v}},sq=(()=>{const e={},n={},o={};return{load:(w,_)=>{const P=`Script at URL "${_}" failed to load`,H=`Script at URL "${_}" did not call \`tinymce.Resource.add('${w}', data)\` within 1 second`;if(e[w]!==void 0)return e[w];{const U=new Promise((oe,ge)=>{const ce=nq(oe,ge);n[w]=ce.resolve,_d.ScriptLoader.loadScript(_).then(()=>ce.start(H),()=>ce.reject(P))});return e[w]=U,U}},add:(w,_)=>{n[w]!==void 0&&(n[w](_),delete n[w]),e[w]=Promise.resolve(_),o[w]=_},has:w=>w in o,get:w=>o[w],unload:w=>{delete e[w],delete o[w]}}})(),rq=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let LS;try{const e="__storage_test__";LS=window.localStorage,LS.setItem(e,e),LS.removeItem(e)}catch{LS=rq()}var aq=LS;const cq={geom:{Rect:iF},util:{Delay:Xu,Tools:Qt,VK:mn,URI:Hi,EventDispatcher:QR,Observable:eF,I18n:Ac,LocalStorage:aq,ImageUploader:Tg},dom:{EventUtils:Gf,TreeWalker:Ec,TextSeeker:dh,DOMUtils:jr,ScriptLoader:_d,RangeUtils:bn,Serializer:mi,StyleSheetLoader:du,ControlSelection:mb,BookmarkManager:qu,Selection:X9,Event:Gf.Event},html:{Styles:dC,Entities:Td,Node:Al,Schema:mm,DomParser:ry,Writer:v3,Serializer:Mh},Env:Ie,AddOnManager:Ri,Annotator:Ov,Formatter:wf,UndoManager:fy,EditorCommands:Cc,WindowManager:hP,NotificationManager:gP,EditorObservable:Q6,Shortcuts:rF,Editor:mk,FocusManager:jF,EditorManager:b1,DOM:jr.DOM,ScriptLoader:_d.ScriptLoader,PluginManager:ly,ThemeManager:Qp,ModelManager:iy,IconManager:sA,Resource:sq,FakeClipboard:kY,trim:Qt.trim,isArray:Qt.isArray,is:Qt.is,toArray:Qt.toArray,makeMap:Qt.makeMap,each:Qt.each,map:Qt.map,grep:Qt.grep,inArray:Qt.inArray,extend:Qt.extend,walk:Qt.walk,resolve:Qt.resolve,explode:Qt.explode,_addCacheSuffix:Qt._addCacheSuffix},l8=Qt.extend(b1,cq),iq=e=>{try{h.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(l8),iq(l8)})()})(LJ);var one=LJ.exports;const HJ=nne(one);function sne(h){h.addI18n("zh_CN",{"#":"#",Accessibility:"辅助功能",Accordion:"","Accordion body...":"","Accordion summary...":"",Action:"动作",Activity:"活动",Address:"地址",Advanced:"高级",Align:"对齐","Align center":"居中对齐","Align left":"左对齐","Align right":"右对齐",Alignment:"对齐","Alignment {0}":"",All:"全部","Alternative description":"替代描述","Alternative source":"镜像","Alternative source URL":"替代来源网址",Anchor:"锚点","Anchor...":"锚点...",Anchors:"锚点","Animals and Nature":"动物和自然",Arrows:"箭头",B:"B","Background color":"背景颜色","Background color {0}":"",Black:"黑色",Block:"块","Block {0}":"",Blockquote:"引文区块",Blocks:"样式",Blue:"蓝色","Blue component":"白色部分",Body:"表体",Bold:"粗体",Border:"框线","Border color":"框线颜色","Border style":"边框样式","Border width":"边框宽度",Bottom:"下方对齐","Browse files":"","Browse for an image":"浏览图像","Browse links":"","Bullet list":"无序列表",Cancel:"取消",Caption:"标题",Cell:"单元格","Cell padding":"单元格内边距","Cell properties":"单元格属性","Cell spacing":"单元格外间距","Cell styles":"单元格样式","Cell type":"储存格别",Center:"居中",Characters:"字符","Characters (no spaces)":"字符(无空格)",Circle:"空心圆",Class:"类型","Clear formatting":"清除格式",Close:"关闭",Code:"代码","Code sample...":"示例代码...","Code view":"代码视图","Color Picker":"选色器","Color swatch":"颜色样本",Cols:"列",Column:"列","Column clipboard actions":"列剪贴板操作","Column group":"列组","Column header":"列标题","Constrain proportions":"保持比例",Copy:"复制","Copy column":"复制列","Copy row":"复制行","Could not find the specified string.":"未找到搜索内容。","Could not load emojis":"无法加载Emojis",Count:"计数",Currency:"货币","Current window":"当前窗口","Custom color":"自定义颜色","Custom...":"自定义......",Cut:"剪切","Cut column":"剪切列","Cut row":"剪切行","Dark Blue":"深蓝色","Dark Gray":"深灰色","Dark Green":"深绿色","Dark Orange":"深橙色","Dark Purple":"深紫色","Dark Red":"深红色","Dark Turquoise":"深蓝绿色","Dark Yellow":"暗黄色",Dashed:"虚线","Date/time":"日期/时间","Decrease indent":"减少缩进",Default:"预设","Delete accordion":"","Delete column":"删除列","Delete row":"删除行","Delete table":"删除表格",Dimensions:"尺寸",Disc:"实心圆",Div:"Div",Document:"文档",Dotted:"虚线",Double:"双精度","Drop an image here":"拖放一张图像至此","Dropped file type is not supported":"此文件类型不支持拖放",Edit:"编辑",Embed:"内嵌",Emojis:"Emojis","Emojis...":"Emojis...",Error:"错误","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。","Extended Latin":"拉丁语扩充","Failed to initialize plugin: {0}":"插件初始化失败: {0}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to upload image: {0}":"图片上传失败: {0}",File:"文件",Find:"寻找","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Find and Replace":"查找和替换","Find and replace...":"查找并替换...","Find in selection":"在选区中查找","Find whole words only":"全字匹配",Flags:"旗帜","Focus to contextual toolbar":"移动焦点到上下文菜单","Focus to element path":"移动焦点到元素路径","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏",Font:"字体","Font size {0}":"","Font sizes":"字体大小","Font {0}":"",Fonts:"字体","Food and Drink":"食物和饮品",Footer:"表尾",Format:"格式","Format {0}":"",Formats:"格式",Fullscreen:"全屏",G:"G",General:"一般",Gray:"灰色",Green:"绿色","Green component":"绿色部分",Groove:"凹槽","Handy Shortcuts":"快捷键",Header:"表头","Header cell":"表头单元格","Heading 1":"一级标题","Heading 2":"二级标题","Heading 3":"三级标题","Heading 4":"四级标题","Heading 5":"五级标题","Heading 6":"六级标题",Headings:"标题",Height:"高度",Help:"帮助","Hex color code":"十六进制颜色代码",Hidden:"隐藏","Horizontal align":"水平对齐","Horizontal line":"水平分割线","Horizontal space":"水平间距",ID:"ID","ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"ID应该以英文字母开头，后面只能有英文字母、数字、破折号、点、冒号或下划线。","Image is decorative":"图像是装饰性的","Image list":"图片清单","Image title":"图片标题","Image...":"图片...","ImageProxy HTTP error: Could not find Image Proxy":"图片代理请求错误：无法找到图片代理","ImageProxy HTTP error: Incorrect Image Proxy URL":"图片代理请求错误：图片代理地址错误","ImageProxy HTTP error: Rejected request":"图片代理请求错误：请求被拒绝","ImageProxy HTTP error: Unknown ImageProxy error":"图片代理请求错误：未知的图片代理错误","Increase indent":"增加缩进",Inline:"文本",Insert:"插入","Insert Template":"插入模板","Insert accordion":"","Insert column after":"在右侧插入列","Insert column before":"在左侧插入列","Insert date/time":"插入日期/时间","Insert image":"插入图片","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Insert row after":"在下方插入行","Insert row before":"在上方插入行","Insert table":"插入表格","Insert template...":"插入模板...","Insert video":"插入视频","Insert/Edit code sample":"插入/编辑代码示例","Insert/edit image":"插入/编辑图片","Insert/edit link":"插入/编辑链接","Insert/edit media":"插入/编辑媒体","Insert/edit video":"插入/编辑视频",Inset:"嵌入","Invalid hex color code: {0}":"十六进制颜色代码无效： {0}","Invalid input":"无效输入",Italic:"斜体",Justify:"两端对齐","Keyboard Navigation":"键盘指引",Language:"语言","Learn more...":"了解更多...",Left:"左","Left to right":"由左到右","Light Blue":"浅蓝色","Light Gray":"浅灰色","Light Green":"浅绿色","Light Purple":"浅紫色","Light Red":"浅红色","Light Yellow":"浅黄色","Line height":"行高","Link list":"链接清单","Link...":"链接...","List Properties":"列表属性","List properties...":"标题字体属性","Loading emojis...":"正在加载Emojis...","Loading...":"加载中...","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马数字","Match case":"大小写匹配",Mathematical:"数学","Media poster (Image URL)":"封面(图片地址)","Media...":"多媒体...","Medium Blue":"中蓝色","Medium Gray":"中灰色","Medium Purple":"中紫色","Merge cells":"合并单元格",Middle:"居中对齐","Midnight Blue":"深蓝色","More...":"更多...",Name:"名称","Navy Blue":"海军蓝","New document":"新建文档","New window":"新窗口",Next:"下一个",No:"否","No alignment":"未对齐","No color":"无","Nonbreaking space":"不间断空格",None:"无","Numbered list":"有序列表",OR:"或",Objects:"物件",Ok:"确定","Open help dialog":"打开帮助对话框","Open link":"打开链接","Open link in...":"链接打开位置...","Open popup menu for split buttons":"打开弹出式菜单，用于拆分按钮",Orange:"橙色",Outset:"外置","Page break":"分页符",Paragraph:"段落",Paste:"粘贴","Paste as text":"粘贴为文本","Paste column after":"粘贴后面的列","Paste column before":"粘贴此列前","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。","Paste or type a link":"粘贴或输入链接","Paste row after":"粘贴行到下方","Paste row before":"粘贴行到上方","Paste your embed code below:":"将内嵌代码粘贴在下面:",People:"人类",Plugins:"插件","Plugins installed ({0}):":"已安装插件 ({0}):","Powered by {0}":"由{0}驱动",Pre:"前言",Preferences:"首选项",Preformatted:"预先格式化的","Premium plugins:":"优秀插件：","Press the Up and Down arrow keys to resize the editor.":"","Press the arrow keys to resize the editor.":"","Press {0} for help":"",Preview:"预览",Previous:"上一个",Print:"打印","Print...":"打印...",Purple:"紫色",Quotations:"引用",R:"R","Range 0 to 255":"范围0至255",Red:"红色","Red component":"红色部分",Redo:"重做",Remove:"移除","Remove color":"移除颜色","Remove link":"移除链接",Replace:"替换","Replace all":"替换全部","Replace with":"替换为",Resize:"调整大小","Restore last draft":"恢复上次的草稿","Reveal or hide additional toolbar items":"","Rich Text Area":"富文本区域","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"编辑区。按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助",Ridge:"海脊座",Right:"右","Right to left":"由右到左",Row:"行","Row clipboard actions":"行剪贴板操作","Row group":"行组","Row header":"行头","Row properties":"行属性","Row type":"行类型",Rows:"行数",Save:"保存","Save (if save plugin activated)":"保存(如果保存插件已激活)",Scope:"范围",Search:"搜索","Select all":"全选","Select...":"选择...",Selection:"选择",Shortcut:"快捷方式","Show blocks":"显示区块边框","Show caption":"显示标题","Show invisible characters":"显示不可见字符",Size:"字号",Solid:"实线",Source:"源","Source code":"源代码","Special Character":"特殊字符","Special character...":"特殊字符...","Split cell":"拆分单元格",Square:"实心方块","Start list at number":"以数字开始列表",Strikethrough:"删除线",Style:"样式",Subscript:"下标",Superscript:"上标","Switch to or from fullscreen mode":"切换全屏模式",Symbols:"符号","System Font":"系统字体",Table:"表格","Table caption":"表格标题","Table properties":"表格属性","Table styles":"表格样式",Template:"模板",Templates:"模板",Text:"文字","Text color":"文本颜色","Text color {0}":"","Text to display":"要显示的文本","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto: 前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http:// 前缀吗？","The URL you entered seems to be an external link. Do you want to add the required https:// prefix?":"您输入的 URL 似乎是一个外部链接。您想添加所需的 https:// 前缀吗？",Title:"标题","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Toggle accordion":"",Tools:"工具",Top:"上方对齐","Travel and Places":"旅游和地点",Turquoise:"青绿色",Underline:"下划线",Undo:"撤销",Upload:"上传","Uploading image":"上传图片","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马数字",Url:"地址","User Defined":"自定义",Valid:"有效",Version:"版本","Vertical align":"垂直对齐","Vertical space":"垂直间距",View:"查看","Visual aids":"网格线",Warn:"警告",White:"白色",Width:"宽度","Word count":"字数",Words:"单词","Words: {0}":"字数：{0}",Yellow:"黄色",Yes:"是","You are using {0}":"你正在使用 {0}","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",alignment:"对齐","austral sign":"澳元符号","cedi sign":"塞地符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","currency sign":"货币符号","dollar sign":"美元符号","dong sign":"越南盾符号","drachma sign":"德拉克马符号","euro-currency sign":"欧元符号",example:"示例",formatting:"格式化","french franc sign":"法郎符号","german penny symbol":"德国便士符号","guarani sign":"瓜拉尼符号",history:"历史","hryvnia sign":"格里夫尼亚符号",indentation:"缩进","indian rupee sign":"印度卢比","kip sign":"老挝基普符号","lira sign":"里拉符号","livre tournois sign":"里弗弗尔符号","manat sign":"马纳特符号","mill sign":"密尔符号","naira sign":"奈拉符号","new sheqel sign":"新谢克尔符号","nordic mark sign":"北欧马克","peseta sign":"比塞塔符号","peso sign":"比索符号","ruble sign":"卢布符号","rupee sign":"卢比符号","spesmilo sign":"spesmilo符号",styles:"样式","tenge sign":"坚戈符号","tugrik sign":"图格里克符号","turkish lira sign":"土耳其里拉","won sign":"韩元符号","yen character":"日元字样","yen/yuan character variant one":"元字样（大写）","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","{0} characters":"{0} 个字符","{0} columns, {1} rows":"","{0} words":"{0} 字"})}sne(HJ);window.tinymce=HJ;(function(){const h=Object.getPrototypeOf,C=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},D=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&C(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},N=t=>s=>D(s)===t,W=t=>s=>typeof s===t,Y=t=>s=>t===s,de=(t,s)=>Te(t)&&C(t,s,(a,i)=>h(a)===i),Q=N("string"),Te=N("object"),ct=t=>de(t,Object),Xe=N("array"),wt=Y(null),yt=W("boolean"),Tt=Y(void 0),_t=t=>t==null,Lt=t=>!_t(t),gt=W("function"),st=W("number"),Qe=(t,s)=>{if(Xe(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},ie=()=>{},St=t=>()=>t(),Wn=(t,s)=>(...a)=>t(s.apply(null,a)),vt=(t,s)=>a=>t(s(a)),J=t=>()=>t,Yt=t=>t,On=(t,s)=>t===s;function gn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const rt=t=>s=>!t(s),we=t=>()=>{throw new Error(t)},Ro=t=>t(),Ve=J(!1),je=J(!0);class T{constructor(s,a){this.tag=s,this.value=a}static some(s){return new T(!0,s)}static none(){return T.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?T.some(s(this.value)):T.none()}bind(s){return this.tag?s(this.value):T.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:T.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Lt(s)?T.some(s):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const it=Array.prototype.slice,ve=Array.prototype.indexOf,Rt=Array.prototype.push,It=(t,s)=>ve.call(t,s),_e=(t,s)=>{const a=It(t,s);return a===-1?T.none():T.some(a)},Dt=(t,s)=>It(t,s)>-1,An=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},nt=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},rn=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=it.call(t,i,i+s);a.push(d)}return a},Ne=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},dt=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},V=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Ao=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},Ct=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},jt=(t,s,a)=>(V(t,(i,d)=>{a=s(a,i,d)}),a),tt=(t,s,a)=>(dt(t,(i,d)=>{a=s(a,i,d)}),a),re=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return T.some(g);if(a(g,i))break}return T.none()},I=(t,s)=>re(t,s,Ve),G=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return T.some(a)}return T.none()},le=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Xe(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Rt.apply(s,t[a])}return s},L=(t,s)=>le(Ne(t,s)),ye=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},He=t=>{const s=it.call(t,0);return s.reverse(),s},ke=(t,s)=>Ct(t,a=>!Dt(s,a)),lt=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Je=t=>[t],cn=(t,s)=>{const a=it.call(t,0);return a.sort(s),a},Wt=(t,s)=>s>=0&&s<t.length?T.some(t[s]):T.none(),wn=t=>Wt(t,0),ot=t=>Wt(t,t.length-1),mt=gt(Array.from)?Array.from:t=>it.call(t),Xt=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return T.none()},sn=Object.keys,lo=Object.hasOwnProperty,po=(t,s)=>{const a=sn(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},ro=(t,s)=>Ds(t,(a,i)=>({k:i,v:s(a,i)})),Ds=(t,s)=>{const a={};return po(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},to=t=>(s,a)=>{t[a]=s},Qo=(t,s,a,i)=>{po(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},ss=(t,s)=>{const a={},i={};return Qo(t,s,to(a),to(i)),{t:a,f:i}},Lo=(t,s)=>{const a={};return Qo(t,s,to(a),ie),a},ir=(t,s)=>{const a=[];return po(t,(i,d)=>{a.push(s(i,d))}),a},xo=(t,s)=>{const a=sn(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return T.some(p)}return T.none()},zr=t=>ir(t,Yt),on=(t,s)=>Zo(t,s)?T.from(t[s]):T.none(),Zo=(t,s)=>lo.call(t,s),gr=(t,s)=>Zo(t,s)&&t[s]!==void 0&&t[s]!==null,tr=(t,s,a=On)=>t.exists(i=>a(i,s)),Rr=(t,s,a=On)=>ea(t,s,a).getOr(t.isNone()&&s.isNone()),_r=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},ys=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return T.none()}return T.some(s)},ea=(t,s,a)=>t.isSome()&&s.isSome()?T.some(a(t.getOrDie(),s.getOrDie())):T.none(),Gr=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?T.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):T.none(),bs=(t,s)=>t!=null?T.some(s(t)):T.none(),Qn=(t,s)=>t?T.some(s):T.none(),Ns=(t,s)=>t+s,Ke=(t,s)=>t.substring(s),xt=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,xn=(t,s)=>as(t,s)?Ke(t,s.length):t,Bn=(t,s)=>pr(t,s)?t:Ns(t,s),Ho=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?Tt(i)?!0:d+s.length<=i:!1},as=(t,s)=>xt(t,s,0),pr=(t,s)=>xt(t,s,t.length-s.length),lr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Ae=t=>t.length>0,Ce=t=>!Ae(t),ht=t=>t.style!==void 0&&gt(t.style.getPropertyValue),Ft=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Bo(i.childNodes[0])},Yn=(t,s)=>{const i=(s||document).createElement(t);return Bo(i)},Co=(t,s)=>{const i=(s||document).createTextNode(t);return Bo(i)},Bo=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Le={fromHtml:Ft,fromTag:Yn,fromText:Co,fromDom:Bo,fromPoint:(t,s,a)=>T.from(t.dom.elementFromPoint(s,a)).map(Bo)},Fo=typeof window<"u"?window:Function("return this;")(),Re=(t,s)=>{let a=s??Fo;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},Be=(t,s)=>{const a=t.split(".");return Re(a,s)},qt=(t,s)=>Be(t,s),tn=(t,s)=>{const a=qt(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Dn=Object.getPrototypeOf,Zn=t=>tn("HTMLElement",t),Gn=t=>{const s=Be("ownerDocument.defaultView",t);return Te(t)&&(Zn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Dn(t).constructor.name))},zn=9,no=11,bo=1,hs=3,As=t=>t.dom.nodeName.toLowerCase(),Ls=t=>t.dom.nodeType,wa=t=>s=>Ls(s)===t,la=t=>fo(t)&&Gn(t.dom),fo=wa(bo),is=wa(hs),ms=wa(zn),aa=wa(no),ta=t=>s=>fo(s)&&As(s)===t,Fr=(t,s)=>{const a=t.dom;if(a.nodeType!==bo)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},dr=t=>t.nodeType!==bo&&t.nodeType!==zn&&t.nodeType!==no||t.childElementCount===0,_l=(t,s)=>{const a=s===void 0?document:s.dom;return dr(a)?[]:Ne(a.querySelectorAll(t),Le.fromDom)},ec=(t,s)=>{const a=s===void 0?document:s.dom;return dr(a)?T.none():T.from(a.querySelector(t)).map(Le.fromDom)},ks=(t,s)=>t.dom===s.dom,Sa=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},ha=t=>Le.fromDom(t.dom.ownerDocument),Vr=t=>ms(t)?t:ha(t),pi=t=>Le.fromDom(Vr(t).dom.documentElement),xa=t=>Le.fromDom(Vr(t).dom.defaultView),Fa=t=>T.from(t.dom.parentNode).map(Le.fromDom),fc=t=>Fa(t),tc=t=>T.from(t.dom.parentElement).map(Le.fromDom),Wi=(t,s)=>{const a=gt(s)?s:Ve;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=Le.fromDom(g);if(d.push(p),a(p)===!0)break;i=g}return d},ni=t=>T.from(t.dom.offsetParent).map(Le.fromDom),Uc=t=>T.from(t.dom.nextSibling).map(Le.fromDom),Na=t=>Ne(t.dom.childNodes,Le.fromDom),Nr=(t,s)=>{const a=t.dom.childNodes;return T.from(a[s]).map(Le.fromDom)},Ei=t=>Nr(t,0),Zi=(t,s)=>({element:t,offset:s}),Ti=(t,s)=>{const a=Na(t);return a.length>0&&s<a.length?Zi(a[s],0):Zi(t,s)},Ai=t=>aa(t)&&Lt(t.dom.host),Ur=t=>Le.fromDom(t.dom.getRootNode()),Za=t=>Ai(t)?t:Le.fromDom(Vr(t).dom.body),te=t=>Se(t).isSome(),Se=t=>{const s=Ur(t);return Ai(s)?T.some(s):T.none()},Ge=t=>Le.fromDom(t.dom.host),Ht=t=>{if(Lt(t.target)){const s=Le.fromDom(t.target);if(fo(s)&&dn(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return wn(a)}}return T.from(t.target)},dn=t=>Lt(t.dom.shadowRoot),$n=t=>{const s=is(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Se(Le.fromDom(s)).fold(()=>a.body.contains(s),vt($n,Ge))},es=()=>Ws(Le.fromDom(document)),Ws=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Le.fromDom(s)},ls=(t,s,a)=>{if(Q(a)||yt(a)||st(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},q=(t,s,a)=>{ls(t.dom,s,a)},xe=(t,s)=>{const a=t.dom;po(s,(i,d)=>{ls(a,d,i)})},Ie=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},nn=(t,s)=>T.from(Ie(t,s)),zo=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},$=(t,s)=>{t.dom.removeAttribute(s)},se=t=>tt(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),De=(t,s,a)=>{if(!Q(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);ht(t)&&t.style.setProperty(s,a)},at=(t,s)=>{ht(t)&&t.style.removeProperty(s)},pt=(t,s,a)=>{const i=t.dom;De(i,s,a)},vo=(t,s)=>{const a=t.dom;po(s,(i,d)=>{De(a,d,i)})},Ps=(t,s)=>{const a=t.dom;po(s,(i,d)=>{i.fold(()=>{at(a,d)},g=>{De(a,d,g)})})},Os=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!$n(t)?Qt(a,s):d},Qt=(t,s)=>ht(t)?t.style.getPropertyValue(s):"",Hs=(t,s)=>{const a=t.dom,i=Qt(a,s);return T.from(i).filter(d=>d.length>0)},pa=t=>{const s={},a=t.dom;if(ht(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},gc=(t,s,a)=>{const i=Le.fromTag(t);return pt(i,s,a),Hs(i,s).isSome()},qo=(t,s)=>{const a=t.dom;at(a,s),tr(nn(t,"style").map(lr),"")&&$(t,"style")},hc=t=>t.dom.offsetWidth,qr=(t,s)=>{const a=(S,E)=>{if(!st(E)&&!E.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+E);const O=S.dom;ht(O)&&(O.style[t]=E+"px")},i=S=>{const E=s(S);if(E<=0||E===null){const O=Os(S,t);return parseFloat(O)||0}return E},d=i,g=(S,E)=>tt(E,(O,F)=>{const z=Os(S,F),X=z===void 0?0:parseInt(z,10);return isNaN(X)?O:O+X},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(S,E,O)=>{const F=g(S,O);return E>F?E-F:0}}},eu=qr("height",t=>{const s=t.dom;return $n(t)?s.getBoundingClientRect().height:s.offsetHeight}),nr=t=>eu.get(t),ji=t=>eu.getOuter(t),Qd=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=eu.max(t,s,a);pt(t,"max-height",i+"px")},Of=(t,s)=>({left:t,top:s,translate:(i,d)=>Of(t+i,s+d)}),Dr=Of,em=t=>{const s=t.getBoundingClientRect();return Dr(s.left,s.top)},ca=(t,s)=>t!==void 0?t:s!==void 0?s:0,La=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Dr(a.offsetLeft,a.offsetTop);const g=ca(i==null?void 0:i.pageYOffset,d.scrollTop),p=ca(i==null?void 0:i.pageXOffset,d.scrollLeft),S=ca(d.clientTop,a.clientTop),E=ca(d.clientLeft,a.clientLeft);return bi(t).translate(p-E,g-S)},bi=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Dr(i.offsetLeft,i.offsetTop):$n(t)?em(s):Dr(0,0)},vi=qr("width",t=>t.dom.offsetWidth),Tu=(t,s)=>vi.set(t,s),ae=t=>vi.get(t),fe=t=>vi.getOuter(t),ut=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=vi.max(t,s,a);pt(t,"max-width",i+"px")},zt=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},go=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),S=p||i("(pointer:coarse)"),E=d||!g&&p&&i("(min-device-width:768px)"),O=g||p&&!E,F=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,z=!O&&!E&&!F;return{isiPad:J(d),isiPhone:J(g),isTablet:J(E),isPhone:J(O),isTouch:J(S),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:J(F),isDesktop:J(z)}},Mo=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Bs=(t,s)=>{const a=Mo(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return pc(i(1),i(2))},Js=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Ha():Bs(t,a)},Ha=()=>pc(0,0),pc=(t,s)=>({major:t,minor:s}),ia={nu:pc,detect:Js,unknown:Ha},bc=(t,s)=>Xt(s.brands,a=>{const i=a.brand.toLowerCase();return I(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:ia.nu(parseInt(a.version,10),0)}))}),or=(t,s)=>{const a=String(s).toLowerCase();return I(t,i=>i.search(a))},Sc=(t,s)=>or(t,s).map(a=>{const i=ia.detect(a.versionRegexes,s);return{current:a.name,version:i}}),nc=(t,s)=>or(t,s).map(a=>{const i=ia.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Kr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Br=t=>s=>Ho(s,t),br=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Ho(t,"edge/")&&Ho(t,"chrome")&&Ho(t,"safari")&&Ho(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Kr],search:t=>Ho(t,"chrome")&&!Ho(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Ho(t,"msie")||Ho(t,"trident")},{name:"Opera",versionRegexes:[Kr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Br("firefox")},{name:"Safari",versionRegexes:[Kr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Ho(t,"safari")||Ho(t,"mobile/"))&&Ho(t,"applewebkit")}],Au=[{name:"Windows",search:Br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Ho(t,"iphone")||Ho(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Br("linux"),versionRegexes:[]},{name:"Solaris",search:Br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ku={browsers:J(br),oses:J(Au)},_u="Edge",$m="Chromium",Du="IE",Gi="Opera",Im="Firefox",ba="Safari",Lm=()=>Lg({current:void 0,version:ia.unknown()}),Lg=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(_u),isChromium:i($m),isIE:i(Du),isOpera:i(Gi),isFirefox:i(Im),isSafari:i(ba)}},Dl={unknown:Lm,nu:Lg,edge:J(_u),chromium:J($m),ie:J(Du),opera:J(Gi),firefox:J(Im),safari:J(ba)},Hg="Windows",Ou="iOS",zg="Android",tu="Linux",Vg="macOS",Hm="Solaris",Rf="FreeBSD",Ru="ChromeOS",Ff=()=>Fe({current:void 0,version:ia.unknown()}),Fe=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Hg),isiOS:i(Ou),isAndroid:i(zg),isMacOS:i(Vg),isLinux:i(tu),isSolaris:i(Hm),isFreeBSD:i(Rf),isChromeOS:i(Ru)}},nu={unknown:Ff,nu:Fe,windows:J(Hg),ios:J(Ou),android:J(zg),linux:J(tu),macos:J(Vg),solaris:J(Hm),freebsd:J(Rf),chromeos:J(Ru)},Ug={detect:(t,s,a)=>{const i=ku.browsers(),d=ku.oses(),g=s.bind(E=>bc(i,E)).orThunk(()=>Sc(i,t)).fold(Dl.unknown,Dl.nu),p=nc(d,t).fold(nu.unknown,nu.nu),S=go(p,g,t,a);return{browser:g,os:p,deviceType:S}}},S1=t=>window.matchMedia(t).matches;let Fu=zt(()=>Ug.detect(window.navigator.userAgent,T.from(window.navigator.userAgentData),S1));const os=()=>Fu(),Ea=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),qi=t=>{const s=Le.fromDom(Ht(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Wn(i,a);return Ea(s,t.clientX,t.clientY,a,i,d,t)},Nu=(t,s)=>a=>{t(a)&&s(qi(a))},zm=(t,s,a,i,d)=>{const g=Nu(a,i);return t.dom.addEventListener(s,g,d),{unbind:gn(Vm,t,s,g,d)}},tm=(t,s,a,i)=>zm(t,s,a,i,!1),xc=(t,s,a,i)=>zm(t,s,a,i,!0),Vm=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},ou=(t,s)=>{Fa(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},Um=(t,s)=>{Uc(t).fold(()=>{Fa(t).each(d=>{Wc(d,s)})},i=>{ou(i,s)})},su=(t,s)=>{Ei(t).fold(()=>{Wc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Wc=(t,s)=>{t.dom.appendChild(s.dom)},Wg=(t,s,a)=>{Nr(t,a).fold(()=>{Wc(t,s)},i=>{ou(i,s)})},nm=(t,s)=>{dt(s,a=>{Wc(t,a)})},ja=t=>{t.dom.textContent="",dt(Na(t),s=>{oi(s)})},oi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Mc=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Dr(a,i)},gd=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},om=t=>{const s=t===void 0?window:t;return os().browser.isFirefox()?T.none():T.from(s.visualViewport)},Zg=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),sm=t=>{const s=t===void 0?window:t,a=s.document,i=Mc(Le.fromDom(a));return om(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Zg(i.left,i.top,g,p)},d=>Zg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},ul=()=>Le.fromDom(document),Wm=(t,s)=>t.view(s).fold(J([]),i=>{const d=t.owner(i),g=Wm(t,d);return[i].concat(g)}),Xh=(t,s)=>{const a=s.owner(t),i=Wm(s,a);return T.some(i)};var Nf=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?T.none():T.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Le.fromDom)},owner:t=>ha(t)});const rm=t=>{const s=ul(),a=Mc(s);return Xh(t,Nf).fold(gn(La,t),d=>{const g=bi(t),p=jt(d,(S,E)=>{const O=bi(E);return{left:S.left+O.left,top:S.top+O.top}},{left:0,top:0});return Dr(p.left+g.left+a.left,p.top+g.top+a.top)})},hd=(t,s,a)=>({point:t,width:s,height:a}),am=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),Wr=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Yr=t=>{const s=La(t),a=fe(t),i=ji(t);return Wr(s.left,s.top,a,i)},ki=t=>{const s=rm(t),a=fe(t),i=ji(t);return Wr(s.left,s.top,a,i)},pd=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,S=g-i;return Wr(a,i,p,S)},Gg=(t,s)=>tt(s,(a,i)=>pd(a,i),t),Ba=()=>sm(window),oo=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},ru=t=>{const s=oo(T.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(T.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:S=>{a(),s.set(T.some(S))}}},Bf=()=>ru(t=>t.destroy()),oc=()=>ru(t=>t.unbind()),Ys=()=>{const t=ru(ie);return{...t,on:a=>t.get().each(a)}};var Bu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const qg=t=>{const s=g=>g(t),a=J(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:je,isError:Ve,map:g=>Yo.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>T.some(t)};return d},cm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Ve,isError:je,map:s,mapError:i=>Yo.error(i(t)),bind:s,exists:Ve,forall:je,getOr:Yt,or:Yt,getOrThunk:Ro,orThunk:Ro,getOrDie:we(String(t)),each:ie,toOptional:T.none};return a},Yo={value:qg,error:cm,fromOption:(t,s)=>t.fold(()=>cm(s),qg)};var Ma;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Ma||(Ma={}));const bd=(t,s,a)=>t.stype===Ma.Error?s(t.serror):a(t.svalue),vc=t=>{const s=[],a=[];return dt(t,i=>{bd(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Zc=(t,s)=>t.stype===Ma.Error?{stype:Ma.Error,serror:s(t.serror)}:t,_i=(t,s)=>t.stype===Ma.Value?{stype:Ma.Value,svalue:s(t.svalue)}:t,Ga=(t,s)=>t.stype===Ma.Value?s(t.svalue):t,Pc=(t,s)=>t.stype===Ma.Error?s(t.serror):t,yi=t=>({stype:Ma.Value,svalue:t}),Mf=t=>({stype:Ma.Error,serror:t}),ua={fromResult:t=>t.fold(Mf,yi),toResult:t=>bd(t,Yo.error,Yo.value),svalue:yi,partition:vc,serror:Mf,bind:Ga,bindError:Pc,map:_i,mapError:Zc,fold:bd},Mu=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),yd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),mr=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Ki=(t,s)=>s,Qh=(t,s)=>ct(t)&&ct(s)?xr(t,s):s,au=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Zo(d,g)&&(a[g]=t(a[g],d[g]))}return a},xr=au(Qh),Pu=au(Ki),si=()=>({tag:"required",process:{}}),us=t=>({tag:"defaultedThunk",process:t}),Cd=t=>us(J(t)),Zm=()=>({tag:"option",process:{}}),Pf=t=>({tag:"mergeWithThunk",process:t}),A=t=>Pf(J(t)),M=(t,s)=>t.length>0?ua.svalue(xr(s,Pu.apply(void 0,t))):ua.svalue(s),K=t=>Wn(ua.serror,le)(t),en={consolidateObj:(t,s)=>{const a=ua.partition(t);return a.errors.length>0?K(a.errors):M(a.values,s)},consolidateArr:t=>{const s=ua.partition(t);return s.errors.length>0?K(s.errors):ua.svalue(s.values)}},Eo=t=>Te(t)&&sn(t).length>100?" removed due to size":JSON.stringify(t,null,2),Xo=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):t;return Ne(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},_o=(t,s)=>ua.serror([{path:t,getErrorInfo:s}]),To=(t,s,a)=>_o(t,()=>'Could not find valid *required* value for "'+s+'" in '+Eo(a)),Er=(t,s)=>_o(t,()=>'Choice schema did not contain choice key: "'+s+'"'),va=(t,s,a)=>_o(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Eo(s)),Di=(t,s)=>_o(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),cu=(t,s)=>_o(t,J(s)),jm=t=>{const s=(i,d)=>ua.bindError(t(d),g=>cu(i,g)),a=J("val");return{extract:s,toString:a}},Kg=jm(ua.svalue),$c=(t,s,a,i)=>on(s,a).fold(()=>To(t,a,s),i),Yg=(t,s,a,i)=>{const d=on(t,s).getOrThunk(()=>a(t));return i(d)},c0=(t,s,a)=>a(on(t,s)),ep=(t,s,a,i)=>{const d=on(t,s).map(g=>g===!0?a(t):g);return i(d)},Ec=(t,s,a,i,d)=>{const g=S=>d.extract(s.concat([i]),S),p=S=>S.fold(()=>ua.svalue(T.none()),E=>{const O=d.extract(s.concat([i]),E);return ua.map(O,T.some)});switch(t.tag){case"required":return $c(s,a,i,g);case"defaultedThunk":return Yg(a,i,t.process,g);case"option":return c0(a,i,p);case"defaultedOptionThunk":return ep(a,i,t.process,p);case"mergeWithThunk":return Yg(a,i,J({}),S=>{const E=xr(t.process(a),S);return g(E)})}},tp=(t,s,a)=>{const i={},d=[];for(const g of a)mr(g,(p,S,E,O)=>{const F=Ec(E,t,s,p,O);ua.fold(F,z=>{d.push(...z)},z=>{i[S]=z})},(p,S)=>{i[p]=S(s)});return d.length>0?ua.serror(d):ua.svalue(i)},za=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),i0=t=>sn(Lo(t,Lt)),ri=t=>{const s=ko(t),a=jt(t,(d,g)=>mr(g,p=>xr(d,{[p]:!0}),J(d)),{});return{extract:(d,g)=>{const p=yt(g)?[]:i0(g),S=Ct(p,E=>!gr(a,E));return S.length===0?s.extract(d,g):Di(d,S)},toString:s.toString}},ko=t=>({extract:(i,d)=>tp(i,d,t),toString:()=>`obj{
`+Ne(t,d=>mr(d,(g,p,S,E)=>g+" -> "+E.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Yi=t=>({extract:(i,d)=>{const g=Ne(d,(p,S)=>t.extract(i.concat(["["+S+"]"]),p));return en.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),$f=(t,s)=>{const a=s!==void 0?s:Yt;return{extract:(g,p)=>{const S=[];for(const E of t){const O=E.extract(g,p);if(O.stype===Ma.Value)return{stype:Ma.Value,svalue:a(O.svalue)};S.push(O)}return en.consolidateArr(S)},toString:()=>"oneOf("+Ne(t,g=>g.toString()).join(", ")+")"}},Xg=(t,s)=>{const a=(g,p)=>Yi(jm(t)).extract(g,p);return{extract:(g,p)=>{const S=sn(p),E=a(g,S);return ua.bind(E,O=>{const F=Ne(O,z=>Mu(z,z,si(),s));return ko(F).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},np=(t,s)=>{const a=zt(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},x1=Wn(Yi,ko),Rl=J(Kg),$u=(t,s)=>jm(a=>{const i=typeof a;return t(a)?ua.svalue(a):ua.serror(`Expected type: ${s} but got: ${i}`)}),im=$u(st,"number"),Mn=$u(Q,"string"),dl=$u(yt,"boolean"),op=$u(gt,"function"),Gm=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Gm(t[s]));default:return!1}},Fl=jm(t=>Gm(t)?ua.svalue(t):ua.serror("Expected value to be acceptable for sending via postMessage")),Jg=(t,s,a,i)=>on(a,i).fold(()=>va(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),lm=(t,s)=>({extract:(d,g)=>on(g,t).fold(()=>Er(d,t),S=>Jg(d,g,s,S)),toString:()=>"chooseOn("+t+"). Possible values: "+sn(s)}),qm=()=>Yi(Kg),Qg=t=>jm(s=>t(s).fold(ua.serror,ua.svalue)),iu=(t,s)=>Xg(a=>ua.fromResult(t(a)),s),l0=(t,s,a)=>{const i=s.extract([t],a);return ua.mapError(i,d=>({input:a,errors:d}))},oa=(t,s,a)=>ua.toResult(l0(t,s,a)),un=t=>t.fold(s=>{throw new Error(lu(s))},Yt),jc=(t,s,a)=>un(oa(t,s,a)),lu=t=>`Errors: 
`+Xo(t.errors).join(`
`)+`

Input object: `+Eo(t.input),sc=(t,s)=>lm(t,ro(s,ko)),If=(t,s)=>np(t,s),qa=Mu,zs=yd,sp=t=>Qg(s=>Dt(t,s)?Yo.value(s):Yo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Zt=t=>qa(t,t,si(),Rl()),Vs=(t,s)=>qa(t,t,si(),s),eh=t=>Vs(t,im),Va=t=>Vs(t,Mn),Gc=(t,s)=>qa(t,t,si(),sp(s)),u0=t=>Vs(t,dl),Xi=t=>Vs(t,op),eC=(t,s)=>qa(t,t,Zm(),jm(a=>ua.serror("The field: "+t+" is forbidden. "+s))),wd=(t,s)=>qa(t,t,si(),ko(s)),d0=(t,s)=>qa(t,t,si(),x1(s)),Ji=(t,s)=>qa(t,t,si(),Yi(s)),$s=t=>qa(t,t,Zm(),Rl()),Iu=(t,s)=>qa(t,t,Zm(),s),Km=t=>Iu(t,im),Ka=t=>Iu(t,Mn),rp=(t,s)=>Iu(t,sp(s)),Lu=t=>Iu(t,op),Hu=(t,s)=>Iu(t,Yi(s)),Or=(t,s)=>Iu(t,ko(s)),Lf=(t,s)=>Iu(t,ri(s)),et=(t,s)=>qa(t,t,Cd(s),Rl()),Qi=(t,s,a)=>qa(t,t,Cd(s),a),Hf=(t,s)=>Qi(t,s,im),qc=(t,s)=>Qi(t,s,Mn),el=(t,s,a)=>Qi(t,s,sp(a)),Ta=(t,s)=>Qi(t,s,dl),da=(t,s)=>Qi(t,s,op),tC=(t,s)=>Qi(t,s,Fl),x=(t,s,a)=>Qi(t,s,Yi(a)),R=(t,s,a)=>Qi(t,s,ko(a)),ue={generate:t=>{if(!Xe(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return dt(t,(i,d)=>{const g=sn(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],S=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Xe(S))throw new Error("case arguments must be an array");s.push(p),a[p]=(...E)=>{const O=E.length;if(O!==S.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+S.length+" ("+S+"), got "+O);return{fold:(...z)=>{if(z.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+z.length);return z[d].apply(null,E)},match:z=>{const X=sn(z);if(s.length!==X.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+X.join(","));if(!ye(s,me=>Dt(X,me)))throw new Error("Not all branches were specified when using match. Specified: "+X.join(", ")+`
Required: `+s.join(", "));return z[p].apply(null,E)},log:z=>{console.log(z,{constructors:s,constructor:p,params:E})}}}}),a}};ue.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ze=t=>{const s=[],a=[];return dt(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Vt=(t,s)=>{const a={};return po(t,(i,d)=>{Dt(s,d)||(a[d]=i)}),a},vn=(t,s)=>({[t]:s}),jn=t=>{const s={};return dt(t,a=>{s[a.key]=a.value}),s},jo=(t,s)=>Vt(t,s),ns=(t,s)=>vn(t,s),js=t=>jn(t),Gs=(t,s)=>t.length===0?Yo.value(s):Yo.value(xr(s,Pu.apply(void 0,t))),Xr=t=>Yo.error(le(t)),tl=(t,s)=>{const a=ze(t);return a.errors.length>0?Xr(a.errors):Gs(a.values,s)},Tc=t=>gt(t)?t:Ve,uu=(t,s,a)=>{let i=t.dom;const d=Tc(a);for(;i.parentNode;){i=i.parentNode;const g=Le.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return T.none()},Nl=(t,s,a)=>{const i=s(t),d=Tc(a);return i.orThunk(()=>d(t)?T.none():uu(t,s,d))},zu=(t,s)=>ks(t.element,s.event.target),th={can:je,abort:Ve,run:ie},ml=t=>{if(!gr(t,"can")&&!gr(t,"abort")&&!gr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...th,...t}},zf=(t,s)=>(...a)=>tt(t,(i,d)=>i&&s(d).apply(void 0,a),!0),ap=(t,s)=>(...a)=>tt(t,(i,d)=>i||s(d).apply(void 0,a),!1),cp=t=>gt(t)?{can:je,abort:Ve,run:t}:t,Ym=t=>{const s=zf(t,d=>d.can),a=ap(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{dt(t,g=>{g.run.apply(void 0,d)})}}},rc=J,du=rc("touchstart"),Ms=rc("touchmove"),Tr=rc("touchend"),ai=rc("touchcancel"),ya=rc("mousedown"),ip=rc("mousemove"),Xm=rc("mouseout"),Jm=rc("mouseup"),fl=rc("mouseover"),Sd=rc("focusin"),um=rc("focusout"),Vu=rc("keydown"),E1=rc("keyup"),dm=rc("input"),lp=rc("change"),nh=rc("click"),QS=rc("transitioncancel"),xd=rc("transitionend"),ex=rc("transitionstart"),nC=rc("selectstart"),Aa=t=>J("alloy."+t),m0={tap:Aa("tap")},Ed=Aa("focus"),Vf=Aa("blur.post"),Qm=Aa("paste.post"),mu=Aa("receive"),fu=Aa("execute"),T1=Aa("focus.item"),Td=m0.tap,ci=Aa("longpress"),A1=Aa("sandbox.close"),oC=Aa("typeahead.cancel"),k1=Aa("system.init"),_1=Aa("system.touchmove"),sC=Aa("system.touchend"),oh=Aa("system.scroll"),Ad=Aa("system.resize"),Oi=Aa("system.attached"),gu=Aa("system.detached"),Uf=Aa("system.dismissRequested"),rC=Aa("system.repositionRequested"),sh=Aa("focusmanager.shifted"),aC=Aa("slotcontainer.visibility"),tx=Aa("system.external.element.scroll"),nx=Aa("change.tab"),ox=Aa("dismiss.tab"),Wf=Aa("highlight"),rh=Aa("dehighlight"),rs=(t,s)=>{f0(t,t.element,s,{})},wo=(t,s,a)=>{f0(t,t.element,s,a)},Zf=t=>{rs(t,fu())},D1=(t,s,a)=>{f0(t,s,a,{})},f0=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},cC=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},mm=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Mr=t=>js(t),sx=(t,s)=>({key:t,value:ml({abort:s})}),iC=(t,s)=>({key:t,value:ml({can:s})}),lC=t=>({key:t,value:ml({run:(s,a)=>{a.event.prevent()}})}),Gt=(t,s)=>({key:t,value:ml({run:s})}),ah=(t,s,a)=>({key:t,value:ml({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Rk=t=>s=>Gt(t,s),jf=t=>s=>({key:t,value:ml({run:(a,i)=>{zu(a,i)&&s(a,i)}})}),Fk=(t,s)=>Gt(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{mm(d,d.element,t,i)})}),ch=(t,s,a)=>{const i=s.partUids[a];return Fk(t,i)},uC=(t,s)=>Gt(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Nl(d.target,S=>a.getSystem().getByDom(S).toOptional(),Ve).getOr(a));s(a,g,i)}),kd=t=>Gt(t,(s,a)=>{a.cut()}),dC=t=>Gt(t,(s,a)=>{a.stop()}),up=(t,s)=>jf(t)(s),Zr=jf(Oi()),fm=jf(gu()),mC=jf(k1()),Uu=Rk(fu()),fC=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:O1(p.slice(0,1).concat(p.slice(3)))}),t},O1=t=>Ne(t,s=>pr(s,"/*")?s.substring(0,s.length-2):s),dp=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:O1(g)}),t},R1=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:O1(g.slice(1))}),t},gl=t=>({classes:Tt(t.classes)?[]:t.classes,attributes:Tt(t.attributes)?{}:t.attributes,styles:Tt(t.styles)?{}:t.styles}),rx=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),F1=(t,s,a)=>Uu(i=>{a(i,t,s)}),gC=(t,s,a)=>mC((i,d)=>{a(i,t,s)}),Gf=(t,s,a,i,d,g)=>{const p=ri(t),S=Or(s,[Lf("config",t)]);return cx(p,S,s,a,i,d,g)},hC=(t,s,a,i,d,g)=>{const p=t,S=Or(s,[Iu("config",t)]);return cx(p,S,s,a,i,d,g)},ax=(t,s,a)=>fC((d,...g)=>{const p=[d].concat(g);return d.config({name:J(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},S=>{const E=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,S.config,S.state].concat(E))})},a,s),pC=t=>({key:t,value:void 0}),cx=(t,s,a,i,d,g,p)=>{const S=z=>gr(z,a)?z[a]():T.none(),E=ro(d,(z,X)=>ax(a,z,X)),F={...ro(g,(z,X)=>dp(z,X)),...E,revoke:gn(pC,a),config:z=>{const X=jc(a+"-config",t,z);return{key:a,value:{config:X,me:F,configAsRaw:zt(()=>jc(a+"-config",t,z)),initialConfig:z,state:p}}},schema:J(s),exhibit:(z,X)=>ea(S(z),on(i,"exhibit"),(ee,me)=>me(X,ee.config,ee.state)).getOrThunk(()=>gl({})),name:J(a),handlers:z=>S(z).map(X=>on(i,"events").getOr(()=>({}))(X.config,X.state)).getOr({})};return F},Ci={init:()=>hl({readState:J("No State required")})},hl=t=>t,hn=t=>js(t),g0=ri([Zt("fields"),Zt("name"),et("active",{}),et("apis",{}),et("state",Ci),et("extra",{})]),Ic=t=>{const s=jc("Creating behaviour: "+t.name,g0,t);return Gf(s.fields,s.name,s.active,s.apis,s.extra,s.state)},h0=ri([Zt("branchKey"),Zt("branches"),Zt("name"),et("active",{}),et("apis",{}),et("state",Ci),et("extra",{})]),ix=t=>{const s=jc("Creating behaviour: "+t.name,h0,t);return hC(sc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},jr=J(void 0),ef=(t,s)=>{const a=Ie(t,s);return a===void 0||a===""?[]:a.split(" ")},p0=(t,s,a)=>{const d=ef(t,s).concat([a]);return q(t,s,d.join(" ")),!0},Nk=(t,s,a)=>{const i=Ct(ef(t,s),d=>d!==a);return i.length>0?q(t,s,i.join(" ")):$(t,s),!1},tf=t=>t.dom.classList!==void 0,b0=t=>ef(t,"class"),_d=(t,s)=>p0(t,"class",s),lx=(t,s)=>Nk(t,"class",s),bC=(t,s)=>Dt(b0(t),s)?lx(t,s):_d(t,s),Pr=(t,s)=>{tf(t)?t.dom.classList.add(s):_d(t,s)},mp=t=>{(tf(t)?t.dom.classList:b0(t)).length===0&&$(t,"class")},ma=(t,s)=>{tf(t)?t.dom.classList.remove(s):lx(t,s),mp(t)},ux=(t,s)=>{const a=tf(t)?t.dom.classList.toggle(s):bC(t,s);return mp(t),a},pl=(t,s)=>tf(t)&&t.dom.classList.contains(s),fp=(t,s)=>{dt(s,a=>{Pr(t,a)})},bl=(t,s)=>{dt(s,a=>{ma(t,a)})},Bk=(t,s)=>{dt(s,a=>{ux(t,a)})},Mk=(t,s)=>ye(s,a=>pl(t,a)),Pk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},$k=t=>tf(t)?Pk(t):b0(t),Ac=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},Ri=t=>({...t,position:T.some(t.position)}),N1=(t,s)=>{Ps(t,Ri(s))},qf=t=>(tr(Hs(t,"position"),"fixed")?T.none():ni(t)).orThunk(()=>{const i=Le.fromTag("span");return Fa(t).bind(d=>{Wc(d,i);const g=ni(i);return oi(i),g})}),vC=t=>qf(t).map(La).getOrThunk(()=>Dr(0,0)),gp=(t,s)=>{const a=t.element;Pr(a,s.transitionClass),ma(a,s.fadeOutClass),Pr(a,s.fadeInClass),s.onShow(t)},gm=(t,s)=>{const a=t.element;Pr(a,s.transitionClass),ma(a,s.fadeInClass),Pr(a,s.fadeOutClass),s.onHide(t)},hp=(t,s)=>t.y<s.bottom&&t.bottom>s.y,ih=(t,s)=>t.y>=s.y,Kf=(t,s)=>t.bottom<=s.bottom,hm=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),lh=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),uh=t=>t.box.x-t.win.x,Ik=(t,s,a)=>{const i=s.win,d=s.box,g=uh(s);return Xt(t,p=>{switch(p){case"bottom":return Kf(d,a.bounds)?T.none():T.some(lh(i,g,a));case"top":return ih(d,a.bounds)?T.none():T.some(hm(i,g,a));default:return T.none()}}).getOr({location:"no-dock"})},yC=(t,s,a)=>ye(t,i=>{switch(i){case"bottom":return Kf(s,a.bounds);case"top":return ih(s,a.bounds)}}),v0=(t,s)=>{const a=s.optScrollEnv.fold(J(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return Dr(t.bounds.x,a)},dx=(t,s)=>{const a=s.optScrollEnv.fold(J(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return Dr(t.x,a)},CC=(t,s,a)=>a.getInitialPos().map(i=>{const d=v0(i,s);return{box:Wr(d.left,d.top,ae(t),nr(t)),location:i.location}}),y0=(t,s,a,i,d)=>{const g=dx(s,a),p=Wr(g.left,g.top,s.width,s.height);i.setInitialPos({style:pa(t),position:Os(t,"position")||"static",bounds:p,location:d.location})},wC=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>y0(t,s,a,i,d),()=>ie)},SC=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return T.some({morph:"static"});case"absolute":const g=qf(t).getOr(es()),p=Yr(g),S=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return T.some({morph:"absolute",positionCss:Ac("absolute",on(i.style,"left").map(E=>s.x-p.x),on(i.style,"top").map(E=>s.y-p.y+S),on(i.style,"right").map(E=>p.right-s.right),on(i.style,"bottom").map(E=>p.bottom-s.bottom))});default:return T.none()}}),xC=(t,s,a)=>CC(t,s,a).filter(({box:i})=>yC(a.getModes(),i,s)).bind(({box:i})=>SC(t,i,a)),B1=t=>{switch(t.location){case"top":return T.some({morph:"fixed",positionCss:Ac("fixed",T.some(t.leftX),T.some(t.topY),T.none(),T.none())});case"bottom":return T.some({morph:"fixed",positionCss:Ac("fixed",T.some(t.leftX),T.none(),T.none(),T.some(t.bottomY))});default:return T.none()}},C0=(t,s,a)=>{const i=Yr(t),d=Ba(),g=Ik(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(y0(t,i,s,a,g),B1(g)):T.none()},OF=(t,s,a)=>xC(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>CC(t,s,a)).bind(({box:i,location:d})=>{const g=Ba(),p=uh({win:g,box:i}),S=d==="top"?hm(g,p,s):lh(g,p,s);return B1(S)})),M1=(t,s,a)=>{const i=t.element;return tr(Hs(i,"position"),"fixed")?OF(i,s,a):C0(i,s,a)},pp=(t,s,a)=>{const i=t.element;return CC(i,s,a).bind(({box:d})=>SC(i,d,a))},Yf=(t,s,a,i)=>{const d=Yr(t),g=Ba(),p=uh({win:g,box:d}),S=i(g,p,s);return S.location==="bottom"||S.location==="top"?(wC(t,d,s,a,S),B1(S)):T.none()},EC=(t,s,a)=>{a.setDocked(!1),dt(["left","right","top","bottom","position"],i=>qo(t.element,i)),s.onUndocked(t)},TC=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),N1(t.element,i),(d?s.onDocked:s.onUndocked)(t)},mx=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const S=hp(p,i.bounds);S!==a.isVisible()&&(a.setVisible(S),d&&!S?(fp(t.element,[g.fadeOutClass]),g.onHide(t)):(S?gp:gm)(t,g))})})},AC=(t,s,a,i,d)=>{mx(t,s,a,i,!0),TC(t,s,a,d.positionCss)},dh=(t,s,a,i,d)=>{switch(d.morph){case"static":return EC(t,s,a);case"absolute":return TC(t,s,a,d.positionCss);case"fixed":return AC(t,s,a,i,d)}},Lk=(t,s,a)=>{const i=s.lazyViewport(t);mx(t,s,a,i),M1(t,i,a).each(d=>{dh(t,s,a,i,d)})},kC=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);pp(t,d,a).each(g=>{switch(g.morph){case"static":{EC(t,s,a);break}case"absolute":{TC(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{bl(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Xf(t,s,a)},Xf=(t,s,a)=>{t.getSystem().isConnected()&&Lk(t,s,a)},bp=(t,s,a)=>{a.isDocked()&&kC(t,s,a)},_C=t=>(s,a,i)=>{const d=a.lazyViewport(s);Yf(s.element,d,i,t).each(p=>{AC(s,a,i,d,p)})},w0=_C(hm),DC=_C(lh);var OC=Object.freeze({__proto__:null,refresh:Xf,reset:bp,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:w0,forceDockToBottom:DC}),Hk=Object.freeze({__proto__:null,events:(t,s)=>Mr([up(xd(),(a,i)=>{t.contextual.each(d=>{pl(a.element,d.transitionClass)&&(bl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Gt(oh(),(a,i)=>{Xf(a,t,s)}),Gt(tx(),(a,i)=>{Xf(a,t,s)}),Gt(Ad(),(a,i)=>{bp(a,t,s)})])});const vl=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Na(Le.fromDom(i))},Wu=t=>t.dom.innerHTML,Jf=(t,s)=>{const i=ha(t).dom,d=Le.fromDom(i.createDocumentFragment()),g=vl(s,i);nm(d,g),ja(t),Wc(t,d)},mh=t=>{const s=Le.fromTag("div"),a=Le.fromDom(t.dom.cloneNode(!0));return Wc(s,a),Wu(s)},gx=(t,s)=>Le.fromDom(t.dom.cloneNode(s)),$1=t=>gx(t,!1),S0=t=>gx(t,!0),hx=t=>{if(Ai(t))return"#shadow-root";{const s=$1(t);return mh(s)}},Qf=t=>hx(t),fh="unknown";var hu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(hu||(hu={}));const x0=oo({}),yc=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Dt(["mousemove","mouseover","mouseout",k1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ne(a,g=>Dt(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Qf(g.target)+")":g.outcome)})}}},RC=(t,s,a)=>{switch(on(x0.get(),t).orThunk(()=>{const d=sn(x0.get());return Xt(d,g=>t.indexOf(g)>-1?T.some(x0.get()[g]):T.none())}).getOr(hu.NORMAL)){case hu.NORMAL:return a(eg());case hu.LOGGING:{const d=yc(t,s),g=a(d);return d.write(),g}case hu.STOP:return!0}},Fi=["alloy/data/Fields","alloy/debugging/Debugging"],zk=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return I(s,a=>a.indexOf("alloy")>0&&!An(Fi,i=>a.indexOf(i)>-1)).getOr(fh)}else return fh},px={logEventCut:ie,logEventStopped:ie,logNoParent:ie,logEventNoHandlers:ie,logEventResponse:ie,write:ie},nf=(t,s,a)=>RC(t,s,a),eg=J(px),of=J([Zt("menu"),Zt("selectedMenu")]),yl=J([Zt("item"),Zt("selectedItem")]);J(ko(yl().concat(of())));const bx=J(ko(yl())),I1=wd("initSize",[Zt("numColumns"),Zt("numRows")]),FC=()=>Vs("markers",bx()),vp=()=>wd("markers",[Zt("backgroundMenu")].concat(of()).concat(yl())),gh=t=>wd("markers",Ne(t,Zt)),tg=(t,s,a)=>(zk(),qa(s,s,a,Qg(i=>Yo.value((...d)=>i.apply(void 0,d))))),Es=t=>tg("onHandler",t,Cd(ie)),nl=t=>tg("onKeyboardHandler",t,Cd(T.none)),pm=t=>tg("onHandler",t,si()),E0=t=>tg("onKeyboardHandler",t,si()),hr=(t,s)=>zs(t,J(s)),ng=t=>zs(t,Yt),T0=J(I1);var Vk=[Or("contextual",[Va("fadeInClass"),Va("fadeOutClass"),Va("transitionClass"),Xi("lazyContext"),Es("onShow"),Es("onShown"),Es("onHide"),Es("onHidden")]),da("lazyViewport",()=>({bounds:Ba(),optScrollEnv:T.none()})),x("modes",["top","bottom"],Mn),Es("onDocked"),Es("onUndocked")],L1=Object.freeze({__proto__:null,init:t=>{const s=oo(!1),a=oo(!0),i=Ys(),d=oo(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return hl({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const $r=Ic({fields:Vk,name:"docking",active:Hk,apis:OC,state:L1}),vx=(t,s,a)=>ks(s,t.element)&&!ks(s,a),Wk=Mr([iC(Ed(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return vx(t,i,d)?(console.warn(Ed()+` did not get interpreted by the desired target. 
Originator: `+Qf(i)+`
Target: `+Qf(d)+`
Check the `+Ed()+" event handlers"),!1):!0})]);var yx=Object.freeze({__proto__:null,events:Wk});const hh=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Cl=(t,s,a)=>Math.min(Math.max(t,s),a),og=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let NC=0;const Vn=t=>{const a=new Date().getTime(),i=Math.floor(og()*1e9);return NC++,t+"_"+i+NC+String(a)},BC=J("alloy-id-"),Zk=J("data-alloy-id"),Cx=BC(),MC=Zk(),wx=(t,s)=>{const a=Vn(Cx+t);return Sx(s,a),a},Sx=(t,s)=>{Object.defineProperty(t.dom,MC,{value:s,writable:!0})},Dd=t=>{const s=fo(t)?t.dom[MC]:null;return T.from(s)},H1=t=>Vn(t),ph=Yt,A0=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Qf(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:J("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ve}},jk=A0(),Bl=Vn("alloy-premade"),xx=t=>(Object.defineProperty(t.element.dom,Bl,{value:t.uid,writable:!0}),ns(Bl,t)),PC=t=>Zo(t.dom,Bl),Ex=t=>on(t,Bl),k0=t=>R1((s,...a)=>t(s.getApis(),s,...a),t),Gk=(t,s)=>{const a=Ne(s,d=>Or(d.name(),[Zt("config"),et("state",Ci)])),i=oa("component.behaviours",ko(a),t.behaviours).fold(d=>{throw new Error(lu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Yt);return{list:s,data:ro(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return J(g)})}},_0=t=>t.list,$C=t=>t.data,IC=(t,s)=>{const a={};return po(t,(i,d)=>{po(i,(g,p)=>{const S=on(a,p).getOr([]);a[p]=S.concat([s(d,g)])})}),a},Tx=(t,s,a,i)=>{const d={...s};dt(a,F=>{d[F.name()]=F.exhibit(t,i)});const g=IC(d,(F,z)=>({name:F,modification:z})),p=F=>jt(F,(z,X)=>({...X.modification,...z}),{}),S=jt(g.classes,(F,z)=>z.modification.concat(F),[]),E=p(g.attributes),O=p(g.styles);return gl({classes:S,attributes:E,styles:O})},qk=(t,s,a,i)=>{try{const d=cn(a,(g,p)=>{const S=g[s],E=p[s],O=i.indexOf(S),F=i.indexOf(E);if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));if(F===-1)throw new Error("The ordering for "+t+" does not have an entry for "+E+`.
Order specified: `+JSON.stringify(i,null,2));return O<F?-1:F<O?1:0});return Yo.value(d)}catch(d){return Yo.error([d])}},bm=(t,s)=>({handler:t,purpose:s}),Ax=(t,s)=>({cHandler:t,purpose:s}),yp=(t,s)=>Ax(gn.apply(void 0,[t.handler].concat(s)),t.purpose),Cp=t=>t.cHandler,kx=(t,s)=>({name:t,handler:s}),D0=(t,s)=>{const a={};return dt(t,i=>{a[i.name()]=i.handlers(s)}),a},LC=(t,s,a)=>{const i={...a,...D0(s,t)};return IC(i,kx)},O0=(t,s,a,i)=>{const d=LC(t,a,i);return Xk(d,s)},Kk=t=>{const s=cp(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Ni=(t,s)=>Yo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ne(s,a=>a.name),null,2)]),Yk=(t,s,a)=>{const i=s[a];return i?qk("Event: "+a,"name",t,i).map(d=>{const g=Ne(d,p=>p.handler);return Ym(g)}):Ni(a,t)},Xk=(t,s)=>{const a=ir(t,(i,d)=>(i.length===1?Yo.value(i[0].handler):Yk(i,s,d)).map(p=>{const S=Kk(p),E=i.length>1?Ct(s[d],O=>An(i,F=>F.name===O)).join(" > "):i[0].name;return ns(d,bm(S,E))}));return tl(a,{})},sg="alloy.base.behaviour",rg=ko([qa("dom","dom",si(),ko([Zt("tag"),et("styles",{}),et("classes",[]),et("attributes",{}),$s("value"),$s("innerHtml")])),Zt("components"),Zt("uid"),et("events",{}),et("apis",{}),qa("eventOrder","eventOrder",A({[fu()]:["disabling",sg,"toggling","typeaheadevents"],[Ed()]:[sg,"focusing","keying"],[k1()]:[sg,"disabling","toggling","representing","tooltipping"],[dm()]:[sg,"representing","streaming","invalidating"],[gu()]:[sg,"representing","item-events","toolbar-button-events","tooltipping"],[ya()]:["focusing",sg,"item-type-events"],[du()]:["focusing",sg,"item-type-events"],[fl()]:["item-type-events","tooltipping"],[mu()]:["receiving","reflecting","tooltipping"]}),Rl()),$s("domModification")]),sf=t=>oa("custom.definition",rg,t),HC=t=>({...t.dom,uid:t.uid,domChildren:Ne(t.components,s=>s.element)}),Mt=t=>t.domModification.fold(()=>gl({}),gl),R0=t=>t.events,rf=t=>t.dom.value,ag=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},F0=(t,s,a)=>Nr(t,s).map(d=>{if(a.exists(p=>!ks(p,d))){const p=a.map(As).getOr("span"),S=Le.fromTag(p);return ou(d,S),S}else return d}),wl=(t,s,a)=>{a.fold(()=>Wc(t,s),i=>{ks(i,s)||(ou(i,s),oi(i))})},zC=(t,s,a)=>{const i=Ne(s,a),d=Na(t);return dt(d.slice(i.length),oi),i},VC=(t,s,a,i)=>{const d=Nr(t,s),g=i(a,d),p=F0(t,s,d);return wl(t,g.element,p),g},Bi=(t,s,a)=>zC(t,s,(i,d)=>VC(t,d,i,a)),wp=(t,s)=>zC(t,s,(a,i)=>{const d=Nr(t,i);return wl(t,a,d),a}),_x=(t,s)=>{const a=sn(t),i=sn(s),d=ke(i,a),g=ss(t,(p,S)=>!Zo(s,S)||p!==s[S]).t;return{toRemove:d,toSet:g}},Dx=(t,s)=>{const{class:a,style:i,...d}=se(s),{toSet:g,toRemove:p}=_x(t.attributes,d),S=()=>{dt(p,We=>$(s,We)),xe(s,g)},E=pa(s),{toSet:O,toRemove:F}=_x(t.styles,E),z=()=>{dt(F,We=>qo(s,We)),vo(s,O)},X=$k(s),ee=ke(X,t.classes),me=ke(t.classes,X),pe=()=>{fp(s,me),bl(s,ee)},Ye=We=>{Jf(s,We)},Oe=()=>{const We=t.domChildren;wp(s,We)},Ue=()=>{const We=s,Ut=t.value.getOrUndefined();Ut!==rf(We)&&ag(We,Ut??"")};return S(),pe(),z(),t.innerHtml.fold(Oe,Ye),Ue(),s},Jk=t=>{const s=Le.fromTag(t.tag);xe(s,t.attributes),fp(s,t.classes),vo(s,t.styles),t.innerHtml.each(i=>Jf(s,i));const a=t.domChildren;return nm(s,a),t.value.each(i=>{ag(s,i)}),s},Ox=(t,s)=>{try{const a=Dx(t,s);return T.some(a)}catch{return T.none()}},Qk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Rx=(t,s)=>{const a=d=>As(d)===t.tag&&!Qk(t)&&!PC(d),i=s.filter(a).bind(d=>Ox(t,d)).getOrThunk(()=>Jk(t));return Sx(i,t.uid),i},e_=t=>{const s=on(t,"behaviours").getOr({});return L(sn(s),a=>{const i=s[a];return Lt(i)?[i.me]:[]})},t_=(t,s)=>Gk(t,s),N0=t=>{const s=e_(t);return t_(t,s)},B0=(t,s,a)=>{const i=HC(t),d=Mt(t),g={"alloy.base.modification":d},p=s.length>0?Tx(a,g,s,i):d;return rx(i,p)},n_=(t,s,a)=>{const i={"alloy.base.behaviour":R0(t)};return O0(a,t.eventOrder,s,i).getOrDie()},Fx=(t,s)=>{const a=()=>We,i=oo(jk),d=un(sf(t)),g=N0(t),p=_0(g),S=$C(g),E=B0(d,p,S),O=Rx(E,s),F=n_(d,p,S),z=oo(d.components),X=Ut=>{i.set(Ut)},ee=()=>{i.set(A0(a))},me=()=>{const Ut=Na(O),Bt=L(Ut,_n=>i.get().getByDom(_n).fold(()=>[],Je));z.set(Bt)},pe=Ut=>{const Bt=S;return(gt(Bt[Ut.name()])?Bt[Ut.name()]:()=>{throw new Error("Could not find "+Ut.name()+" in "+JSON.stringify(t,null,2))})()},Ye=Ut=>gt(S[Ut.name()]),Oe=()=>d.apis,Ue=Ut=>S[Ut]().map(Bt=>Bt.state.readState()).getOr("not enabled"),We={uid:t.uid,getSystem:i.get,config:pe,hasConfigured:Ye,spec:t,readState:Ue,getApis:Oe,connect:X,disconnect:ee,element:O,syncComponents:me,components:z.get,events:F};return We},o_=(t,s)=>{const a=on(t,"components").getOr([]);return s.fold(()=>Ne(a,li),i=>Ne(a,(d,g)=>P0(d,Nr(i,g))))},UC=(t,s)=>{const{events:a,...i}=ph(t),d=o_(i,s),g={...i,events:{...yx,...a},components:d};return Yo.value(Fx(g,s))},fa=t=>{const s=Le.fromText(t);return WC({element:s})},WC=t=>{const s=jc("external.component",ri([Zt("element"),$s("uid")]),t),a=oo(A0()),i=S=>{a.set(S)},d=()=>{a.set(A0(()=>p))},g=s.uid.getOrThunk(()=>H1("external"));Sx(s.element,g);const p={uid:g,getSystem:a.get,config:T.none,hasConfigured:Ve,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:J("No state"),syncComponents:ie,components:J([]),events:{}};return xx(p)},Nx=H1,M0=t=>Zo(t,"uid"),P0=(t,s)=>Ex(t).getOrThunk(()=>{const a=M0(t)?t:{uid:Nx(""),...t};return UC(a,s).getOrDie()}),li=t=>P0(t,T.none()),Ml=xx;var ZC=(t,s,a,i,d)=>t(a,i)?T.some(a):gt(d)&&d(a)?T.none():s(a,i,d);const jC=(t,s,a)=>{let i=t.dom;const d=gt(a)?a:Ve;for(;i.parentNode;){i=i.parentNode;const g=Le.fromDom(i);if(s(g))return T.some(g);if(d(g))break}return T.none()},Bx=(t,s,a)=>ZC((d,g)=>g(d),jC,t,s,a),GC=(t,s)=>{const a=t.dom;return a.parentNode?z1(Le.fromDom(a.parentNode),i=>!ks(t,i)&&s(i)):T.none()},z1=(t,s)=>{const a=d=>s(Le.fromDom(d));return I(t.dom.childNodes,a).map(Le.fromDom)},$0=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=Le.fromDom(i.childNodes[d]);if(s(g))return T.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return T.none()};return a(t.dom)},Mx=(t,s,a)=>Bx(t,s,a).isSome(),Mi=t=>ec(t),cg=(t,s,a)=>jC(t,i=>Fr(i,s),a),Od=(t,s)=>GC(t,a=>Fr(a,s)),qC=(t,s)=>z1(t,a=>Fr(a,s)),Jr=(t,s)=>ec(s,t),Zu=(t,s,a)=>ZC((d,g)=>Fr(d,g),cg,t,s,a),ig="aria-controls",s_=t=>Bx(t,a=>{if(!fo(a))return!1;const i=Ie(a,"id");return i!==void 0&&i.indexOf(ig)>-1}).bind(a=>{const i=Ie(a,"id"),d=Ur(a);return Jr(d,`[${ig}="${i}"]`)}),KC=()=>{const t=Vn(ig);return{id:t,link:i=>{q(i,ig,t)},unlink:i=>{$(i,ig)}}},Px=(t,s)=>s_(s).exists(a=>bh(t,a)),bh=(t,s)=>Mx(s,a=>ks(a,t.element),Ve)||Px(t,s),kc=(t,s,a,i,d,g,p,S=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:S}),af=ue.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),r_=(t,s,a,i,d,g,p,S,E)=>t.fold(s,a,i,d,g,p,S,E),YC=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),a_=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),I0=af.southeast,XC=af.southwest,L0=af.northeast,Un=af.northwest,V1=af.south,JC=af.north,$x=af.east,Ix=af.west,c_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Lc=(t,s)=>lt(["left","right","top","bottom"],a=>on(s,a).map(i=>c_(t,i))),i_=(t,s,a)=>{const i=(E,O)=>s[E].map(F=>{const z=E==="top"||E==="bottom",X=z?a.top:a.left,me=(E==="left"||E==="top"?Math.max:Math.min)(F,O)+X;return z?Cl(me,t.y,t.bottom):Cl(me,t.x,t.right)}).getOr(O),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),S=i("bottom",t.bottom);return Wr(d,g,p-d,S-g)},lg="layout",QC=t=>t.x,Lx=(t,s)=>t.x+t.width/2-s.width/2,Kc=(t,s)=>t.x+t.width-s.width,ug=(t,s)=>t.y-s.height,cf=t=>t.y+t.height,Hx=(t,s)=>t.y+t.height/2-s.height/2,l_=t=>t.x+t.width,u_=(t,s)=>t.x-s.width,ac=(t,s,a)=>kc(QC(t),cf(t),a.southeast(),I0(),"southeast",Lc(t,{left:1,top:3}),lg),ka=(t,s,a)=>kc(Kc(t,s),cf(t),a.southwest(),XC(),"southwest",Lc(t,{right:0,top:3}),lg),sr=(t,s,a)=>kc(QC(t),ug(t,s),a.northeast(),L0(),"northeast",Lc(t,{left:1,bottom:2}),lg),Yc=(t,s,a)=>kc(Kc(t,s),ug(t,s),a.northwest(),Un(),"northwest",Lc(t,{right:0,bottom:2}),lg),cc=(t,s,a)=>kc(Lx(t,s),ug(t,s),a.north(),JC(),"north",Lc(t,{bottom:2}),lg),ic=(t,s,a)=>kc(Lx(t,s),cf(t),a.south(),V1(),"south",Lc(t,{top:3}),lg),H0=(t,s,a)=>kc(l_(t),Hx(t,s),a.east(),$x(),"east",Lc(t,{left:0}),lg),z0=(t,s,a)=>kc(u_(t,s),Hx(t,s),a.west(),Ix(),"west",Lc(t,{right:1}),lg),zx=()=>[ac,ka,sr,Yc,ic,cc,H0,z0],Vx=()=>[ka,ac,Yc,sr,ic,cc,H0,z0],Ux=()=>[sr,Yc,ac,ka,cc,ic],V0=()=>[Yc,sr,ka,ac,cc,ic],dg=()=>[ac,ka,sr,Yc,ic,cc],U0=()=>[ka,ac,Yc,sr,ic,cc],d_=(t,s)=>s.universal?t:Ct(t,a=>Dt(s.channels,a));var m_=Object.freeze({__proto__:null,events:t=>Mr([Gt(mu(),(s,a)=>{const i=t.channels,d=sn(i),g=a,p=d_(d,g);dt(p,S=>{const E=i[S],O=E.schema,F=jc("channel["+S+`] data
Receiver: `+Qf(s.element),O,g.data);E.onReceive(s,F)})})])}),f_=[Vs("channels",iu(Yo.value,ri([pm("onReceive"),et("schema",Rl())])))];const ol=Ic({fields:f_,name:"receiving",active:m_});var Wx=Object.freeze({__proto__:null,exhibit:(t,s)=>gl({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Pl=(t,s=!1)=>t.dom.focus({preventScroll:s}),W0=t=>t.dom.blur(),U1=t=>{const s=Ur(t).dom;return t.dom===s.activeElement},Rd=(t=ul())=>T.from(t.dom.activeElement).map(Le.fromDom),Pi=t=>Rd(Ur(t)).filter(s=>t.dom.contains(s.dom)),mg=(t,s)=>{const a=Ur(s),i=Rd(a).bind(g=>{const p=S=>ks(g,S);return p(s)?T.some(s):$0(s,p)}),d=t(s);return i.each(g=>{Rd(a).filter(p=>ks(p,g)).fold(()=>{Pl(g)},ie)}),d},ew=ue.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Z0=(t,s,a,i,d,g)=>{const p=s.rect,S=p.x-a,E=p.y-i,O=p.width,F=p.height,z=d-(S+O),X=g-(E+F),ee=T.some(S),me=T.some(E),pe=T.some(z),Ye=T.some(X),Oe=T.none();return r_(s.direction,()=>Ac(t,ee,me,Oe,Oe),()=>Ac(t,Oe,me,pe,Oe),()=>Ac(t,ee,Oe,Oe,Ye),()=>Ac(t,Oe,Oe,pe,Ye),()=>Ac(t,ee,me,Oe,Oe),()=>Ac(t,ee,Oe,Oe,Ye),()=>Ac(t,ee,me,Oe,Oe),()=>Ac(t,Oe,me,pe,Oe))},Zx=(t,s)=>t.fold(()=>{const a=s.rect;return Ac("absolute",T.some(a.x),T.some(a.y),T.none(),T.none())},(a,i,d,g)=>Z0("absolute",s,a,i,d,g),(a,i,d,g)=>Z0("fixed",s,a,i,d,g)),lf=(t,s)=>{const a=gn(rm,s),i=t.fold(a,a,()=>{const p=Mc();return rm(s).translate(-p.left,-p.top)}),d=fe(s),g=ji(s);return Wr(i.left,i.top,d,g)},jx=(t,s)=>s.fold(()=>t.fold(Ba,Ba,Wr),a=>t.fold(J(a),J(a),()=>{const i=tw(t,a.x,a.y);return Wr(i.left,i.top,a.width,a.height)})),tw=(t,s,a)=>{const i=Dr(s,a),d=()=>{const g=Mc();return i.translate(-g.left,-g.top)};return t.fold(J(i),J(i),d)},Gx=(t,s,a,i)=>t.fold(s,a,i);ew.none;const W1=ew.relative,Z1=ew.fixed,j1=(t,s)=>({anchorBox:t,origin:s}),g_=(t,s)=>j1(t,s),j0="data-alloy-placement",h_=(t,s)=>{q(t,j0,s)},qx=t=>nn(t,j0),p_=t=>$(t,j0),G0=ue.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Kx=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:S,right:E,bottom:O,width:F,height:z}=t,X=p>=a&&p<=d,ee=S>=i&&S<=g,me=X&&ee,pe=E<=d&&E>=a,Ye=O<=g&&O>=i,Oe=pe&&Ye,Ue=Math.min(F,p>=a?d-p:E-a),We=Math.min(z,S>=i?g-S:O-i);return{originInBounds:me,sizeInBounds:Oe,visibleW:Ue,visibleH:We}},b_=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:S,width:E,height:O}=t,F=Math.max(a,d-E),z=Math.max(i,g-O),X=Cl(p,a,F),ee=Cl(S,i,z),me=Math.min(X+E,d)-X,pe=Math.min(ee+O,g)-ee;return Wr(X,ee,me,pe)},nw=(t,s,a)=>{const i=J(s.bottom-a.y),d=J(a.bottom-s.y),g=YC(t,d,d,i),p=J(s.right-a.x),S=J(a.right-s.x);return{maxWidth:a_(t,S,S,p),maxHeight:g}},q0=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=i_(i,t.restriction,g),S=t.x+g.left,E=t.y+g.top,O=Wr(S,E,s,a),{originInBounds:F,sizeInBounds:z,visibleW:X,visibleH:ee}=Kx(O,p),me=F&&z,pe=me?O:b_(O,p),Ye=pe.width>0&&pe.height>0,{maxWidth:Oe,maxHeight:Ue}=nw(t.direction,pe,i),We={rect:pe,maxHeight:Ue,maxWidth:Oe,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:E};return me||t.alwaysFit?G0.fit(We):G0.nofit(We,X,ee,Ye)},v_=(t,s,a,i,d,g)=>{const p=i.width,S=i.height,E=(F,z,X,ee,me)=>{const pe=F(a,i,d,t,g),Ye=q0(pe,p,S,g);return Ye.fold(J(Ye),(Oe,Ue,We,Ut)=>(me===Ut?We>ee||Ue>X:!me&&Ut)?Ye:G0.nofit(z,X,ee,me))};return tt(s,(F,z)=>{const X=gn(E,z);return F.fold(J(F),X)},G0.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:I0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Yt,Yt)},Yx=je,$i=(t,s,a)=>tm(t,s,Yx,a),ow=(t,s,a)=>xc(t,s,Yx,a),sw=qi,rw=["top","bottom","right","left"],K0="data-alloy-transition-timer",y_=(t,s)=>Mk(t,s.classes),Y0=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),Xx=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return xo(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!Rr(g,p)}).isSome()},aw=t=>{const s=g=>{const S=Os(t,g).split(/\s*,\s*/);return Ct(S,Ae)},a=g=>{if(Q(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return pr(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return tt(d,(g,p,S)=>{const E=a(i[S])+a(p);return Math.max(g,E)},0)},cw=(t,s)=>{const a=oc(),i=oc();let d;const g=O=>{var F;const z=(F=O.raw.pseudoElement)!==null&&F!==void 0?F:"";return ks(O.target,t)&&Ce(z)&&Dt(rw,O.raw.propertyName)},p=O=>{if(_t(O)||g(O)){a.clear(),i.clear();const F=O==null?void 0:O.raw.type;(_t(F)||F===xd())&&(clearTimeout(d),$(t,K0),bl(t,s.classes))}},S=$i(t,ex(),O=>{g(O)&&(S.unbind(),a.set($i(t,xd(),p)),i.set($i(t,QS(),p)))}),E=aw(t);requestAnimationFrame(()=>{d=setTimeout(p,E+17),q(t,K0,d)})},Jx=(t,s)=>{fp(t,s.classes),nn(t,K0).each(a=>{clearTimeout(parseInt(a,10)),$(t,K0)}),cw(t,s)},xp=(t,s,a,i,d,g)=>{const p=Y0(i,d,g);if(p||y_(t,i)){pt(t,"position",a.position);const S=lf(s,t),E=Zx(s,{...d,rect:S}),O=lt(rw,F=>E[F]);Xx(a,O)&&(Ps(t,O),p&&Jx(t,i),hc(t))}else bl(t,i.classes)},Qx=t=>({width:fe(t),height:ji(t)}),eE=(t,s,a,i)=>{qo(s,"max-height"),qo(s,"max-width");const d=Qx(s);return v_(s,i.preference,t,d,a,i.bounds)},tE=(t,s)=>{const a=s.classes;bl(t,a.off),fp(t,a.on)},C_=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},nE=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},oE=(t,s,a)=>{const i=Zx(a.origin,s);a.transition.each(d=>{xp(t,a.origin,i,d,s,a.lastPlacement)}),N1(t,i)},w_=(t,s)=>{h_(t,s.placement)},X0=(t,s)=>{Qd(t,Math.floor(s))},sE=J((t,s)=>{X0(t,s),vo(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Ep=J((t,s)=>{X0(t,s)}),rE=(t,s,a)=>t[s]===void 0?a:t[s],iw=(t,s,a,i,d,g,p,S)=>{const E=rE(p,"maxHeightFunction",sE()),O=rE(p,"maxWidthFunction",ie),F=t.anchorBox,z=t.origin,X={bounds:jx(z,g),origin:z,preference:i,maxHeightFunction:E,maxWidthFunction:O,lastPlacement:d,transition:S};return aE(F,s,a,X)},aE=(t,s,a,i)=>{const d=eE(t,s,a,i);return oE(s,d,i),w_(s,d),tE(s,d),C_(s,d,i),nE(s,d,i),{layout:d.layout,placement:d.placement}},S_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ju=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=E=>on(a,E).getOr([]),S=(E,O,F)=>{const z=ke(S_,F);return{offset:Dr(E,O),classesOn:L(F,p),classesOff:L(z,p)}};return{southeast:()=>S(-t,s,["top","alignLeft"]),southwest:()=>S(t,s,["top","alignRight"]),south:()=>S(-t/2,s,["top","alignCentre"]),northeast:()=>S(-t,-s,["bottom","alignLeft"]),northwest:()=>S(t,-s,["bottom","alignRight"]),north:()=>S(-t/2,-s,["bottom","alignCentre"]),east:()=>S(t,-s/2,["valignCentre","left"]),west:()=>S(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>S(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>S(-d,g,["top","alignRight","inset"]),insetNorth:()=>S(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>S(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>S(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>S(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>S(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>S(d,-g/2,["valignCentre","left","inset"])}},J0=()=>ju(0,0,{}),Q0=Yt,Xc=(t,s)=>a=>NF(a)==="rtl"?s:t,NF=t=>Os(t,"direction")==="rtl"?"rtl":"ltr";var $l;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})($l||($l={}));const lw="data-alloy-vertical-dir",x_=t=>Mx(t,s=>fo(s)&&Ie(s,"data-alloy-vertical-dir")===$l.BottomToTop),fg=()=>Or("layouts",[Zt("onLtr"),Zt("onRtl"),$s("onBottomLtr"),$s("onBottomRtl")]),G1=(t,s,a,i,d,g,p)=>{const S=p.map(x_).getOr(!1),E=s.layouts.map(ee=>ee.onLtr(t)),O=s.layouts.map(ee=>ee.onRtl(t)),F=S?s.layouts.bind(ee=>ee.onBottomLtr.map(me=>me(t))).or(E).getOr(d):E.getOr(a),z=S?s.layouts.bind(ee=>ee.onBottomRtl.map(me=>me(t))).or(O).getOr(g):O.getOr(i);return Xc(F,z)(t)},E_=(t,s,a)=>{const i=s.hotspot,d=lf(a,i.element),g=G1(t.element,s,dg(),U0(),Ux(),V0(),T.some(s.hotspot.element));return T.some(Q0({anchorBox:d,bubble:s.bubble.getOr(J0()),overrides:s.overrides,layouts:g}))};var cE=[Zt("hotspot"),$s("bubble"),et("overrides",{}),fg(),hr("placement",E_)];const uw=(t,s,a)=>{const i=tw(a,s.x,s.y),d=Wr(i.left,i.top,s.width,s.height),g=G1(t.element,s,zx(),Vx(),zx(),Vx(),T.none());return T.some(Q0({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var iE=[Zt("x"),Zt("y"),et("height",0),et("width",0),et("bubble",J0()),et("overrides",{}),fg(),hr("placement",uw)];const ev=ue.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),q1=t=>t.fold(Yt,(s,a,i)=>s.translate(-a,-i)),lE=t=>t.fold(Yt,Yt),uE=t=>tt(t,(s,a)=>s.translate(a.left,a.top),Dr(0,0)),T_=t=>{const s=Ne(t,q1);return uE(s)},tv=t=>{const s=Ne(t,lE);return uE(s)},nv=ev.screen,A_=ev.absolute,Tp=(t,s,a)=>{const i=xa(a.root).dom,d=g=>{const p=ha(g),S=ha(t.element);return ks(p,S)};return T.from(i.frameElement).map(Le.fromDom).filter(d).map(La)},dE=(t,s,a)=>{const i=ha(t.element),d=Mc(i),g=Tp(t,s,a).getOr(d);return A_(g,d.left,d.top)},ov=(t,s,a,i)=>{const d=nv(Dr(t,s));return T.some(hd(d,a,i))},dw=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],S=Gx(i,()=>tv(p),()=>tv(p),()=>T_(p)),E=am(S.left,S.top,g.width,g.height),O=a.showAbove?Ux():dg(),F=a.showAbove?V0():U0(),z=G1(d,a,O,F,O,F,T.none());return Q0({anchorBox:E,bubble:a.bubble.getOr(J0()),overrides:a.overrides,layouts:z})}),sv=(t,s,a)=>{const i=dE(t,a,s);return s.node.filter($n).bind(d=>{const g=d.dom.getBoundingClientRect(),p=ov(g.left,g.top,g.width,g.height),S=s.node.getOr(t.element);return dw(p,i,s,a,S)})};var k_=[Zt("node"),Zt("root"),$s("bubble"),fg(),et("overrides",{}),et("showAbove",!1),hr("placement",sv)];const mE="\uFEFF",vh=" ",K1={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},gg=ue.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Y1=(t,s,a,i)=>t.fold(s,a,i),gE=t=>t.fold(Yt,Yt,Yt),hE=gg.before,BF=gg.on,__=gg.after,Ap={before:hE,on:BF,after:__,cata:Y1,getStart:gE},vm=ue.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),D_=t=>vm.exact(t.start,t.soffset,t.finish,t.foffset),mw=t=>t.match({domRange:s=>Le.fromDom(s.startContainer),relative:(s,a)=>Ap.getStart(s),exact:(s,a,i,d)=>s}),pE=vm.domRange,bE=vm.relative,vE=vm.exact,fw=t=>{const s=mw(t);return xa(s)},yE=K1.create,hg={domRange:pE,relative:bE,exact:vE,exactFromRange:D_,getWin:fw,range:yE},CE=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},yh=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},pg=(t,s,a)=>{const i=t.document.createRange();return CE(i,s),yh(i,a),i},X1=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},kp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),rv=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?T.some(a).map(kp):T.none()},bg=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?T.some(s).map(kp):T.none()},Il=ue.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gw=(t,s,a)=>s(Le.fromDom(a.startContainer),a.startOffset,Le.fromDom(a.endContainer),a.endOffset),O_=(t,s)=>s.match({domRange:a=>({ltr:J(a),rtl:T.none}),relative:(a,i)=>({ltr:zt(()=>pg(t,a,i)),rtl:zt(()=>T.some(pg(t,i,a)))}),exact:(a,i,d,g)=>({ltr:zt(()=>X1(t,a,i,d,g)),rtl:zt(()=>T.some(X1(t,d,g,a,i)))})}),_p=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Il.rtl(Le.fromDom(d.endContainer),d.endOffset,Le.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>gw(t,Il.ltr,a)):gw(t,Il.ltr,a)},wE=(t,s)=>{const a=O_(t,s);return _p(t,a)},Dp=(t,s)=>wE(t,s).match({ltr:(i,d,g,p)=>{const S=t.document.createRange();return S.setStart(i.dom,d),S.setEnd(g.dom,p),S},rtl:(i,d,g,p)=>{const S=t.document.createRange();return S.setStart(g.dom,p),S.setEnd(i.dom,d),S}});Il.ltr,Il.rtl;const Op=(t,s,a)=>Ct(Wi(t,a),s),Hc=(t,s)=>_l(s,t),av=(t,s,a,i)=>{const g=ha(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},J1=(t,s,a,i)=>{const d=av(t,s,a,i),g=ks(t,a)&&s===i;return d.collapsed&&!g},cv=t=>T.from(t.getSelection()),SE=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return T.some(K1.create(Le.fromDom(s.startContainer),s.startOffset,Le.fromDom(a.endContainer),a.endOffset))}else return T.none()},hw=t=>{if(t.anchorNode===null||t.focusNode===null)return SE(t);{const s=Le.fromDom(t.anchorNode),a=Le.fromDom(t.focusNode);return J1(s,t.anchorOffset,a,t.focusOffset)?T.some(K1.create(s,t.anchorOffset,a,t.focusOffset)):SE(t)}},iv=t=>cv(t).filter(s=>s.rangeCount>0).bind(hw),Ya=(t,s)=>{const a=Dp(t,s);return rv(a)},lv=(t,s)=>{const a=Dp(t,s);return bg(a)},xE=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?T.from(g.dom.nodeValue):T.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(is,"text"),pw=t=>xE.get(t),uf=(t,s)=>({element:t,offset:s}),Q1=(t,s)=>{const a=Na(t);if(a.length===0)return uf(t,s);if(s<a.length)return uf(a[s],0);{const i=a[a.length-1],d=is(i)?pw(i).length:Na(i).length;return uf(i,d)}},Rp=(t,s)=>is(t)?uf(t,s):Q1(t,s),uv=t=>t.foffset!==void 0,dv=(t,s)=>s.getSelection.getOrThunk(()=>()=>iv(t))().map(i=>{if(uv(i)){const d=Rp(i.start,i.soffset),g=Rp(i.finish,i.foffset);return hg.range(d.element,d.offset,g.element,g.offset)}else return i}),vg=(t,s,a)=>{const i=xa(s.root).dom,d=dE(t,a,s),g=dv(i,s).bind(E=>{if(uv(E))return lv(i,hg.exactFromRange(E)).orThunk(()=>{const F=Le.fromText(mE);ou(E.start,F);const z=Ya(i,hg.exact(F,0,F,1));return oi(F),z}).bind(F=>ov(F.left,F.top,F.width,F.height));{const O=ro(E,z=>z.dom.getBoundingClientRect()),F={left:Math.min(O.firstCell.left,O.lastCell.left),right:Math.max(O.firstCell.right,O.lastCell.right),top:Math.min(O.firstCell.top,O.lastCell.top),bottom:Math.max(O.firstCell.bottom,O.lastCell.bottom)};return ov(F.left,F.top,F.right-F.left,F.bottom-F.top)}}),S=dv(i,s).bind(E=>uv(E)?fo(E.start)?T.some(E.start):tc(E.start):T.some(E.firstCell)).getOr(t.element);return dw(g,d,s,a,S)};var R_=[$s("getSelection"),Zt("root"),$s("bubble"),fg(),et("overrides",{}),et("showAbove",!1),hr("placement",vg)];const Sl="link-layout",Fd=t=>t.x+t.width,bw=(t,s)=>t.x-s.width,EE=(t,s)=>t.y-s.height+t.height,TE=t=>t.y,vw=(t,s,a)=>kc(Fd(t),TE(t),a.southeast(),I0(),"southeast",Lc(t,{left:0,top:2}),Sl),yw=(t,s,a)=>kc(bw(t,s),TE(t),a.southwest(),XC(),"southwest",Lc(t,{right:1,top:2}),Sl),AE=(t,s,a)=>kc(Fd(t),EE(t,s),a.northeast(),L0(),"northeast",Lc(t,{left:0,bottom:3}),Sl),kE=(t,s,a)=>kc(bw(t,s),EE(t,s),a.northwest(),Un(),"northwest",Lc(t,{right:1,bottom:3}),Sl),sl=()=>[vw,yw,AE,kE],Ch=()=>[yw,vw,kE,AE],Cw=(t,s,a)=>{const i=lf(a,s.item.element),d=G1(t.element,s,sl(),Ch(),sl(),Ch(),T.none());return T.some(Q0({anchorBox:i,bubble:J0(),overrides:s.overrides,layouts:d}))};var yg=[Zt("item"),fg(),et("overrides",{}),hr("placement",Cw)],rl=sc("type",{selection:R_,node:k_,hotspot:cE,submenu:yg,makeshift:iE});const xl=[Ji("classes",Mn),el("mode","all",["all","layout","placement"])],Jc=[et("useFixed",Ve),$s("getBounds")],pu=[Vs("anchor",rl),Or("transition",xl)],mv=()=>{const t=document.documentElement;return Z1(0,0,t.clientWidth,t.clientHeight)},bu=t=>{const s=La(t.element),a=t.element.dom.getBoundingClientRect();return W1(s.left,s.top,a.width,a.height)},wh=(t,s,a,i,d,g)=>{const p=g_(s.anchorBox,t);return iw(p,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},F_=(t,s,a,i,d)=>{const g=T.none();ww(t,s,a,i,d,g)},ww=(t,s,a,i,d,g)=>{const p=jc("placement.info",ko(pu),d),S=p.anchor,E=i.element,O=a.get(i.uid);mg(()=>{pt(E,"position","fixed");const F=Hs(E,"visibility");pt(E,"visibility","hidden");const z=s.useFixed()?mv():bu(t);S.placement(t,S,z).each(X=>{const ee=g.orThunk(()=>s.getBounds.map(Ro)),me=wh(z,X,ee,i,O,p.transition);a.set(i.uid,me)}),F.fold(()=>{qo(E,"visibility")},X=>{pt(E,"visibility",X)}),Hs(E,"left").isNone()&&Hs(E,"top").isNone()&&Hs(E,"right").isNone()&&Hs(E,"bottom").isNone()&&tr(Hs(E,"position"),"fixed")&&qo(E,"position")},E)};var _E=Object.freeze({__proto__:null,position:F_,positionWithinBounds:ww,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;dt(["position","left","right","top","bottom"],g=>qo(d,g)),p_(d),a.clear(i.uid)}}),gv=Object.freeze({__proto__:null,init:()=>{let t={};return hl({readState:()=>t,clear:d=>{Lt(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>on(t,d)})}});const ui=Ic({fields:Jc,name:"positioning",active:Wx,apis:_E,state:gv}),Fp=t=>t.getSystem().isConnected(),Np=t=>{rs(t,gu());const s=t.components();dt(s,Np)},eb=t=>{const s=t.components();dt(s,eb),rs(t,Oi())},Sw=(t,s)=>{t.getSystem().addToWorld(s),$n(t.element)&&eb(s)},tb=t=>{Np(t),t.getSystem().removeFromWorld(t)},nb=(t,s)=>{Wc(t.element,s.element)},Sh=t=>{dt(t.components(),s=>oi(s.element)),ja(t.element),t.syncComponents()},xw=(t,s,a)=>{const i=t.components();Sh(t);const d=a(s),g=ke(i,d);dt(g,p=>{Np(p),t.getSystem().removeFromWorld(p)}),dt(d,p=>{Fp(p)?nb(t,p):(t.getSystem().addToWorld(p),nb(t,p),$n(t.element)&&eb(p))}),t.syncComponents()},hv=(t,s,a)=>{const i=t.components(),d=L(s,S=>Ex(S).toArray());dt(i,S=>{Dt(d,S)||tb(S)});const g=a(s),p=ke(i,g);dt(p,S=>{Fp(S)&&tb(S)}),dt(g,S=>{Fp(S)||Sw(t,S)}),t.syncComponents()},Gu=(t,s)=>{DE(t,s,Wc)},DE=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),$n(t.element)&&eb(s),t.syncComponents()},OE=t=>{Np(t),oi(t.element),t.getSystem().removeFromWorld(t)},df=t=>{const s=Fa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());OE(t),s.each(a=>{a.syncComponents()})},Ll=t=>{const s=t.components();dt(s,OE),ja(t.element),t.syncComponents()},ob=(t,s)=>{Cg(t,s,Wc)},xh=(t,s)=>{Cg(t,s,Um)},Cg=(t,s,a)=>{a(t,s.element);const i=Na(s.element);dt(i,d=>{s.getByDom(d).each(eb)})},Ew=t=>{const s=Na(t.element);dt(s,a=>{t.getByDom(a).each(Np)}),oi(t.element)},pv=(t,s,a,i)=>{a.get().each(p=>{Ll(t)});const d=s.getAttachPoint(t);Gu(d,t);const g=t.getSystem().build(i);return Gu(t,g),a.set(g),g},RE=(t,s,a,i)=>{const d=pv(t,s,a,i);return s.onOpen(t,d),d},M_=(t,s,a,i)=>a.get().map(()=>pv(t,s,a,i)),P_=(t,s,a,i,d)=>{Aw(t,s),RE(t,s,a,i),d(),vv(t,s)},Eh=(t,s,a)=>{a.get().each(i=>{Ll(t),df(t),s.onClose(t,i),a.clear()})},Tw=(t,s,a)=>a.isOpen(),Bp=(t,s,a,i)=>Tw(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),sb=(t,s,a)=>a.get(),$_=(t,s,a,i)=>{Hs(t.element,s).fold(()=>{$(t.element,a)},d=>{q(t.element,a,d)}),pt(t.element,s,i)},bv=(t,s,a)=>{nn(t.element,a).fold(()=>qo(t.element,s),i=>pt(t.element,s,i))},Aw=(t,s,a)=>{const i=s.getAttachPoint(t);pt(t.element,"position",ui.getMode(i)),$_(t,"visibility",s.cloakVisibilityAttr,"hidden")},kw=t=>An(["top","left","right","bottom"],s=>Hs(t,s).isSome()),vv=(t,s,a)=>{kw(t.element)||qo(t.element,"position"),bv(t,"visibility",s.cloakVisibilityAttr)};var _w=Object.freeze({__proto__:null,cloak:Aw,decloak:vv,open:RE,openWhileCloaked:P_,close:Eh,isOpen:Tw,isPartOf:Bp,getState:sb,setContent:M_}),yv=Object.freeze({__proto__:null,events:(t,s)=>Mr([Gt(A1(),(a,i)=>{Eh(a,t,s)})])}),Cv=[Es("onOpen"),Es("onClose"),Zt("isPartOf"),Zt("getAttachPoint"),et("cloakVisibilityAttr","data-precloak-visibility")],Sv=Object.freeze({__proto__:null,init:()=>{const t=Ys(),s=J("not-implemented");return hl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Rs=Ic({fields:Cv,name:"sandboxing",active:yv,apis:_w,state:Sv}),Cm=J("dismiss.popups"),Th=J("reposition.popups"),xv=J("mouse.released"),Ev=ri([et("isExtraPart",Ve),Or("fireEventInstead",[et("event",Uf())])]),wg=t=>{const s=jc("Dismissal",Ev,t);return{[Cm()]:{schema:ri([Zt("target")]),onReceive:(a,i)=>{Rs.isOpen(a)&&(Rs.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Rs.close(a),g=>rs(a,g.event)))}}}},Tv=ri([Or("fireEventInstead",[et("event",rC())]),Xi("doReposition")]),Dw=t=>{const s=jc("Reposition",Tv,t);return{[Th()]:{onReceive:a=>{Rs.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>rs(a,i.event))}}}},Ow=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Rw=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var rb=Object.freeze({__proto__:null,onLoad:Ow,onUnload:Rw,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Av=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Zr((i,d)=>{Ow(i,t,s)}),fm((i,d)=>{Rw(i,t,s)})]:[gC(t,s,Ow)];return Mr(a)}});const kv=()=>{const t=oo(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return hl({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},Nw=()=>hl({readState:ie}),NE=()=>{const t=oo({}),s=oo({});return hl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>on(t.get(),p).orThunk(()=>on(s.get(),p)),update:p=>{const S=t.get(),E=s.get(),O={},F={};dt(p,z=>{O[z.value]=z,on(z,"meta").each(X=>{on(X,"text").each(ee=>{F[ee]=z})})}),t.set({...S,...O}),s.set({...E,...F})},clear:()=>{t.set({}),s.set({})}})};var _v=Object.freeze({__proto__:null,memory:kv,dataset:NE,manual:Nw,init:t=>t.store.manager.state(t)});const BE=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},vu=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},_c=(t,s,a)=>{s.store.initialValue.each(d=>{BE(t,s,a,d)})},gf=(t,s,a)=>{a.clear()};var Bw=[$s("initialValue"),Zt("getFallbackEntry"),Zt("getDataKey"),Zt("setValue"),hr("manager",{setValue:BE,getValue:vu,onLoad:_c,onUnload:gf,state:NE})];const I_=(t,s,a)=>s.store.getValue(t),Dv=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Mw=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Pp=[Zt("getValue"),et("setValue",ie),$s("initialValue"),hr("manager",{setValue:Dv,getValue:I_,onLoad:Mw,onUnload:ie,state:Ci.init})];const ME=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},L_=(t,s,a)=>a.get(),MF=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},H_=(t,s,a)=>{a.clear()};var PE=[$s("initialValue"),hr("manager",{setValue:ME,getValue:L_,onLoad:MF,onUnload:H_,state:kv})],$E=[Qi("store",{mode:"memory"},sc("mode",{memory:PE,manual:Pp,dataset:Bw})),Es("onSetValue"),et("resetOnDom",!1)];const Ln=Ic({fields:$E,name:"representing",active:Av,apis:rb,extra:{setValueFrom:(t,s)=>{const a=Ln.getValue(s);Ln.setValue(t,a)}},state:_v}),Dc=(t,s)=>R(t,{},Ne(s,a=>eC(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([zs("dump",Yt)])),ab=t=>t.dump,Oc=(t,s)=>({...hn(s),...t.dump}),yu={field:Dc,augment:Oc,get:ab},Pw="placeholder",kh=ue.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),cb=t=>Zo(t,"uiType"),_h=(t,s,a,i)=>t.exists(d=>d!==a.owner)?kh.single(!0,J(a)):on(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+sn(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),ib=(t,s,a,i)=>cb(a)&&a.uiType===Pw?_h(t,s,a,i):kh.single(!1,J(a)),IE=(t,s,a,i)=>ib(t,s,a,i).fold((g,p)=>{const S=cb(a)?p(s,a.config,a.validated):p(s),E=on(S,"components").getOr([]),O=L(E,F=>IE(t,s,F,i));return[{...S,components:O}]},(g,p)=>{if(cb(a)){const S=p(s,a.config,a.validated);return a.validated.preprocess.getOr(Yt)(S)}else return p(s)}),z_=(t,s,a,i)=>L(a,d=>IE(t,s,d,i)),V_=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,S)=>p,(p,S)=>p);return{name:J(t),required:g,used:i,replace:d}},$p=(t,s,a,i)=>{const d=ro(i,(p,S)=>V_(S,p)),g=z_(t,s,a,d);return po(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Dh=kh.single,$w=kh.multiple,Iw=J(Pw),El=ue.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),wm=et("factory",{sketch:Yt}),Ov=et("schema",[]),qu=Zt("name"),Rv=qa("pname","pname",us(t=>"<alloy."+Vn(t.name)+">"),Rl()),U_=zs("schema",()=>[$s("preprocess")]),Fv=et("defaults",J({})),Nv=et("overrides",J({})),W_=ko([wm,Ov,qu,Rv,Fv,Nv]),Z_=ko([wm,Ov,qu,Fv,Nv]),j_=ko([wm,Ov,qu,Rv,Fv,Nv]),G_=ko([wm,U_,qu,Zt("unit"),Rv,Fv,Nv]),Bv=t=>t.fold(T.some,T.none,T.some,T.some),LE=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},q_=t=>t.fold(Yt,Yt,Yt,Yt),Mv=(t,s)=>a=>{const i=jc("Converting part type",s,a);return t(i)},Qc=Mv(El.required,W_),Cu=Mv(El.external,Z_),Hl=Mv(El.optional,j_),Pv=Mv(El.group,G_),lb=J("entirety");var PF=Object.freeze({__proto__:null,required:Qc,external:Cu,optional:Hl,group:Pv,asNamedPart:Bv,name:LE,asCommon:q_,original:lb});const ub=(t,s,a,i)=>xr(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),K_=(t,s,a)=>{const i={},d={};return dt(a,g=>{g.fold(p=>{i[p.pname]=Dh(!0,(S,E,O)=>p.factory.sketch(ub(S,p,E,O)))},p=>{const S=s.parts[p.name];d[p.name]=J(p.factory.sketch(ub(s,p,S[lb()]),S))},p=>{i[p.pname]=Dh(!1,(S,E,O)=>p.factory.sketch(ub(S,p,E,O)))},p=>{i[p.pname]=$w(!0,(S,E,O)=>{const F=S[p.name];return Ne(F,z=>p.factory.sketch(xr(p.defaults(S,z,O),z,p.overrides(S,z))))})})}),{internals:J(i),externals:J(d)}},HE=(t,s)=>{const a={};return dt(s,i=>{Bv(i).each(d=>{const g=zE(t,d.pname);a[d.name]=p=>{const S=jc("Part: "+d.name+" in "+t,ko(d.schema),p);return{...g,config:p,validated:S}}})}),a},zE=(t,s)=>({uiType:Iw(),owner:t,name:s}),VE=(t,s,a)=>({uiType:Iw(),owner:t,name:s,config:a,validated:{}}),Y_=t=>L(t,s=>s.fold(T.none,T.some,T.none,T.none).map(a=>wd(a.name,a.schema.concat([ng(lb())]))).toArray()),UE=t=>Ne(t,LE),$v=(t,s,a)=>K_(t,s,a),WE=(t,s,a)=>$p(T.some(t),s,s.components,a),mn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},zl=(t,s,a)=>mn(t,s,a).getOrDie("Could not find part: "+a),ZE=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,p=>{i[p]=J(g.getByUid(d[p]))}),i},Lw=(t,s)=>{const a=t.getSystem();return ro(s.partUids,(i,d)=>J(a.getByUid(i)))},db=t=>sn(t.partUids),Oh=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return dt(a,p=>{i[p]=J(g.getByUid(d[p]).getOrDie())}),i},Hw=(t,s)=>{const a=UE(s);return js(Ne(a,i=>({key:i,value:t+"-"+i})))},mb=t=>qa("partUids","partUids",Pf(s=>Hw(s.uid,t)),Rl());var jE=Object.freeze({__proto__:null,generate:HE,generateOne:VE,schemas:Y_,names:UE,substitutes:$v,components:WE,defaultUids:Hw,defaultUidsSchema:mb,getAllParts:Lw,getAllPartNames:db,getPart:mn,getPartOrDie:zl,getParts:ZE,getPartsOrDie:Oh});const X_=(t,s)=>(t.length>0?[wd("parts",t)]:[]).concat([Zt("uid"),et("dom",{}),et("components",[]),ng("originalSpec"),et("debug.sketcher",{})]).concat(s),zw=(t,s,a,i,d)=>{const g=X_(i,d);return jc(t+" [SpecSchema]",ri(g.concat(s)),a)},fb=(t,s,a,i)=>{const d=qE(i),g=zw(t,s,d,[],[]);return a(g,d)},Sg=(t,s,a,i,d)=>{const g=qE(d),p=Y_(a),S=mb(a),E=zw(t,s,g,p,[S]),O=$v(t,E,a),F=WE(t,E,O.internals());return i(E,F,g,O.externals())},GE=t=>Zo(t,"uid"),qE=t=>GE(t)?t:{...t,uid:H1("uid")},J_=t=>t.uid!==void 0,Vw=ri([Zt("name"),Zt("factory"),Zt("configFields"),et("apis",{}),et("extraApis",{})]),Q_=ri([Zt("name"),Zt("factory"),Zt("configFields"),Zt("partFields"),et("apis",{}),et("extraApis",{})]),Tl=t=>{const s=jc("Sketcher for "+t.name,Vw,t),a=g=>fb(s.name,s.configFields,s.factory,g),i=ro(s.apis,k0),d=ro(s.extraApis,(g,p)=>dp(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},wi=t=>{const s=jc("Sketcher for "+t.name,Q_,t),a=p=>Sg(s.name,s.configFields,s.partFields,s.factory,p),i=HE(s.name,s.partFields),d=ro(s.apis,k0),g=ro(s.extraApis,(p,S)=>dp(p,S));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Ip=t=>ta("input")(t)&&Ie(t,"type")!=="radio"||ta("textarea")(t);var e3=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const Uw=[Zt("find")],Fs=Ic({fields:Uw,name:"composing",apis:e3}),t3=["input","button","textarea","select"],n3=(t,s,a)=>{(s.disabled()?gb:Ww)(t,s)},KE=(t,s)=>s.useNative===!0&&Dt(t3,As(t.element)),IF=t=>zo(t.element,"disabled"),Sm=t=>{q(t.element,"disabled","disabled")},Iv=t=>{$(t.element,"disabled")},o3=t=>Ie(t.element,"aria-disabled")==="true",s3=t=>{q(t.element,"aria-disabled","true")},YE=t=>{q(t.element,"aria-disabled","false")},gb=(t,s,a)=>{s.disableClass.each(d=>{Pr(t.element,d)}),(KE(t,s)?Sm:s3)(t),s.onDisabled(t)},Ww=(t,s,a)=>{s.disableClass.each(d=>{ma(t.element,d)}),(KE(t,s)?Iv:YE)(t),s.onEnabled(t)},XE=(t,s)=>KE(t,s)?IF(t):o3(t);var Lp=Object.freeze({__proto__:null,enable:Ww,disable:gb,isDisabled:XE,onLoad:n3,set:(t,s,a,i)=>{(i?gb:Ww)(t,s)}}),JE=Object.freeze({__proto__:null,exhibit:(t,s)=>gl({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Mr([sx(fu(),(a,i)=>XE(a,t)),gC(t,s,n3)])}),r3=[da("disabled",Ve),et("useNative",!0),$s("disableClass"),Es("onDisabled"),Es("onEnabled")];const l=Ic({fields:r3,name:"disabling",active:JE,apis:Lp}),m=(t,s,a,i)=>{const d=Hc(t.element,"."+s.highlightClass);dt(d,g=>{An(i,S=>ks(S.element,g))||(ma(g,s.highlightClass),t.getSystem().getByDom(g).each(S=>{s.onDehighlight(t,S),rs(S,rh())}))})},b=(t,s,a)=>m(t,s,a,[]),y=(t,s,a,i)=>{Pe(t,s,a,i)&&(ma(i.element,s.highlightClass),s.onDehighlight(t,i),rs(i,rh()))},k=(t,s,a,i)=>{m(t,s,a,[i]),Pe(t,s,a,i)||(Pr(i.element,s.highlightClass),s.onHighlight(t,i),rs(i,Wf()))},B=(t,s,a)=>{Fn(t,s).each(i=>{k(t,s,a,i)})},Z=(t,s,a)=>{kn(t,s).each(i=>{k(t,s,a,i)})},ne=(t,s,a,i)=>{fn(t,s,a,i).fold(d=>{throw d},d=>{k(t,s,a,d)})},he=(t,s,a,i)=>{const d=bn(t,s);I(d,i).each(p=>{k(t,s,a,p)})},Pe=(t,s,a,i)=>pl(i.element,s.highlightClass),ft=(t,s,a)=>Jr(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),fn=(t,s,a,i)=>{const d=Hc(t.element,"."+s.itemClass);return T.from(d[i]).fold(()=>Yo.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Fn=(t,s,a)=>Jr(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),kn=(t,s,a)=>{const i=Hc(t.element,"."+s.itemClass);return(i.length>0?T.some(i[i.length-1]):T.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Cn=(t,s,a,i)=>{const d=Hc(t.element,"."+s.itemClass);return G(d,p=>pl(p,s.highlightClass)).bind(p=>{const S=hh(p,i,0,d.length-1);return t.getSystem().getByDom(d[S]).toOptional()})},Xn=(t,s,a)=>Cn(t,s,a,-1),an=(t,s,a)=>Cn(t,s,a,1),bn=(t,s,a)=>{const i=Hc(t.element,"."+s.itemClass);return _r(Ne(i,d=>t.getSystem().getByDom(d).toOptional()))};var Oo=Object.freeze({__proto__:null,dehighlightAll:b,dehighlight:y,highlight:k,highlightFirst:B,highlightLast:Z,highlightAt:ne,highlightBy:he,isHighlighted:Pe,getHighlighted:ft,getFirst:Fn,getLast:kn,getPrevious:Xn,getNext:an,getCandidates:bn}),Po=[Zt("highlightClass"),Zt("itemClass"),Es("onHighlight"),Es("onDehighlight")];const ao=Ic({fields:Po,name:"highlighting",apis:Oo}),sa=[8],rr=[9],_a=[13],Vl=[27],ei=[32],Rh=[37],Fh=[38],Qs=[39],Rc=[40],Ii=(t,s,a)=>{const i=He(t.slice(0,s)),d=He(t.slice(s+1));return I(i.concat(d),a)},Ku=(t,s,a)=>{const i=He(t.slice(0,s));return I(i,a)},Ul=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return I(d.concat(i),a)},Hp=(t,s,a)=>{const i=t.slice(s+1);return I(i,a)},Jo=t=>s=>{const a=s.raw;return Dt(t,a.which)},Wl=t=>s=>ye(t,a=>a(s)),Yu=t=>t.raw.shiftKey===!0,xm=t=>t.raw.ctrlKey===!0,lc=rt(Yu),Is=(t,s)=>({matches:t,classification:s}),jw=(t,s)=>I(t,i=>i.matches(s)).map(i=>i.classification),Gw=(t,s,a)=>{s.exists(d=>a.exists(g=>ks(g,d)))||wo(t,sh(),{prevFocus:s,newFocus:a})},Lv=()=>{const t=a=>Pi(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);Gw(a,d,g)}}},QE=()=>{const t=a=>ao.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(ie,p=>{ao.highlight(a,p)});const g=t(a);Gw(a,d,g)}}};var hf;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(hf||(hf={}));const Nh=(t,s,a,i,d)=>{const g=()=>t.concat([et("focusManager",Lv()),Qi("focusInside","onFocus",Qg(O=>Dt(["onFocus","onEnterOrSpace","onApi"],O)?Yo.value(O):Yo.error("Invalid value for focusInside"))),hr("handler",E),hr("state",s),hr("sendFocusIn",d)]),p=(O,F,z,X,ee)=>{const me=z(O,F,X,ee);return jw(me,F.event).bind(pe=>pe(O,F,X,ee))},E={schema:g,processKey:p,toEvents:(O,F)=>{const z=O.focusInside!==hf.OnFocusMode?T.none():d(O).map(me=>Gt(Ed(),(pe,Ye)=>{me(pe,O,F),Ye.stop()})),X=(me,pe)=>{const Ye=Jo(ei.concat(_a))(pe.event);O.focusInside===hf.OnEnterOrSpaceMode&&Ye&&zu(me,pe)&&d(O).each(Oe=>{Oe(me,O,F),pe.stop()})},ee=[Gt(Vu(),(me,pe)=>{p(me,pe,a,O,F).fold(()=>{X(me,pe)},Ye=>{pe.stop()})}),Gt(E1(),(me,pe)=>{p(me,pe,i,O,F).each(Ye=>{pe.stop()})})];return Mr(z.toArray().concat(ee))}};return E},zp=t=>{const s=[$s("onEscape"),$s("onEnter"),et("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),et("firstTabstop",0),et("useTabstopAt",je),$s("visibilitySelector")].concat([t]),a=(Oe,Ue)=>{const We=Oe.visibilitySelector.bind(Ut=>Zu(Ue,Ut)).getOr(Ue);return nr(We)>0},i=(Oe,Ue)=>{const We=Hc(Oe.element,Ue.selector),Ut=Ct(We,Bt=>a(Ue,Bt));return T.from(Ut[Ue.firstTabstop])},d=(Oe,Ue)=>Ue.focusManager.get(Oe).bind(We=>Zu(We,Ue.selector)),g=(Oe,Ue)=>a(Oe,Ue)&&Oe.useTabstopAt(Ue),p=(Oe,Ue,We)=>{i(Oe,Ue).each(Ut=>{Ue.focusManager.set(Oe,Ut)})},S=(Oe,Ue,We,Ut,Bt)=>Bt(Ue,We,_n=>g(Ut,_n)).fold(()=>Ut.cyclic?T.some(!0):T.none(),_n=>(Ut.focusManager.set(Oe,_n),T.some(!0))),E=(Oe,Ue,We,Ut)=>{const Bt=Hc(Oe.element,We.selector);return d(Oe,We).bind(_n=>G(Bt,gn(ks,_n)).bind($t=>S(Oe,Bt,$t,We,Ut)))},O=(Oe,Ue,We)=>{const Ut=We.cyclic?Ii:Ku;return E(Oe,Ue,We,Ut)},F=(Oe,Ue,We)=>{const Ut=We.cyclic?Ul:Hp;return E(Oe,Ue,We,Ut)},z=Oe=>fc(Oe).bind(Ei).exists(Ue=>ks(Ue,Oe)),X=(Oe,Ue,We)=>d(Oe,We).filter(Ut=>!We.useTabstopAt(Ut)).bind(Ut=>(z(Ut)?O:F)(Oe,Ue,We)),ee=(Oe,Ue,We)=>We.onEnter.bind(Ut=>Ut(Oe,Ue)),me=(Oe,Ue,We)=>We.onEscape.bind(Ut=>Ut(Oe,Ue)),pe=J([Is(Wl([Yu,Jo(rr)]),O),Is(Jo(rr),F),Is(Wl([lc,Jo(_a)]),ee)]),Ye=J([Is(Jo(Vl),me),Is(Jo(rr),X)]);return Nh(s,Ci.init,pe,Ye,()=>T.some(p))};var G8=zp(zs("cyclic",Ve)),q8=zp(zs("cyclic",je));const qw=(t,s,a)=>(D1(t,a,fu()),T.some(!0)),Hv=(t,s,a)=>Ip(a)&&Jo(ei)(s.event)?T.none():qw(t,s,a),hb=(t,s)=>T.some(!0),a3=[et("execute",Hv),et("useSpace",!1),et("useEnter",!0),et("useControlEnter",!1),et("useDown",!1)],zF=(t,s,a)=>a.execute(t,s,t.element),VF=(t,s,a,i)=>{const d=a.useSpace&&!Ip(t.element)?ei:[],g=a.useEnter?_a:[],p=a.useDown?Rc:[],S=d.concat(g).concat(p);return[Is(Jo(S),zF)].concat(a.useControlEnter?[Is(Wl([xm,Jo(_a)]),zF)]:[])},K8=(t,s,a,i)=>a.useSpace&&!Ip(t.element)?[Is(Jo(ei),hb)]:[];var UF=Nh(a3,Ci.init,VF,K8,()=>T.none());const c3=()=>{const t=Ys();return hl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Y8=Object.freeze({__proto__:null,flatgrid:c3,init:t=>t.state(t)});const WF=t=>(s,a,i,d)=>{const g=t(s.element);return Kw(g,s,a,i,d)},i3=(t,s)=>{const a=Xc(t,s);return WF(a)},l3=(t,s)=>{const a=Xc(s,t);return WF(a)},u3=t=>(s,a,i,d)=>Kw(t,s,a,i,d),Kw=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),eT=u3,ZF=u3,d3=u3,jF=t=>t.offsetWidth<=0&&t.offsetHeight<=0,GF=t=>!jF(t.dom),X8=(t,s)=>G(t,s).map(a=>({index:a,candidates:t})),Xu=(t,s,a)=>{const i=p=>ks(p,s),d=Hc(t,a),g=Ct(d,GF);return X8(g,i)},qF=(t,s)=>G(t,a=>ks(s,a)),KF=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const S=p.row*a+p.column;return S>=0&&S<t.length?T.some(t[S]):T.none()})},YF=(t,s,a,i,d)=>KF(t,s,i,(g,p)=>{const E=g===a-1?t.length-g*i:i,O=hh(p,d,0,E-1);return T.some({row:g,column:O})}),XF=(t,s,a,i,d)=>KF(t,s,i,(g,p)=>{const S=hh(g,d,0,a-1),O=S===a-1?t.length-S*i:i,F=Cl(p,0,O-1);return T.some({row:S,column:F})}),J8=(t,s,a,i)=>YF(t,s,a,i,1),zv=(t,s,a,i)=>YF(t,s,a,i,-1),m3=(t,s,a,i)=>XF(t,s,a,i,-1),Q8=(t,s,a,i)=>XF(t,s,a,i,1),f3=[Zt("selector"),et("execute",Hv),nl("onEscape"),et("captureTab",!1),T0()],tT=(t,s,a)=>{Jr(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},g3=(t,s)=>s.focusManager.get(t).bind(a=>Zu(a,s.selector)),eL=(t,s,a,i)=>g3(t,a).bind(d=>a.execute(t,s,d)),nT=t=>(s,a,i,d)=>Xu(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),JF=(t,s,a)=>a.captureTab?T.some(!0):T.none(),tL=(t,s,a)=>a.onEscape(t,s),QF=nT(zv),eN=nT(J8),nL=nT(m3),tN=nT(Q8),oT=J([Is(Jo(Rh),i3(QF,eN)),Is(Jo(Qs),l3(QF,eN)),Is(Jo(Fh),eT(nL)),Is(Jo(Rc),ZF(tN)),Is(Wl([Yu,Jo(rr)]),JF),Is(Wl([lc,Jo(rr)]),JF),Is(Jo(ei.concat(_a)),eL)]),oL=J([Is(Jo(Vl),tL),Is(Jo(ei),hb)]);var sL=Nh(f3,c3,oT,oL,()=>T.some(tT));const nN=(t,s,a,i,d)=>{const g=S=>As(S)==="button"&&Ie(S,"disabled")==="disabled",p=(S,E,O)=>d(S,E,i,0,O.length-1,O[E],F=>g(O[F])?p(S,F,O):T.from(O[F]));return Xu(t,a,s).bind(S=>{const E=S.index,O=S.candidates;return p(E,E,O)})},oN=(t,s,a,i)=>nN(t,s,a,i,(d,g,p,S,E,O,F)=>{const z=Cl(g+p,S,E);return z===d?T.from(O):F(z)}),Bh=(t,s,a,i)=>nN(t,s,a,i,(d,g,p,S,E,O,F)=>{const z=hh(g,p,S,E);return z===d?T.none():F(z)}),sN=[Zt("selector"),et("getInitial",T.none),et("execute",Hv),nl("onEscape"),et("executeOnMove",!1),et("allowVertical",!0),et("allowHorizontal",!0),et("cycles",!0)],rL=(t,s)=>s.focusManager.get(t).bind(a=>Zu(a,s.selector)),Yw=(t,s,a)=>rL(t,a).bind(i=>a.execute(t,s,i)),aL=(t,s,a)=>{s.getInitial(t).orThunk(()=>Jr(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},h3=(t,s,a)=>(a.cycles?Bh:oN)(t,a.selector,s,-1),p3=(t,s,a)=>(a.cycles?Bh:oN)(t,a.selector,s,1),b3=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?Yw(s,a,i):T.some(!0)),rN=(t,s,a)=>a.onEscape(t,s),aN=(t,s,a,i)=>{const d=[...a.allowHorizontal?Rh:[]].concat(a.allowVertical?Fh:[]),g=[...a.allowHorizontal?Qs:[]].concat(a.allowVertical?Rc:[]);return[Is(Jo(d),b3(i3(h3,p3))),Is(Jo(g),b3(l3(h3,p3))),Is(Jo(_a),Yw),Is(Jo(ei),Yw)]},cL=J([Is(Jo(ei),hb),Is(Jo(Vl),rN)]);var iL=Nh(sN,Ci.init,aN,cL,()=>T.some(aL));const sT=(t,s,a)=>T.from(t[s]).bind(i=>T.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),rT=(t,s,a,i)=>{const g=t[s].length,p=hh(a,i,0,g-1);return sT(t,s,p)},cN=(t,s,a,i)=>{const d=hh(a,i,0,t.length-1),g=t[d].length,p=Cl(s,0,g-1);return sT(t,d,p)},Xw=(t,s,a,i)=>{const g=t[s].length,p=Cl(a+i,0,g-1);return sT(t,s,p)},iN=(t,s,a,i)=>{const d=Cl(a+i,0,t.length-1),g=t[d].length,p=Cl(s,0,g-1);return sT(t,d,p)},lN=(t,s,a)=>rT(t,s,a,1),Al=(t,s,a)=>rT(t,s,a,-1),lL=(t,s,a)=>cN(t,a,s,-1),uN=(t,s,a)=>cN(t,a,s,1),dN=(t,s,a)=>Xw(t,s,a,-1),uL=(t,s,a)=>Xw(t,s,a,1),mN=(t,s,a)=>iN(t,a,s,-1),fN=(t,s,a)=>iN(t,a,s,1),dL=[wd("selectors",[Zt("row"),Zt("cell")]),et("cycles",!0),et("previousSelector",T.none),et("execute",Hv)],mL=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Jr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},fL=(t,s,a)=>Pi(t.element).bind(i=>a.execute(t,s,i)),gL=(t,s)=>Ne(t,a=>Hc(a,s.selectors.cell)),Jw=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Zu(i,d.selectors.row).bind(p=>{const S=Hc(p,d.selectors.cell);return qF(S,i).bind(E=>{const O=Hc(a,d.selectors.row);return qF(O,p).bind(F=>{const z=gL(O,d);return g(z,F,E).map(X=>X.cell)})})})},gN=Jw(Al,dN),hN=Jw(lN,uL),pN=Jw(lL,mN),bN=Jw(uN,fN),vN=J([Is(Jo(Rh),i3(gN,hN)),Is(Jo(Qs),l3(gN,hN)),Is(Jo(Fh),eT(pN)),Is(Jo(Rc),ZF(bN)),Is(Jo(ei.concat(_a)),fL)]),hL=J([Is(Jo(ei),hb)]);var pL=Nh(dL,Ci.init,vN,hL,()=>T.some(mL));const bL=[Zt("selector"),et("execute",Hv),et("moveOnTab",!1)],yN=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),CN=(t,s,a)=>{Jr(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},v3=(t,s,a)=>Bh(t,a.selector,s,-1),Mh=(t,s,a)=>Bh(t,a.selector,s,1),wN=(t,s,a,i)=>a.moveOnTab?d3(v3)(t,s,a,i):T.none(),SN=(t,s,a,i)=>a.moveOnTab?d3(Mh)(t,s,a,i):T.none(),xN=J([Is(Jo(Fh),d3(v3)),Is(Jo(Rc),d3(Mh)),Is(Wl([Yu,Jo(rr)]),wN),Is(Wl([lc,Jo(rr)]),SN),Is(Jo(_a),yN),Is(Jo(ei),yN)]),vL=J([Is(Jo(ei),hb)]);var Vv=Nh(bL,Ci.init,xN,vL,()=>T.some(CN));const yL=[nl("onSpace"),nl("onEnter"),nl("onShiftEnter"),nl("onLeft"),nl("onRight"),nl("onTab"),nl("onShiftTab"),nl("onUp"),nl("onDown"),nl("onEscape"),et("stopSpaceKeyup",!1),$s("focusIn")],CL=(t,s,a)=>[Is(Jo(ei),a.onSpace),Is(Wl([lc,Jo(_a)]),a.onEnter),Is(Wl([Yu,Jo(_a)]),a.onShiftEnter),Is(Wl([Yu,Jo(rr)]),a.onShiftTab),Is(Wl([lc,Jo(rr)]),a.onTab),Is(Jo(Fh),a.onUp),Is(Jo(Rc),a.onDown),Is(Jo(Rh),a.onLeft),Is(Jo(Qs),a.onRight),Is(Jo(ei),a.onSpace)],EN=(t,s,a)=>[...a.stopSpaceKeyup?[Is(Jo(ei),hb)]:[],Is(Jo(Vl),a.onEscape)];var wL=Nh(yL,Ci.init,CL,EN,t=>t.focusIn);const SL=G8.schema(),xL=q8.schema(),TN=iL.schema(),y3=sL.schema(),C3=pL.schema(),EL=UF.schema(),Vp=Vv.schema(),AN=wL.schema();var kN=Object.freeze({__proto__:null,acyclic:SL,cyclic:xL,flow:TN,flatgrid:y3,matrix:C3,execution:EL,menu:Vp,special:AN});const TL=t=>gr(t,"setGridSize"),yo=ix({branchKey:"mode",branches:kN,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{TL(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Y8}),Uv=(t,s)=>{mg(()=>{xw(t,s,()=>Ne(s,t.getSystem().build))},t.element)},Wv=(t,s)=>{mg(()=>{hv(t,s,()=>Bi(t.element,s,t.getSystem().buildOrPatch))},t.element)},_N=(t,s,a,i)=>{tb(s);const d=VC(t.element,a,i,t.getSystem().buildOrPatch);Sw(t,d),t.syncComponents()},Qw=(t,s,a)=>{const i=t.getSystem().build(a);DE(t,i,s)},Up=(t,s,a,i)=>{df(s),Qw(t,(d,g)=>Wg(d,g,a),i)},Wp=(t,s,a,i)=>(s.reuseDom?Wv:Uv)(t,i),AL=(t,s,a,i)=>{Qw(t,Wc,i)},kL=(t,s,a,i)=>{Qw(t,su,i)},DN=(t,s,a,i)=>{const d=Em(t);I(d,p=>ks(i.element,p.element)).each(df)},Em=(t,s)=>t.components(),aT=(t,s,a,i,d)=>{const g=Em(t);return T.from(g[i]).map(p=>(d.fold(()=>df(p),S=>{(s.reuseDom?_N:Up)(t,p,i,S)}),p))};var ON=Object.freeze({__proto__:null,append:AL,prepend:kL,remove:DN,replaceAt:aT,replaceBy:(t,s,a,i,d)=>{const g=Em(t);return G(g,i).bind(p=>aT(t,s,a,p,d))},set:Wp,contents:Em});const Uo=Ic({fields:[Ta("reuseDom",!0)],name:"replacing",apis:ON}),RN=(t,s)=>{const a=Mr(s);return Ic({fields:[Zt("enabled")],name:t,active:{events:J(a)}})},ts=(t,s)=>{const a=RN(t,s);return{key:t,value:{config:{},me:a,configAsRaw:J({}),initialConfig:{},state:Ci}}},w3=(t,s)=>{s.ignore||(Pl(t.element),s.onFocus(t))};var _L=Object.freeze({__proto__:null,focus:w3,blur:(t,s)=>{s.ignore||W0(t.element)},isFocused:t=>U1(t.element)}),cT=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return gl(a)},events:t=>Mr([Gt(Ed(),(s,a)=>{w3(s,t),a.stop()})].concat(t.stopMousedown?[Gt(ya(),(s,a)=>{a.event.prevent()})]:[]))}),NN=[Es("onFocus"),et("stopMousedown",!1),et("ignore",!1)];const $o=Ic({fields:NN,name:"focusing",active:cT,apis:_L}),BN=t=>({init:()=>{const a=oo(t);return{get:()=>a.get(),set:S=>a.set(S),clear:()=>a.set(t),readState:()=>a.get()}}}),MN=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},PN=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Pr(t.element,i):ma(t.element,i)})},Zv=(t,s,a,i)=>{const d=a.get();a.set(i),PN(t,s,a),MN(t,s,a),d!==i&&s.onToggled(t,i)},$N=(t,s,a)=>{Zv(t,s,a,!a.get())},x3=(t,s,a)=>{Zv(t,s,a,!0)},DL=(t,s,a)=>{Zv(t,s,a,!1)},OL=(t,s,a)=>a.get(),IN=(t,s,a)=>{Zv(t,s,a,s.selected)};var RL=Object.freeze({__proto__:null,onLoad:IN,toggle:$N,isOn:OL,on:x3,off:DL,set:Zv}),NL=Object.freeze({__proto__:null,exhibit:()=>gl({}),events:(t,s)=>{const a=F1(t,s,$N),i=gC(t,s,IN);return Mr(le([t.toggleOnExecute?[a]:[],[i]]))}});const LN=(t,s,a)=>{q(t.element,"aria-pressed",a),s.syncWithExpanded&&jv(t,s,a)},e2=(t,s,a)=>{q(t.element,"aria-selected",a)},BL=(t,s,a)=>{q(t.element,"aria-checked",a)},jv=(t,s,a)=>{q(t.element,"aria-expanded",a)};var E3=[et("selected",!1),$s("toggleClass"),et("toggleOnExecute",!0),Es("onToggled"),Qi("aria",{mode:"none"},sc("mode",{pressed:[et("syncWithExpanded",!1),hr("update",LN)],checked:[hr("update",BL)],expanded:[hr("update",jv)],selected:[hr("update",e2)],none:[hr("update",ie)]}))];const ds=Ic({fields:E3,name:"toggling",active:NL,apis:RL,state:BN(!1)}),T3=()=>{const t=(s,a)=>{a.stop(),Zf(s)};return[Gt(nh(),t),Gt(Td(),t),kd(du()),kd(ya())]},iT=t=>{const s=a=>Uu((i,d)=>{a(i),d.stop()});return Mr(le([t.map(s).toArray(),T3()]))},HN="alloy.item-hover",A3="alloy.item-focus",zN="alloy.item-toggled",k3=t=>{(Pi(t.element).isNone()||$o.isFocused(t))&&($o.isFocused(t)||$o.focus(t),wo(t,HN,{item:t}))},VN=t=>{wo(t,A3,{item:t})},ML=(t,s)=>{wo(t,zN,{item:t,state:s})},_3=J(HN),lT=J(A3),D3=J(zN),O3=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Yt),PL=(t,s)=>({aria:{mode:s?"selected":"checked"},...Lo(t,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{gt(t.onToggled)&&t.onToggled(a,i),ML(a,i)}}),$L=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:O3(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:yu.augment(t.itemBehaviours,[t.toggling.fold(ds.revoke,s=>ds.config(PL(s,t.role.exists(a=>a==="option")))),$o.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{VN(s)}}),yo.config({mode:"execution"}),Ln.config({store:{mode:"memory",initialValue:t.data}}),ts("item-type-events",[...T3(),Gt(fl(),k3),Gt(T1(),$o.focus)])]),components:t.components,eventOrder:t.eventOrder}),IL=[Zt("data"),Zt("components"),Zt("dom"),et("hasSubmenu",!1),$s("toggling"),$s("role"),yu.field("itemBehaviours",[ds,$o,yo,Ln]),et("ignoreFocus",!1),et("domModification",{}),hr("builder",$L),et("eventOrder",{})],LL=t=>({dom:t.dom,components:t.components,events:Mr([dC(T1())])}),UN=[Zt("dom"),Zt("components"),hr("builder",LL)],uT=J("item-widget"),R3=J([Qc({name:"widget",overrides:t=>({behaviours:hn([Ln.config({store:{mode:"manual",getValue:s=>t.data,setValue:ie}})])})})]),HL=t=>{const s=$v(uT(),t,R3()),a=WE(uT(),t,s.internals()),i=g=>mn(g,t,"widget").map(p=>(yo.focusIn(p),p)),d=(g,p)=>Ip(p.event.target)?T.none():(t.autofocus&&p.setSource(g.element),T.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Mr([Uu((g,p)=>{i(g).each(S=>{p.stop()})}),Gt(fl(),k3),Gt(T1(),(g,p)=>{t.autofocus?i(g):$o.focus(g)})]),behaviours:yu.augment(t.widgetBehaviours,[Ln.config({store:{mode:"memory",initialValue:t.data}}),$o.config({ignore:t.ignoreFocus,onFocus:g=>{VN(g)}}),yo.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:jr(),onLeft:d,onRight:d,onEscape:(g,p)=>!$o.isFocused(g)&&!t.autofocus?($o.focus(g),T.some(!0)):(t.autofocus&&p.setSource(g.element),T.none())})])}},zL=[Zt("uid"),Zt("data"),Zt("components"),Zt("dom"),et("autofocus",!1),et("ignoreFocus",!1),yu.field("widgetBehaviours",[Ln,$o,yo]),et("domModification",{}),mb(R3()),hr("builder",HL)],VL=sc("type",{widget:zL,item:IL,separator:UN}),UL=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),WL=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),WN=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),ZL=J([Pv({factory:{sketch:t=>{const s=jc("menu.spec item",VL,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Zo(s,"uid")?s:{...s,uid:H1("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),jL=J([Ka("role"),Zt("value"),Zt("items"),Zt("dom"),Zt("components"),et("eventOrder",{}),Dc("menuBehaviours",[ao,Ln,Fs,yo]),Qi("movement",{mode:"menu",moveOnTab:!0},sc("mode",{grid:[T0(),hr("config",UL)],matrix:[hr("config",WL),Zt("rowSelector"),et("previousSelector",T.none)],menu:[et("moveOnTab",!0),hr("config",WN)]})),FC(),et("fakeFocus",!1),et("focusManager",Lv()),Es("onHighlight"),Es("onDehighlight"),et("showMenuRole",!0)]),ZN=J("alloy.menu-focus"),GL=(t,s)=>{const a=Hc(t.element,'[role="menuitemradio"][aria-checked="true"]');dt(a,i=>{ks(i,s.element)||t.getSystem().getByDom(i).each(d=>{ds.off(d)})})},qL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Oc(t.menuBehaviours,[ao.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ln.config({store:{mode:"memory",initialValue:t.value}}),Fs.config({find:T.some}),yo.config(t.movement.config(t,t.movement))]),events:Mr([Gt(lT(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(S=>{ao.highlight(d,S),g.stop(),wo(d,ZN(),{menu:d,item:S})})}),Gt(_3(),(d,g)=>{const p=g.event.item;ao.highlight(d,p)}),Gt(D3(),(d,g)=>{const{item:p,state:S}=g.event;S&&Ie(p.element,"role")==="menuitemradio"&&GL(d,p)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Nd=wi({name:"Menu",configFields:jL(),partFields:ZL(),factory:qL}),KL=t=>Ds(t,(s,a)=>({k:s,v:a})),jN=(t,s,a,i)=>on(a,i).bind(d=>on(t,d).bind(g=>{const p=jN(t,s,a,g);return T.some([g].concat(p))})).getOr([]),pb=(t,s)=>{const a={};po(t,(p,S)=>{dt(p,E=>{a[E]=S})});const i=s,d=KL(s),g=ro(d,(p,S)=>[S].concat(jN(a,i,d,S)));return ro(a,p=>on(g,p).getOr([p]))},GN=()=>{const t=oo({}),s=oo({}),a=oo({}),i=Ys(),d=oo({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),S=(Bt,_n)=>{s.set({...s.get(),[Bt]:{type:"prepared",menu:_n}})},E=(Bt,_n,Hn,$t)=>{i.set(Bt),t.set(Hn),s.set(_n),d.set($t);const Kn=pb($t,Hn);a.set(Kn)},O=Bt=>xo(t.get(),(_n,Hn)=>_n===Bt),F=(Bt,_n,Hn)=>pe(Bt).bind($t=>O(Bt).bind(Kn=>_n(Kn).map(Tn=>({triggeredMenu:$t,triggeringItem:Tn,triggeringPath:Hn})))),z=(Bt,_n)=>{const Hn=Ct(Oe(Bt).toArray(),$t=>pe($t).isSome());return on(a.get(),Bt).bind($t=>{const Kn=He(Hn.concat($t)),Tn=L(Kn,(eo,vs)=>F(eo,_n,Kn.slice(0,vs+1)).fold(()=>tr(i.get(),eo)?[]:[T.none()],Hr=>[T.some(Hr)]));return ys(Tn)})},X=Bt=>on(t.get(),Bt).map(_n=>{const Hn=on(a.get(),Bt).getOr([]);return[_n].concat(Hn)}),ee=Bt=>on(a.get(),Bt).bind(_n=>_n.length>1?T.some(_n.slice(1)):T.none()),me=Bt=>on(a.get(),Bt),pe=Bt=>Ye(Bt).bind(qN),Ye=Bt=>on(s.get(),Bt),Oe=Bt=>on(t.get(),Bt);return{setMenuBuilt:S,setContents:E,expand:X,refresh:me,collapse:ee,lookupMenu:Ye,lookupItem:Oe,otherMenus:Bt=>{const _n=d.get();return ke(sn(_n),Bt)},getPrimary:()=>i.get().bind(pe),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:z}},qN=t=>t.type==="prepared"?T.some(t.menu):T.none(),Ph={init:GN,extractPreparedMenu:qN},KN=Vn("tiered-menu-item-highlight"),YN=Vn("tiered-menu-item-dehighlight");var Pa;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Pa||(Pa={}));const XN=(t,s)=>{const a=Ys(),i=(ln,Rn,Io)=>ro(Io,(Do,ho)=>{const Ko=()=>Nd.sketch({...Do,value:ho,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(wr,Ks)=>{wo(wr,KN,{menuComp:wr,itemComp:Ks})},onDehighlight:(wr,Ks)=>{wo(wr,YN,{menuComp:wr,itemComp:Ks})},focusManager:t.fakeFocus?QE():Lv()});return ho===Rn?{type:"prepared",menu:ln.getSystem().build(Ko())}:{type:"notbuilt",nbMenu:Ko}}),d=Ph.init(),g=ln=>{const Rn=i(ln,t.data.primary,t.data.menus),Io=E();return d.setContents(t.data.primary,Rn,t.data.expansions,Io),d.getPrimary()},p=ln=>Ln.getValue(ln).value,S=(ln,Rn,Io)=>Xt(Rn,Do=>{if(!Do.getSystem().isConnected())return T.none();const ho=ao.getCandidates(Do);return I(ho,Ko=>p(Ko)===Io)}),E=ln=>ro(t.data.menus,(Rn,Io)=>L(Rn.items,Do=>Do.type==="separator"?[]:[Do.data.value])),O=ao.highlight,F=(ln,Rn)=>{O(ln,Rn),ao.getHighlighted(Rn).orThunk(()=>ao.getFirst(Rn)).each(Io=>{t.fakeFocus?ao.highlight(Rn,Io):D1(ln,Io.element,T1())})},z=(ln,Rn)=>_r(Ne(Rn,Io=>ln.lookupMenu(Io).bind(Do=>Do.type==="prepared"?T.some(Do.menu):T.none()))),X=(ln,Rn,Io)=>{const Do=z(Rn,Rn.otherMenus(Io));dt(Do,ho=>{bl(ho.element,[t.markers.backgroundMenu]),t.stayInDom||Uo.remove(ln,ho)})},ee=ln=>a.get().getOrThunk(()=>{const Rn={},Io=Hc(ln.element,`.${t.markers.item}`),Do=Ct(Io,ho=>Ie(ho,"aria-haspopup")==="true");return dt(Do,ho=>{ln.getSystem().getByDom(ho).each(Ko=>{const wr=p(Ko);Rn[wr]=Ko})}),a.set(Rn),Rn}),me=(ln,Rn)=>{const Io=ee(ln);po(Io,(Do,ho)=>{const Ko=Dt(Rn,ho);q(Do.element,"aria-expanded",Ko)})},pe=(ln,Rn,Io)=>T.from(Io[0]).bind(Do=>Rn.lookupMenu(Do).bind(ho=>{if(ho.type==="notbuilt")return T.none();{const Ko=ho.menu,wr=z(Rn,Io.slice(1));return dt(wr,Ks=>{Pr(Ks.element,t.markers.backgroundMenu)}),$n(Ko.element)||Uo.append(ln,Ml(Ko)),bl(Ko.element,[t.markers.backgroundMenu]),F(ln,Ko),X(ln,Rn,Io),T.some(Ko)}}));let Ye;(function(ln){ln[ln.HighlightSubmenu=0]="HighlightSubmenu",ln[ln.HighlightParent=1]="HighlightParent"})(Ye||(Ye={}));const Oe=(ln,Rn,Io)=>{if(Io.type==="notbuilt"){const Do=ln.getSystem().build(Io.nbMenu());return d.setMenuBuilt(Rn,Do),Do}else return Io.menu},Ue=(ln,Rn,Io=Ye.HighlightSubmenu)=>{if(Rn.hasConfigured(l)&&l.isDisabled(Rn))return T.some(Rn);{const Do=p(Rn);return d.expand(Do).bind(ho=>(me(ln,ho),T.from(ho[0]).bind(Ko=>d.lookupMenu(Ko).bind(wr=>{const Ks=Oe(ln,Ko,wr);return $n(Ks.element)||Uo.append(ln,Ml(Ks)),t.onOpenSubmenu(ln,Rn,Ks,He(ho)),Io===Ye.HighlightSubmenu?(ao.highlightFirst(Ks),pe(ln,d,ho)):(ao.dehighlightAll(Ks),T.some(Rn))}))))}},We=(ln,Rn)=>{const Io=p(Rn);return d.collapse(Io).bind(Do=>(me(ln,Do),pe(ln,d,Do).map(ho=>(t.onCollapseMenu(ln,Rn,ho),ho))))},Ut=(ln,Rn)=>{const Io=p(Rn);return d.refresh(Io).bind(Do=>(me(ln,Do),pe(ln,d,Do)))},Bt=(ln,Rn)=>Ip(Rn.element)?T.none():Ue(ln,Rn,Ye.HighlightSubmenu),_n=(ln,Rn)=>Ip(Rn.element)?T.none():We(ln,Rn),Hn=(ln,Rn)=>We(ln,Rn).orThunk(()=>t.onEscape(ln,Rn).map(()=>ln)),$t=ln=>(Rn,Io)=>Zu(Io.getSource(),`.${t.markers.item}`).bind(Do=>Rn.getSystem().getByDom(Do).toOptional().bind(ho=>ln(Rn,ho).map(je))),Kn=Mr([Gt(ZN(),(ln,Rn)=>{const Io=Rn.event.item;d.lookupItem(p(Io)).each(()=>{const Do=Rn.event.menu;ao.highlight(ln,Do);const ho=p(Rn.event.item);d.refresh(ho).each(Ko=>X(ln,d,Ko))})}),Uu((ln,Rn)=>{const Io=Rn.event.target;ln.getSystem().getByDom(Io).each(Do=>{p(Do).indexOf("collapse-item")===0&&We(ln,Do),Ue(ln,Do,Ye.HighlightSubmenu).fold(()=>{t.onExecute(ln,Do)},ie)})}),Zr((ln,Rn)=>{g(ln).each(Io=>{Uo.append(ln,Ml(Io)),t.onOpenMenu(ln,Io),t.highlightOnOpen===Pa.HighlightMenuAndItem?F(ln,Io):t.highlightOnOpen===Pa.HighlightJustMenu&&O(ln,Io)})}),Gt(KN,(ln,Rn)=>{t.onHighlightItem(ln,Rn.event.menuComp,Rn.event.itemComp)}),Gt(YN,(ln,Rn)=>{t.onDehighlightItem(ln,Rn.event.menuComp,Rn.event.itemComp)}),...t.navigateOnHover?[Gt(_3(),(ln,Rn)=>{const Io=Rn.event.item;Ut(ln,Io),Ue(ln,Io,Ye.HighlightParent),t.onHover(ln,Io)})]:[]]),Tn=ln=>ao.getHighlighted(ln).bind(ao.getHighlighted),eo=ln=>{Tn(ln).each(Rn=>{We(ln,Rn)})},vs=ln=>{d.getPrimary().each(Rn=>{F(ln,Rn)})},Hr=ln=>T.from(ln.components()[0]).filter(Rn=>Ie(Rn.element,"role")==="menu"),Jn={collapseMenu:eo,highlightPrimary:vs,repositionMenus:ln=>{d.getPrimary().bind(Io=>Tn(ln).bind(Do=>{const ho=p(Do),Ko=zr(d.getMenus()),wr=_r(Ne(Ko,Ph.extractPreparedMenu));return d.getTriggeringPath(ho,Ks=>S(ln,wr,Ks))}).map(Do=>({primary:Io,triggeringPath:Do}))).fold(()=>{Hr(ln).each(Io=>{t.onRepositionMenu(ln,Io,[])})},({primary:Io,triggeringPath:Do})=>{t.onRepositionMenu(ln,Io,Do)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Oc(t.tmenuBehaviours,[yo.config({mode:"special",onRight:$t(Bt),onLeft:$t(_n),onEscape:$t(Hn),focusIn:(ln,Rn)=>{d.getPrimary().each(Io=>{D1(ln,Io.element,T1())})}}),ao.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Fs.config({find:ln=>ao.getHighlighted(ln)}),Uo.config({})]),eventOrder:t.eventOrder,apis:Jn,events:Kn}},JN=J("collapse-item"),QN=(t,s,a)=>({primary:t,menus:s,expansions:a}),YL=(t,s)=>({primary:t,menus:ns(t,s),expansions:{}}),dT=t=>({value:Vn(JN()),meta:{text:t}}),Zp=Tl({name:"TieredMenu",configFields:[E0("onExecute"),E0("onEscape"),pm("onOpenMenu"),pm("onOpenSubmenu"),Es("onRepositionMenu"),Es("onCollapseMenu"),et("highlightOnOpen",Pa.HighlightMenuAndItem),wd("data",[Zt("primary"),Zt("menus"),Zt("expansions")]),et("fakeFocus",!1),Es("onHighlightItem"),Es("onDehighlightItem"),Es("onHover"),vp(),Zt("dom"),et("navigateOnHover",!0),et("stayInDom",!1),Dc("tmenuBehaviours",[yo,ao,Fs,Uo]),et("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:XN,extraApis:{tieredData:QN,singleData:YL,collapseItem:dT}}),XL=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>dg(),onRtl:()=>U0()}}:{},S=O=>O.length===2,E=O=>S(O)?p:{};return Zp.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Rs.close(s),t.onEscape.map(O=>O(s)),T.some(!0)),onExecute:()=>T.some(!0),onOpenMenu:(O,F)=>{ui.positionWithinBounds(g().getOrDie(),F,a,d())},onOpenSubmenu:(O,F,z,X)=>{const ee=g().getOrDie();ui.position(ee,z,{anchor:{type:"submenu",item:F,...E(X)}})},onRepositionMenu:(O,F,z)=>{const X=g().getOrDie();ui.positionWithinBounds(X,F,a,d()),dt(z,ee=>{const me=E(ee.triggeringPath);ui.position(X,ee.triggeredMenu,{anchor:{type:"submenu",item:ee.triggeringItem,...me}})})}})},JL=(t,s)=>{const a=(X,ee)=>t.getRelated(X).exists(pe=>bh(pe,ee)),i=(X,ee)=>{Rs.setContent(X,ee)},d=(X,ee,me)=>{const pe=T.none;g(X,ee,me,pe)},g=(X,ee,me,pe)=>{const Ye=t.lazySink(X).getOrDie();Rs.openWhileCloaked(X,ee,()=>ui.positionWithinBounds(Ye,X,me,pe())),Ln.setValue(X,T.some({mode:"position",config:me,getBounds:pe}))},p=(X,ee,me)=>{S(X,ee,me,T.none)},S=(X,ee,me,pe)=>{const Ye=XL(t,X,ee,me,pe);Rs.open(X,Ye),Ln.setValue(X,T.some({mode:"menu",menu:Ye}))},E=X=>{Rs.isOpen(X)&&(Ln.setValue(X,T.none()),Rs.close(X))},O=X=>Rs.getState(X),F=X=>{Rs.isOpen(X)&&Ln.getValue(X).each(ee=>{switch(ee.mode){case"menu":Rs.getState(X).each(Zp.repositionMenus);break;case"position":const me=t.lazySink(X).getOrDie();ui.positionWithinBounds(me,X,ee.config,ee.getBounds());break}})},z={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:S,hide:E,getContent:O,reposition:F,isOpen:Rs.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Oc(t.inlineBehaviours,[Rs.config({isPartOf:(X,ee,me)=>bh(ee,me)||a(X,me),getAttachPoint:X=>t.lazySink(X).getOrDie(),onOpen:X=>{t.onShow(X)},onClose:X=>{t.onHide(X)}}),Ln.config({store:{mode:"memory",initialValue:T.none()}}),ol.config({channels:{...wg({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(X=>({fireEventInstead:{event:X.event}})).getOr({})}),...Dw({...t.fireRepositionEventInstead.map(X=>({fireEventInstead:{event:X.event}})).getOr({}),doReposition:F})}})]),eventOrder:t.eventOrder,apis:z}},Qr=Tl({name:"InlineView",configFields:[Zt("lazySink"),Es("onShow"),Es("onHide"),Lu("onEscape"),Dc("inlineBehaviours",[Rs,Ln,ol]),Or("fireDismissalEventInstead",[et("event",Uf())]),Or("fireRepositionEventInstead",[et("event",rC())]),et("getRelated",T.none),et("isExtraPart",Ve),et("eventOrder",T.none)],factory:JL,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Gv=tinymce.util.Tools.resolve("tinymce.util.Delay"),bb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),eB=tinymce.util.Tools.resolve("tinymce.EditorManager"),vb=tinymce.util.Tools.resolve("tinymce.Env"),Bd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Bd||(Bd={}));var yb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(yb||(yb={}));const Ar=t=>s=>s.options.get(t),t2=t=>s=>T.from(t(s)),tB=t=>{const s=vb.deviceType.isPhone(),a=vb.deviceType.isTablet()||s,i=t.options.register,d=p=>Q(p)||p===!1,g=p=>Q(p)||st(p);i("skin",{processor:p=>Q(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:bb.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>Q(p)||yt(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>yt(p)||Q(p)||Xe(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),nt(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:yb.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||yt(p),default:!vb.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},nB=Ar("readonly"),n2=Ar("height"),F3=Ar("width"),Cb=t2(Ar("min_width")),qv=t2(Ar("min_height")),o2=t2(Ar("max_width")),mT=t2(Ar("max_height")),oB=t2(Ar("style_formats")),sB=Ar("style_formats_merge"),rB=Ar("style_formats_autohide"),aB=Ar("content_langs"),fT=Ar("removed_menuitems"),wb=Ar("toolbar_mode"),N3=Ar("toolbar_groups"),s2=Ar("toolbar_location"),QL=Ar("fixed_toolbar_container"),cB=Ar("fixed_toolbar_container_target"),iB=Ar("toolbar_persist"),lB=Ar("toolbar_sticky_offset"),uB=Ar("menubar"),r2=Ar("toolbar"),dB=Ar("file_picker_callback"),mB=Ar("file_picker_validator_handler"),gT=Ar("font_size_input_default_unit"),B3=Ar("file_picker_types"),M3=Ar("typeahead_urls"),fB=Ar("anchor_top"),hT=Ar("anchor_bottom"),gB=Ar("draggable_modal"),hB=Ar("statusbar"),pB=Ar("elementpath"),P3=Ar("branding"),bB=Ar("resize"),$3=Ar("paste_as_text"),pT=Ar("sidebar_show"),vB=Ar("promotion"),a2=Ar("help_accessibility"),yB=Ar("default_font_stack"),I3=t=>t.options.get("skin")===!1,bT=t=>t.options.get("menubar")!==!1,L3=t=>{const s=t.options.get("skin_url");if(I3(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return eB.baseURL+"/skins/ui/"+a}},vT=t=>T.from(t.options.get("skin_url")),CB=t=>t.options.get("line_height_formats").split(" "),c2=t=>{const s=r2(t),a=Q(s),i=Xe(s)&&s.length>0;return!i2(t)&&(i||a||s===!0)},H3=t=>{const s=nt(9,i=>t.options.get("toolbar"+(i+1))),a=Ct(s,Q);return Qn(a.length>0,a)},i2=t=>H3(t).fold(()=>{const s=r2(t);return Qe(s,Q)&&s.length>0},je),l2=t=>s2(t)===yb.bottom,jp=t=>{var s;if(!t.inline)return T.none();const a=(s=QL(t))!==null&&s!==void 0?s:"";if(a.length>0)return Jr(es(),a);const i=cB(t);return Lt(i)?T.some(Le.fromDom(i)):T.none()},Kv=t=>t.inline&&jp(t).isSome(),z3=t=>jp(t).getOrThunk(()=>Za(Ur(Le.fromDom(t.getElement())))),u2=t=>t.inline&&!bT(t)&&!c2(t)&&!i2(t),Sb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Kv(t)&&!u2(t),Gp=t=>!Kv(t)&&t.options.get("ui_mode")==="split",wB=t=>{const s=t.options.get("menu");return ro(s,a=>({...a,items:a.items}))};var SB=Object.freeze({__proto__:null,get ToolbarMode(){return Bd},get ToolbarLocation(){return yb},register:tB,getSkinUrl:L3,getSkinUrlOption:vT,isReadOnly:nB,isSkinDisabled:I3,getHeightOption:n2,getWidthOption:F3,getMinWidthOption:Cb,getMinHeightOption:qv,getMaxWidthOption:o2,getMaxHeightOption:mT,getUserStyleFormats:oB,shouldMergeStyleFormats:sB,shouldAutoHideStyleFormats:rB,getLineHeightFormats:CB,getContentLanguages:aB,getRemovedMenuItems:fT,isMenubarEnabled:bT,isMultipleToolbars:i2,isToolbarEnabled:c2,isToolbarPersist:iB,getMultipleToolbarsOption:H3,getUiContainer:z3,useFixedContainer:Kv,isSplitUiMode:Gp,getToolbarMode:wb,isDraggableModal:gB,isDistractionFree:u2,isStickyToolbar:Sb,getStickyToolbarOffset:lB,getToolbarLocation:s2,isToolbarLocationBottom:l2,getToolbarGroups:N3,getMenus:wB,getMenubar:uB,getToolbar:r2,getFilePickerCallback:dB,getFilePickerTypes:B3,useTypeaheadUrls:M3,getAnchorTop:fB,getAnchorBottom:hT,getFilePickerValidatorHandler:mB,getFontSizeInputDefaultUnit:gT,useStatusBar:hB,useElementPath:pB,promotionEnabled:vB,useBranding:P3,getResize:bB,getPasteAsText:$3,getSidebarShow:pT,useHelpAccessibility:a2,getDefaultFontStack:yB});const e7=["visible","hidden","clip"],V3=t=>lr(t).length>0&&!Dt(e7,t),U3=t=>{if(la(t)){const s=Os(t,"overflow-x"),a=Os(t,"overflow-y");return V3(s)||V3(a)}else return!1},W3=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),t7=(t,s)=>{const a=Op(s,U3),i=a.length===0?Se(s).map(Ge).map(d=>Op(d,U3)).getOr([]):a;return wn(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>W3(t)}))},$h=(t,s)=>Gp(t)?t7(t,s):T.none(),xb=t=>{const s=[...Ne(t.others,Yr),Ba()];return t.isFullscreen()?Ba():Gg(Yr(t.element),s)},di=Tl({name:"Button",factory:t=>{const s=iT(t.action),a=t.dom.tag,i=g=>on(t.dom,"attributes").bind(p=>on(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(S=>({role:S})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:yu.augment(t.buttonBehaviours,[$o.config({}),yo.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[et("uid",void 0),Zt("dom"),et("components",[]),yu.field("buttonBehaviours",[$o,yo]),$s("action"),$s("role"),et("eventOrder",{})]}),n7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return tt(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},Z3=t=>Array.prototype.slice.call(t.dom.classList,0),pf=t=>{const s=Le.fromHtml(t),a=Na(s),i=n7(s),d=Z3(s),g=a.length===0?{}:{innerHtml:Wu(s)};return{tag:As(s),classes:d,attributes:i,...g}},qs=t=>{const s=J_(t)&&gr(t,"uid")?t.uid:H1("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var o7=Object.freeze({__proto__:null,exhibit:(t,s)=>gl({attributes:js([{key:s.tabAttr,value:"true"}])})}),s7=[et("tabAttr","data-alloy-tabstop")];const Ir=Ic({fields:s7,name:"tabstopping",active:o7}),EB=Vn("tooltip.exclusive"),d2=Vn("tooltip.show"),m2=Vn("tooltip.hide"),f2=Vn("tooltip.immediateHide"),g2=Vn("tooltip.immediateShow"),TB=(t,s,a)=>{t.getSystem().broadcastOn([EB],{})};var r7=Object.freeze({__proto__:null,hideAllExclusive:TB,immediateOpenClose:(t,s,a,i)=>rs(t,i?g2:f2),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Uo.set(d,i)})},setEnabled:(t,s,a,i)=>a.setEnabled(i)}),j3=Object.freeze({__proto__:null,events:(t,s)=>{const a=p=>{s.getTooltip().each(S=>{S.getSystem().isConnected()&&(df(S),t.onHide(p,S),s.clearTooltip())}),s.clearTimer()},i=p=>{if(!s.isShowing()&&s.isEnabled()){TB(p);const S=t.lazySink(p).getOrDie(),E=p.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Mr(t.mode==="normal"?[Gt(fl(),O=>{rs(p,d2)}),Gt(Xm(),O=>{rs(p,m2)})]:[]),behaviours:hn([Uo.config({})])});s.setTooltip(E),Gu(S,E),t.onShow(p,E),ui.position(S,E,{anchor:t.anchor(p)})}},d=p=>{s.getTooltip().each(S=>{const E=t.lazySink(p).getOrDie();ui.position(E,S,{anchor:t.anchor(p)})})},g=()=>{switch(t.mode){case"normal":return[Gt(Sd(),p=>{rs(p,g2)}),Gt(Vf(),p=>{rs(p,f2)}),Gt(fl(),p=>{rs(p,d2)}),Gt(Xm(),p=>{rs(p,m2)})];case"follow-highlight":return[Gt(Wf(),(p,S)=>{rs(p,d2)}),Gt(rh(),p=>{rs(p,m2)})];case"children-normal":return[Gt(Sd(),(p,S)=>{Pi(p.element).each(E=>{Fr(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{rs(p,g2)},O=>{s.isShowing()&&(t.onShow(p,O),d(p))})})}),Gt(Vf(),p=>{Pi(p.element).fold(()=>{rs(p,f2)},ie)}),Gt(fl(),p=>{Jr(p.element,"[data-mce-tooltip]:hover").each(S=>{s.getTooltip().fold(()=>{rs(p,d2)},E=>{s.isShowing()&&(t.onShow(p,E),d(p))})})}),Gt(Xm(),p=>{Jr(p.element,"[data-mce-tooltip]:hover").fold(()=>{rs(p,m2)},ie)})];default:return[Gt(Sd(),(p,S)=>{Pi(p.element).each(E=>{Fr(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{rs(p,g2)},O=>{s.isShowing()&&(t.onShow(p,O),d(p))})})}),Gt(Vf(),p=>{Pi(p.element).fold(()=>{rs(p,f2)},ie)})]}};return Mr(le([[mC(p=>{t.onSetup(p)}),Gt(d2,p=>{s.resetTimer(()=>{i(p)},t.delayForShow())}),Gt(m2,p=>{s.resetTimer(()=>{a(p)},t.delayForHide())}),Gt(g2,p=>{s.resetTimer(()=>{i(p)},0)}),Gt(f2,p=>{s.resetTimer(()=>{a(p)},0)}),Gt(mu(),(p,S)=>{const E=S;E.universal||Dt(E.channels,EB)&&a(p)}),fm(p=>{a(p)})],g()]))}}),a7=[Zt("lazySink"),Zt("tooltipDom"),et("exclusive",!0),et("tooltipComponents",[]),da("delayForShow",J(300)),da("delayForHide",J(300)),da("onSetup",ie),el("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),et("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:J([ic,cc,ac,sr,ka,Yc]),onRtl:J([ic,cc,ac,sr,ka,Yc])},bubble:ju(0,-2,{})})),Es("onHide"),Es("onShow")],c7=Object.freeze({__proto__:null,init:()=>{const t=oo(!0),s=Ys(),a=Ys(),i=()=>{s.on(clearTimeout)},d=(p,S)=>{i(),s.set(setTimeout(p,S))},g=J("not-implemented");return hl({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:p=>t.set(p)})}});const Da=Ic({fields:a7,name:"tooltipping",active:j3,state:c7,apis:r7}),{entries:AB,setPrototypeOf:kB,isFrozen:i7,getPrototypeOf:l7,getOwnPropertyDescriptor:u7}=Object;let{freeze:wu,seal:Md,create:d7}=Object,{apply:G3,construct:q3}=typeof Reflect<"u"&&Reflect;G3||(G3=function(s,a,i){return s.apply(a,i)}),wu||(wu=function(s){return s}),Md||(Md=function(s){return s}),q3||(q3=function(s,a){return new s(...a)});const m7=Tm(Array.prototype.forEach),f7=Tm(Array.prototype.pop),h2=Tm(Array.prototype.push),CT=Tm(String.prototype.toLowerCase),K3=Tm(String.prototype.toString),g7=Tm(String.prototype.match),bf=Tm(String.prototype.replace),h7=Tm(String.prototype.indexOf),p7=Tm(String.prototype.trim),Pd=Tm(RegExp.prototype.test),qp=Y3(TypeError);function Tm(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return G3(t,s,i)}}function Y3(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return q3(t,a)}}function vr(t,s,a){var i;a=(i=a)!==null&&i!==void 0?i:CT,kB&&kB(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const p=a(g);p!==g&&(i7(s)||(s[d]=p),g=p)}t[g]=!0}return t}function Yv(t){const s=d7(null);for(const[a,i]of AB(t))s[a]=i;return s}function wT(t,s){for(;t!==null;){const i=u7(t,s);if(i){if(i.get)return Tm(i.get);if(typeof i.value=="function")return Tm(i.value)}t=l7(t)}function a(i){return console.warn("fallback value for",i),null}return a}const X3=wu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),J3=wu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),p2=wu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Q3=wu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ST=wu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),eD=wu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),b2=wu(["#text"]),tD=wu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Am=wu(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xT=wu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ET=wu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b7=Md(/\{\{[\w\W]*|[\w\W]*\}\}/gm),v7=Md(/<%[\w\W]*|[\w\W]*%>/gm),y7=Md(/\${[\w\W]*}/gm),v2=Md(/^data-[\-\w.\u00B7-\uFFFF]/),C7=Md(/^aria-[\-\w]+$/),nD=Md(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oD=Md(/^(?:\w+script|data):/i),w7=Md(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),TT=Md(/^html$/i);var AT=Object.freeze({__proto__:null,MUSTACHE_EXPR:b7,ERB_EXPR:v7,TMPLIT_EXPR:y7,DATA_ATTR:v2,ARIA_ATTR:C7,IS_ALLOWED_URI:nD,IS_SCRIPT_OR_DATA:oD,ATTR_WHITESPACE:w7,DOCTYPE_NAME:TT});const S7=()=>typeof window>"u"?null:window,_B=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function sD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S7();const s=Ts=>sD(Ts);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,i=a.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:p,Node:S,Element:E,NodeFilter:O,NamedNodeMap:F=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:z,DOMParser:X,trustedTypes:ee}=t,me=E.prototype,pe=wT(me,"cloneNode"),Ye=wT(me,"nextSibling"),Oe=wT(me,"childNodes"),Ue=wT(me,"parentNode");if(typeof p=="function"){const Ts=d.createElement("template");Ts.content&&Ts.content.ownerDocument&&(d=Ts.content.ownerDocument)}let We,Ut="";const{implementation:Bt,createNodeIterator:_n,createDocumentFragment:Hn,getElementsByTagName:$t}=d,{importNode:Kn}=a;let Tn={};s.isSupported=typeof AB=="function"&&typeof Ue=="function"&&Bt&&Bt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:eo,ERB_EXPR:vs,TMPLIT_EXPR:Hr,DATA_ATTR:Zs,ARIA_ATTR:Jn,IS_SCRIPT_OR_DATA:ln,ATTR_WHITESPACE:Rn}=AT;let{IS_ALLOWED_URI:Io}=AT,Do=null;const ho=vr({},[...X3,...J3,...p2,...ST,...b2]);let Ko=null;const wr=vr({},[...tD,...Am,...xT,...ET]);let Ks=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ui=null,ud=null,kf=!0,xi=!0,dd=!1,Kd=!0,Yl=!1,Mg=!1,Jb=!1,mF=!1,zy=!1,vk=!1,g8=!1,DY=!0,OY=!1;const sQ="user-content-";let dq=!0,fF=!1,yk={},Ck=null;const RY=vr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let FY=null;const NY=vr({},["audio","video","img","source","image","track"]);let mq=null;const BY=vr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),h8="http://www.w3.org/1998/Math/MathML",p8="http://www.w3.org/2000/svg",Qb="http://www.w3.org/1999/xhtml";let wk=Qb,fq=!1,gq=null;const rQ=vr({},[h8,p8,Qb],K3);let zS;const aQ=["application/xhtml+xml","text/html"],cQ="text/html";let Xl,Sk=null;const iQ=d.createElement("form"),MY=function(Nt){return Nt instanceof RegExp||Nt instanceof Function},hq=function(Nt){if(!(Sk&&Sk===Nt)){if((!Nt||typeof Nt!="object")&&(Nt={}),Nt=Yv(Nt),zS=aQ.indexOf(Nt.PARSER_MEDIA_TYPE)===-1?zS=cQ:zS=Nt.PARSER_MEDIA_TYPE,Xl=zS==="application/xhtml+xml"?K3:CT,Do="ALLOWED_TAGS"in Nt?vr({},Nt.ALLOWED_TAGS,Xl):ho,Ko="ALLOWED_ATTR"in Nt?vr({},Nt.ALLOWED_ATTR,Xl):wr,gq="ALLOWED_NAMESPACES"in Nt?vr({},Nt.ALLOWED_NAMESPACES,K3):rQ,mq="ADD_URI_SAFE_ATTR"in Nt?vr(Yv(BY),Nt.ADD_URI_SAFE_ATTR,Xl):BY,FY="ADD_DATA_URI_TAGS"in Nt?vr(Yv(NY),Nt.ADD_DATA_URI_TAGS,Xl):NY,Ck="FORBID_CONTENTS"in Nt?vr({},Nt.FORBID_CONTENTS,Xl):RY,Ui="FORBID_TAGS"in Nt?vr({},Nt.FORBID_TAGS,Xl):{},ud="FORBID_ATTR"in Nt?vr({},Nt.FORBID_ATTR,Xl):{},yk="USE_PROFILES"in Nt?Nt.USE_PROFILES:!1,kf=Nt.ALLOW_ARIA_ATTR!==!1,xi=Nt.ALLOW_DATA_ATTR!==!1,dd=Nt.ALLOW_UNKNOWN_PROTOCOLS||!1,Kd=Nt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Yl=Nt.SAFE_FOR_TEMPLATES||!1,Mg=Nt.WHOLE_DOCUMENT||!1,zy=Nt.RETURN_DOM||!1,vk=Nt.RETURN_DOM_FRAGMENT||!1,g8=Nt.RETURN_TRUSTED_TYPE||!1,mF=Nt.FORCE_BODY||!1,DY=Nt.SANITIZE_DOM!==!1,OY=Nt.SANITIZE_NAMED_PROPS||!1,dq=Nt.KEEP_CONTENT!==!1,fF=Nt.IN_PLACE||!1,Io=Nt.ALLOWED_URI_REGEXP||nD,wk=Nt.NAMESPACE||Qb,Ks=Nt.CUSTOM_ELEMENT_HANDLING||{},Nt.CUSTOM_ELEMENT_HANDLING&&MY(Nt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ks.tagNameCheck=Nt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Nt.CUSTOM_ELEMENT_HANDLING&&MY(Nt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ks.attributeNameCheck=Nt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Nt.CUSTOM_ELEMENT_HANDLING&&typeof Nt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ks.allowCustomizedBuiltInElements=Nt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yl&&(xi=!1),vk&&(zy=!0),yk&&(Do=vr({},[...b2]),Ko=[],yk.html===!0&&(vr(Do,X3),vr(Ko,tD)),yk.svg===!0&&(vr(Do,J3),vr(Ko,Am),vr(Ko,ET)),yk.svgFilters===!0&&(vr(Do,p2),vr(Ko,Am),vr(Ko,ET)),yk.mathMl===!0&&(vr(Do,ST),vr(Ko,xT),vr(Ko,ET))),Nt.ADD_TAGS&&(Do===ho&&(Do=Yv(Do)),vr(Do,Nt.ADD_TAGS,Xl)),Nt.ADD_ATTR&&(Ko===wr&&(Ko=Yv(Ko)),vr(Ko,Nt.ADD_ATTR,Xl)),Nt.ADD_URI_SAFE_ATTR&&vr(mq,Nt.ADD_URI_SAFE_ATTR,Xl),Nt.FORBID_CONTENTS&&(Ck===RY&&(Ck=Yv(Ck)),vr(Ck,Nt.FORBID_CONTENTS,Xl)),dq&&(Do["#text"]=!0),Mg&&vr(Do,["html","head","body"]),Do.table&&(vr(Do,["tbody"]),delete Ui.tbody),Nt.TRUSTED_TYPES_POLICY){if(typeof Nt.TRUSTED_TYPES_POLICY.createHTML!="function")throw qp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Nt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');We=Nt.TRUSTED_TYPES_POLICY,Ut=We.createHTML("")}else We===void 0&&(We=_B(ee,i)),We!==null&&typeof Ut=="string"&&(Ut=We.createHTML(""));wu&&wu(Nt),Sk=Nt}},PY=vr({},["mi","mo","mn","ms","mtext"]),$Y=vr({},["foreignobject","desc","title","annotation-xml"]),lQ=vr({},["title","style","font","a","script"]),b8=vr({},J3);vr(b8,p2),vr(b8,Q3);const pq=vr({},ST);vr(pq,eD);const uQ=function(Nt){let io=Ue(Nt);(!io||!io.tagName)&&(io={namespaceURI:wk,tagName:"template"});const Go=CT(Nt.tagName),mc=CT(io.tagName);return gq[Nt.namespaceURI]?Nt.namespaceURI===p8?io.namespaceURI===Qb?Go==="svg":io.namespaceURI===h8?Go==="svg"&&(mc==="annotation-xml"||PY[mc]):!!b8[Go]:Nt.namespaceURI===h8?io.namespaceURI===Qb?Go==="math":io.namespaceURI===p8?Go==="math"&&$Y[mc]:!!pq[Go]:Nt.namespaceURI===Qb?io.namespaceURI===p8&&!$Y[mc]||io.namespaceURI===h8&&!PY[mc]?!1:!pq[Go]&&(lQ[Go]||!b8[Go]):!!(zS==="application/xhtml+xml"&&gq[Nt.namespaceURI]):!1},VS=function(Nt){h2(s.removed,{element:Nt});try{Nt.parentNode.removeChild(Nt)}catch{Nt.remove()}},gF=function(Nt,io){try{h2(s.removed,{attribute:io.getAttributeNode(Nt),from:io})}catch{h2(s.removed,{attribute:null,from:io})}if(io.removeAttribute(Nt),Nt==="is"&&!Ko[Nt])if(zy||vk)try{VS(io)}catch{}else try{io.setAttribute(Nt,"")}catch{}},IY=function(Nt){let io,Go;if(mF)Nt="<remove></remove>"+Nt;else{const Pg=g7(Nt,/^[\r\n\t ]+/);Go=Pg&&Pg[0]}zS==="application/xhtml+xml"&&wk===Qb&&(Nt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Nt+"</body></html>");const mc=We?We.createHTML(Nt):Nt;if(wk===Qb)try{io=new X().parseFromString(mc,zS)}catch{}if(!io||!io.documentElement){io=Bt.createDocument(wk,"template",null);try{io.documentElement.innerHTML=fq?Ut:mc}catch{}}const Jl=io.body||io.documentElement;return Nt&&Go&&Jl.insertBefore(d.createTextNode(Go),Jl.childNodes[0]||null),wk===Qb?$t.call(io,Mg?"html":"body")[0]:Mg?io.documentElement:Jl},LY=function(Nt){return _n.call(Nt.ownerDocument||Nt,Nt,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT,null,!1)},dQ=function(Nt){return Nt instanceof z&&(typeof Nt.nodeName!="string"||typeof Nt.textContent!="string"||typeof Nt.removeChild!="function"||!(Nt.attributes instanceof F)||typeof Nt.removeAttribute!="function"||typeof Nt.setAttribute!="function"||typeof Nt.namespaceURI!="string"||typeof Nt.insertBefore!="function"||typeof Nt.hasChildNodes!="function")},v8=function(Nt){return typeof S=="object"?Nt instanceof S:Nt&&typeof Nt=="object"&&typeof Nt.nodeType=="number"&&typeof Nt.nodeName=="string"},e0=function(Nt,io,Go){Tn[Nt]&&m7(Tn[Nt],mc=>{mc.call(s,io,Go,Sk)})},HY=function(Nt){let io;if(e0("beforeSanitizeElements",Nt,null),dQ(Nt))return VS(Nt),!0;const Go=Xl(Nt.nodeName);if(e0("uponSanitizeElement",Nt,{tagName:Go,allowedTags:Do}),Nt.hasChildNodes()&&!v8(Nt.firstElementChild)&&(!v8(Nt.content)||!v8(Nt.content.firstElementChild))&&Pd(/<[/\w]/g,Nt.innerHTML)&&Pd(/<[/\w]/g,Nt.textContent))return VS(Nt),!0;if(!Do[Go]||Ui[Go]){if(!Ui[Go]&&VY(Go)&&(Ks.tagNameCheck instanceof RegExp&&Pd(Ks.tagNameCheck,Go)||Ks.tagNameCheck instanceof Function&&Ks.tagNameCheck(Go)))return!1;if(dq&&!Ck[Go]){const mc=Ue(Nt)||Nt.parentNode,Jl=Oe(Nt)||Nt.childNodes;if(Jl&&mc){const Pg=Jl.length;for(let fi=Pg-1;fi>=0;--fi)mc.insertBefore(pe(Jl[fi],!0),Ye(Nt))}}return VS(Nt),!0}return Nt instanceof E&&!uQ(Nt)||(Go==="noscript"||Go==="noembed"||Go==="noframes")&&Pd(/<\/no(script|embed|frames)/i,Nt.innerHTML)?(VS(Nt),!0):(Yl&&Nt.nodeType===3&&(io=Nt.textContent,io=bf(io,eo," "),io=bf(io,vs," "),io=bf(io,Hr," "),Nt.textContent!==io&&(h2(s.removed,{element:Nt.cloneNode()}),Nt.textContent=io)),e0("afterSanitizeElements",Nt,null),!1)},zY=function(Nt,io,Go){if(DY&&(io==="id"||io==="name")&&(Go in d||Go in iQ))return!1;if(!(xi&&!ud[io]&&Pd(Zs,io))){if(!(kf&&Pd(Jn,io))){if(!Ko[io]||ud[io]){if(!(VY(Nt)&&(Ks.tagNameCheck instanceof RegExp&&Pd(Ks.tagNameCheck,Nt)||Ks.tagNameCheck instanceof Function&&Ks.tagNameCheck(Nt))&&(Ks.attributeNameCheck instanceof RegExp&&Pd(Ks.attributeNameCheck,io)||Ks.attributeNameCheck instanceof Function&&Ks.attributeNameCheck(io))||io==="is"&&Ks.allowCustomizedBuiltInElements&&(Ks.tagNameCheck instanceof RegExp&&Pd(Ks.tagNameCheck,Go)||Ks.tagNameCheck instanceof Function&&Ks.tagNameCheck(Go))))return!1}else if(!mq[io]){if(!Pd(Io,bf(Go,Rn,""))){if(!((io==="src"||io==="xlink:href"||io==="href")&&Nt!=="script"&&h7(Go,"data:")===0&&FY[Nt])){if(!(dd&&!Pd(ln,bf(Go,Rn,"")))){if(Go)return!1}}}}}}return!0},VY=function(Nt){return Nt.indexOf("-")>0},UY=function(Nt){let io,Go,mc,Jl;e0("beforeSanitizeAttributes",Nt,null);const{attributes:Pg}=Nt;if(!Pg)return;const fi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ko};for(Jl=Pg.length;Jl--;){io=Pg[Jl];const{name:$g,namespaceURI:bq}=io;Go=$g==="value"?io.value:p7(io.value);const fQ=Go;if(mc=Xl($g),fi.attrName=mc,fi.attrValue=Go,fi.keepAttr=!0,fi.forceKeepAttr=void 0,e0("uponSanitizeAttribute",Nt,fi),Go=fi.attrValue,fi.forceKeepAttr)continue;if(!fi.keepAttr){gF($g,Nt);continue}if(!Kd&&Pd(/\/>/i,Go)){gF($g,Nt);continue}Yl&&(Go=bf(Go,eo," "),Go=bf(Go,vs," "),Go=bf(Go,Hr," "));const WY=Xl(Nt.nodeName);if(!zY(WY,mc,Go)){gF($g,Nt);continue}if(OY&&(mc==="id"||mc==="name")&&(gF($g,Nt),Go=sQ+Go),We&&typeof ee=="object"&&typeof ee.getAttributeType=="function"&&!bq)switch(ee.getAttributeType(WY,mc)){case"TrustedHTML":{Go=We.createHTML(Go);break}case"TrustedScriptURL":{Go=We.createScriptURL(Go);break}}if(Go!==fQ)try{bq?Nt.setAttributeNS(bq,$g,Go):Nt.setAttribute($g,Go)}catch{gF($g,Nt)}}e0("afterSanitizeAttributes",Nt,null)},mQ=function Ts(Nt){let io;const Go=LY(Nt);for(e0("beforeSanitizeShadowDOM",Nt,null);io=Go.nextNode();)e0("uponSanitizeShadowNode",io,null),!HY(io)&&(io.content instanceof g&&Ts(io.content),UY(io));e0("afterSanitizeShadowDOM",Nt,null)};return s.sanitize=function(Ts){let Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},io,Go,mc,Jl;if(fq=!Ts,fq&&(Ts="<!-->"),typeof Ts!="string"&&!v8(Ts))if(typeof Ts.toString=="function"){if(Ts=Ts.toString(),typeof Ts!="string")throw qp("dirty is not a string, aborting")}else throw qp("toString is not a function");if(!s.isSupported)return Ts;if(Jb||hq(Nt),s.removed=[],typeof Ts=="string"&&(fF=!1),fF){if(Ts.nodeName){const $g=Xl(Ts.nodeName);if(!Do[$g]||Ui[$g])throw qp("root node is forbidden and cannot be sanitized in-place")}}else if(Ts instanceof S)io=IY("<!---->"),Go=io.ownerDocument.importNode(Ts,!0),Go.nodeType===1&&Go.nodeName==="BODY"||Go.nodeName==="HTML"?io=Go:io.appendChild(Go);else{if(!zy&&!Yl&&!Mg&&Ts.indexOf("<")===-1)return We&&g8?We.createHTML(Ts):Ts;if(io=IY(Ts),!io)return zy?null:g8?Ut:""}io&&mF&&VS(io.firstChild);const Pg=LY(fF?Ts:io);for(;mc=Pg.nextNode();)HY(mc)||(mc.content instanceof g&&mQ(mc.content),UY(mc));if(fF)return Ts;if(zy){if(vk)for(Jl=Hn.call(io.ownerDocument);io.firstChild;)Jl.appendChild(io.firstChild);else Jl=io;return(Ko.shadowroot||Ko.shadowrootmode)&&(Jl=Kn.call(a,Jl,!0)),Jl}let fi=Mg?io.outerHTML:io.innerHTML;return Mg&&Do["!doctype"]&&io.ownerDocument&&io.ownerDocument.doctype&&io.ownerDocument.doctype.name&&Pd(TT,io.ownerDocument.doctype.name)&&(fi="<!DOCTYPE "+io.ownerDocument.doctype.name+`>
`+fi),Yl&&(fi=bf(fi,eo," "),fi=bf(fi,vs," "),fi=bf(fi,Hr," ")),We&&g8?We.createHTML(fi):fi},s.setConfig=function(Ts){hq(Ts),Jb=!0},s.clearConfig=function(){Sk=null,Jb=!1},s.isValidAttribute=function(Ts,Nt,io){Sk||hq({});const Go=Xl(Ts),mc=Xl(Nt);return zY(Go,mc,io)},s.addHook=function(Ts,Nt){typeof Nt=="function"&&(Tn[Ts]=Tn[Ts]||[],h2(Tn[Ts],Nt))},s.removeHook=function(Ts){if(Tn[Ts])return f7(Tn[Ts])},s.removeHooks=function(Ts){Tn[Ts]&&(Tn[Ts]=[])},s.removeAllHooks=function(){Tn={}},s}var x7=sD();const rD=t=>x7().sanitize(t);var Ju=tinymce.util.Tools.resolve("tinymce.util.I18n");const E7={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},DB="temporary-placeholder",aD=t=>()=>on(t,DB).getOr("!not found!"),cD=(t,s)=>{const a=t.toLowerCase();if(Ju.isRtl()){const i=Bn(a,"-rtl");return Zo(s,i)?i:a}else return a},OB=(t,s)=>on(s,cD(t,s)),iD=(t,s)=>{const a=s();return OB(t,a).getOrThunk(aD(a))},RB=(t,s,a)=>{const i=s();return OB(t,i).or(a).getOrThunk(aD(i))},T7=t=>Ju.isRtl()?Zo(E7,t):!1,kT=()=>ts("add-focusable",[Zr(t=>{qC(t.element,"svg").each(s=>q(s,"focusable","false"))})]),Xv=(t,s,a,i)=>{var d,g;const p=T7(s)?["tox-icon--flip"]:[],S=on(a,cD(s,a)).or(i).getOrThunk(aD(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:S},behaviours:hn([...(g=t.behaviours)!==null&&g!==void 0?g:[],kT()])}},Qu=(t,s,a,i=T.none())=>Xv(s,t,a(),i),A7=(t,s,a)=>{const i=a(),d=I(t,g=>Zo(i,cD(g,i)));return Xv(s,d.getOr(DB),i,T.none())},k7={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},lD=Tl({name:"Notification",factory:t=>{const s=Vn("notification-text"),a=qs({dom:pf(`<p id=${s}>${rD(t.backstageProvider.translate(t.text))}</p>`),behaviours:hn([Uo.config({})])}),i=me=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${me}%`}}}),d=me=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${me}%`}}),g=qs({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:hn([Uo.config({})])}),E={updateProgress:(me,pe)=>{me.getSystem().isConnected()&&g.getOpt(me).each(Ye=>{Uo.set(Ye,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(pe)]},d(pe)])})},updateText:(me,pe)=>{if(me.getSystem().isConnected()){const Ye=a.get(me);Uo.set(Ye,[fa(pe)])}}},O=le([t.icon.toArray(),t.level.toArray(),t.level.bind(me=>T.from(k7[me])).toArray()]),F=qs(di.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Qu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:hn([Ir.config({}),Da.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:me=>{t.onAction(me)}})),z=A7(O,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),X={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:hn([Uo.config({})])},ee=[z,X];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(me=>["tox-notification","tox-notification--in",`tox-notification--${me}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:hn([Ir.config({}),$o.config({}),yo.config({mode:"special",onEscape:me=>(t.onAction(me),T.some(!0))})]),components:ee.concat(t.progress?[g.asSpec()]:[]).concat([F.asSpec()]),apis:E}},configFields:[$s("level"),Zt("progress"),$s("icon"),Zt("onAction"),Zt("text"),Zt("iconProvider"),Zt("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var D7=(t,s,a,i)=>{const d=s.backstage.shared,g=()=>Le.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),p=()=>{const z=Yr(g());return T.some(z)},S=z=>{p().each(X=>{dt(z,ee=>{qo(ee.element,"width"),ae(ee.element)>X.width&&pt(ee.element,"width",X.width+"px")})})};return{open:(z,X,ee)=>{const me=()=>{const Ue=_n=>{Uo.remove(_n,pe),Ye()},We=(_n,Hn)=>{Na(_n.element).length===0?Ut(_n,Hn):Bt(_n,Hn)},Ut=(_n,Hn)=>{Qr.hide(_n),i.clear(),Hn&&t.focus()},Bt=(_n,Hn)=>{Hn&&yo.focusIn(_n)};i.on(_n=>{X();const Hn=ee();Ue(_n),We(_n,Hn)})},pe=li(lD.sketch({text:z.text,level:Dt(["success","error","warning","warn","info"],z.type)?z.type:void 0,progress:z.progressBar===!0,icon:z.icon,onAction:me,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const Ue=Ml(pe);i.on(We=>{Uo.append(We,Ue),Qr.reposition(We),$r.refresh(We),S(We.components())})}else{const Ue=li(Qr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:hn([yo.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Uo.config({}),...Sb(t)&&!d.header.isPositionedAtTop()?[]:[$r.config({contextual:{lazyContext:()=>T.some(Yr(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:_n=>$h(t,_n.element).map($t=>({bounds:xb($t),optScrollEnv:T.some({currentScrollTop:$t.element.dom.scrollTop,scrollElmTop:La($t.element).top})})).getOrThunk(()=>({bounds:Ba(),optScrollEnv:T.none()}))})]])})),We=Ml(pe),Ut={maxHeightFunction:Ep()},Bt={...d.anchors.banner(),overrides:Ut};i.set(Ue),a.add(Ue),Qr.showWithinBounds(Ue,We,{anchor:Bt},p)}st(z.timeout)&&z.timeout>0&&Gv.setEditorTimeout(t,()=>{me()},z.timeout);const Ye=()=>{i.on(Ue=>{Qr.reposition(Ue),$r.refresh(Ue),S(Ue.components())})};return{close:me,reposition:Ye,text:Ue=>{lD.updateText(pe,Ue)},settings:z,getEl:()=>pe.element.dom,progressBar:{value:Ue=>{lD.updateProgress(pe,Ue)}}}},close:z=>{z.close()},getArgs:z=>z.settings}};const FB={setup:(t,s)=>{const a=(d,g)=>{wo(d,Vu(),{raw:g})},i=()=>t.getMenu().bind(ao.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Zf),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(ao.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var _T;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(_T||(_T={}));var km=_T;const uD="tox-menu-nav__js",DT="tox-collection__item",OT="tox-swatch",dD={normal:uD,color:OT},RT="tox-collection__item--enabled",NB="tox-collection__group-heading",mD="tox-collection__item-icon",FT="tox-collection__item-label",R7="tox-collection__item-accessory",NT="tox-collection__item-caret",F7="tox-collection__item-checkmark",Kp="tox-collection__item--active",fD="tox-collection__item-container",Eb="tox-collection__item-container--column",BB="tox-collection__item-container--row",gD="tox-collection__item-container--align-right",BT="tox-collection__item-container--align-left",N7="tox-collection__item-container--valign-top",MB="tox-collection__item-container--valign-middle",PB="tox-collection__item-container--valign-bottom",hD=t=>on(dD,t).getOr(uD),pD=t=>t==="color"?"tox-swatches":"tox-menu",MT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:pD(t),tieredMenu:"tox-tiered-menu"}),Tb=t=>{const s=MT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:hD(t)}},$B=(t,s,a)=>{const i=MT(a);return{tag:"div",classes:le([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},IB=[Nd.parts.items({})],y2=(t,s,a)=>{const i=MT(a);return{dom:{tag:"div",classes:le([[i.tieredMenu]])},markers:Tb(a)}},bD=J([$s("data"),et("inputAttributes",{}),et("inputStyles",{}),et("tag","input"),et("inputClasses",[]),Es("onSetValue"),et("styles",{}),et("eventOrder",{}),Dc("inputBehaviours",[Ln,$o]),et("selectOnFocus",!0)]),LB=t=>hn([$o.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=rf(a);a.dom.setSelectionRange(0,i.length)}:ie})]),HB=t=>({...LB(t),...Oc(t.inputBehaviours,[Ln.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>rf(s.element),setValue:(s,a)=>{rf(s.element)!==a&&ag(s.element,a)}},onSetValue:t.onSetValue})])}),zB=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),B7=(t,s)=>({uid:t.uid,dom:zB(t),components:[],behaviours:HB(t),eventOrder:t.eventOrder}),Ab=Tl({name:"Input",configFields:bD(),factory:B7}),VB=Vn("refetch-trigger-event"),vD=Vn("redirect-menu-item-interaction"),Jv="tox-menu__searcher",C2=t=>Jr(t.element,`.${Jv}`).bind(s=>t.getSystem().getByDom(s).toOptional()),UB=C2,M7=(t,s)=>{Ln.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},WB=t=>{const s=Ln.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},P7=(t,s)=>{nn(s.element,"id").each(a=>q(t.element,"aria-activedescendant",a))},$7=t=>{const s=(d,g)=>(g.cut(),T.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return wo(d,vD,p),T.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[DT]},components:[Ab.sketch({inputClasses:[Jv,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:hn([ts(i,[Gt(dm(),d=>{rs(d,VB)}),Gt(Vu(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),yo.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,yo.name()]}})]}},kb="tox-collection--results__js",ZB=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Vn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},PT=(t,s)=>a=>{const i=rn(a,s);return Ne(i,d=>({dom:t,components:d}))},I7=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Nd.parts.items({preprocess:t!=="auto"?PT({tag:"div",classes:["tox-swatches__row"]},t):Yt})]}]}),jB=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Nd.parts.items({preprocess:PT({tag:"div",classes:["tox-collection__group"]},t)})]}),yD=(t,s)=>{const a=[];let i=[];return dt(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Zo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ne(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},CD=(t,s,a)=>Nd.parts.items({preprocess:i=>{const d=Ne(i,a);return t!=="auto"&&t>1?PT({tag:"div",classes:["tox-collection__group"]},t)(d):yD(d,(g,p)=>s[p].type==="separator")}}),wD=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[CD(t,s,Yt)]}),GB=(t,s,a=!0)=>{const i=Vn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",kb].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[CD(t,s,ZB)]}},qB=(t,s,a)=>{const i=Vn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[$7({i18n:Ju.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],kb],attributes:{id:i}},components:[CD(t,s,ZB)]}]}},KB=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Nd.parts.items({preprocess:a=>yD(a,(i,d)=>t[d].type==="separator")})]}),$T=t=>An(t,s=>"icon"in s&&s.icon!==void 0),Ih=t=>(console.error(lu(t)),console.log(t),T.none()),L7=(t,s,a,i,d)=>{const g=KB(a);return{value:t,dom:g.dom,components:g.components,items:a}},SD=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?wD(i,a):d.searchMode.searchMode==="search-with-field"?qB(i,a,d.searchMode):GB(i,a);if(d.menuType==="color"){const p=I7(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=wD(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=jB(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:$B(s,i,d.menuType),components:IB,items:a}},Ua=Va("type"),IT=Va("name"),xD=Va("label"),Lh=Va("text"),YB=Va("title"),XB=Va("icon"),w2=Va("value"),H7=Xi("fetch"),z7=Xi("getSubmenuItems"),Yp=Xi("onAction"),JB=Xi("onItemAction"),_b=da("onSetup",()=>ie),V7=Ka("name"),Hh=Ka("text"),U7=Ka("role"),$d=Ka("icon"),Qv=Ka("tooltip"),LT=Ka("label"),HT=Ka("shortcut"),W7=Lu("select"),zT=Ta("active",!1),Z7=Ta("borderless",!1),Id=Ta("enabled",!0),ey=Ta("primary",!1),QB=t=>et("columns",t),ED=et("meta",{}),TD=da("onAction",ie),Db=t=>qc("type",t),AD=t=>qa("name","name",us(()=>Vn(`${t}-name`)),Mn),j7=t=>qa("value","value",us(()=>Vn(`${t}-value`)),Rl()),kD=ko([Ua,Hh]),eM=t=>oa("separatormenuitem",kD,t),G7=ko([Db("autocompleteitem"),zT,Id,ED,w2,Hh,$d]),q7=t=>oa("Autocompleter.Separator",kD,t),K7=t=>oa("Autocompleter.Item",G7,t),Li=[Id,Qv,$d,Hh,_b],vf=ko([Ua,Yp,HT].concat(Li)),tM=t=>oa("toolbarbutton",vf,t),S2=[zT].concat(Li),_D=ko(S2.concat([Ua,Yp,HT])),nM=t=>oa("ToggleButton",_D,t),oM=[da("predicate",Ve),el("scope","node",["node","editor"]),el("position","selection",["node","selection","line"])],x2=Li.concat([Db("contextformbutton"),ey,Yp,zs("original",Yt)]),VT=S2.concat([Db("contextformbutton"),ey,Yp,zs("original",Yt)]),DD=Li.concat([Db("contextformbutton")]),Y7=S2.concat([Db("contextformtogglebutton")]),yf=sc("type",{contextformbutton:x2,contextformtogglebutton:VT}),X7=ko([Db("contextform"),da("initValue",J("")),LT,Ji("commands",yf),Iu("launch",sc("type",{contextformbutton:DD,contextformtogglebutton:Y7}))].concat(oM)),J7=t=>oa("ContextForm",X7,t),Ld=ko([Db("contexttoolbar"),Va("items")].concat(oM)),E2=t=>oa("ContextToolbar",Ld,t),_m=[Ua,Va("src"),Ka("alt"),x("classes",[],Mn)],Q7=ko(_m),yr=[Ua,Lh,V7,x("classes",["tox-collection__item-label"],Mn)],ty=ko(yr),T2=za(()=>lm("type",{cardimage:Q7,cardtext:ty,cardcontainer:sM})),sM=ko([Ua,qc("direction","horizontal"),qc("align","left"),qc("valign","middle"),Ji("items",T2)]),Xp=[Id,Hh,U7,HT,j7("menuitem"),ED],OD=ko([Ua,LT,Ji("items",T2),_b,TD].concat(Xp)),e9=t=>oa("cardmenuitem",OD,t),RD=ko([Ua,zT,$d].concat(Xp)),t9=t=>oa("choicemenuitem",RD,t),FD=[Ua,Va("fancytype"),TD],rM=[et("initData",{})].concat(FD),ND=[Lu("select"),R("initData",{},[Ta("allowCustomColors",!0),qc("storageKey","default"),Hu("colors",Rl())])].concat(FD),aM=sc("fancytype",{inserttable:rM,colorswatch:ND}),UT=t=>oa("fancymenuitem",aM,t),n9=ko([Ua,_b,TD,$d].concat(Xp)),o9=t=>oa("menuitem",n9,t),s9=ko([Ua,z7,_b,$d].concat(Xp)),r9=t=>oa("nestedmenuitem",s9,t),a9=ko([Ua,$d,zT,_b,Yp].concat(Xp)),cM=t=>oa("togglemenuitem",a9,t),BD=(t,s,a)=>{const i=Hc(t.element,"."+a);if(i.length>0){const d=G(i,g=>{const p=g.dom.getBoundingClientRect().top,S=i[0].dom.getBoundingClientRect().top;return Math.abs(p-S)>s}).getOr(i.length);return T.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return T.none()},iM=(t,s)=>hn([ts(t,s)]),ny={namedEvents:iM,unnamedEvents:t=>iM(Vn("unnamed-events"),t)},i9=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),lM="silver.readonly",uM=ko([u0("readonly")]),oy=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&dt(d,g=>{g.broadcastOn([Cm()],{target:i})}),dt(d,g=>{g.broadcastOn([lM],{readonly:s})})},MD=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&oy(s,!0)}),t.on("SwitchMode",()=>oy(s,t.mode.isReadOnly())),nB(t)&&t.mode.set("readonly")},Fc=()=>ol.config({channels:{[lM]:{schema:uM,onReceive:(t,s)=>{l.set(t,s.readonly)}}}}),Dm={item:t=>l.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>l.config({disabled:t}),splitButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},A2=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Hi=(t,s)=>Zr(a=>{A2(t,a)(d=>{const g=t.onSetup(d);gt(g)&&s.set(g)})}),Jp=(t,s)=>fm(a=>A2(t,a)(s.get())),PD=(t,s)=>Uu((a,i)=>{A2(t,a)(t.onAction),!t.triggersSubmenu&&s===km.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&rs(a,A1()),i.stop())}),dM={[fu()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ob=_r,sy=(t,s,a,i)=>{const d=oo(ie);return{type:"item",dom:s.dom,components:Ob(s.optComponents),data:t.data,eventOrder:dM,hasSubmenu:t.triggersSubmenu,itemBehaviours:hn([ts("item-events",[PD(t,a),Hi(t,d),Jp(t,d)]),Dm.item(()=>!t.enabled||i.isDisabled()),Fc(),Uo.config({})].concat(t.itemBehaviours))}},Rb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),WT=t=>{const s=vb.os.isMacOS()||vb.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ne(g,S=>{const E=S.toLowerCase().trim();return Zo(d,E)?d[E]:S});return s?p.join(""):p.join("+")},ZT=(t,s,a=[mD])=>Qu(t,{tag:"div",classes:a},s),mM=t=>({dom:{tag:"div",classes:[FT]},components:[fa(Ju.translate(t))]}),fM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),l9=(t,s)=>({dom:{tag:"div",classes:[FT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[fa(Ju.translate(s))]}]}),u9=t=>({dom:{tag:"div",classes:[R7]},components:[fa(WT(t))]}),gM=t=>ZT("checkmark",t,[F7]),hM=t=>ZT("chevron-right",t,[NT]),pM=t=>ZT("chevron-down",t,[NT]),bM=(t,s)=>{const a=t.direction==="vertical"?Eb:BB,i=t.align==="left"?BT:gD;return{dom:{tag:"div",classes:[fD,a,i,(()=>{switch(t.valign){case"top":return N7;case"middle":return MB;case"bottom":return PB}})()]},components:s}},d9=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),m9=(t,s,a)=>{const i="custom",d="remove",g=t.value,p=t.iconContent.map(O=>RB(O,s.icons,a)),S=t.ariaLabel.map(O=>({"aria-label":s.translate(O),"data-mce-name":O})).getOr({});return{dom:(()=>{const O=OT,F=p.getOr(""),z={tag:"div",attributes:S,classes:[O]};return g===i?{...z,tag:"button",classes:[...z.classes,"tox-swatches__picker-btn"],innerHtml:F}:g===d?{...z,classes:[...z.classes,"tox-swatch--remove"],innerHtml:F}:Lt(g)?{...z,attributes:{...z.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:F}:z})(),optComponents:[]}},vM=t=>{const s=t.map(a=>({attributes:{id:Vn("menu-item"),"aria-label":Ju.translate(a)}})).getOr({});return{tag:"div",classes:[uD,DT],...s}},ry=(t,s,a,i)=>{const d={tag:"div",classes:[mD]},g=X=>Qu(X,d,s.icons,i),p=()=>T.some({dom:d}),S=a?t.iconContent.map(g).orThunk(p):T.none(),E=t.checkMark,O=T.from(t.meta).fold(()=>mM,X=>Zo(X,"style")?gn(l9,X.style):mM),F=t.htmlContent.fold(()=>t.textContent.map(O),X=>T.some(fM(X,[FT])));return{dom:vM(t.ariaLabel),optComponents:[S,F,t.shortcutContent.map(u9),E,t.caret]}},k2=(t,s,a,i=T.none())=>t.presets==="color"?m9(t,s,i):ry(t,s,a,i),$D=(t,s,a)=>on(t,"tooltipWorker").map(i=>[Da.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Ep}}),mode:"follow-highlight",onShow:(d,g)=>{i(p=>{Da.setComponents(d,[WC({element:Le.fromDom(p)})])})}})]).getOrThunk(()=>a.map(i=>[Da.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),yM=t=>bb.DOM.encode(t),ID=(t,s)=>{const a=Ju.translate(t),i=yM(a);if(s.length>0){const d=new RegExp(i9(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},CM=(t,s,a,i,d,g,p,S=!0)=>{const E=k2({presets:i,textContent:T.none(),htmlContent:a?t.text.map(F=>ID(F,s)):T.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:T.none(),checkMark:T.none(),caret:T.none(),value:t.value},p.providers,S,t.icon),O=t.text.filter(F=>!a&&F!=="");return sy({data:Rb(t),enabled:t.enabled,getApi:J({}),onAction:F=>d(t.value,t.meta),onSetup:J(ie),triggersSubmenu:!1,itemBehaviours:$D(t,p,O)},E,g,p.providers)},jT=(t,s)=>Ne(t,a=>{switch(a.type){case"cardcontainer":return bM(a,jT(a.items,s));case"cardimage":return d9(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Dt(s.cardText.highlightOn,g))?T.from(s.cardText.matchText).getOr(""):"";return fM(ID(a.text,d),a.classes)}}),LD=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!l.isDisabled(p),setEnabled:S=>{l.set(p,!S),dt(Hc(p.element,"*"),E=>{p.getSystem().getByDom(E).each(O=>{O.hasConfigured(l)&&l.set(O,!S)})})}}),g={dom:vM(t.label),optComponents:[T.some({dom:{tag:"div",classes:[fD,BB]},components:jT(t.items,i)})]};return sy({data:Rb({text:T.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:T.from(i.itemBehaviours).getOr([])},g,s,a.providers)},HD=(t,s,a,i,d,g,p,S=!0)=>{const E=z=>({setActive:X=>{ds.set(z,X)},isActive:()=>ds.isOn(z),isEnabled:()=>!l.isDisabled(z),setEnabled:X=>l.set(z,!X)}),O=k2({presets:a,textContent:s?t.text:T.none(),htmlContent:T.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:T.none(),checkMark:s?T.some(gM(p.icons)):T.none(),caret:T.none(),value:t.value},p,S),F=t.text.filter(J(!s)).map(z=>Da.config(p.tooltips.getConfig({tooltipText:p.translate(z)})));return xr(sy({data:Rb(t),enabled:t.enabled,getApi:E,onAction:z=>i(t.value),onSetup:z=>(z.setActive(d),ie),triggersSubmenu:!1,itemBehaviours:[...F.toArray()]},O,g,p),{toggling:{toggleClass:RT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},zD=HE(uT(),R3()),wM=t=>({value:EM(t)}),VD=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,SM=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xM=t=>VD.test(t)||SM.test(t),EM=t=>xn(t,"#").toUpperCase(),TM=t=>xM(t)?T.some({value:EM(t)}):T.none(),AM=t=>({value:t.value.replace(VD,(a,i,d,g)=>i+i+d+d+g+g)}),kM=t=>{const s=AM(t),a=SM.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},UD=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},_2=t=>{const s=UD(t.red)+UD(t.green)+UD(t.blue);return wM(s)},_M=Math.min,DM=Math.max,GT=Math.round,f9=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,g9=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Fb=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),WD=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},OM=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=DM(0,_M(g,1)),p=DM(0,_M(p,1)),g===0)return s=a=i=GT(255*p),Fb(s,a,i,1);const S=d/60,E=p*g,O=E*(1-Math.abs(S%2-1)),F=p-E;switch(Math.floor(S)){case 0:s=E,a=O,i=0;break;case 1:s=O,a=E,i=0;break;case 2:s=0,a=E,i=O;break;case 3:s=0,a=O,i=E;break;case 4:s=O,a=0,i=E;break;case 5:s=E,a=0,i=O;break;default:s=a=i=0}return s=GT(255*(s+F)),a=GT(255*(a+F)),i=GT(255*(i+F)),Fb(s,a,i,1)},D2=t=>{const s=kM(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Fb(a,i,d,1)},ZD=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),S=parseFloat(i);return Fb(d,g,p,S)},jD=t=>{const s=f9.exec(t);if(s!==null)return T.some(ZD(s[1],s[2],s[3],"1"));const a=g9.exec(t);return a!==null?T.some(ZD(a[1],a[2],a[3],a[4])):T.none()},RM=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,FM=Fb(255,0,0,1),h9=t=>{t.dispatch("SkinLoaded")},p9=(t,s)=>{t.dispatch("SkinLoadError",s)},qT=t=>{t.dispatch("ResizeEditor")},KT=(t,s)=>{t.dispatch("ResizeContent",s)},b9=(t,s)=>{t.dispatch("ScrollContent",s)},NM=(t,s)=>{t.dispatch("TextColorChange",s)},v9=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},y9=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),C9=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},w9=(t,s)=>{t.dispatch("StylesTextUpdate",s)},GD=(t,s)=>{t.dispatch("AlignTextUpdate",s)},BM=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},MM=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},S9=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},PM=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},x9=t=>{t.dispatch("ToggleSidebar")},E9=t=>{t.dispatch("ToggleView")},YT=(t,s)=>()=>{t(),s()},al=t=>Nb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),T9=(t,s)=>a=>{const i=oc(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},XT=(t,s)=>a=>{const i=al(t)(a),d=T9(t,s)(a);return()=>{i(),d()}},Nb=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},$M=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Su=(t,s)=>()=>t.execCommand(s);var Bb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const O2={},qD=(t,s=10)=>{const a=Bb.getItem(t),i=Q(a)?JSON.parse(a):[],g=(O=>s-O.length<0?O.slice(0,s):O)(i),p=O=>{_e(g,O).each(S),g.unshift(O),g.length>s&&g.pop(),Bb.setItem(t,JSON.stringify(g))},S=O=>{g.splice(O,1)};return{add:p,state:()=>g.slice(0)}},JT=t=>on(O2,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Bb.getItem(s);if(_t(a)){const d=Bb.getItem("tinymce-custom-colors");Bb.setItem(s,Lt(d)?d:"[]")}const i=qD(s,10);return O2[t]=i,i}),IM=t=>Ne(JT(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),LM=(t,s)=>{JT(t).add(s)},R2=(t,s,a)=>({hue:t,saturation:s,value:a}),F2=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,S=Math.min(d,Math.min(g,p)),E=Math.max(d,Math.max(g,p));if(S===E)return i=S,R2(0,0,i*100);const O=d===S?g-p:p===S?d-g:p-d;return s=d===S?3:p===S?1:5,s=60*(s-O/(E-S)),a=(E-S)/E,i=E,R2(Math.round(s),Math.round(a*100),Math.round(i*100))},KD=t=>F2(D2(t)),N2=t=>_2(OM(t)),HM=t=>TM(t).orThunk(()=>jD(t).map(_2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],S=i[3];return _2(Fb(d,g,p,S))}),YD="forecolor",XD="hilitecolor",A9=5,k9=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+HM(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},xg=t=>s=>s.options.get(t),JD="#000000",_9=t=>{const s=t.options.register,a=d=>Qe(d,Q)?{value:k9(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>st(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:i,default:QD(t)}),s("color_cols_foreground",{processor:i,default:zM(t,YD)}),s("color_cols_background",{processor:i,default:zM(t,XD)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:JD}),s("color_default_background",{processor:"string",default:JD})},QT=(t,s)=>s===YD&&t.options.isSet("color_map_foreground")?xg("color_map_foreground")(t):s===XD&&t.options.isSet("color_map_background")?xg("color_map_background")(t):xg("color_map")(t),QD=(t,s="default")=>Math.max(A9,Math.ceil(Math.sqrt(QT(t,s).length))),zM=(t,s)=>{const a=xg("color_cols")(t),i=QD(t,s);return a===QD(t)?i:a},VM=(t,s="default")=>Math.round(s===YD?xg("color_cols_foreground")(t):s===XD?xg("color_cols_background")(t):xg("color_cols")(t)),UM=xg("custom_colors"),D9=xg("color_default_foreground"),WM=xg("color_default_background"),O9="rgba(0, 0, 0, 0)",R9=t=>jD(t).exists(s=>s.alpha!==0),Eg=t=>Nl(t,s=>{if(fo(s)){const a=Os(s,"background-color");return Qn(R9(a),a)}else return T.none()}).getOr(O9),ZM=(t,s)=>{const a=Le.fromDom(t.selection.getStart()),i=s==="hilitecolor"?Eg(a):Os(a,"color");return jD(i).map(d=>"#"+_2(d).value)},F9=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},e4=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},zc=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{F9(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{e4(t,s)})},jM=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},t4=(t,s,a,i)=>{a==="custom"?JM(t)(g=>{g.each(p=>{LM(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},ZM(t,s).getOr(JD)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},n4=(t,s,a)=>t.concat(IM(s).concat(jM(a))),GM=(t,s,a)=>i=>{i(n4(t,s,a))},o4=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},qM=(t,s)=>{t.setTooltip(s)},KM=(t,s)=>a=>{const i=ZM(t,s);return tr(i,a.toUpperCase())},s4=(t,s,a)=>{if(Ce(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=n4(QT(t,s),s,!1),g=I(d,p=>p.value===a).getOr({text:""}).text;return t.translate([i,t.translate(g)])},YM=(t,s,a,i)=>{t.ui.registry.addSplitButton(s,{tooltip:s4(t,a,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:KM(t,a),columns:VM(t,a),fetch:GM(QT(t,a),a,UM(t)),onAction:d=>{t4(t,a,i.get(),ie)},onItemAction:(d,g)=>{t4(t,a,g,p=>{i.set(p),NM(t,{name:s,color:p})})},onSetup:d=>{o4(d,s,i.get());const g=p=>{p.name===s&&(o4(d,p.name,p.color),qM(d,s4(t,a,p.color)))};return t.on("TextColorChange",g),YT(al(t)(d),()=>{t.off("TextColorChange",g)})}})},XM=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(qM(g,s4(t,a,d.get())),o4(g,s,d.get()),al(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:KM(t,a),initData:{storageKey:a},onAction:g=>{t4(t,a,g.value,p=>{d.set(p),NM(t,{name:s,color:p})})}}]})},JM=t=>(s,a)=>{let i=!1;const d=S=>{const O=S.getData().colorpicker;i?(s(T.from(O)),S.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",O]))},g=(S,E)=>{E.name==="hex-valid"&&(i=E.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:ie,onCancel:()=>{s(T.none())}})},N9=t=>{zc(t);const s=D9(t),a=WM(t),i=oo(s),d=oo(a);YM(t,"forecolor","forecolor",i),YM(t,"backcolor","hilitecolor",d),XM(t,"forecolor","forecolor","Text color",i),XM(t,"backcolor","hilitecolor","Background color",d)},r4=(t,s,a,i,d,g,p,S)=>{const E=$T(s),F=B9(s,a,i,d!=="color"?"normal":"color",g,p,S);return SD(t,E,F,i,{menuType:d})},B9=(t,s,a,i,d,g,p)=>_r(Ne(t,S=>S.type==="choiceitem"?t9(S).fold(Ih,E=>T.some(HD(E,a===1,i,s,g(E.value),d,p,$T(t)))):T.none())),eA=(t,s)=>{const a=Tb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Jr(d.element,"[aria-checked=true]"):T.none()}},M9=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${OT}`:`.${DT}`}},P9=(t,s)=>{const a=$9(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...r4(Vn("menu-value"),a,S=>{t.onAction({value:S})},i,d,km.CLOSE_ON_EXECUTE,t.select.getOr(Ve),s.shared.providers),markers:Tb(d),movement:eA(i,d),showMenuRole:!1};return{type:"widget",data:{value:Vn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[zD.widget(Nd.sketch(p))]}},$9=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>n4(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(jM(a)))},QM=Vn("cell-over"),eP=Vn("cell-execute"),I9=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),L9=(t,s,a)=>{const i=p=>wo(p,QM,{row:t,col:s}),d=p=>wo(p,eP,{row:t,col:s}),g=(p,S)=>{S.stop(),d(p)};return li({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:hn([ts("insert-table-picker-cell",[Gt(fl(),$o.focus),Gt(fu(),d),Gt(nh(),g),Gt(Td(),g)]),ds.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$o.config({onFocus:i})])})},H9=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++){const S=t(d+1,p+1);g.push(L9(d,p,S))}i.push(g)}return i},z9=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)ds.set(t[g][p],g<=s&&p<=a)},V9=t=>L(t,s=>Ne(s,Ml)),a4=(t,s)=>fa(`${s}x${t}`),tP={inserttable:(t,s)=>{const d=I9(s),g=H9(d,10,10),p=a4(0,0),S=qs({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[p],behaviours:hn([Uo.config({})])});return{type:"widget",data:{value:Vn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[zD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:V9(g).concat(S.asSpec()),behaviours:hn([ts("insert-table-picker",[Zr(E=>{Uo.set(S.get(E),[p])}),uC(QM,(E,O,F)=>{const{row:z,col:X}=F.event;z9(g,z,X,10,10),Uo.set(S.get(E),[a4(z+1,X+1)])}),uC(eP,(E,O,F)=>{const{row:z,col:X}=F.event;rs(E,A1()),t.onAction({numRows:z+1,numColumns:X+1})})]),yo.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:P9},U9=(t,s)=>on(tP,t.fancytype).map(a=>a(t,s)),W9=(t,s,a,i=!0,d=!1)=>{const g=d?pM(a.icons):hM(a.icons),p=E=>({isEnabled:()=>!l.isDisabled(E),setEnabled:O=>l.set(E,!O),setIconFill:(O,F)=>{Jr(E.element,`svg path[class="${O}"], rect[class="${O}"]`).each(z=>{q(z,"fill",F)})},setTooltip:O=>{const F=a.translate(O);q(E.element,"aria-label",F)}}),S=k2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:T.none(),ariaLabel:t.text,caret:T.some(g),checkMark:T.none(),shortcutContent:t.shortcut},a,i);return sy({data:Rb(t),getApi:p,enabled:t.enabled,onAction:ie,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},S,s,a)},Z9=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!l.isDisabled(p),setEnabled:S=>l.set(p,!S)}),g=k2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:T.none(),ariaLabel:t.text,caret:T.none(),checkMark:T.none(),shortcutContent:t.shortcut},a,i);return sy({data:Rb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},nP=t=>({type:"separator",dom:{tag:"div",classes:[DT,NB]},components:t.text.map(fa).toArray()}),j9=(t,s,a,i=!0)=>{const d=p=>({setActive:S=>{ds.set(p,S)},isActive:()=>ds.isOn(p),isEnabled:()=>!l.isDisabled(p),setEnabled:S=>l.set(p,!S)}),g=k2({iconContent:t.icon,textContent:t.text,htmlContent:T.none(),ariaLabel:t.text,checkMark:T.some(gM(a.icons)),caret:T.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return xr(sy({data:Rb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:RT,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},G9=CM,oP=nP,q9=Z9,sP=W9,K9=j9,rP=U9,Y9=LD;var J9=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),Q9=[Vs("others",iu(Yo.value,Rl()))],eH=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(sn(g.others).length===0)throw new Error("Cannot find any known coupled components");return on(t,p)},a=(g,p,S)=>s(p,S).getOrThunk(()=>{const O=on(p.others,S).getOrDie("No information found for coupled component: "+S)(g),F=g.getSystem().build(O);return t[S]=F,F}),i=(g,p,S)=>s(p,S).orThunk(()=>(on(p.others,S).getOrDie("No information found for coupled component: "+S),T.none())),d=J({});return hl({readState:d,getExisting:i,getOrCreate:a})}});const $a=Ic({fields:Q9,name:"coupling",apis:J9,state:eH}),c4=t=>{let s=T.none(),a=[];const i=O=>c4(F=>{d(z=>{F(O(z))})}),d=O=>{p()?E(O):a.push(O)},g=O=>{p()||(s=T.some(O),S(a),a=[])},p=()=>s.isSome(),S=O=>{dt(O,E)},E=O=>{s.each(F=>{setTimeout(()=>{O(F)},0)})};return t(g),{get:d,map:i,isReady:p}},tH={nu:c4,pure:t=>c4(s=>{s(t)})},nH=t=>{setTimeout(()=>{throw t},0)},ay=t=>{const s=E=>{t().then(E,nH)};return{map:E=>ay(()=>t().then(E)),bind:E=>ay(()=>t().then(O=>E(O).toPromise())),anonBind:E=>ay(()=>t().then(()=>E.toPromise())),toLazy:()=>tH.nu(s),toCached:()=>{let E=null;return ay(()=>(E===null&&(E=t()),E))},toPromise:t,get:s}},mi={nu:t=>ay(()=>new Promise(t)),pure:t=>ay(()=>Promise.resolve(t))},aP=J("sink"),cP=J(Hl({name:aP(),overrides:J({dom:{tag:"div"},behaviours:hn([ui.config({useFixed:je})]),events:Mr([kd(Vu()),kd(ya()),kd(nh())])})})),iP=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},oH=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},sH=(t,s,a,i,d,g,p)=>{const S=oH(t,s,i),E=l4(i,t);return S.map(O=>O.bind(F=>{const z=F.menus[F.primary];return T.from(z).each(X=>{t.listRole.each(ee=>{X.role=ee})}),T.from(Zp.sketch({...g.menu(),uid:H1(""),data:F,highlightOnOpen:p,onOpenMenu:(X,ee)=>{const me=E().getOrDie();ui.position(me,ee,{anchor:a}),Rs.decloak(d)},onOpenSubmenu:(X,ee,me)=>{const pe=E().getOrDie();ui.position(pe,me,{anchor:{type:"submenu",item:ee}}),Rs.decloak(d)},onRepositionMenu:(X,ee,me)=>{const pe=E().getOrDie();ui.position(pe,ee,{anchor:a}),dt(me,Ye=>{ui.position(pe,Ye.triggeredMenu,{anchor:{type:"submenu",item:Ye.triggeringItem}})})},onEscape:()=>($o.focus(i),Rs.close(d),T.some(!0))}))}))},cy=(t,s,a,i,d,g,p)=>{const S=iP(t,a);return sH(t,s,S,a,i,d,p).map(O=>(O.fold(()=>{Rs.isOpen(i)&&Rs.close(i)},F=>{Rs.cloak(i),Rs.open(i,F),g(i)}),i))},rH=(t,s,a,i,d,g,p)=>(Rs.close(i),mi.pure(i)),i4=(t,s,a,i,d,g)=>{const p=$a.getCoupled(a,"sandbox");return(Rs.isOpen(p)?rH:cy)(t,s,a,p,i,d,g)},aH=(t,s,a)=>{const i=Fs.getCurrent(s).getOr(s),d=ae(t.element);a?pt(i.element,"min-width",d+"px"):Tu(i.element,d)},l4=(t,s)=>t.getSystem().getByUid(s.uid+"-"+aP()).map(a=>()=>Yo.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Yo.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),u4=t=>{Rs.getState(t).each(s=>{Zp.repositionMenus(s)})},d4=(t,s,a)=>{const i=KC(),d=(S,E)=>{const O=iP(t,s);i.link(s.element),t.matchWidth&&aH(O.hotspot,E,t.useMinWidth),t.onOpen(O,S,E),a!==void 0&&a.onOpen!==void 0&&a.onOpen(S,E)},g=(S,E)=>{i.unlink(s.element),p().getOr(E).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(S,E)},p=l4(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:yu.augment(t.sandboxBehaviours,[Ln.config({store:{mode:"memory",initialValue:s}}),Rs.config({onOpen:d,onClose:g,isPartOf:(S,E,O)=>bh(E,O)||bh(s,O),getAttachPoint:()=>p().getOrDie()}),Fs.config({find:S=>Rs.getState(S).bind(E=>Fs.getCurrent(E))}),ol.config({channels:{...wg({isExtraPart:Ve}),...Dw({doReposition:u4})}})])}},lP=t=>{const s=$a.getCoupled(t,"sandbox");u4(s)},tA=()=>[et("sandboxClasses",[]),yu.field("sandboxBehaviours",[Fs,ol,Rs,Ln])],cH=J([Zt("dom"),Zt("fetch"),Es("onOpen"),nl("onExecute"),et("getHotspot",T.some),et("getAnchorOverrides",J({})),fg(),Dc("dropdownBehaviours",[ds,$a,yo,$o]),Zt("toggleClass"),et("eventOrder",{}),$s("lazySink"),et("matchWidth",!1),et("useMinWidth",!1),$s("role"),$s("listRole")].concat(tA())),iH=J([Cu({schema:[vp(),et("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),cP()]),lH=(t,s,a,i)=>{const d=F=>on(t.dom,"attributes").bind(z=>on(z,F)),g=F=>{Rs.getState(F).each(z=>{Zp.highlightPrimary(z)})},p=(F,z,X)=>i4(t,Yt,F,i,z,X),S=F=>{p(F,g,Pa.HighlightMenuAndItem).get(ie)},E={expand:F=>{ds.isOn(F)||p(F,ie,Pa.HighlightNone).get(ie)},open:F=>{ds.isOn(F)||p(F,ie,Pa.HighlightMenuAndItem).get(ie)},refetch:F=>$a.getExistingCoupled(F,"sandbox").fold(()=>p(F,ie,Pa.HighlightMenuAndItem).map(ie),X=>cy(t,Yt,F,X,i,ie,Pa.HighlightMenuAndItem).map(ie)),isOpen:ds.isOn,close:F=>{ds.isOn(F)&&p(F,ie,Pa.HighlightMenuAndItem).get(ie)},repositionMenus:F=>{ds.isOn(F)&&lP(F)}},O=(F,z)=>(Zf(F),T.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.dropdownBehaviours,[ds.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),$a.config({others:{sandbox:F=>d4(t,F,{onOpen:()=>ds.on(F),onClose:()=>ds.off(F)})}}),yo.config({mode:"special",onSpace:O,onEnter:O,onDown:(F,z)=>{if(Hd.isOpen(F)){const X=$a.getCoupled(F,"sandbox");g(X)}else Hd.open(F);return T.some(!0)},onEscape:(F,z)=>Hd.isOpen(F)?(Hd.close(F),T.some(!0)):T.none()}),$o.config({})]),events:iT(T.some(S)),eventOrder:{...t.eventOrder,[fu()]:["disabling","toggling","alloy.base.behaviour"]},apis:E,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),F=>({role:F})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Hd=wi({name:"Dropdown",configFields:cH(),partFields:iH(),factory:lH,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),uH=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},dH=t=>{const s=Ln.getValue(t),a=C2(t).map(WB);Hd.refetch(s).get(()=>{const i=$a.getCoupled(s,"sandbox");a.each(d=>C2(i).each(g=>M7(g,d)))})},nA=(t,s)=>{mH(t).each(a=>{cC(t,a.element,s.event.eventType,s.event.interactionEvent)})},mH=t=>Rs.getState(t).bind(ao.getHighlighted).bind(ao.getHighlighted),oA=t=>pl(t.element,kb)?T.some(t.element):Jr(t.element,"."+kb),uP=(t,s,a)=>{UB(t).each(i=>{P7(i,a),oA(s).each(g=>{nn(g,"id").each(p=>q(i.element,"aria-controls",p))})}),q(a.element,"aria-selected","true")},fH=(t,s,a)=>{q(a.element,"aria-selected","false")},gH=t=>{UB(t).each(s=>$o.focus(s))},hH=t=>$a.getExistingCoupled(t,"sandbox").bind(C2).map(WB).map(a=>a.fetchPattern).getOr("");var m4;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(m4||(m4={}));const sA=(t,s,a,i,d)=>{const g=a.shared.providers,p=S=>d?{...S,shortcut:T.none(),icon:S.text.isSome()?T.none():S.icon}:S;switch(t.type){case"menuitem":return o9(t).fold(Ih,S=>T.some(q9(p(S),s,g,i)));case"nestedmenuitem":return r9(t).fold(Ih,S=>T.some(sP(p(S),s,g,i,d)));case"togglemenuitem":return cM(t).fold(Ih,S=>T.some(K9(p(S),s,g,i)));case"separator":return eM(t).fold(Ih,S=>T.some(oP(S)));case"fancymenuitem":return UT(t).fold(Ih,S=>rP(S,a));default:return console.error("Unknown item in general menu",t),T.none()}},iy=(t,s,a,i,d,g,p)=>{const S=i===1,E=!S||$T(t);return _r(Ne(t,O=>{switch(O.type){case"separator":return q7(O).fold(Ih,F=>T.some(oP(F)));case"cardmenuitem":return e9(O).fold(Ih,F=>T.some(Y9({...F,onAction:z=>{F.onAction(z),a(F.value,F.meta)}},d,g,{itemBehaviours:$D(F.meta,g,T.none()),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return K7(O).fold(Ih,F=>T.some(G9(F,s,S,"normal",a,d,g,E)))}}))},f4=(t,s,a,i,d,g)=>{const p=$T(s),S=_r(Ne(s,F=>{const z=ee=>d?!Zo(ee,"text"):p,X=ee=>sA(ee,a,i,z(ee),d);return F.type==="nestedmenuitem"&&F.getSubmenuItems().length<=0?X({...F,enabled:!1}):X(F)})),E=uH(g);return(d?L7:SD)(t,p,S,1,E)},rA=t=>Zp.singleData(t.value,t),pH=(t,s,a,i)=>{const d=eA(s,i),g=Tb(i);return{data:rA({...t,movement:d,menuBehaviours:ny.unnamedEvents(s!=="auto"?[]:[Zr((p,S)=>{BD(p,4,g.item).each(({numColumns:E,numRows:O})=>{yo.setGridSize(p,O,E)})})])}),menu:{markers:Tb(i),fakeFocus:a===m4.ContentFocus}}},bH=t=>K1.create(Le.fromDom(t.startContainer),t.startOffset,Le.fromDom(t.endContainer),t.endOffset),vH={register:(t,s)=>{const a=Vn("autocompleter"),i=oo(!1),d=oo(!1),g=Ys(),p=li(Qr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:hn([ts("dismissAutocompleter",[Gt(Uf(),()=>z()),Gt(Wf(),(Oe,Ue)=>{nn(Ue.event.target,"id").each(We=>q(Le.fromDom(t.getBody()),"aria-activedescendant",We))})])]),lazySink:s.getSink})),S=()=>Qr.isOpen(p),E=d.get,O=()=>{if(S()){Qr.hide(p),t.dom.remove(a,!1);const Oe=Le.fromDom(t.getBody());nn(Oe,"aria-owns").filter(Ue=>Ue===a).each(()=>{$(Oe,"aria-owns"),$(Oe,"aria-activedescendant")})}},F=()=>Qr.getContent(p).bind(Oe=>Wt(Oe.components(),0)),z=()=>t.execCommand("mceAutocompleterClose"),X=Oe=>{const Ue=Xt(Oe,We=>T.from(We.columns)).getOr(1);return L(Oe,We=>{const Ut=We.items;return iy(Ut,We.matchText,(Bt,_n)=>{const Hn={hide:()=>z(),reload:$t=>{O(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:$t})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each($t=>{i.set(!0),We.onAction(Hn,$t,Bt,_n),i.set(!1)})},Ue,km.BUBBLE_TO_SANDBOX,s,We.highlightOn)})},ee=(Oe,Ue)=>{const We=Xt(Oe,Ut=>T.from(Ut.columns)).getOr(1);Qr.showMenuAt(p,{anchor:{type:"selection",getSelection:()=>g.get().map(bH),root:Le.fromDom(t.getBody())}},pH(SD("autocompleter-value",!0,Ue,We,{menuType:"normal"}),We,m4.ContentFocus,"normal")),F().each(ao.highlightFirst)},me=Oe=>{const Ue=X(Oe);Ue.length>0?(ee(Oe,Ue),q(Le.fromDom(t.getBody()),"aria-owns",a),t.inline||pe()):O()},pe=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const Oe=t.getDoc().documentElement,Ue=t.selection.getNode(),We=S0(p.element);vo(We,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Ue.offsetTop}px`,left:`${Ue.offsetLeft}px`}),t.dom.add(Oe,We.dom),Jr(We,'[role="menu"]').each(Ut=>{qo(Ut,"position"),qo(Ut,"max-height")})};t.on("AutocompleterStart",({lookupData:Oe})=>{d.set(!0),i.set(!1),me(Oe)}),t.on("AutocompleterUpdate",({lookupData:Oe})=>me(Oe)),t.on("AutocompleterUpdateActiveRange",({range:Oe})=>g.set(Oe)),t.on("AutocompleterEnd",()=>{O(),d.set(!1),i.set(!1),g.clear()});const Ye={cancelIfNecessary:z,isMenuOpen:S,isActive:E,isProcessingAction:i.get,getMenu:F};FB.setup(Ye,t)}},B2=(t,s,a)=>Zu(t,s,a).isSome(),dP=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},mP=5,yH=400,fP=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?T.none():T.some(s.touches[0])},CH=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>mP||i>mP},wH=t=>{const s=Ys(),a=oo(!1),i=dP(O=>{t.triggerEvent(ci(),O),a.set(!0)},yH),d=O=>(fP(O).each(F=>{i.cancel();const z={x:F.clientX,y:F.clientY,target:O.target};i.schedule(O),a.set(!1),s.set(z)}),T.none()),g=O=>(i.cancel(),fP(O).each(F=>{s.on(z=>{CH(F,z)&&s.clear()})}),T.none()),p=O=>{i.cancel();const F=z=>ks(z.target,O.target);return s.get().filter(F).map(z=>a.get()?(O.prevent(),!1):t.triggerEvent(Td(),O))},S=js([{key:du(),value:d},{key:Ms(),value:g},{key:Tr(),value:p}]);return{fireIfReady:(O,F)=>on(S,F).bind(z=>z(O))}},gP=t=>t.raw.which===sa[0]&&!Dt(["input","textarea"],As(t.target))&&!B2(t.target,'[contenteditable="true"]'),ly=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=wH(a),g=Ne(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),ee=>$i(t,ee,me=>{d.fireIfReady(me,ee).each(Ye=>{Ye&&me.kill()}),a.triggerEvent(ee,me)&&me.kill()})),p=Ys(),S=$i(t,"paste",ee=>{d.fireIfReady(ee,"paste").each(pe=>{pe&&ee.kill()}),a.triggerEvent("paste",ee)&&ee.kill(),p.set(setTimeout(()=>{a.triggerEvent(Qm(),ee)},0))}),E=$i(t,"keydown",ee=>{a.triggerEvent("keydown",ee)?ee.kill():a.stopBackspace&&gP(ee)&&ee.prevent()}),O=$i(t,"focusin",ee=>{a.triggerEvent("focusin",ee)&&ee.kill()}),F=Ys(),z=$i(t,"focusout",ee=>{a.triggerEvent("focusout",ee)&&ee.kill(),F.set(setTimeout(()=>{a.triggerEvent(Vf(),ee)},0))});return{unbind:()=>{dt(g,ee=>{ee.unbind()}),E.unbind(),O.unbind(),z.unbind(),S.unbind(),p.on(clearTimeout),F.on(clearTimeout)}}},Qp=(t,s)=>{const a=on(t,"target").getOr(s);return oo(a)},SH=(t,s)=>{const a=oo(!1),i=oo(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},hP=t=>{const s=oo(!1);return{stop:()=>{s.set(!0)},cut:ie,isStopped:s.get,isCut:Ve,event:t,setSource:we("Cannot set source of a broadcasted event"),getSource:we("Cannot get source of a broadcasted event")}},uy=ue.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),M2=(t,s,a,i,d,g)=>{const p=t(s,i),S=SH(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),uy.complete()),E=>{const O=E.descHandler;return Cp(O)(S),S.isStopped()?(g.logEventStopped(s,E.element,O.purpose),uy.stopped()):S.isCut()?(g.logEventCut(s,E.element,O.purpose),uy.complete()):Fa(E.element).fold(()=>(g.logNoParent(s,E.element,O.purpose),uy.complete()),z=>(g.logEventResponse(s,E.element,O.purpose),uy.resume(z)))})},pP=(t,s,a,i,d,g)=>M2(t,s,a,i,d,g).fold(je,p=>pP(t,s,a,p,d,g),Ve),P2=(t,s,a,i,d)=>{const g=Qp(a,i);return M2(t,s,a,i,g,d)},$2=(t,s,a)=>{const i=hP(s);return dt(t,d=>{const g=d.descHandler;Cp(g)(i)}),i.isStopped()},xH=(t,s,a,i)=>bP(t,s,a,a.target,i),bP=(t,s,a,i,d)=>{const g=Qp(a,i);return pP(t,s,a,i,g,d)},EH=(t,s)=>({element:t,descHandler:s}),TH=(t,s)=>({id:t,descHandler:s}),AH=()=>{const t={},s=(p,S,E)=>{po(E,(O,F)=>{const z=t[F]!==void 0?t[F]:{};z[S]=yp(O,p),t[F]=z})},a=(p,S)=>Dd(S).bind(E=>on(p,E)).map(E=>EH(S,E));return{registerId:s,unregisterId:p=>{po(t,(S,E)=>{Zo(S,p)&&delete S[p]})},filterByType:p=>on(t,p).map(S=>ir(S,(E,O)=>TH(O,E))).getOr([]),find:(p,S,E)=>on(t,S).bind(O=>Nl(E,F=>a(O,F),p))}},kH=()=>{const t=AH(),s={},a=O=>{const F=O.element;return Dd(F).getOrThunk(()=>wx("uid-",O.element))},i=(O,F)=>{const z=s[F];if(z===O)g(O);else throw new Error('The tagId "'+F+'" is already used by: '+Qf(z.element)+`
Cannot use it for: `+Qf(O.element)+`
The conflicting element is`+($n(z.element)?" ":" not ")+"already in the DOM")},d=O=>{const F=a(O);gr(s,F)&&i(O,F);const z=[O];t.registerId(z,F,O.events),s[F]=O},g=O=>{Dd(O.element).each(F=>{delete s[F],t.unregisterId(F)})};return{find:(O,F,z)=>t.find(O,F,z),filter:O=>t.filterByType(O),register:d,unregister:g,getById:O=>on(s,O)}},Cf=Tl({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:ab(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[et("components",[]),Dc("containerBehaviours",[]),et("events",{}),et("domModification",{}),et("eventOrder",{})]}),I2=t=>{const s=Oe=>Fa(t.element).fold(je,Ue=>ks(Oe,Ue)),a=kH(),i=(Oe,Ue)=>a.find(s,Oe,Ue),d=ly(t.element,{triggerEvent:(Oe,Ue)=>nf(Oe,Ue.target,We=>xH(i,Oe,Ue,We))}),g={debugInfo:J("real"),triggerEvent:(Oe,Ue,We)=>{nf(Oe,Ue,Ut=>bP(i,Oe,We,Ue,Ut))},triggerFocus:(Oe,Ue)=>{Dd(Oe).fold(()=>{Pl(Oe)},We=>{nf(Ed(),Oe,Ut=>(P2(i,Ed(),{originator:Ue,kill:ie,prevent:ie,target:Oe},Oe,Ut),!1))})},triggerEscape:(Oe,Ue)=>{g.triggerEvent("keydown",Oe.element,Ue.event)},getByUid:Oe=>pe(Oe),getByDom:Oe=>Ye(Oe),build:li,buildOrPatch:P0,addToGui:Oe=>{E(Oe)},removeFromGui:Oe=>{O(Oe)},addToWorld:Oe=>{p(Oe)},removeFromWorld:Oe=>{S(Oe)},broadcast:Oe=>{X(Oe)},broadcastOn:(Oe,Ue)=>{ee(Oe,Ue)},broadcastEvent:(Oe,Ue)=>{me(Oe,Ue)},isConnected:je},p=Oe=>{Oe.connect(g),is(Oe.element)||(a.register(Oe),dt(Oe.components(),p),g.triggerEvent(k1(),Oe.element,{target:Oe.element}))},S=Oe=>{is(Oe.element)||(dt(Oe.components(),S),a.unregister(Oe)),Oe.disconnect()},E=Oe=>{Gu(t,Oe)},O=Oe=>{df(Oe)},F=()=>{d.unbind(),oi(t.element)},z=Oe=>{const Ue=a.filter(mu());dt(Ue,We=>{const Ut=We.descHandler;Cp(Ut)(Oe)})},X=Oe=>{z({universal:!0,data:Oe})},ee=(Oe,Ue)=>{z({universal:!1,channels:Oe,data:Ue})},me=(Oe,Ue)=>{const We=a.filter(Oe);return $2(We,Ue)},pe=Oe=>a.getById(Oe).fold(()=>Yo.error(new Error('Could not find component with uid: "'+Oe+'" in system.')),Yo.value),Ye=Oe=>{const Ue=Dd(Oe).getOr("not found");return pe(Ue)};return p(t),{root:t,element:t.element,destroy:F,add:E,remove:O,getByUid:pe,getByDom:Ye,addToWorld:p,removeFromWorld:S,broadcast:X,broadcastOn:ee,broadcastEvent:me}},_H=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ne(t.items,s.interpreter)}),DH=J([et("prefix","form-field"),Dc("fieldBehaviours",[Fs,Ln])]),OH=J([Hl({schema:[Zt("dom")],name:"label"}),Hl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Zt("text")],name:"aria-descriptor"}),Qc({factory:{sketch:t=>{const s=jo(t,["factory"]);return t.factory.sketch(s)}},schema:[Zt("factory")],name:"field"})]),vP=(t,s,a,i)=>{const d=Oc(t.fieldBehaviours,[Fs.config({find:S=>mn(S,t,"field")}),Ln.config({store:{mode:"manual",getValue:S=>Fs.getCurrent(S).bind(Ln.getValue),setValue:(S,E)=>{Fs.getCurrent(S).each(O=>{Ln.setValue(O,E)})}}})]),g=Mr([Zr((S,E)=>{const O=ZE(S,t,["label","field","aria-descriptor"]);O.field().each(F=>{const z=Vn(t.prefix);O.label().each(X=>{q(X.element,"for",z),q(F.element,"id",z)}),O["aria-descriptor"]().each(X=>{const ee=Vn(t.prefix);q(X.element,"id",ee),q(F.element,"aria-describedby",ee)})})})]),p={getField:S=>mn(S,t,"field"),getLabel:S=>mn(S,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},ar=wi({name:"FormField",configFields:DH(),partFields:OH(),factory:vP,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var RH=tinymce.util.Tools.resolve("tinymce.html.Entities");const L2=(t,s,a,i)=>{const d=FH(t,s,a,i);return ar.sketch(d)},yP=(t,s)=>L2(t,s,[],[]),FH=(t,s,a,i)=>({dom:CP(a),components:t.toArray().concat([s]),fieldBehaviours:hn(i)}),NH=()=>CP([]),CP=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),e1=(t,s)=>ar.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[fa(s.translate(t))]}),Zl=Vn("form-component-change"),dy=Vn("form-close"),zh=Vn("form-cancel"),Tg=Vn("form-action"),H2=Vn("form-submit"),h4=Vn("form-block"),p4=Vn("form-unblock"),wP=Vn("form-tabchange"),b4=Vn("form-resize"),my=(t,s,a)=>{const i=t.label.map(ee=>e1(ee,s)),d=s.icons(),g=ee=>{var me;return(me=d[ee])!==null&&me!==void 0?me:ee},p=ee=>(me,pe)=>{Zu(pe.event.target,"[data-collection-item-value]").each(Ye=>{ee(me,pe,Ye,Ie(Ye,"data-collection-item-value"))})},S=(ee,me)=>{const pe=Ne(me,Ue=>{const We=Ju.translate(Ue.text),Ut=t.columns===1?`<div class="tox-collection__item-label">${We}</div>`:"",Bt=`<div class="tox-collection__item-icon">${g(Ue.icon)}</div>`,_n={_:" "," - ":" ","-":" "},Hn=We.replace(/\_| \- |\-/g,Kn=>_n[Kn]),$t=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Hn}" class="tox-collection__item${$t}" tabindex="-1" data-collection-item-value="${RH.encodeAllRaw(Ue.value)}" aria-label="${Hn}">${Bt}${Ut}</div>`}),Ye=t.columns!=="auto"&&t.columns>1?rn(pe,t.columns):[pe],Oe=Ne(Ye,Ue=>`<div class="tox-collection__group">${Ue.join("")}</div>`);Jf(ee.element,Oe.join(""))},E=p((ee,me,pe,Ye)=>{me.stop(),s.isDisabled()||wo(ee,Tg,{name:t.name,value:Ye})}),O=[Gt(fl(),p((ee,me,pe)=>{Pl(pe)})),Gt(nh(),E),Gt(Td(),E),Gt(Sd(),p((ee,me,pe)=>{Jr(ee.element,"."+Kp).each(Ye=>{ma(Ye,Kp)}),Pr(pe,Kp)})),Gt(um(),p(ee=>{Jr(ee.element,"."+Kp).each(me=>{ma(me,Kp),W0(me)})})),Uu(p((ee,me,pe,Ye)=>{wo(ee,Tg,{name:t.name,value:Ye})}))],F=(ee,me)=>Ne(Hc(ee.element,".tox-collection__item"),me),z=ar.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Yt},behaviours:hn([l.config({disabled:s.isDisabled,onDisabled:ee=>{F(ee,me=>{Pr(me,"tox-collection__item--state-disabled"),q(me,"aria-disabled",!0)})},onEnabled:ee=>{F(ee,me=>{ma(me,"tox-collection__item--state-disabled"),$(me,"aria-disabled")})}}),Fc(),Uo.config({}),Da.config({...s.tooltips.getConfig({tooltipText:"",onShow:ee=>{Jr(ee.element,"."+Kp+"[data-mce-tooltip]").each(me=>{nn(me,"data-mce-tooltip").each(pe=>{Da.setComponents(ee,s.tooltips.getComponents({tooltipText:pe}))})})}}),mode:"children-keyboard-focus",anchor:ee=>({type:"node",node:Jr(ee.element,"."+Kp).orThunk(()=>Mi(".tox-collection__item")),root:ee.element,layouts:{onLtr:J([ic,cc,ac,sr,ka,Yc]),onRtl:J([ic,cc,ac,sr,ka,Yc])},bubble:ju(0,-2,{})})}),Ln.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(ee,me)=>{S(ee,me),t.columns==="auto"&&BD(ee,5,"tox-collection__item").each(({numRows:pe,numColumns:Ye})=>{yo.setGridSize(ee,pe,Ye)}),rs(ee,b4)}}),Ir.config({}),yo.config(M9(t.columns,"normal")),ts("collection-events",O)]),eventOrder:{[fu()]:["disabling","alloy.base.behaviour","collection-events"],[Sd()]:["collection-events","tooltipping"]}});return L2(i,z,["tox-form__group--collection"],[])},BH=["input","textarea"],SP=t=>{const s=As(t);return Dt(BH,s)},xP=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ma(a,s.invalidClass),s.notify.each(i=>{SP(t.element)&&q(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Jf(d,i.validHtml)}),i.onValid(t)})},z2=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Pr(d,s.invalidClass),s.notify.each(g=>{SP(t.element)&&q(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Jf(p,i)}),g.onInvalid(t,i)})},ed=(t,s,a)=>s.validator.fold(()=>mi.pure(Yo.value(!0)),i=>i.validate(t)),V2=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),ed(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(z2(t,s,a,d),Yo.error(d)),d=>(xP(t,s),Yo.value(d))):Yo.error("No longer in system")));var PH=Object.freeze({__proto__:null,markValid:xP,markInvalid:z2,query:ed,run:V2,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return pl(a,s.invalidClass)}}),$H=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Mr([Gt(a.onEvent,i=>{V2(i,t,s).get(Yt)})].concat(a.validateOnLoad?[Zr(i=>{V2(i,t,s).get(ie)})]:[]))).getOr({})}),IH=[Zt("invalidClass"),et("getRoot",T.none),Or("notify",[et("aria","alert"),et("getContainer",T.none),et("validHtml",""),Es("onValid"),Es("onInvalid"),Es("onValidate")]),Or("validator",[Zt("validate"),et("onEvent","input"),et("validateOnLoad",!0)])];const wf=Ic({fields:IH,name:"invalidating",active:$H,apis:PH,extra:{validation:t=>s=>{const a=Ln.getValue(s);return mi.pure(t(a))}}});var HH=Object.freeze({__proto__:null,events:()=>Mr([sx(nC(),je)]),exhibit:()=>gl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const fy=Ic({fields:[],name:"unselecting",active:HH}),zH=(t,s)=>Hd.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:hn([Dm.button(s.providers.isDisabled),Fc(),fy.config({}),Ir.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>mi.nu(i=>t.fetch(i)).map(i=>T.from(rA(xr(r4(Vn("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,km.CLOSE_ON_EXECUTE,Ve,s.providers),{movement:eA(t.columns,t.presets)})))),parts:{menu:y2(!1,1,t.presets)}}),v4=Vn("color-input-change"),y4=Vn("color-swatch-change"),C4=Vn("color-picker-cancel"),VH=(t,s,a,i)=>{const d=ar.parts.field({factory:Ab,inputClasses:["tox-textfield"],data:i,onSetValue:O=>wf.run(O).get(ie),inputBehaviours:hn([l.config({disabled:s.providers.isDisabled}),Fc(),Ir.config({}),wf.config({invalidClass:"tox-textbox-field-invalid",getRoot:O=>tc(O.element),notify:{onValid:O=>{const F=Ln.getValue(O);wo(O,v4,{color:F})}},validator:{validateOnLoad:!1,validate:O=>{const F=Ln.getValue(O);if(F.length===0)return mi.pure(Yo.value(!0));{const z=Le.fromTag("span");pt(z,"background-color",F);const X=Hs(z,"background-color").fold(()=>Yo.error("blah"),ee=>Yo.value(F));return mi.pure(X)}}}})]),selectOnFocus:!1}),g=t.label.map(O=>e1(O,s.providers)),p=(O,F)=>{wo(O,y4,{value:F})},S=(O,F)=>{E.getOpt(O).each(z=>{F==="custom"?a.colorPicker(X=>{X.fold(()=>rs(z,C4),ee=>{p(z,ee),LM(t.storageKey,ee)})},"#ffffff"):F==="remove"?p(z,""):p(z,F)})},E=qs(zH({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ka,ac,ic],onLtr:()=>[ac,ka,ic]},components:[],fetch:GM(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:S},s));return ar.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,E.asSpec()]}]),fieldBehaviours:hn([ts("form-field-events",[Gt(v4,(O,F)=>{E.getOpt(O).each(z=>{pt(z.element,"background-color",F.event.color)}),wo(O,Zl,{name:t.name})}),Gt(y4,(O,F)=>{ar.getField(O).each(z=>{Ln.setValue(z,F.event.value),Fs.getCurrent(O).each($o.focus)})}),Gt(C4,(O,F)=>{ar.getField(O).each(z=>{Fs.getCurrent(O).each($o.focus)})})])])})},UH=Hl({schema:[Zt("dom")],name:"label"}),t1=t=>Hl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Mr([ah(du(),(d,g,p)=>i(d,p),[s]),ah(ya(),(d,g,p)=>i(d,p),[s]),ah(ip(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),WH=t1("top-left"),ZH=t1("top"),jH=t1("top-right"),w4=t1("right"),GH=t1("bottom-right"),qH=t1("bottom"),EP=t1("bottom-left"),KH=t1("left"),YH=Qc({name:"thumb",defaults:J({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Mr([ch(du(),t,"spectrum"),ch(Ms(),t,"spectrum"),ch(Tr(),t,"spectrum"),ch(ya(),t,"spectrum"),ch(ip(),t,"spectrum"),ch(Jm(),t,"spectrum")])})}),aA=t=>Yu(t.event),XH=Qc({schema:[zs("mouseIsDown",()=>oo(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:hn([yo.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,aA(g)),onRight:(d,g)=>a.onRight(d,t,aA(g)),onUp:(d,g)=>a.onUp(d,t,aA(g)),onDown:(d,g)=>a.onDown(d,t,aA(g))}),Ir.config({}),$o.config({})]),events:Mr([Gt(du(),i),Gt(Ms(),i),Gt(ya(),i),Gt(ip(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var JH=[UH,KH,w4,ZH,qH,WH,jH,EP,GH,YH,XH];const U2=J("slider.change.value"),TP=t=>t.type.indexOf("touch")!==-1,cA=t=>{const s=t.event.raw;if(TP(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?T.some(a.touches[0]).map(i=>Dr(i.clientX,i.clientY)):T.none()}else{const a=s;return a.clientX!==void 0?T.some(a).map(i=>Dr(i.clientX,i.clientY)):T.none()}},QH="top",ez="right",tz="bottom",nz="left",Mb=t=>t.model.minX,Pb=t=>t.model.minY,W2=t=>t.model.minX-1,Z2=t=>t.model.minY-1,n1=t=>t.model.maxX,Vh=t=>t.model.maxY,iA=t=>t.model.maxX+1,j2=t=>t.model.maxY+1,AP=(t,s,a)=>s(t)-a(t),S4=t=>AP(t,n1,Mb),x4=t=>AP(t,Vh,Pb),kP=t=>S4(t)/2,lA=t=>x4(t)/2,td=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,_P=t=>t.snapToGrid,gy=t=>t.snapStart,DP=t=>t.rounded,hy=(t,s)=>t[s+"-edge"]!==void 0,OP=t=>hy(t,nz),RP=t=>hy(t,ez),FP=t=>hy(t,QH),E4=t=>hy(t,tz),Uh=t=>t.model.value.get(),Ag=(t,s)=>({x:t,y:s}),nd=(t,s)=>{wo(t,U2(),{value:s})},T4=(t,s)=>{nd(t,Ag(W2(s),Z2(s)))},oz=(t,s)=>{nd(t,Z2(s))},od=(t,s)=>{nd(t,Ag(kP(s),Z2(s)))},sz=(t,s)=>{nd(t,Ag(iA(s),Z2(s)))},rz=(t,s)=>{nd(t,iA(s))},NP=(t,s)=>{nd(t,Ag(iA(s),lA(s)))},BP=(t,s)=>{nd(t,Ag(iA(s),j2(s)))},az=(t,s)=>{nd(t,j2(s))},cz=(t,s)=>{nd(t,Ag(kP(s),j2(s)))},iz=(t,s)=>{nd(t,Ag(W2(s),j2(s)))},lz=(t,s)=>{nd(t,W2(s))},uz=(t,s)=>{nd(t,Ag(W2(s),lA(s)))},A4=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),k4=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),_4=(t,s,a)=>Math.max(s,Math.min(a,t)),dz=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return _4(s+p,s-1,a+1)},g=>{const p=(t-g)%i,S=Math.round(p/i),E=Math.floor((t-g)/i),O=Math.floor((a-g)/i),F=Math.min(O,E+S),z=g+F*i;return Math.max(g,z)}),mz=(t,s,a)=>Math.min(a,Math.max(t,s))-s,MP=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:S,rounded:E,hasMinEdge:O,hasMaxEdge:F,minBound:z,maxBound:X,screenRange:ee}=t,me=O?s-1:s,pe=F?a+1:a;if(d<z)return me;if(d>X)return pe;{const Ye=mz(d,z,X),Oe=_4(Ye/ee*i+s,me,pe);return p&&Oe>=s&&Oe<=a?dz(Oe,s,a,g,S):E?Math.round(Oe):Oe}},D4=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:S,maxOffset:E,centerMinEdge:O,centerMaxEdge:F}=t;return d<s?g?0:O:d>a?p?S:F:(d-s)/i*E},G2="top",O4="right",R4="bottom",uA="left",PP="width",F4="height",kg=t=>t.element.dom.getBoundingClientRect(),sd=(t,s)=>t[s],Wh=t=>{const s=kg(t);return sd(s,uA)},N4=t=>{const s=kg(t);return sd(s,O4)},q2=t=>{const s=kg(t);return sd(s,G2)},B4=t=>{const s=kg(t);return sd(s,R4)},$P=t=>{const s=kg(t);return sd(s,PP)},IP=t=>{const s=kg(t);return sd(s,F4)},K2=(t,s,a)=>(t+s)/2-a,LP=(t,s)=>{const a=kg(t),i=kg(s),d=sd(a,uA),g=sd(a,O4),p=sd(i,uA);return K2(d,g,p)},HP=(t,s)=>{const a=kg(t),i=kg(s),d=sd(a,G2),g=sd(a,R4),p=sd(i,G2);return K2(d,g,p)},Y2=(t,s)=>{wo(t,U2(),{value:s})},dA=(t,s,a)=>{const i={min:Mb(s),max:n1(s),range:S4(s),value:a,step:td(s),snap:_P(s),snapStart:gy(s),rounded:DP(s),hasMinEdge:OP(s),hasMaxEdge:RP(s),minBound:Wh(t),maxBound:N4(t),screenRange:$P(t)};return MP(i)},M4=(t,s,a)=>{const i=dA(t,s,a);return Y2(t,i),i},zP=(t,s)=>{const a=Mb(s);Y2(t,a)},kl=(t,s)=>{const a=n1(s);Y2(t,a)},VP=(t,s,a,i)=>{const g=(t>0?k4:A4)(Uh(a),Mb(a),n1(a),td(a,i));return Y2(s,g),T.some(g)},UP=t=>(s,a,i)=>VP(t,s,a,i).map(je),fz=t=>cA(t).map(a=>a.left),WP=(t,s,a,i,d)=>{const p=$P(t),S=i.bind(F=>T.some(LP(F,t))).getOr(0),E=d.bind(F=>T.some(LP(F,t))).getOr(p),O={min:Mb(s),max:n1(s),range:S4(s),value:a,hasMinEdge:OP(s),hasMaxEdge:RP(s),minBound:Wh(t),minOffset:0,maxBound:N4(t),maxOffset:p,centerMinEdge:S,centerMaxEdge:E};return D4(O)},P4=(t,s,a,i,d,g)=>{const p=WP(s,g,a,i,d);return Wh(s)-Wh(t)+p},gz=(t,s,a,i)=>{const d=Uh(a),g=P4(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=ae(s.element)/2;pt(s.element,"left",g-p+"px")},hz=UP(-1),ZP=UP(1),_g=T.none,$4=T.none,jP={"top-left":T.none(),top:T.none(),"top-right":T.none(),right:T.some(rz),"bottom-right":T.none(),bottom:T.none(),"bottom-left":T.none(),left:T.some(lz)};var mA=Object.freeze({__proto__:null,setValueFrom:M4,setToMin:zP,setToMax:kl,findValueOfOffset:dA,getValueFromEvent:fz,findPositionOfValue:P4,setPositionFromValue:gz,onLeft:hz,onRight:ZP,onUp:_g,onDown:$4,edgeActions:jP});const py=(t,s)=>{wo(t,U2(),{value:s})},I4=(t,s,a)=>{const i={min:Pb(s),max:Vh(s),range:x4(s),value:a,step:td(s),snap:_P(s),snapStart:gy(s),rounded:DP(s),hasMinEdge:FP(s),hasMaxEdge:E4(s),minBound:q2(t),maxBound:B4(t),screenRange:IP(t)};return MP(i)},pz=(t,s,a)=>{const i=I4(t,s,a);return py(t,i),i},bz=(t,s)=>{const a=Pb(s);py(t,a)},vz=(t,s)=>{const a=Vh(s);py(t,a)},yz=(t,s,a,i)=>{const g=(t>0?k4:A4)(Uh(a),Pb(a),Vh(a),td(a,i));return py(s,g),T.some(g)},GP=t=>(s,a,i)=>yz(t,s,a,i).map(je),Cz=t=>cA(t).map(a=>a.top),qP=(t,s,a,i,d)=>{const p=IP(t),S=i.bind(F=>T.some(HP(F,t))).getOr(0),E=d.bind(F=>T.some(HP(F,t))).getOr(p),O={min:Pb(s),max:Vh(s),range:x4(s),value:a,hasMinEdge:FP(s),hasMaxEdge:E4(s),minBound:q2(t),minOffset:0,maxBound:B4(t),maxOffset:p,centerMinEdge:S,centerMaxEdge:E};return D4(O)},L4=(t,s,a,i,d,g)=>{const p=qP(s,g,a,i,d);return q2(s)-q2(t)+p},Dg=(t,s,a,i)=>{const d=Uh(a),g=L4(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=nr(s.element)/2;pt(s.element,"top",g-p+"px")},fA=T.none,wz=T.none,Sz=GP(-1),KP=GP(1),YP={"top-left":T.none(),top:T.some(oz),"top-right":T.none(),right:T.none(),"bottom-right":T.none(),bottom:T.some(az),"bottom-left":T.none(),left:T.none()};var H4=Object.freeze({__proto__:null,setValueFrom:pz,setToMin:bz,setToMax:vz,findValueOfOffset:I4,getValueFromEvent:Cz,findPositionOfValue:L4,setPositionFromValue:Dg,onLeft:fA,onRight:wz,onUp:Sz,onDown:KP,edgeActions:YP});const $b=(t,s)=>{wo(t,U2(),{value:s})},o1=(t,s)=>({x:t,y:s}),X2=(t,s,a)=>{const i=dA(t,s,a.left),d=I4(t,s,a.top),g=o1(i,d);return $b(t,g),g},XP=(t,s,a,i,d)=>{const g=t>0?k4:A4,p=s?Uh(i).x:g(Uh(i).x,Mb(i),n1(i),td(i,d)),S=s?g(Uh(i).y,Pb(i),Vh(i),td(i,d)):Uh(i).y;return $b(a,o1(p,S)),T.some(p)},J2=(t,s)=>(a,i,d)=>XP(t,s,a,i,d).map(je),JP=(t,s)=>{const a=Mb(s),i=Pb(s);$b(t,o1(a,i))},QP=(t,s)=>{const a=n1(s),i=Vh(s);$b(t,o1(a,i))},xz=t=>cA(t),Ez=(t,s,a,i)=>{const d=Uh(a),g=P4(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=L4(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),S=ae(s.element)/2,E=nr(s.element)/2;pt(s.element,"left",g-S+"px"),pt(s.element,"top",p-E+"px")},Tz=J2(-1,!1),Az=J2(1,!1),kz=J2(-1,!0),e5=J2(1,!0),t5={"top-left":T.some(T4),top:T.some(od),"top-right":T.some(sz),right:T.some(NP),"bottom-right":T.some(BP),bottom:T.some(cz),"bottom-left":T.some(iz),left:T.some(uz)};var _z=Object.freeze({__proto__:null,setValueFrom:X2,setToMin:JP,setToMax:QP,getValueFromEvent:xz,setPositionFromValue:Ez,onLeft:Tz,onRight:Az,onUp:kz,onDown:e5,edgeActions:t5});const n5=[et("stepSize",1),et("speedMultiplier",10),et("onChange",ie),et("onChoose",ie),et("onInit",ie),et("onDragStart",ie),et("onDragEnd",ie),et("snapToGrid",!1),et("rounded",!0),$s("snapStart"),Vs("model",sc("mode",{x:[et("minX",0),et("maxX",100),zs("value",t=>oo(t.mode.minX)),Zt("getInitialValue"),hr("manager",mA)],y:[et("minY",0),et("maxY",100),zs("value",t=>oo(t.mode.minY)),Zt("getInitialValue"),hr("manager",H4)],xy:[et("minX",0),et("maxX",100),et("minY",0),et("maxY",100),zs("value",t=>oo({x:t.mode.minX,y:t.mode.minY})),Zt("getInitialValue"),hr("manager",_z)]})),Dc("sliderBehaviours",[yo,Ln]),zs("mouseIsDown",()=>oo(!1))],zd=wi({name:"Slider",configFields:n5,partFields:JH,factory:(t,s,a,i)=>{const d=Bt=>zl(Bt,t,"thumb"),g=Bt=>zl(Bt,t,"spectrum"),p=Bt=>mn(Bt,t,"left-edge"),S=Bt=>mn(Bt,t,"right-edge"),E=Bt=>mn(Bt,t,"top-edge"),O=Bt=>mn(Bt,t,"bottom-edge"),F=t.model,z=F.manager,X=(Bt,_n)=>{z.setPositionFromValue(Bt,_n,t,{getLeftEdge:p,getRightEdge:S,getTopEdge:E,getBottomEdge:O,getSpectrum:g})},ee=(Bt,_n)=>{F.value.set(_n);const Hn=d(Bt);X(Bt,Hn)},me=(Bt,_n)=>{ee(Bt,_n);const Hn=d(Bt);return t.onChange(Bt,Hn,_n),T.some(!0)},pe=Bt=>{z.setToMin(Bt,t)},Ye=Bt=>{z.setToMax(Bt,t)},Oe=Bt=>{const _n=()=>{mn(Bt,t,"thumb").each($t=>{const Kn=F.value.get();t.onChoose(Bt,$t,Kn)})},Hn=t.mouseIsDown.get();t.mouseIsDown.set(!1),Hn&&_n()},Ue=(Bt,_n)=>{_n.stop(),t.mouseIsDown.set(!0),t.onDragStart(Bt,d(Bt))},We=(Bt,_n)=>{_n.stop(),t.onDragEnd(Bt,d(Bt)),Oe(Bt)},Ut=Bt=>{mn(Bt,t,"spectrum").map(yo.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.sliderBehaviours,[yo.config({mode:"special",focusIn:Ut}),Ln.config({store:{mode:"manual",getValue:Bt=>F.value.get(),setValue:ee}}),ol.config({channels:{[xv()]:{onReceive:Oe}}})]),events:Mr([Gt(U2(),(Bt,_n)=>{me(Bt,_n.event.value)}),Zr((Bt,_n)=>{const Hn=F.getInitialValue();F.value.set(Hn);const $t=d(Bt);X(Bt,$t);const Kn=g(Bt);t.onInit(Bt,$t,Kn,F.value.get())}),Gt(du(),Ue),Gt(Tr(),We),Gt(ya(),(Bt,_n)=>{Ut(Bt),Ue(Bt,_n)}),Gt(Jm(),We)]),apis:{resetToMin:pe,resetToMax:Ye,setValue:ee,refresh:X},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),Ib=Vn("rgb-hex-update"),o5=Vn("slider-update"),z4=Vn("palette-update"),Dz=(t,s)=>{const a=zd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=zd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return zd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:J(0)},components:[a,i],sliderBehaviours:hn([$o.config({})]),onChange:(d,g,p)=>{q(d.element,"aria-valuenow",Math.floor(360-p*3.6)),wo(d,o5,{value:p})}})},s5="form",Oz=[Dc("formBehaviours",[Ln])],r5=t=>"<alloy.field."+t+">",a5=t=>{const s=(()=>{const g=[];return{field:(S,E)=>(g.push(S),VE(s5,r5(S),E)),record:J(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>Qc({name:g,pname:r5(g)}));return Sg(s5,Oz,d,c5,a)},Rz=(t,s)=>t.fold(()=>Yo.error(s),Yo.value),c5=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.formBehaviours,[Ln.config({store:{mode:"manual",getValue:a=>{const i=Lw(a,t);return ro(i,(d,g)=>d().bind(p=>{const S=Fs.getCurrent(p);return Rz(S,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Qf(p.element)))}).map(Ln.getValue))},setValue:(a,i)=>{po(i,(d,g)=>{mn(a,t,g).each(p=>{Fs.getCurrent(p).each(S=>{Ln.setValue(S,d)})})})}}})]),apis:{getField:(a,i)=>mn(a,t,i).bind(Fs.getCurrent)}}),s1={getField:k0((t,s,a)=>t.getField(s,a)),sketch:a5},Og=Vn("valid-input"),gA=Vn("invalid-input"),V4=Vn("validating-input"),hA="colorcustom.rgb.",U4={isEnabled:je,setEnabled:ie,immediatelyShow:ie,immediatelyHide:ie},i5=(t,s,a,i,d,g)=>{const p=(pe,Ye)=>{const Oe=Ye.get();pe!==Oe.isEnabled()&&(Oe.setEnabled(pe),pe?Oe.immediatelyShow():Oe.immediatelyHide())},S=(pe,Ye,Oe)=>wf.config({invalidClass:s("invalid"),notify:{onValidate:Ue=>{wo(Ue,V4,{type:pe})},onValid:Ue=>{p(!1,Oe),wo(Ue,Og,{type:pe,value:Ln.getValue(Ue)})},onInvalid:Ue=>{p(!0,Oe),wo(Ue,gA,{type:pe,value:Ln.getValue(Ue)})}},validator:{validate:Ue=>{const We=Ln.getValue(Ue),Ut=Ye(We)?Yo.value(!0):Yo.error(t("aria.input.invalid"));return mi.pure(Ut)},validateOnLoad:!1}}),E=(pe,Ye,Oe,Ue,We)=>{const Ut=oo(U4),Bt=t(hA+"range"),_n=ar.parts.label({dom:{tag:"label",attributes:{"aria-label":Ue}},components:[fa(Oe)]}),Hn=ar.parts.field({data:We,factory:Ab,inputAttributes:{type:"text",...Ye==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:hn([S(Ye,pe,Ut),Ir.config({}),Da.config({...d({tooltipText:"",onSetup:Zs=>{Ut.set({isEnabled:()=>Da.isEnabled(Zs),setEnabled:Jn=>Da.setEnabled(Zs,Jn),immediatelyShow:()=>Da.immediateOpenClose(Zs,!0),immediatelyHide:()=>Da.immediateOpenClose(Zs,!1)}),Da.setEnabled(Zs,!1)},onShow:(Zs,Jn)=>{Da.setComponents(Zs,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[fa(t(Ye==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Zs=>{wf.isInvalid(Zs)&&wf.run(Zs).get(ie)}}),$t=Vn("aria-invalid"),Kn=qs(g("invalid",T.some($t),"warning")),Tn=qs({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Kn.asSpec()]}),eo=[_n,Hn,Tn.asSpec()],vs=Ye!=="hex"?[ar.parts["aria-descriptor"]({text:Bt})]:[],Hr=eo.concat(vs);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Hr}},O=(pe,Ye)=>{const Oe=_2(Ye);return s1.getField(pe,"hex").each(Ue=>{$o.isFocused(Ue)||Ln.setValue(pe,{hex:Oe.value})}),Oe},F=(pe,Ye)=>{const Oe=Ye.red,Ue=Ye.green,We=Ye.blue;Ln.setValue(pe,{red:Oe,green:Ue,blue:We})},z=qs({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),X=(pe,Ye)=>{z.getOpt(pe).each(Oe=>{pt(Oe.element,"background-color","#"+Ye.value)})};return Tl({factory:()=>{const pe={red:oo(T.some(255)),green:oo(T.some(255)),blue:oo(T.some(255)),hex:oo(T.some("ffffff"))},Ye=(Jn,ln)=>{const Rn=D2(ln);F(Jn,Rn),Ut(Rn)},Oe=Jn=>pe[Jn].get(),Ue=(Jn,ln)=>{pe[Jn].set(ln)},We=()=>Oe("red").bind(Jn=>Oe("green").bind(ln=>Oe("blue").map(Rn=>Fb(Jn,ln,Rn,1)))),Ut=Jn=>{const ln=Jn.red,Rn=Jn.green,Io=Jn.blue;Ue("red",T.some(ln)),Ue("green",T.some(Rn)),Ue("blue",T.some(Io))},Bt=(Jn,ln)=>{const Rn=ln.event;Rn.type!=="hex"?Ue(Rn.type,T.none()):i(Jn)},_n=(Jn,ln)=>{a(Jn);const Rn=wM(ln);Ue("hex",T.some(Rn.value));const Io=D2(Rn);F(Jn,Io),Ut(Io),wo(Jn,Ib,{hex:Rn}),X(Jn,Rn)},Hn=(Jn,ln,Rn)=>{const Io=parseInt(Rn,10);Ue(ln,T.some(Io)),We().each(Do=>{const ho=O(Jn,Do);wo(Jn,Ib,{hex:ho}),X(Jn,ho)})},$t=Jn=>Jn.type==="hex",Kn=(Jn,ln)=>{const Rn=ln.event;$t(Rn)?_n(Jn,Rn.value):Hn(Jn,Rn.type,Rn.value)},Tn=Jn=>({label:t(hA+Jn+".label"),description:t(hA+Jn+".description")}),eo=Tn("red"),vs=Tn("green"),Hr=Tn("blue"),Zs=Tn("hex");return xr(s1.sketch(Jn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Jn.field("red",ar.sketch(E(WD,"red",eo.label,eo.description,255))),Jn.field("green",ar.sketch(E(WD,"green",vs.label,vs.description,255))),Jn.field("blue",ar.sketch(E(WD,"blue",Hr.label,Hr.description,255))),Jn.field("hex",ar.sketch(E(xM,"hex",Zs.label,Zs.description,"ffffff"))),z.asSpec()],formBehaviours:hn([wf.config({invalidClass:s("form-invalid")}),ts("rgb-form-events",[Gt(Og,Kn),Gt(gA,Bt),Gt(V4,Bt)])])})),{apis:{updateHex:(Jn,ln)=>{Ln.setValue(Jn,{hex:ln.value}),Ye(Jn,ln),X(Jn,ln)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(pe,Ye,Oe)=>{pe.updateHex(Ye,Oe)}},extraApis:{}})},pA=(t,s)=>{const a=zd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=zd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(O,F)=>{const{width:z,height:X}=O,ee=O.getContext("2d");if(ee===null)return;ee.fillStyle=F,ee.fillRect(0,0,z,X);const me=ee.createLinearGradient(0,0,z,0);me.addColorStop(0,"rgba(255,255,255,1)"),me.addColorStop(1,"rgba(255,255,255,0)"),ee.fillStyle=me,ee.fillRect(0,0,z,X);const pe=ee.createLinearGradient(0,0,0,X);pe.addColorStop(0,"rgba(0,0,0,0)"),pe.addColorStop(1,"rgba(0,0,0,1)"),ee.fillStyle=pe,ee.fillRect(0,0,z,X)},g=(O,F)=>{const z=O.components()[0].element.dom,X=R2(F,100,100),ee=OM(X);d(z,RM(ee))},p=(O,F)=>{const z=F2(D2(F));zd.setValue(O,{x:z.saturation,y:100-z.value}),q(O.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",z.saturation,z.value]))};return Tl({factory:O=>{const F=J({x:0,y:0}),z=(me,pe,Ye)=>{st(Ye)||q(me.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ye.x),Math.floor(100-Ye.y)])),wo(me,z4,{value:Ye})},X=(me,pe,Ye,Oe)=>{d(Ye.element.dom,RM(FM))},ee=hn([Fs.config({find:T.some}),$o.config({})]);return zd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:F},rounded:!1,components:[a,i],onChange:z,onInit:X,sliderBehaviours:ee})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(O,F,z)=>{g(F,z)},setThumb:(O,F,z)=>{p(F,z)}},extraApis:{}})},l5=(t,s,a,i)=>{const d=p=>{const S=i5(t,s,p.onValidHex,p.onInvalidHex,a,i),E=pA(t,s),O=$t=>(100-$t)/100*360,F=$t=>100-$t/360*100,z={paletteRgba:oo(FM),paletteHue:oo(0)},X=qs(Dz(t,s)),ee=qs(E.sketch({})),me=qs(S.sketch({})),pe=($t,Kn,Tn)=>{ee.getOpt($t).each(eo=>{E.setHue(eo,Tn)})},Ye=($t,Kn)=>{me.getOpt($t).each(Tn=>{S.updateHex(Tn,Kn)})},Oe=($t,Kn,Tn)=>{X.getOpt($t).each(eo=>{zd.setValue(eo,F(Tn))})},Ue=($t,Kn)=>{ee.getOpt($t).each(Tn=>{E.setThumb(Tn,Kn)})},We=($t,Kn)=>{const Tn=D2($t);z.paletteRgba.set(Tn),z.paletteHue.set(Kn)},Ut=($t,Kn,Tn,eo)=>{We(Kn,Tn),dt(eo,vs=>{vs($t,Kn,Tn)})},Bt=()=>{const $t=[Ye];return(Kn,Tn)=>{const eo=Tn.event.value,vs=z.paletteHue.get(),Hr=R2(vs,eo.x,100-eo.y),Zs=N2(Hr);Ut(Kn,Zs,vs,$t)}},_n=()=>{const $t=[pe,Ye];return(Kn,Tn)=>{const eo=O(Tn.event.value),vs=z.paletteRgba.get(),Hr=F2(vs),Zs=R2(eo,Hr.saturation,Hr.value),Jn=N2(Zs);Ut(Kn,Jn,eo,$t)}},Hn=()=>{const $t=[pe,Oe,Ue];return(Kn,Tn)=>{const eo=Tn.event.hex,vs=KD(eo);Ut(Kn,eo,vs.hue,$t)}};return{uid:p.uid,dom:p.dom,components:[ee.asSpec(),X.asSpec(),me.asSpec()],behaviours:hn([ts("colour-picker-events",[Gt(Ib,Hn()),Gt(z4,Bt()),Gt(o5,_n())]),Fs.config({find:$t=>me.getOpt($t)}),yo.config({mode:"acyclic"})])}};return Tl({name:"ColourPicker",configFields:[Zt("dom"),et("onValidHex",ie),et("onInvalidHex",ie)],factory:d})},Om={self:()=>Fs.config({find:T.some}),memento:t=>Fs.config({find:t.getOpt}),childAt:t=>Fs.config({find:s=>Nr(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Nz=ko([et("preprocess",Yt),et("postprocess",Yt)]),Bz=(t,s)=>{const a=jc("RepresentingConfigs.memento processors",Nz,s);return Ln.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Ln.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);Ln.setValue(p,g)}}})},r1=(t,s,a)=>Ln.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),W4=(t,s,a)=>r1(t,i=>s(i.element),(i,d)=>a(i.element,d)),Mz=t=>W4(t,Wu,Jf),bA=t=>Ln.config({store:{mode:"memory",initialValue:t}}),Pz={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},vA=t=>s=>Q(s)?t.translate(Pz[s]):t.translate(s),$z=(t,s,a)=>{const i=O=>"tox-"+O,d=(O,F,z=O,X=O)=>Qu(z,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+O],attributes:{title:s.translate(X),"aria-live":"polite",...F.fold(()=>({}),ee=>({id:ee}))}},s.icons),g=l5(vA(s),i,s.tooltips.getConfig,d),p=O=>{wo(O,Tg,{name:"hex-valid",value:!0})},S=O=>{wo(O,Tg,{name:"hex-valid",value:!1})},E=qs(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:p,onInvalidHex:S}));return{dom:{tag:"div"},components:[E.asSpec()],behaviours:hn([r1(a,O=>{const F=E.get(O);return Fs.getCurrent(F).bind(ee=>Ln.getValue(ee).hex).map(ee=>"#"+xn(ee,"#")).getOr("")},(O,F)=>{const z=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,X=T.from(z.exec(F)).bind(pe=>Wt(pe,1)),ee=E.get(O);Fs.getCurrent(ee).fold(()=>{console.log("Can not find form")},pe=>{Ln.setValue(pe,{hex:X.getOr("")}),s1.getField(pe,"hex").each(Ye=>{rs(Ye,dm())})})}),Om.self()])}};var Iz=tinymce.util.Tools.resolve("tinymce.Resource");const Z4=t=>Zo(t,"init"),u5=t=>{const s=Ys(),a=qs({dom:{tag:t.tag}}),i=Ys(),d=!Z4(t)&&t.onFocus.isSome()?[$o.config({onFocus:g=>{t.onFocus.each(p=>{p(g.element.dom)})}}),Ir.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:hn([ts("custom-editor-events",[Zr(g=>{a.getOpt(g).each(p=>{(Z4(t)?t.init(p.element.dom):Iz.load(t.scriptId,t.scriptUrl).then(S=>S(p.element.dom,t.settings))).then(S=>{i.on(E=>{S.setValue(E)}),i.clear(),s.set(S)})})})]),r1(T.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,p)=>{s.get().fold(()=>i.set(p),S=>S.setValue(p))}),Om.self()].concat(d)),components:[a.asSpec()]}};var Zh=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lz=(t,s)=>{const a=Zh.explode(s.getOption("images_file_types")),i=d=>An(a,g=>pr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Ct(mt(t),i)},j4=(t,s,a)=>{const i=(X,ee)=>{ee.stop()},d=X=>(ee,me)=>{dt(X,pe=>{pe(ee,me)})},g=(X,ee)=>{var me;if(!l.isDisabled(X)){const pe=ee.event.raw;S(X,(me=pe.dataTransfer)===null||me===void 0?void 0:me.files)}},p=(X,ee)=>{const me=ee.event.raw.target;S(X,me.files)},S=(X,ee)=>{ee&&(Ln.setValue(X,Lz(ee,s)),wo(X,Zl,{name:t.name}))},E=qs({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:hn([ts("input-file-events",[kd(nh()),kd(Td())])])}),O=X=>({uid:X.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:hn([bA(a.getOr([])),Om.self(),l.config({}),ds.config({toggleClass:"dragenter",toggleOnExecute:!1}),ts("dropzone-events",[Gt("dragenter",d([i,ds.toggle])),Gt("dragleave",d([i,ds.toggle])),Gt("dragover",i),Gt("drop",d([i,g])),Gt(lp(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[fa(s.translate("Drop an image here"))]},di.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[fa(s.translate("Browse for an image")),E.asSpec()],action:ee=>{E.get(ee).element.dom.click()},buttonBehaviours:hn([Ir.config({}),Dm.button(s.isDisabled),Fc()])})]}]}),F=t.label.map(X=>e1(X,s)),z=ar.parts.field({factory:{sketch:O}});return L2(F,z,["tox-form__group--stretched"],[])},Hz=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ne(t.items,s.interpreter)}),d5=(t,s)=>{let a=null,i=null;return{cancel:()=>{wt(a)||(clearTimeout(a),a=null,i=null)},throttle:(...p)=>{i=p,wt(a)&&(a=setTimeout(()=>{const S=i;a=null,i=null,t.apply(null,S)},s))}}},zz=(t,s)=>{let a=null;return{cancel:()=>{wt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{wt(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},G4=(t,s)=>{let a=null;const i=()=>{wt(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},q4=Vn("alloy-fake-before-tabstop"),yA=Vn("alloy-fake-after-tabstop"),K4=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:hn([$o.config({ignore:!0}),Ir.config({})])}),m5=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[K4([q4]),s,K4([yA])],behaviours:hn([Om.childAt(1)])}),f5=(t,s)=>{wo(t,Vu(),{raw:{which:9,shiftKey:s}})},Vz=(t,s)=>{const a=s.element;pl(a,q4)?f5(t,!0):pl(a,yA)&&f5(t,!1)},Q2=t=>B2(t,["."+q4,"."+yA].join(","),Ve),eS=Vn("update-dialog"),g5=Vn("update-title"),Y4=Vn("update-body"),h5=Vn("update-footer"),p5=Vn("body-send-message"),CA=Vn("dialog-focus-shifted"),X4=os().browser,tS=X4.isSafari(),Uz=X4.isFirefox(),b5=tS||Uz,Wz=X4.isChromium(),Zz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,wA=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),jz=(t,s)=>{const a=t.body;return T.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!Wz&&!tS||Lt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},v5=(t,s,a)=>{const i=t.dom;T.from(i.contentDocument).fold(a,d=>{let g=0;const p=jz(d,s).map(E=>(g=E.scrollTop,E)).forall(Zz),S=()=>{const E=i.contentWindow;Lt(E)&&(p?wA(E,"bottom"):!p&&b5&&g!==0&&wA(E,g))};tS&&i.addEventListener("load",S,{once:!0}),d.open(),d.write(s),d.close(),tS||S()})},nS=Qn(b5,tS?500:200).map(t=>d5(v5,t)),J4=(t,s)=>{const a=oo(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,p=()=>q(g,"srcdoc",d);s?nS.fold(J(v5),S=>S.throttle)(g,d,p):p()}a.set(d)}}},Gz=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(z=>({title:z})).getOr({}),...a.map(z=>({srcdoc:z})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},S=J4(a,t.streamContent),E=t.label.map(z=>e1(z,s)),O=z=>m5(T.from(g),{uid:z.uid,dom:{tag:"iframe",attributes:p,classes:[i,...d]},behaviours:hn([Ir.config({}),$o.config({}),r1(a,S.getValue,S.setValue),ol.config({channels:{[CA]:{onReceive:(X,ee)=>{ee.newFocus.each(me=>{tc(X.element).each(pe=>{(ks(X.element,me)?Pr:ma)(pe,"tox-navobj-bordered-focus")})})}}}})])}),F=ar.parts.field({factory:{sketch:O}});return L2(E,F,["tox-form__group--stretched"],[])},qz=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[$i(t,"load",i),$i(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>dt(d,p=>p.unbind());t.dom.complete&&i()}),Q4=(t,s,a,i,d)=>{const g=a*d,p=i*d,S=Math.max(0,t/2-g/2),E=Math.max(0,s/2-p/2);return{left:S.toString()+"px",top:E.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},Kz=(t,s,a)=>{const i=ae(t),d=nr(t);return Math.min(i/s,d/a,1)},eO=(t,s)=>{const a=oo(s.getOr({url:""})),i=qs({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(E=>({src:E.url})).getOr({})}}),d=qs({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(E,O)=>{const F={url:O.url};O.zoom.each(X=>F.zoom=X),O.cachedWidth.each(X=>F.cachedWidth=X),O.cachedHeight.each(X=>F.cachedHeight=X),a.set(F);const z=()=>{const{cachedWidth:X,cachedHeight:ee,zoom:me}=F;if(!Tt(X)&&!Tt(ee)){if(Tt(me)){const Ye=Kz(E.element,X,ee);F.zoom=Ye}const pe=Q4(ae(E.element),nr(E.element),X,ee,F.zoom);d.getOpt(E).each(Ye=>{vo(Ye.element,pe)})}};i.getOpt(E).each(X=>{const ee=X.element;O.url!==Ie(ee,"src")&&(q(ee,"src",O.url),ma(E.element,"tox-imagepreview__loaded")),z(),qz(ee).then(me=>{E.getSystem().isConnected()&&(Pr(E.element,"tox-imagepreview__loaded"),F.cachedWidth=me.dom.naturalWidth,F.cachedHeight=me.dom.naturalHeight,z())})})},p={};t.height.each(E=>p.height=E);const S=s.map(E=>({url:E.url,zoom:T.from(E.zoom),cachedWidth:T.from(E.cachedWidth),cachedHeight:T.from(E.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:hn([Om.self(),r1(S,()=>a.get(),g)])}},y5=(t,s,a)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],p=qs({dom:{tag:"label",classes:[i,...d,...g]},components:[fa(s.providers.translate(t.label))]}),S=Ne(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[p.asSpec(),...S],behaviours:hn([Om.self(),Uo.config({}),Mz(T.none()),yo.config({mode:"acyclic"}),ts("label",[Zr(E=>{t.for.each(O=>{a(O).each(F=>{p.getOpt(E).each(z=>{var X;const ee=(X=Ie(F.element,"id"))!==null&&X!==void 0?X:Vn("form-field");q(F.element,"id",ee),q(z.element,"for",ee)})})})})])])}},C5=Vn("toolbar.button.execute"),Yz=t=>Uu((s,a)=>{A2(t,s)(i=>{wo(s,C5,{buttonApi:i}),t.onAction(i)})}),a1=Vn("common-button-display-events"),tO={[fu()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Oi()]:["toolbar-button-events",a1],[gu()]:["toolbar-button-events","dropdown-events","tooltipping"],[ya()]:["focusing","alloy.base.behaviour",a1]},nO=t=>pt(t.element,"width",Os(t.element,"width")),oO=(t,s,a)=>Qu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),SA=(t,s)=>oO(t,s,[]),c1=(t,s)=>oO(t,s,[Uo.config({})]),sO=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[fa(a.translate(t))],behaviours:hn([Uo.config({})])}),rd=Vn("update-menu-text"),i1=Vn("update-menu-icon"),rO=(t,s,a,i)=>{const d=oo(ie),g=t.text.map(pe=>qs(sO(pe,s,a.providers))),p=t.icon.map(pe=>qs(c1(pe,a.providers.icons))),S=(pe,Ye)=>{const Oe=Ln.getValue(pe);return $o.focus(Oe),wo(Oe,"keydown",{raw:Ye.event.raw}),Hd.close(Oe),T.some(!0)},E=t.role.fold(()=>({}),pe=>({role:pe})),O=T.from(t.listRole).map(pe=>({listRole:pe})).getOr({}),F=t.ariaLabel.fold(()=>({}),pe=>({"aria-label":a.providers.translate(pe)})),z=Qu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),X=Vn("common-button-display-events"),ee="dropdown-events";return qs(Hd.sketch({...t.uid?{uid:t.uid}:{},...E,...O,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ne(t.classes,pe=>`${s}--${pe}`)),attributes:{...F,...Lt(i)?{"data-mce-name":i}:{}}},components:Ob([p.map(pe=>pe.asSpec()),g.map(pe=>pe.asSpec()),T.some(z)]),matchWidth:!0,useMinWidth:!0,onOpen:(pe,Ye,Oe)=>{t.searchable&&gH(Oe)},dropdownBehaviours:hn([...t.dropdownBehaviours,Dm.button(()=>t.disabled||a.providers.isDisabled()),Fc(),fy.config({}),Uo.config({}),...t.tooltip.map(pe=>Da.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(pe)}))).toArray(),ts(ee,[Hi(t,d),Jp(t,d)]),ts(X,[Zr((pe,Ye)=>t.listRole==="listbox"?ie:nO(pe))]),ts("menubutton-update-display-text",[Gt(rd,(pe,Ye)=>{g.bind(Oe=>Oe.getOpt(pe)).each(Oe=>{Uo.set(Oe,[fa(a.providers.translate(Ye.event.text))])})}),Gt(i1,(pe,Ye)=>{p.bind(Oe=>Oe.getOpt(pe)).each(Oe=>{Uo.set(Oe,[c1(Ye.event.icon,a.providers.icons)])})})])]),eventOrder:xr(tO,{[ya()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Oi()]:["toolbar-button-events",Da.name(),ee,X]}),sandboxBehaviours:hn([yo.config({mode:"special",onLeft:S,onRight:S}),ts("dropdown-sandbox-events",[Gt(VB,(pe,Ye)=>{dH(pe),Ye.stop()}),Gt(vD,(pe,Ye)=>{nA(pe,Ye),Ye.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...y2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:uP,onCollapseMenu:(pe,Ye,Oe)=>{ao.getHighlighted(Oe).each(Ue=>{uP(pe,Oe,Ue)})},onDehighlightItem:fH}}},getAnchorOverrides:()=>({maxHeightFunction:(pe,Ye)=>{sE()(pe,Ye-10)}}),fetch:pe=>mi.nu(gn(t.fetch,pe))})).asSpec()},Xz=t=>Q(t),w5=t=>t.type==="separator",S5=t=>Zo(t,"getSubmenuItems"),Jz={type:"separator"},x5=(t,s)=>{const a=tt(t,(i,d)=>Xz(d)?d===""?i:d==="|"?i.length>0&&!w5(i[i.length-1])?i.concat([Jz]):i:Zo(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&w5(a[a.length-1])&&a.pop(),a},Qz=(t,s)=>{const a=t.getSubmenuItems(),i=xA(a,s),d=xr(i.menus,{[t.value]:i.items}),g=xr(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},eV=t=>{const s=on(t,"value").getOrThunk(()=>Vn("generated-menu-item"));return xr({value:s},t)},xA=(t,s)=>{const a=x5(Q(t)?t.split(" "):t,s);return jt(a,(i,d)=>{if(S5(d)){const g=eV(d),p=Qz(g,s);return{menus:xr(i.menus,p.menus),items:[p.item,...i.items],expansions:xr(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},tV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),nV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),by=(t,s,a,i)=>{const d=Vn("primary-menu"),g=xA(t,a.shared.providers.menuItems());if(g.items.length===0)return T.none();const p=tV(i),S=f4(d,g.items,s,a,i.isHorizontalMenu,p),E=nV(i),O=ro(g.menus,(z,X)=>f4(X,z,s,a,!1,E)),F=xr(O,ns(d,S));return T.from(Zp.tieredData(d,F,g.expansions))},vy=t=>!Zo(t,"items"),E5="data-value",aO=(t,s,a,i,d)=>Ne(a,g=>vy(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Ln.setValue(t,g.value),wo(t,Zl,{name:s}),$o.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>aO(t,s,g.items,i,d)}),cO=(t,s)=>Xt(t,a=>vy(a)?Qn(a.value===s,a):cO(a.items,s)),T5=(t,s,a)=>{const i=An(t.items,O=>!vy(O)),d=s.shared.providers,g=a.bind(O=>cO(t.items,O)).orThunk(()=>wn(t.items).filter(vy)),p=t.label.map(O=>e1(O,d)),S=ar.parts.field({dom:{},factory:{sketch:O=>rO({uid:O.uid,text:g.map(F=>F.text),icon:T.none(),tooltip:T.none(),role:Qn(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(F,z)=>{const X=aO(F,t.name,t.items,Ln.getValue(F),i);z(by(X,km.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:T.none()}))},onSetup:J(ie),getApi:J({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ir.config({}),r1(g.map(F=>F.value),F=>Ie(F.element,E5),(F,z)=>{cO(t.items,z).each(X=>{q(F.element,E5,X.value),wo(F,rd,{text:X.text})})})]},"tox-listbox",s.shared)}}),E={dom:{tag:"div",classes:["tox-listboxfield"]},components:[S]};return ar.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:le([p.toArray(),[E]]),fieldBehaviours:hn([l.config({disabled:J(!t.enabled),onDisabled:O=>{ar.getField(O).each(l.disable)},onEnabled:O=>{ar.getField(O).each(l.enable)}})])})},oV=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ne(t.items,s.shared.interpreter)}),sV=(t,s)=>{const a=Ne(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>ns("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Oc(t.selectBehaviours,[$o.config({}),Ln.config({store:{mode:"manual",getValue:d=>rf(d.element),setValue:(d,g)=>{const p=wn(t.options);I(t.options,E=>E.value===g).isSome()?ag(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(E=>ag(d.element,E.value))},...i}})])}},rV=Tl({name:"HtmlSelect",configFields:[Zt("options"),Dc("selectBehaviours",[$o,Ln]),et("selectClasses",[]),et("selectAttributes",{}),$s("data")],factory:sV}),aV=(t,s,a)=>{const i=Ne(t.items,E=>({text:s.translate(E.text),value:E.value})),d=t.label.map(E=>e1(E,s)),g=ar.parts.field({dom:{},...a.map(E=>({data:E})).getOr({}),selectAttributes:{size:t.size},options:i,factory:rV,selectBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ir.config({}),ts("selectbox-change",[Gt(lp(),(E,O)=>{wo(E,Zl,{name:t.name})})])])}),p=t.size>1?T.none():T.some(Qu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),S={dom:{tag:"div",classes:["tox-selectfield"]},components:le([[g],p.toArray()])};return ar.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:le([d.toArray(),[S]]),fieldBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:E=>{ar.getField(E).each(l.disable)},onEnabled:E=>{ar.getField(E).each(l.enable)}}),Fc()])})},cV=J([et("field1Name","field1"),et("field2Name","field2"),pm("onLockedChange"),gh(["lockClass"]),et("locked",!1),yu.field("coupledFieldBehaviours",[Fs,Ln])]),A5=(t,s,a)=>mn(t,s,a).bind(Fs.getCurrent),k5=(t,s)=>Qc({factory:ar,name:t,overrides:a=>({fieldBehaviours:hn([ts("coupled-input-behaviour",[Gt(dm(),i=>{A5(i,a,s).each(d=>{mn(i,a,"lock").each(g=>{ds.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),iV=J([k5("field1","field2"),k5("field2","field1"),Qc({factory:di,schema:[Zt("dom")],name:"lock",overrides:t=>({buttonBehaviours:hn([ds.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),_5=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:yu.augment(t.coupledFieldBehaviours,[Fs.config({find:T.some}),Ln.config({store:{mode:"manual",getValue:d=>{const g=Oh(d,t,["field1","field2"]);return{[t.field1Name]:Ln.getValue(g.field1()),[t.field2Name]:Ln.getValue(g.field2())}},setValue:(d,g)=>{const p=Oh(d,t,["field1","field2"]);gr(g,t.field1Name)&&Ln.setValue(p.field1(),g[t.field1Name]),gr(g,t.field2Name)&&Ln.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>mn(d,t,"field1"),getField2:d=>mn(d,t,"field2"),getLock:d=>mn(d,t,"lock")}}),ad=wi({name:"FormCoupledInputs",configFields:cV(),partFields:iV(),factory:_5,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),lV=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},iO=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Yo.value({value:i,unit:d})}else return Yo.error(t)},lO=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Zo(a,d);return t.unit===s?T.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?T.some(t.value):T.some(t.value/a[t.unit]*a[s]):T.none()},uO=t=>T.none(),uV=(t,s)=>a=>lO(a,s).map(i=>({value:i*t,unit:s})),dV=(t,s)=>{const a=iO(t).toOptional(),i=iO(s).toOptional();return ea(a,i,(d,g)=>lO(d,g.unit).map(p=>g.value/p).map(p=>uV(p,g.unit)).getOr(uO)).getOr(uO)},D5=(t,s)=>{let a=uO;const i=Vn("ratio-event"),d=ee=>Qu(ee,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ee]},s.icons),g=t.label.getOr("Constrain proportions"),p=s.translate(g),S=ad.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":p,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Fc(),Ir.config({}),Da.config(s.tooltips.getConfig({tooltipText:p}))])}),E=ee=>({dom:{tag:"div",classes:["tox-form__group"]},components:ee}),O=ee=>ar.parts.field({factory:Ab,inputClasses:["tox-textfield"],inputBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Fc(),Ir.config({}),ts("size-input-events",[Gt(Sd(),(me,pe)=>{wo(me,i,{isField1:ee})}),Gt(lp(),(me,pe)=>{wo(me,Zl,{name:t.name})})])]),selectOnFocus:!1}),F=ee=>({dom:{tag:"label",classes:["tox-label"]},components:[fa(s.translate(ee))]}),z=ad.parts.field1(E([ar.parts.label(F("Width")),O(!0)])),X=ad.parts.field2(E([ar.parts.label(F("Height")),O(!1)]));return ad.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[z,X,E([F(vh),S])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ee,me,pe)=>{iO(Ln.getValue(ee)).each(Ye=>{a(Ye).each(Oe=>{Ln.setValue(me,lV(Oe))})})},coupledFieldBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:ee=>{ad.getField1(ee).bind(ar.getField).each(l.disable),ad.getField2(ee).bind(ar.getField).each(l.disable),ad.getLock(ee).each(l.disable)},onEnabled:ee=>{ad.getField1(ee).bind(ar.getField).each(l.enable),ad.getField2(ee).bind(ar.getField).each(l.enable),ad.getLock(ee).each(l.enable)}}),Fc(),ts("size-input-events2",[Gt(i,(ee,me)=>{const pe=me.event.isField1,Ye=pe?ad.getField1(ee):ad.getField2(ee),Oe=pe?ad.getField2(ee):ad.getField1(ee),Ue=Ye.map(Ln.getValue).getOr(""),We=Oe.map(Ln.getValue).getOr("");a=dV(Ue,We)})])])})},O5=(t,s,a)=>{const i=zd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[fa(s.translate(t.label))]}),d=zd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=zd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return zd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:J(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:hn([Om.self(),$o.config({})]),onChoose:(p,S,E)=>{wo(p,Zl,{name:t.name,value:E})},onChange:(p,S,E)=>{wo(p,Zl,{name:t.name,value:E})}})},R5=(t,s)=>{const a=S=>({dom:{tag:"th",innerHtml:s.translate(S)}}),i=S=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ne(S,a)}]}),d=S=>({dom:{tag:"td",innerHtml:s.translate(S)}}),g=S=>({dom:{tag:"tr"},components:Ne(S,d)}),p=S=>({dom:{tag:"tbody"},components:Ne(S,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:hn([Ir.config({}),$o.config({})])}},oS=(t,s)=>{const a=t.label.map(ee=>e1(ee,s)),i=[l.config({disabled:()=>t.disabled||s.isDisabled()}),Fc(),yo.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:ee=>(rs(ee,H2),T.some(!0))}),ts("textfield-change",[Gt(dm(),(ee,me)=>{wo(ee,Zl,{name:t.name})}),Gt(Qm(),(ee,me)=>{wo(ee,Zl,{name:t.name})})]),Ir.config({})],d=t.validation.map(ee=>wf.config({getRoot:me=>tc(me.element),invalidClass:"tox-invalid",validator:{validate:me=>{const pe=Ln.getValue(me),Ye=ee.validator(pe);return mi.pure(Ye===!0?Yo.value(pe):Yo.error(Ye))},validateOnLoad:ee.validateOnLoad}})).toArray(),g=t.placeholder.fold(J({}),ee=>({placeholder:s.translate(ee)})),p=t.inputMode.fold(J({}),ee=>({inputmode:ee})),S={...g,...p,"data-mce-name":t.name},E=ar.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(ee=>({data:ee})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:hn(le([i,d])),selectOnFocus:!1,factory:Ab}),O=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[E]}:E,z=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),X=[l.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:ee=>{ar.getField(ee).each(l.disable)},onEnabled:ee=>{ar.getField(ee).each(l.enable)}}),Fc()];return L2(a,O,z,X)},mV=(t,s,a)=>oS({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:T.none(),maximized:t.maximized,data:a},s),fV=(t,s,a)=>oS({name:t.name,multiline:!0,label:t.label,inputMode:T.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:T.none(),maximized:t.maximized,data:a},s),sS=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),jh=t=>t.dimension.property,l1=(t,s)=>t.dimension.getDimension(s),EA=(t,s)=>{const a=sS(t,s);bl(a,[s.shrinkingClass,s.growingClass])},dO=(t,s)=>{ma(t.element,s.openClass),Pr(t.element,s.closedClass),pt(t.element,jh(s),"0px"),hc(t.element)},mO=(t,s)=>{ma(t.element,s.closedClass),Pr(t.element,s.openClass),qo(t.element,jh(s))},fO=(t,s,a,i)=>{a.setCollapsed(),pt(t.element,jh(s),l1(s,t.element)),EA(t,s),dO(t,s),s.onStartShrink(t),s.onShrunk(t)},F5=(t,s,a,i)=>{const d=i.getOrThunk(()=>l1(s,t.element));a.setCollapsed(),pt(t.element,jh(s),d),hc(t.element);const g=sS(t,s);ma(g,s.growingClass),Pr(g,s.shrinkingClass),dO(t,s),s.onStartShrink(t)},N5=(t,s,a)=>{const i=l1(s,t.element);(i==="0px"?fO:F5)(t,s,a,T.some(i))},B5=(t,s,a)=>{const i=sS(t,s),d=pl(i,s.shrinkingClass),g=l1(s,t.element);mO(t,s);const p=l1(s,t.element);(d?()=>{pt(t.element,jh(s),g),hc(t.element)}:()=>{dO(t,s)})(),ma(i,s.shrinkingClass),Pr(i,s.growingClass),mO(t,s),pt(t.element,jh(s),p),a.setExpanded(),s.onStartGrow(t)},M5=(t,s,a)=>{if(a.isExpanded()){qo(t.element,jh(s));const i=l1(s,t.element);pt(t.element,jh(s),i)}},gV=(t,s,a)=>{a.isExpanded()||B5(t,s,a)},hV=(t,s,a)=>{a.isExpanded()&&N5(t,s,a)},Wo=(t,s,a)=>{a.isExpanded()&&fO(t,s,a)},rS=(t,s,a)=>a.isExpanded(),P5=(t,s,a)=>a.isCollapsed(),gO=(t,s,a)=>{const i=sS(t,s);return pl(i,s.growingClass)===!0},hO=(t,s,a)=>{const i=sS(t,s);return pl(i,s.shrinkingClass)===!0};var aS=Object.freeze({__proto__:null,refresh:M5,grow:gV,shrink:hV,immediateShrink:Wo,hasGrown:rS,hasShrunk:P5,isGrowing:gO,isShrinking:hO,isTransitioning:(t,s,a)=>gO(t,s)||hO(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?N5:B5)(t,s,a)},disableTransitions:EA,immediateGrow:(t,s,a)=>{a.isExpanded()||(mO(t,s),pt(t.element,jh(s),l1(s,t.element)),EA(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),yV=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return gl(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:ns(s.dimension.property,"0px")})},events:(t,s)=>Mr([up(xd(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(EA(a,t),s.isExpanded()&&qo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),CV=[Zt("closedClass"),Zt("openClass"),Zt("shrinkingClass"),Zt("growingClass"),$s("getAnimationRoot"),Es("onShrunk"),Es("onStartShrink"),Es("onGrown"),Es("onStartGrow"),et("expanded",!1),Vs("dimension",sc("property",{width:[hr("property","width"),hr("getDimension",t=>ae(t)+"px")],height:[hr("property","height"),hr("getDimension",t=>nr(t)+"px")]}))],$5=Object.freeze({__proto__:null,init:t=>{const s=oo(t.expanded),a=()=>"expanded: "+s.get();return hl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:gn(s.set,!1),setExpanded:gn(s.set,!0),readState:a})}});const cl=Ic({fields:CV,name:"sliding",active:yV,apis:aS,state:$5}),pO=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setActive:s=>{const a=t.element;s?(Pr(a,"tox-tbtn--enabled"),q(a,"aria-pressed",!0)):(ma(a,"tox-tbtn--enabled"),$(a,"aria-pressed"))},isActive:()=>pl(t.element,"tox-tbtn--enabled"),setText:s=>{wo(t,rd,{text:s})},setIcon:s=>wo(t,i1,{icon:s})}),cS=(t,s,a,i,d=!0,g)=>rO({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(p,S)=>{const E={pattern:t.search.isSome()?hH(p):""};t.fetch(O=>{S(by(O,km.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},E,pO(p))},onSetup:t.onSetup,getApi:pO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Ir.config({})]:[]]},s,a.shared,g),wV=(t,s,a)=>{const i=g=>p=>{const S=!p.isActive();p.setActive(S),g.storage.set(S),a.shared.getSink().each(E=>{s().getOpt(E).each(O=>{Pl(O.element),wo(O,Tg,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ne(t,p=>{const S=p.text.fold(()=>({}),E=>({text:E}));return{type:p.type,active:!1,...S,onAction:i(p),onSetup:d(p)}}))}},I5=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[fa(t)]}),L5=Vn("leaf-label-event-id"),bO=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const p=t.menu.map(E=>cS(E,"tox-mbtn",g,T.none(),a)),S=[I5(t.title)];return p.each(E=>S.push(E)),di.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:S,role:"treeitem",action:E=>{s(t.id),E.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Vu()]:[L5,"keying"]},buttonBehaviours:hn([...a?[Ir.config({})]:[],ds.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ol.config({channels:{[`update-active-item-${i}`]:{onReceive:(E,O)=>{(O.value===t.id?ds.on:ds.off)(E)}}}}),ts(L5,[Zr((E,O)=>{d.each(F=>{(F===t.id?ds.on:ds.off)(E)})}),Gt(Vu(),(E,O)=>{const F=O.event.raw.code==="ArrowLeft",z=O.event.raw.code==="ArrowRight";F?(cg(E.element,".tox-tree--directory").each(X=>{E.getSystem().getByDom(X).each(ee=>{qC(X,".tox-tree--directory__label").each(me=>{ee.getSystem().getByDom(me).each($o.focus)})})}),O.stop()):z&&O.stop()})])])})},SV=(t,s,a)=>Qu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),xV=(t,s)=>SV(t,s,[]),H5=Vn("directory-label-event-id"),EV=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(S=>cS(S,"tox-mbtn",i,T.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[xV("chevron-right",i.shared.providers.icons)]},I5(t.title)];d.each(S=>{g.push(S)});const p=S=>{cg(S.element,".tox-tree--directory").each(E=>{S.getSystem().getByDom(E).each(O=>{const F=!ds.isOn(O);ds.toggle(O),wo(S,"expand-tree-node",{expanded:F,node:t.id})})})};return di.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Vu()]:[H5,"keying"]},buttonBehaviours:hn([...s?[Ir.config({})]:[],ts(H5,[Gt(Vu(),(S,E)=>{const O=E.event.raw.code==="ArrowRight",F=E.event.raw.code==="ArrowLeft";O&&a&&E.stop(),(O||F)&&cg(S.element,".tox-tree--directory").each(z=>{S.getSystem().getByDom(z).each(X=>{!ds.isOn(X)&&O||ds.isOn(X)&&F?(p(S),E.stop()):F&&!ds.isOn(X)&&(cg(X.element,".tox-tree--directory").each(ee=>{qC(ee,".tox-tree--directory__label").each(me=>{X.getSystem().getByDom(me).each($o.focus)})}),E.stop())})})})])])})},TV=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(S=>S.type==="leaf"?bO({leaf:S,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:p}):vO({directory:S,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:p})),behaviours:hn([cl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Uo.config({})])}),z5=Vn("directory-event-id"),vO=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:p})=>{const{children:S}=t,E=oo(g),O=z=>S.map(X=>X.type==="leaf"?bO({leaf:X,selectedId:p,onLeafAction:s,visible:z,treeId:i,backstage:d}):vO({directory:X,expandedIds:E.get(),selectedId:p,onLeafAction:s,labelTabstopping:z,treeId:i,backstage:d})),F=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[EV({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),TV({children:S,expandedIds:g,selectedId:p,onLeafAction:s,visible:F,treeId:i,backstage:d})],behaviours:hn([ts(z5,[Zr((z,X)=>{ds.set(z,F)}),Gt("expand-tree-node",(z,X)=>{const{expanded:ee,node:me}=X.event;E.set(ee?[...E.get(),me]:E.get().filter(pe=>pe!==me))})]),ds.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(z,X)=>{const ee=z.components()[1],me=O(X);X?cl.grow(ee):cl.shrink(ee),Uo.set(ee,me)}})])}},AV=Vn("tree-event-id"),kV=(t,s)=>{const a=t.onLeafAction.getOr(ie),i=t.onToggleExpand.getOr(ie),d=t.defaultExpandedIds,g=oo(d),p=oo(t.defaultSelectedId),S=Vn("tree-id"),E=(O,F)=>t.items.map(z=>z.type==="leaf"?bO({leaf:z,selectedId:O,onLeafAction:a,visible:!0,treeId:S,backstage:s}):vO({directory:z,selectedId:O,onLeafAction:a,expandedIds:F,labelTabstopping:!0,treeId:S,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:E(p.get(),g.get()),behaviours:hn([yo.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),ts(AV,[Gt("expand-tree-node",(O,F)=>{const{expanded:z,node:X}=F.event;g.set(z?[...g.get(),X]:g.get().filter(ee=>ee!==X)),i(g.get(),{expanded:z,node:X})})]),ol.config({channels:{[`update-active-item-${S}`]:{onReceive:(O,F)=>{p.set(T.some(F.value)),Uo.set(O,E(T.some(F.value),g.get()))}}}}),Uo.config({})])}};var _V=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Mr([Gt(t.event,i),fm(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Gt(d,()=>s.cancel())]).getOr([])))}});const V5=t=>{const s=oo(null);return hl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var DV=Object.freeze({__proto__:null,throttle:V5,init:t=>t.stream.streams.state(t)});const OV=(t,s)=>{const a=t.stream,i=G4(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var RV=[Vs("stream",sc("mode",{throttle:[Zt("delay"),et("stopEvent",!0),hr("streams",{setup:OV,state:V5})]})),et("event","input"),$s("cancelEvent"),pm("onStream")];const yO=Ic({fields:RV,name:"streaming",active:_V,state:DV}),iS=(t,s,a)=>{const i=Ln.getValue(a);Ln.setValue(s,i),W5(s)},U5=(t,s)=>{const a=t.element,i=rf(a),d=a.dom;Ie(a,"type")!=="number"&&s(d,i)},W5=t=>{U5(t,(s,a)=>s.setSelectionRange(a.length,a.length))},FV=(t,s)=>{U5(t,(a,i)=>a.setSelectionRange(s,i.length))},NV=(t,s,a)=>{if(t.selectsOver){const i=Ln.getValue(s),d=t.getDisplayText(i),g=Ln.getValue(a);return t.getDisplayText(g).indexOf(d)===0?T.some(()=>{iS(t,s,a),FV(s,d.length)}):T.none()}else return T.none()},CO=J("alloy.typeahead.itemexecute"),BV=(t,s,a,i)=>{const d=(z,X,ee)=>{t.previewing.set(!1);const me=$a.getCoupled(z,"sandbox");if(Rs.isOpen(me))Fs.getCurrent(me).each(pe=>{ao.getHighlighted(pe).fold(()=>{ee(pe)},()=>{mm(me,pe.element,"keydown",X)})});else{const pe=Ye=>{Fs.getCurrent(Ye).each(ee)};cy(t,p(z),z,me,i,pe,Pa.HighlightMenuAndItem).get(ie)}},g=LB(t),p=z=>X=>X.map(ee=>{const me=zr(ee.menus),pe=L(me,Oe=>Ct(Oe.items,Ue=>Ue.type==="item"));return Ln.getState(z).update(Ne(pe,Oe=>Oe.data)),ee}),S=z=>Fs.getCurrent(z),E="typeaheadevents",O=[$o.config({}),Ln.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:z=>rf(z.element),getFallbackEntry:z=>({value:z,meta:{}}),setValue:(z,X)=>{ag(z.element,t.model.getDisplayText(X))},...t.initialData.map(z=>ns("initialValue",z)).getOr({})}}),yO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(z,X)=>{const ee=$a.getCoupled(z,"sandbox");if($o.isFocused(z)&&rf(z.element).length>=t.minChars){const pe=S(ee).bind(Oe=>ao.getHighlighted(Oe).map(Ln.getValue));t.previewing.set(!0);const Ye=Oe=>{S(ee).each(Ue=>{pe.fold(()=>{t.model.selectsOver&&ao.highlightFirst(Ue)},We=>{ao.highlightBy(Ue,Ut=>Ln.getValue(Ut).value===We.value),ao.getHighlighted(Ue).orThunk(()=>(ao.highlightFirst(Ue),T.none()))})})};cy(t,p(z),z,ee,i,Ye,Pa.HighlightJustMenu).get(ie)}},cancelEvent:oC()}),yo.config({mode:"special",onDown:(z,X)=>(d(z,X,ao.highlightFirst),T.some(!0)),onEscape:z=>{const X=$a.getCoupled(z,"sandbox");return Rs.isOpen(X)?(Rs.close(X),T.some(!0)):T.none()},onUp:(z,X)=>(d(z,X,ao.highlightLast),T.some(!0)),onEnter:z=>{const X=$a.getCoupled(z,"sandbox"),ee=Rs.isOpen(X);if(ee&&!t.previewing.get())return S(X).bind(me=>ao.getHighlighted(me)).map(me=>(wo(z,CO(),{item:me}),!0));{const me=Ln.getValue(z);return rs(z,oC()),t.onExecute(X,z,me),ee&&Rs.close(X),T.some(!0)}}}),ds.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),$a.config({others:{sandbox:z=>d4(t,z,{onOpen:()=>ds.on(z),onClose:()=>{t.lazyTypeaheadComp.get().each(X=>$(X.element,"aria-activedescendant")),ds.off(z)}})}}),ts(E,[Zr(z=>{t.lazyTypeaheadComp.set(T.some(z))}),fm(z=>{t.lazyTypeaheadComp.set(T.none())}),Uu(z=>{const X=ie;i4(t,p(z),z,i,X,Pa.HighlightMenuAndItem).get(ie)}),Gt(CO(),(z,X)=>{const ee=$a.getCoupled(z,"sandbox");iS(t.model,z,X.event.item),rs(z,oC()),t.onItemExecute(z,ee,X.event.item,Ln.getValue(z)),Rs.close(ee),W5(z)})].concat(t.dismissOnBlur?[Gt(Vf(),z=>{const X=$a.getCoupled(z,"sandbox");Pi(X.element).isNone()&&Rs.close(X)})]:[]))],F={[gu()]:[Ln.name(),yO.name(),E],...t.eventOrder};return{uid:t.uid,dom:zB(xr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Oc(t.typeaheadBehaviours,O)},eventOrder:F}},Z5=J([$s("lazySink"),Zt("fetch"),et("minChars",5),et("responseTime",1e3),Es("onOpen"),et("getHotspot",T.some),et("getAnchorOverrides",J({})),et("layouts",T.none()),et("eventOrder",{}),R("model",{},[et("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),et("selectsOver",!0),et("populateFromBrowse",!0)]),Es("onSetValue"),nl("onExecute"),Es("onItemExecute"),et("inputClasses",[]),et("inputAttributes",{}),et("inputStyles",{}),et("matchWidth",!0),et("useMinWidth",!1),et("dismissOnBlur",!0),gh(["openClass"]),$s("initialData"),$s("listRole"),Dc("typeaheadBehaviours",[$o,Ln,yO,yo,ds,$a]),zs("lazyTypeaheadComp",()=>oo(T.none)),zs("previewing",()=>oo(!0))].concat(bD()).concat(tA())),MV=J([Cu({schema:[vp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{NV(t.model,d,i).fold(()=>{t.model.selectsOver?(ao.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&iS(t.model,d,i),nn(i.element,"id").each(g=>q(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(wo(i,CO(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&iS(t.model,i,a)})}})})]),j5=wi({name:"Typeahead",configFields:Z5(),partFields:MV(),factory:BV}),Rm=t=>({...t,toCached:()=>Rm(t.toCached()),bindFuture:E=>Rm(t.bind(O=>O.fold(F=>mi.pure(Yo.error(F)),F=>E(F)))),bindResult:E=>Rm(t.map(O=>O.bind(E))),mapResult:E=>Rm(t.map(O=>O.map(E))),mapError:E=>Rm(t.map(O=>O.mapError(E))),foldResult:(E,O)=>t.map(F=>F.fold(E,O)),withTimeout:(E,O)=>Rm(mi.nu(F=>{let z=!1;const X=setTimeout(()=>{z=!0,F(Yo.error(O()))},E);t.get(ee=>{z||(clearTimeout(X),F(ee))})}))}),wO=t=>Rm(mi.nu(t)),SO=t=>Rm(mi.pure(Yo.value(t))),IV={nu:wO,wrap:Rm,pure:SO,value:SO,error:t=>Rm(mi.pure(Yo.error(t))),fromResult:t=>Rm(mi.pure(t)),fromFuture:t=>Rm(t.map(Yo.value)),fromPromise:t=>wO(s=>{t.then(a=>{s(Yo.value(a))},a=>{s(Yo.error(a))})})},lS=(t,s,a=[],i,d,g,p)=>{const S=s.fold(()=>({}),F=>({action:F})),E={buttonBehaviours:hn([Dm.button(()=>!t.enabled||p.isDisabled()),Fc(),Ir.config({}),...g.map(F=>Da.config(p.tooltips.getConfig({tooltipText:p.translate(F)}))).toArray(),ts("button press",[lC("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...S},O=xr(E,{dom:i});return xr(O,{components:d})},LV=(t,s,a,i=[],d)=>{const g=t.tooltip.map(O=>({"aria-label":a.translate(O)})).getOr({}),p={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},S=t.icon.map(O=>SA(O,a.icons)),E=Ob([S]);return lS(t,s,i,p,E,t.tooltip,a)},xO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},Fm=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(ee=>SA(ee,a.icons)),S=[p.getOrThunk(()=>fa(g))],E=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),z={tag:"button",classes:[...xO(E),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},X=t.icon.map(J(g));return lS(t,s,i,z,S,X,a)},uS=(t,s,a,i=[],d=[])=>{const g=Fm(t,T.some(s),a,i,d);return di.sketch(g)},dS=(t,s)=>a=>{s==="custom"?wo(a,Tg,{name:t,value:{}}):s==="submit"?rs(a,H2):s==="cancel"?rs(a,zh):console.error("Unknown button type: ",s)},HV=(t,s)=>s==="menu",EO=(t,s)=>s==="custom"||s==="cancel"||s==="submit",zV=(t,s)=>s==="togglebutton",TO=(t,s,a)=>{var i,d;const g=t.icon.map(We=>c1(We,s.icons)).map(qs),p=We=>{wo(We,Tg,{name:t.name,value:{setIcon:Ut=>{g.map(Bt=>Bt.getOpt(We).each(_n=>{Uo.set(_n,[c1(Ut,s.icons)])}))}}})},S=t.buttonType.getOr(t.primary?"primary":"secondary"),E={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:S==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},O=E.tooltip.or(t.text).map(We=>({"aria-label":s.translate(We)})).getOr({}),F=xO(S??"secondary"),z=t.icon.isSome()&&t.text.isSome(),X={tag:"button",classes:[...F.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...z?["tox-button--icon-and-text"]:[]],attributes:{...O,...Lt(a)?{"data-mce-name":a}:{}}},ee=[],me=s.translate(t.text.getOr("")),pe=fa(me),Oe=[...Ob([g.map(We=>We.asSpec())]),...t.text.isSome()?[pe]:[]],Ue=lS(E,T.some(p),ee,X,Oe,t.tooltip,s);return di.sketch(Ue)},mS=(t,s,a)=>{if(HV(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:T.none(),onSetup:S=>(S.setEnabled(t.enabled),ie),fetch:wV(d.items,i,a)},p=qs(cS(g,"tox-tbtn",a,T.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return p.asSpec()}else if(EO(t,s)){const i=dS(t.name,s),d={...t,borderless:!1};return uS(d,i,a.shared.providers,[])}else{if(zV(t,s))return TO(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},AO=(t,s)=>{const a=dS(t.name,"custom");return yP(T.none(),ar.parts.field({factory:di,...Fm(t,T.some(a),s,[bA(""),Om.self()])}))},VV={type:"separator"},UV=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ie}),TA=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ie}),WV=t=>Ne(t,UV),ZV=(t,s)=>Ct(s,a=>a.type===t),AA=(t,s)=>WV(ZV(t,s)),jV=t=>AA("header",t.targets),GV=t=>AA("anchor",t.targets),q5=t=>T.from(t.anchorTop).map(s=>TA("<top>",s)).toArray(),K5=t=>T.from(t.anchorBottom).map(s=>TA("<bottom>",s)).toArray(),qV=t=>Ne(t,s=>TA(s,s)),KV=t=>tt(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(VV,a),[]),kO=(t,s)=>{const a=t.toLowerCase();return Ct(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Ho(g.toLowerCase(),a)||Ho(p.toLowerCase(),a)})},YV=(t,s,a)=>{var i,d;const g=Ln.getValue(s),p=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],E=>{const O=kO(p,qV(a.getHistory(t)));return t==="file"?KV([O,kO(p,jV(E)),kO(p,le([q5(E),GV(E),K5(E)]))]):O})},_O=Vn("aria-invalid"),Sf=(t,s,a,i)=>{const d=s.shared.providers,g=Ue=>{const We=Ln.getValue(Ue);a.addToHistory(We.value,t.filetype)},p={...i.map(Ue=>({initialData:Ue})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":_O,type:"url"},minChars:0,responseTime:0,fetch:Ue=>{const We=YV(t.filetype,Ue,a),Ut=by(We,km.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:T.none()});return mi.pure(Ut)},getHotspot:Ue=>me.getOpt(Ue),onSetValue:(Ue,We)=>{Ue.hasConfigured(wf)&&wf.run(Ue).get(ie)},typeaheadBehaviours:hn([...a.getValidationHandler().map(Ue=>wf.config({getRoot:We=>tc(We.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(We,Ut)=>{F.getOpt(We).each(Bt=>{q(Bt.element,"title",d.translate(Ut))})}},validator:{validate:We=>{const Ut=Ln.getValue(We);return IV.nu(Bt=>{Ue({type:t.filetype,url:Ut.value},_n=>{if(_n.status==="invalid"){const Hn=Yo.error(_n.message);Bt(Hn)}else{const Hn=Yo.value(_n.message);Bt(Hn)}})})},validateOnLoad:!1}})).toArray(),l.config({disabled:()=>!t.enabled||d.isDisabled()}),Ir.config({}),ts("urlinput-events",[Gt(dm(),Ue=>{const We=rf(Ue.element),Ut=We.trim();Ut!==We&&ag(Ue.element,Ut),t.filetype==="file"&&wo(Ue,Zl,{name:t.name})}),Gt(lp(),Ue=>{wo(Ue,Zl,{name:t.name}),g(Ue)}),Gt(Qm(),Ue=>{wo(Ue,Zl,{name:t.name}),g(Ue)})])]),eventOrder:{[dm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ue=>Ue.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:y2(!1,1,"normal")},onExecute:(Ue,We,Ut)=>{wo(We,H2,{})},onItemExecute:(Ue,We,Ut,Bt)=>{g(Ue),wo(Ue,Zl,{name:t.name})}},S=ar.parts.field({...p,factory:j5}),E=t.label.map(Ue=>e1(Ue,d)),F=qs(((Ue,We,Ut=Ue,Bt=Ue)=>Qu(Ut,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ue],attributes:{title:d.translate(Bt),"aria-live":"polite",...We.fold(()=>({}),_n=>({id:_n}))}},d.icons))("invalid",T.some(_O),"warning")),z=qs({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[F.asSpec()]}),X=a.getUrlPicker(t.filetype),ee=Vn("browser.url.event"),me=qs({dom:{tag:"div",classes:["tox-control-wrap"]},components:[S,z.asSpec()],behaviours:hn([l.config({disabled:()=>!t.enabled||d.isDisabled()})])}),pe=qs(uS({name:t.name,icon:T.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:T.none(),borderless:!0},Ue=>rs(Ue,ee),d,[],["tox-browse-url"])),Ye=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:le([[me.asSpec()],X.map(()=>pe.asSpec()).toArray()])}),Oe=Ue=>{Fs.getCurrent(Ue).each(We=>{const Ut=Ln.getValue(We),Bt={fieldname:t.name,...Ut};X.each(_n=>{_n(Bt).get(Hn=>{Ln.setValue(We,Hn),wo(Ue,Zl,{name:t.name})})})})};return ar.sketch({dom:NH(),components:E.toArray().concat([Ye()]),fieldBehaviours:hn([l.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Ue=>{ar.getField(Ue).each(l.disable),pe.getOpt(Ue).each(l.disable)},onEnabled:Ue=>{ar.getField(Ue).each(l.enable),pe.getOpt(Ue).each(l.enable)}}),Fc(),ts("url-input-events",[Gt(ee,Oe)])])})},DO=(t,s)=>{const a=iD(t.icon,s.icons);return Cf.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>wo(i,Tg,{name:"alert-banner",value:t.url}),buttonBehaviours:hn([kT()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},XV=(t,s)=>{t.dom.checked=s},JV=t=>t.dom.checked,QV=(t,s,a)=>{const i=E=>(E.element.dom.click(),T.some(!0)),d=ar.parts.field({factory:{sketch:Yt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:hn([Om.self(),l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:E=>{tc(E.element).each(O=>Pr(O,"tox-checkbox--disabled"))},onEnabled:E=>{tc(E.element).each(O=>ma(O,"tox-checkbox--disabled"))}}),Ir.config({}),$o.config({}),W4(a,JV,XV),yo.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),ts("checkbox-events",[Gt(lp(),(E,O)=>{wo(E,Zl,{name:t.name})})])])}),g=ar.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[fa(s.translate(t.label))],behaviours:hn([fy.config({})])}),p=E=>Qu(E==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+E]},s.icons),S=qs({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return ar.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,S.asSpec(),g],fieldBehaviours:hn([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Fc()])})},eU=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=ts("htmlpanel",[Zr(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?Cf.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:hn([Da.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Jr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Pi(d.element)).each(g=>{nn(g,"data-mce-tooltip").each(p=>{Da.setComponents(d,s.tooltips.getComponents({tooltipText:p}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Jr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Pi(d.element).filter(g=>nn(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:J([ic,cc,ac,sr,ka,Yc]),onRtl:J([ic,cc,ac,sr,ka,Yc])},bubble:ju(0,-2,{})})}),i])}):Cf.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:hn([Ir.config({}),$o.config({}),i])})},Nc=t=>(s,a,i,d,g)=>on(a,"name").fold(()=>t(a,d,T.none(),g),p=>s.field(p,t(a,d,on(i,p),g))),Y5=t=>(s,a,i,d,g)=>{const p=xr(a,{source:"dynamic"});return Nc(t)(s,p,i,d,g)},X5={bar:Nc((t,s)=>_H(t,s.shared)),collection:Nc((t,s,a)=>my(t,s.shared.providers,a)),alertbanner:Nc((t,s)=>DO(t,s.shared.providers)),input:Nc((t,s,a)=>mV(t,s.shared.providers,a)),textarea:Nc((t,s,a)=>fV(t,s.shared.providers,a)),label:Nc((t,s,a,i)=>y5(t,s.shared,i)),iframe:Y5((t,s,a)=>Gz(t,s.shared.providers,a)),button:Nc((t,s)=>AO(t,s.shared.providers)),checkbox:Nc((t,s,a)=>QV(t,s.shared.providers,a)),colorinput:Nc((t,s,a)=>VH(t,s.shared,s.colorinput,a)),colorpicker:Nc((t,s,a)=>$z(t,s.shared.providers,a)),dropzone:Nc((t,s,a)=>j4(t,s.shared.providers,a)),grid:Nc((t,s)=>Hz(t,s.shared)),listbox:Nc((t,s,a)=>T5(t,s,a)),selectbox:Nc((t,s,a)=>aV(t,s.shared.providers,a)),sizeinput:Nc((t,s)=>D5(t,s.shared.providers)),slider:Nc((t,s,a)=>O5(t,s.shared.providers,a)),urlinput:Nc((t,s,a)=>Sf(t,s,s.urlinput,a)),customeditor:Nc(u5),htmlpanel:Nc((t,s)=>eU(t,s.shared.providers)),imagepreview:Nc((t,s,a)=>eO(t,a)),table:Nc((t,s)=>R5(t,s.shared.providers)),tree:Nc((t,s)=>kV(t,s)),panel:Nc((t,s)=>oV(t,s))},oY={field:(t,s)=>s,record:J([])},tU=(t,s,a,i,d)=>{const g=xr(i,{shared:{interpreter:p=>ti(t,p,a,g,d)}});return ti(t,s,a,g,d)},ti=(t,s,a,i,d)=>on(X5,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,i,d)),kA=(t,s,a,i)=>ti(oY,t,s,a,i),u1="layout-inset",yy=t=>t.x,J5=(t,s)=>t.x+t.width/2-s.width/2,OO=(t,s)=>t.x+t.width-s.width,RO=t=>t.y,FO=(t,s)=>t.y+t.height-s.height,Q5=(t,s)=>t.y+t.height/2-s.height/2,_A=(t,s,a)=>kc(OO(t,s),FO(t,s),a.insetSouthwest(),Un(),"southwest",Lc(t,{right:0,bottom:3}),u1),DA=(t,s,a)=>kc(yy(t),FO(t,s),a.insetSoutheast(),L0(),"southeast",Lc(t,{left:1,bottom:3}),u1),fS=(t,s,a)=>kc(OO(t,s),RO(t),a.insetNorthwest(),XC(),"northwest",Lc(t,{right:0,top:2}),u1),Cy=(t,s,a)=>kc(yy(t),RO(t),a.insetNortheast(),I0(),"northeast",Lc(t,{left:1,top:2}),u1),xu=(t,s,a)=>kc(J5(t,s),RO(t),a.insetNorth(),V1(),"north",Lc(t,{top:2}),u1),wy=(t,s,a)=>kc(J5(t,s),FO(t,s),a.insetSouth(),JC(),"south",Lc(t,{bottom:3}),u1),NO=(t,s,a)=>kc(OO(t,s),Q5(t,s),a.insetEast(),Ix(),"east",Lc(t,{right:0}),u1),e$=(t,s,a)=>kc(yy(t),Q5(t,s),a.insetWest(),$x(),"west",Lc(t,{left:1}),u1),t$=t=>{switch(t){case"north":return xu;case"northeast":return Cy;case"northwest":return fS;case"south":return wy;case"southeast":return DA;case"southwest":return _A;case"east":return NO;case"west":return e$}},n$=(t,s,a,i,d)=>qx(i).map(t$).getOr(xu)(t,s,a,i,d),nU=t=>{switch(t){case"north":return wy;case"northeast":return DA;case"northwest":return _A;case"south":return xu;case"southeast":return Cy;case"southwest":return fS;case"east":return e$;case"west":return NO}},o$=(t,s,a,i,d)=>qx(i).map(nU).getOr(xu)(t,s,a,i,d),OA={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},sY=(t,s,a)=>{const d={maxHeightFunction:Ep()},g=()=>({type:"node",root:Za(Ur(t())),node:T.from(t()),bubble:ju(12,12,OA),layouts:{onRtl:()=>[Cy],onLtr:()=>[fS]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:ju(-12,12,OA),layouts:{onRtl:()=>[ac,ka,ic],onLtr:()=>[ka,ac,ic]},overrides:d});return()=>a()?g():p()},oU=(t,s,a,i)=>{const g={maxHeightFunction:Ep()},p=()=>({type:"node",root:Za(Ur(s())),node:T.from(s()),bubble:ju(12,12,OA),layouts:{onRtl:()=>[xu],onLtr:()=>[xu]},overrides:g}),S=()=>t?{type:"node",root:Za(Ur(s())),node:T.from(s()),bubble:ju(0,-ji(s()),OA),layouts:{onRtl:()=>[cc],onLtr:()=>[cc]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:ju(0,0,OA),layouts:{onRtl:()=>[cc],onLtr:()=>[cc]},overrides:g};return()=>i()?p():S()},sU=(t,s,a)=>{const i=()=>({type:"node",root:Za(Ur(t())),node:T.from(t()),layouts:{onRtl:()=>[xu],onLtr:()=>[xu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[ic],onLtr:()=>[ic]}});return()=>a()?i():d()},rU=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],p={firstCell:Le.fromDom(d),lastCell:Le.fromDom(g)};return T.some(p)}return T.some(hg.range(Le.fromDom(a.startContainer),a.startOffset,Le.fromDom(a.endContainer),a.endOffset))}}),s$=t=>s=>({type:"node",root:t(),node:s}),BO=(t,s,a,i)=>{const d=Kv(t),g=()=>Le.fromDom(t.getBody()),p=()=>Le.fromDom(t.getContentAreaContainer()),S=()=>d||!i();return{inlineDialog:sY(p,s,S),inlineBottomDialog:oU(t.inline,p,a,S),banner:sU(p,s,S),cursor:rU(t,g),node:s$(g)}},aU=t=>(s,a)=>{JM(t)(s,a)},cU=t=>()=>UM(t),r$=t=>s=>QT(t,s),iU=t=>s=>VM(t,s),lU=t=>({colorPicker:aU(t),hasCustomColors:cU(t),getColors:r$(t),getColorCols:iU(t)}),uU=t=>()=>gB(t),dU=t=>({isDraggableModal:uU(t)}),MO=t=>{const s=oo(l2(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},PO=t=>gr(t,"items"),a$=t=>gr(t,"format"),c$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],mU=t=>Zo(t,"items"),fU=t=>Zo(t,"block"),i$=t=>Zo(t,"inline"),gU=t=>Zo(t,"selector"),gS=t=>tt(t,(s,a)=>{if(mU(a)){const i=gS(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(i$(a)||fU(a)||gU(a)){const d=`custom-${Q(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),hU=(t,s)=>{const a=gS(s),i=d=>{dt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},hS=t=>oB(t).map(s=>{const a=hU(t,s);return sB(t)?c$.concat(a):a}).getOr(c$),pU=t=>{const s=sn(t);return s.length===1&&Dt(s,"title")},RA=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),Sy=(t,s,a,i)=>{const d=E=>RA(E,a,i),g=E=>{const O=S(E.items);return{...E,type:"submenu",getStyleItems:J(O)}},p=E=>{const O=Q(E.name)?E.name:Vn(E.title),F=`custom-${O}`,z={...E,type:"formatter",format:F,isSelected:a(F),getStylePreview:i(F)};return t.formatter.register(O,z),z},S=E=>Ne(E,O=>PO(O)?g(O):a$(O)?d(O):pU(O)?{...O,type:"separator"}:p(O));return S(s)},l$=t=>{const s=S=>()=>t.formatter.match(S),a=S=>()=>{const E=t.formatter.get(S);return E!==void 0?T.some({tag:E.length>0&&(E[0].inline||E[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):T.none()},i=oo([]),d=oo([]),g=oo(!1);return t.on("PreInit",S=>{const E=hS(t),O=Sy(t,E,s,a);i.set(O)}),t.on("addStyleModifications",S=>{const E=Sy(t,S.items,s,a);d.set(E),g.set(S.replace)}),{getData:()=>{const S=g.get()?[]:i.get(),E=d.get();return S.concat(E)}}},bU=t=>{let i=0;const d=()=>i>0,g=S=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[fa(S.tooltipText)]}];return{getConfig:S=>({delayForShow:()=>d()?60:300,delayForHide:J(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(S),onShow:(E,O)=>{i++,S.onShow&&S.onShow(E,O)},onHide:(E,O)=>{i--,S.onHide&&S.onHide(E,O)},onSetup:S.onSetup}),getComponents:g}},u$=t=>Lt(t)&&t.nodeType===1,d$=Zh.trim,$O=t=>s=>!!(u$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),vU=$O("true"),IO=$O("false"),pS=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),yU=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return vU(s)}return!1},CU=(t,s)=>Ne(Hc(Le.fromDom(s),t),a=>a.dom),Lb=t=>t.innerText||t.textContent,m$=t=>t.id?t.id:Vn("h"),wU=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,f$=t=>wU(t)&&NA(t),FA=t=>t&&/^(H[1-6])$/.test(t.nodeName),NA=t=>yU(t)&&!IO(t),SU=t=>FA(t)&&NA(t),xU=t=>FA(t)?parseInt(t.nodeName.substr(1),10):0,EU=t=>{var s;const a=m$(t),i=()=>{t.id=a};return pS("header",(s=Lb(t))!==null&&s!==void 0?s:"","#"+a,xU(t),i)},LO=t=>{const s=t.id||t.name,a=Lb(t);return pS("anchor",a||"#"+s,"#"+s,0,ie)},TU=t=>Ne(Ct(t,SU),EU),AU=t=>Ne(Ct(t,f$),LO),kU=t=>CU("h1,h2,h3,h4,h5,h6,a:not([href])",t),_U=t=>d$(t.title).length>0,DU={find:t=>{const s=kU(t);return Ct(TU(s).concat(AU(s)),_U)}},BA="tinymce-url-history",HO=5,g$=t=>Q(t)&&/^https?/.test(t),bS=t=>Xe(t)&&t.length<=HO&&ye(t,g$),h$=t=>Te(t)&&xo(t,s=>!bS(s)).isNone(),p$=()=>{const t=Bb.getItem(BA);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+BA+" was not valid JSON",a),{};throw a}return h$(s)?s:(console.log("Local storage "+BA+" was not valid format",s),{})},zO=t=>{if(!h$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Bb.setItem(BA,JSON.stringify(t))},b$=t=>{const s=p$();return on(s,t).getOr([])},OU=(t,s)=>{if(!g$(t))return;const a=p$(),i=on(a,s).getOr([]),d=Ct(i,g=>g!==t);a[s]=[t].concat(d).slice(0,HO),zO(a)},v$=t=>!!t,RU=t=>ro(Zh.makeMap(t,/[, ]/),v$),VO=t=>T.from(dB(t)),FU=t=>{const s=T.from(B3(t)).filter(v$).map(RU);return VO(t).fold(Ve,a=>s.fold(je,i=>sn(i).length>0?i:!1))},NU=(t,s)=>{const a=FU(t);return yt(a)?a?VO(t):T.none():a[s]?VO(t):T.none()},BU=(t,s)=>NU(t,s).map(a=>i=>mi.nu(d=>{const g=(S,E)=>{if(!Q(S))throw new Error("Expected value to be string");if(E!==void 0&&!Te(E))throw new Error("Expected meta to be a object");d({value:S,meta:E})},p={filetype:s,fieldname:i.fieldname,...T.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),y$=t=>T.from(t).filter(Q).getOrUndefined(),MU=t=>M3(t)?T.some({targets:DU.find(t.getBody()),anchorTop:y$(fB(t)),anchorBottom:y$(hT(t))}):T.none(),aY=t=>T.from(mB(t)),PU=t=>({getHistory:b$,addToHistory:OU,getLinkInformation:()=>MU(t),getValidationHandler:()=>aY(t),getUrlPicker:s=>BU(t,s)}),C$=(t,s,a,i)=>{const d=oo(!1),g=MO(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Ju.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:bU(t.dialog)},S=PU(s),E=l$(s),O=lU(s),F=dU(s),z=()=>d.get(),X=Oe=>d.set(Oe),ee={shared:{providers:p,anchors:BO(s,a,i,g.isPositionedAtTop),header:g},urlinput:S,styles:E,colorinput:O,dialog:F,isContextMenuOpen:z,setContextMenuState:X},me=Oe=>T.none(),pe={...ee,shared:{...ee.shared,interpreter:Oe=>kA(Oe,{},pe,me),getSink:t.popup}},Ye={...ee,shared:{...ee.shared,interpreter:Oe=>kA(Oe,{},Ye,me),getSink:t.dialog}};return{popup:pe,dialog:Ye}},w$=(t,s,a)=>{const i=($t,Kn)=>{dt([s,...a],Tn=>{Tn.broadcastEvent($t,Kn)})},d=($t,Kn)=>{dt([s,...a],Tn=>{Tn.broadcastOn([$t],Kn)})},g=$t=>d(Cm(),{target:$t.target}),p=ul(),S=$i(p,"touchstart",g),E=$i(p,"touchmove",$t=>i(_1(),$t)),O=$i(p,"touchend",$t=>i(sC(),$t)),F=$i(p,"mousedown",g),z=$i(p,"mouseup",$t=>{$t.raw.button===0&&d(xv(),{target:$t.target})}),X=$t=>d(Cm(),{target:Le.fromDom($t.target)}),ee=$t=>{$t.button===0&&d(xv(),{target:Le.fromDom($t.target)})},me=()=>{dt(t.editorManager.get(),$t=>{t!==$t&&$t.dispatch("DismissPopups",{relatedTarget:t})})},pe=$t=>i(oh(),sw($t)),Ye=$t=>{d(Th(),{}),i(Ad(),sw($t))},Oe=Ur(Le.fromDom(t.getElement())),Ue=ow(Oe,"scroll",$t=>{requestAnimationFrame(()=>{const Kn=t.getContainer();if(Kn!=null){const eo=$h(t,s.element).map(vs=>[vs.element,...vs.others]).getOr([]);An(eo,vs=>ks(vs,$t.target))&&(t.dispatch("ElementScroll",{target:$t.target.dom}),i(tx(),$t))}})}),We=()=>d(Th(),{}),Ut=$t=>{$t.state&&d(Cm(),{target:Le.fromDom(t.getContainer())})},Bt=$t=>{d(Cm(),{target:Le.fromDom($t.relatedTarget.getContainer())})},_n=$t=>t.dispatch("focusin",$t),Hn=$t=>t.dispatch("focusout",$t);t.on("PostRender",()=>{t.on("click",X),t.on("tap",X),t.on("mouseup",ee),t.on("mousedown",me),t.on("ScrollWindow",pe),t.on("ResizeWindow",Ye),t.on("ResizeEditor",We),t.on("AfterProgressState",Ut),t.on("DismissPopups",Bt),dt([s,...a],$t=>{$t.element.dom.addEventListener("focusin",_n),$t.element.dom.addEventListener("focusout",Hn)})}),t.on("remove",()=>{t.off("click",X),t.off("tap",X),t.off("mouseup",ee),t.off("mousedown",me),t.off("ScrollWindow",pe),t.off("ResizeWindow",Ye),t.off("ResizeEditor",We),t.off("AfterProgressState",Ut),t.off("DismissPopups",Bt),dt([s,...a],$t=>{$t.element.dom.removeEventListener("focusin",_n),$t.element.dom.removeEventListener("focusout",Hn)}),F.unbind(),S.unbind(),E.unbind(),O.unbind(),z.unbind(),Ue.unbind()}),t.on("detach",()=>{dt([s,...a],Ew),dt([s,...a],$t=>$t.destroy())})},uc=jE,xf=PF,$U=J([et("shell",!1),Zt("makeItem"),et("setupItem",ie),yu.field("listBehaviours",[Uo])]),IU=Hl({name:"items",overrides:()=>({behaviours:hn([Uo.config({})])})}),LU=J([IU]),HU=J("CustomList"),zU=(t,s,a,i)=>{const d=(S,E)=>{p(S).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},O=>{const F=Uo.contents(O),z=E.length,X=z-F.length,ee=X>0?nt(X,()=>t.makeItem()):[],me=F.slice(z);dt(me,Ye=>Uo.remove(O,Ye)),dt(ee,Ye=>Uo.append(O,Ye));const pe=Uo.contents(O);dt(pe,(Ye,Oe)=>{t.setupItem(S,Ye,E[Oe],Oe)})})},g=t.shell?{behaviours:[Uo.config({})],components:[]}:{behaviours:[],components:s},p=S=>t.shell?T.some(S):mn(S,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Oc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},S$=wi({name:HU(),configFields:$U(),partFields:LU(),factory:zU,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Hb=J([Zt("dom"),et("shell",!0),Dc("toolbarBehaviours",[Uo])]),UU=J([Hl({name:"groups",overrides:()=>({behaviours:hn([Uo.config({})])})})]),x$=(t,s,a,i)=>{const d=(S,E)=>{g(S).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},O=>{Uo.set(O,E)})},g=S=>t.shell?T.some(S):mn(S,t,"groups"),p=t.shell?{behaviours:[Uo.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Oc(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d,refresh:ie},domModification:{attributes:{role:"group"}}}},Ef=wi({name:"Toolbar",configFields:Hb(),partFields:UU(),factory:x$,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),WU=ie,ZU=Ve,d1=J([]);var E$=Object.freeze({__proto__:null,setup:WU,isDocked:ZU,getBehaviours:d1});const zb=J(Vn("toolbar-height-change")),Vd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},UO="tox-tinymce--toolbar-sticky-on",WO="tox-tinymce--toolbar-sticky-off",T$=(t,s)=>{const a=ha(s),d=xa(s).dom.innerHeight,g=Mc(a),p=Le.fromDom(t.elm),S=ki(p),E=nr(p),O=S.y,F=O+E,z=La(s),X=nr(s),ee=z.top,me=ee+X,pe=Math.abs(ee-g.top)<2,Ye=Math.abs(me-(g.top+d))<2;if(pe&&O<me)gd(g.left,O-X,a);else if(Ye&&F>ee){const Oe=O-d+E+X;gd(g.left,Oe,a)}},ZO=(t,s)=>Dt($r.getModes(t),s),jO=t=>{const s=i=>ji(i)+(parseInt(Os(i,"margin-top"),10)||0)+(parseInt(Os(i,"margin-bottom"),10)||0),a=t.element;tc(a).each(i=>{const d="padding-"+$r.getModes(t)[0];if($r.isDocked(t)){const g=ae(i);pt(a,"width",g+"px"),pt(i,d,s(a)+"px")}else qo(a,"width"),qo(i,d)})},A$=(t,s)=>{s?(ma(t,Vd.fadeOutClass),fp(t,[Vd.transitionClass,Vd.fadeInClass])):(ma(t,Vd.fadeInClass),fp(t,[Vd.fadeOutClass,Vd.transitionClass]))},k$=(t,s)=>{const a=Le.fromDom(t.getContainer());s?(Pr(a,UO),ma(a,WO)):(Pr(a,WO),ma(a,UO))},jU=(t,s)=>{const a=ha(s);Rd(a).filter(i=>!ks(s,i)).filter(i=>ks(i,Le.fromDom(a.dom.body))||Sa(t,i)).each(()=>Pl(s))},GU=(t,s)=>Pi(t).orThunk(()=>s().toOptional().bind(a=>Pi(a.element))),xy=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each($r.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(jO)}),t.on("SkinLoaded",()=>{a().each(i=>{$r.isDocked(i)?$r.reset(i):$r.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each($r.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{$r.refresh(d);const g=d.element;GF(g)&&T$(i,g)})}),t.on("PostRender",()=>{k$(t,!1)})},vS=t=>t().map($r.isDocked).getOr(!1),GO=()=>[ol.config({channels:{[zb()]:{onReceive:jO}}})],_$=(t,s)=>{const a=Ys(),i=s.getSink,d=S=>{i().each(E=>S(E.element))},g=S=>{t.inline||jO(S),k$(t,$r.isDocked(S)),S.getSystem().broadcastOn([Th()],{}),i().each(E=>E.getSystem().broadcastOn([Th()],{}))},p=t.inline?[]:GO();return[$o.config({}),$r.config({contextual:{lazyContext:S=>{const E=ji(S.element),O=t.inline?t.getContentAreaContainer():t.getContainer();return T.from(O).map(F=>{const z=Yr(Le.fromDom(F));return $h(t,S.element).fold(()=>{const ee=z.height-E,me=z.y+(ZO(S,"top")?0:E);return Wr(z.x,me,z.width,ee)},ee=>{const me=pd(z,xb(ee)),pe=ZO(S,"top")?me.y:me.y+E;return Wr(me.x,pe,me.width,me.height-E)})})},onShow:()=>{d(S=>A$(S,!0))},onShown:S=>{d(E=>bl(E,[Vd.transitionClass,Vd.fadeInClass])),a.get().each(E=>{jU(S.element,E),a.clear()})},onHide:S=>{GU(S.element,i).fold(a.clear,a.set),d(E=>A$(E,!1))},onHidden:()=>{d(S=>bl(S,[Vd.transitionClass]))},...Vd},lazyViewport:S=>$h(t,S.element).fold(()=>{const O=Ba(),F=lB(t),z=O.y+(ZO(S,"top")?F:0),X=O.height-(ZO(S,"bottom")?F:0);return{bounds:Wr(O.x,z,O.width,X),optScrollEnv:T.none()}},O=>({bounds:xb(O),optScrollEnv:T.some({currentScrollTop:O.element.dom.scrollTop,scrollElmTop:La(O.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var qU=Object.freeze({__proto__:null,setup:xy,isDocked:vS,getBehaviours:_$});const qO=t=>{const s=t.editor,a=t.sticky?_$:d1;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:hn(a(s,t.sharedBackstage))}},KU=ko([Ua,Vs("items",$f([x1([IT,Ji("items",Mn)]),Mn]))].concat(Li)),yS=t=>oa("GroupToolbarButton",KU,t),D$=[Ka("text"),Ka("tooltip"),Ka("icon"),Qi("search",!1,$f([dl,ko([Ka("placeholder")])],t=>yt(t)?t?T.some({placeholder:T.none()}):T.none():T.some(t))),Xi("fetch"),da("onSetup",()=>ie)],O$=ko([Ua,...D$]),R$=t=>oa("menubutton",O$,t),YU=ko([Ua,Qv,$d,Hh,W7,H7,_b,el("presets","normal",["normal","color","listpreview"]),QB(1),Yp,JB]),XU=t=>oa("SplitButton",YU,t);var KO=Tl({factory:(t,s)=>{const a=(d,g)=>{const p=Ne(g,S=>{const E={type:"menubutton",text:S.text,fetch:F=>{F(S.getItems())}},O=R$(E).mapError(F=>lu(F)).getOrDie();return cS(O,"tox-mbtn",s.backstage,T.some("menuitem"))});Uo.set(d,p)},i={focus:yo.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:hn([Uo.config({}),ts("menubar-events",[Zr(d=>{t.onSetup(d)}),Gt(fl(),(d,g)=>{Jr(d.element,".tox-mbtn--active").each(p=>{Zu(g.event.target,".tox-mbtn").each(S=>{ks(p,S)||d.getSystem().getByDom(p).each(E=>{d.getSystem().getByDom(S).each(O=>{Hd.expand(O),Hd.close(E),$o.focus(O)})})})})}),Gt(sh(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(S=>d.getSystem().getByDom(S).toOptional()).each(S=>{Hd.isOpen(p)&&(Hd.expand(S),Hd.close(p))})})})]),yo.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),T.some(!0))}),Ir.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Zt("dom"),Zt("uid"),Zt("onEscape"),Zt("backstage"),et("onSetup",ie)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const F$="⚡️Upgrade",N$="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",YO=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:N$,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:F$}}]}),B$="container",MA=[Dc("slotBehaviours",[])],CS=t=>"<alloy.field."+t+">",M$=t=>{const s=(()=>{const g=[];return{slot:(S,E)=>(g.push(S),VE(B$,CS(S),E)),record:J(g)}})(),a=t(s),i=s.record(),d=Ne(i,g=>Qc({name:g,pname:CS(g)}));return Sg(B$,MA,d,JU,a)},JU=(t,s)=>{const a=pe=>db(t),i=(pe,Ye)=>mn(pe,t,Ye),d=(pe,Ye)=>(Oe,Ue)=>mn(Oe,t,Ue).map(We=>pe(We,Ue)).getOr(Ye),g=pe=>(Ye,Oe)=>{dt(Oe,Ue=>pe(Ye,Ue))},p=(pe,Ye)=>Ie(pe.element,"aria-hidden")!=="true",S=(pe,Ye)=>{if(!p(pe)){const Oe=pe.element;qo(Oe,"display"),$(Oe,"aria-hidden"),wo(pe,aC(),{name:Ye,visible:!0})}},E=(pe,Ye)=>{if(p(pe)){const Oe=pe.element;pt(Oe,"display","none"),q(Oe,"aria-hidden","true"),wo(pe,aC(),{name:Ye,visible:!1})}},O=d(p,!1),F=d(E),z=g(F),X=pe=>z(pe,a()),ee=d(S),me={getSlotNames:a,getSlot:i,isShowing:O,hideSlot:F,hideAllSlots:X,showSlot:ee};return{uid:t.uid,dom:t.dom,components:s,behaviours:ab(t.slotBehaviours),apis:me}},zi={...ro({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>k0(t)),sketch:M$},QU=ko([$d,Qv,da("onShow",ie),da("onHide",ie),_b]),XO=t=>oa("sidebar",QU,t),JO=t=>{const{sidebars:s}=t.ui.registry.getAll();dt(sn(s),a=>{const i=s[a],d=()=>tr(T.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},eW=t=>({element:()=>t.element.dom}),QO=(t,s)=>{const a=Ne(sn(s),i=>{const d=s[i],g=un(XO(d));return{name:i,getApi:eW,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ne(a,i=>{const d=oo(ie);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:ny.unnamedEvents([Hi(i,d),Jp(i,d),Gt(aC(),(g,p)=>{const S=p.event;I(a,O=>O.name===S.name).each(O=>{(S.visible?O.onShow:O.onHide)(O.getApi(g))})})])})})},tW=t=>zi.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:QO(s,t),slotBehaviours:ny.unnamedEvents([Zr(a=>zi.hideAllSlots(a))])})),nW=(t,s,a)=>{Fs.getCurrent(t).each(d=>{Uo.set(d,[tW(s)]);const g=a==null?void 0:a.toLowerCase();Q(g)&&Zo(s,g)&&Fs.getCurrent(d).each(p=>{zi.showSlot(p,g),cl.immediateGrow(d),qo(d.element,"width"),PA(t.element,"region")})})},PA=(t,s)=>{q(t,"role",s)},oW=(t,s)=>{Fs.getCurrent(t).each(i=>{Fs.getCurrent(i).each(g=>{cl.hasGrown(i)?zi.isShowing(g,s)?(cl.shrink(i),PA(t.element,"presentation")):(zi.hideAllSlots(g),zi.showSlot(g,s),PA(t.element,"region")):(zi.hideAllSlots(g),zi.showSlot(g,s),cl.grow(i),PA(t.element,"region"))})})},sW=t=>Fs.getCurrent(t).bind(a=>cl.isGrowing(a)||cl.hasGrown(a)?Fs.getCurrent(a).bind(g=>I(zi.getSlotNames(g),p=>zi.isShowing(g,p))):T.none()),P$=Vn("FixSizeEvent"),$$=Vn("AutoSizeEvent"),I$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:hn([Ir.config({}),$o.config({}),cl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Fs.getCurrent(s).each(zi.hideAllSlots),rs(s,$$)},onGrown:s=>{rs(s,$$)},onStartGrow:s=>{wo(s,P$,{width:Hs(s.element,"width").getOr("")})},onStartShrink:s=>{wo(s,P$,{width:ae(s.element)+"px"})}}),Uo.config({}),Fs.config({find:s=>{const a=Uo.contents(s);return wn(a)}})])}],behaviours:hn([Om.childAt(0),ts("sidebar-sliding-events",[Gt(P$,(s,a)=>{pt(s.element,"width",a.event.width)}),Gt($$,(s,a)=>{qo(s.element,"width")})])])});var aW=Object.freeze({__proto__:null,block:(t,s,a,i)=>{q(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=hn([yo.config({mode:"special",onTab:()=>T.some(!0),onShiftTab:()=>T.some(!0)}),$o.config({})]),p=i(d,g),S=d.getSystem().build(p);Uo.append(d,Ml(S)),S.hasConfigured(yo)&&s.focus&&yo.focusIn(S),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Uo.remove(d,S))},unblock:(t,s,a)=>{$(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),cW=[da("getRoot",T.none),Ta("focus",!0),Es("onBlock"),Es("onUnblock")],iW=Object.freeze({__proto__:null,init:()=>{const t=Bf(),s=a=>{t.set({destroy:a})};return hl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Nm=Ic({fields:cW,name:"blocking",apis:aW,state:iW}),lW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),L$=t=>Fs.getCurrent(t).each(s=>Pl(s.element,!0)),uW=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;T.from(t.iframeElement).map(Le.fromDom).each(d=>{s?(nn(d,a).each(g=>q(d,i,g)),q(d,a,-1)):($(d,a),nn(d,i).each(g=>{q(d,a,g),$(d,i)}))})},fY=(t,s,a,i)=>{const d=s.element;if(uW(t,a),a)Nm.block(s,lW(i)),qo(d,"display"),$(d,"aria-hidden"),t.hasFocus()&&L$(s);else{const g=Fs.getCurrent(s).exists(p=>U1(p.element));Nm.unblock(s),pt(d,"display","none"),q(d,"aria-hidden","true"),g&&t.focus()}},gY=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:hn([Uo.config({}),Nm.config({focus:!1}),Fs.config({find:s=>wn(s.components())})]),components:[]}),H$=t=>t.type==="focusin",z$=t=>H$(t)?(t.composed?wn(t.composedPath()):T.from(t.target)).map(Le.fromDom).filter(fo).exists(a=>pl(a,"mce-pastebin")):!1,dW=(t,s,a)=>{const i=oo(!1),d=Ys(),g=S=>{i.get()&&!z$(S)&&(S.preventDefault(),L$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",S=>{S.command.toLowerCase()==="mcefocus"&&S.value!==!0&&g(S)})});const p=S=>{S!==i.get()&&(i.set(S),fY(t,s(),S,a.providers),v9(t,S))};t.on("ProgressState",S=>{if(d.on(clearTimeout),st(S.time)){const E=Gv.setEditorTimeout(t,()=>p(S.state),S.time);d.set(E)}else p(S.state),d.clear()})},mW=(t,s)=>tt(t,(d,g)=>s(g,d.len).fold(J(d),S=>({len:S.finish,list:d.list.concat([S])})),{len:0,list:[]}).list,jl=(t,s,a)=>({within:t,extra:s,withinWidth:a}),V$=(t,s,a)=>{const i=mW(t,(S,E)=>{const O=a(S);return T.some({element:S,start:E,finish:E+O,width:O})}),d=Ct(i,S=>S.finish<=s),g=jt(d,(S,E)=>S+E.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},wS=t=>Ne(t,s=>s.element),U$=(t,s,a)=>{const i=wS(t.concat(s));return jl(i,[],a)},fW=(t,s,a,i)=>{const d=wS(t).concat([a]);return jl(d,wS(s),i)},SS=(t,s,a)=>jl(wS(t),[],a),gW=(t,s,a)=>{const i=V$(s,t,a);return i.extra.length===0?T.some(i):T.none()},$A=(t,s,a,i)=>{const d=gW(t,s,a).getOrThunk(()=>V$(s,t-a(i),a)),g=d.within,p=d.extra,S=d.withinWidth;return p.length===1&&p[0].width<=a(i)?U$(g,p,S):p.length>=1?fW(g,p,i,S):SS(g,p,S)},W$=(t,s)=>{const a=Ne(s,i=>Ml(i));Ef.setGroups(t,a)},IA=t=>Xt(t,s=>Pi(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),Z$=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=zl(t,s,"primary"),g=$a.getCoupled(t,"overflowGroup");pt(d.element,"visibility","hidden");const p=i.concat([g]),S=IA(p);a([]),W$(d,p);const E=ae(d.element),O=$A(E,s.builtGroups.get(),F=>Math.ceil(F.element.dom.getBoundingClientRect().width),g);O.extra.length===0?(Uo.remove(d,g),a([])):(W$(d,O.within),a(O.extra)),qo(d.element,"visibility"),hc(d.element),S.each($o.focus)},j$=J([Dc("splitToolbarBehaviours",[$a]),zs("builtGroups",()=>oo([]))]),Ud=J([gh(["overflowToggledClass"]),Lu("getOverflowBounds"),Zt("lazySink"),zs("overflowGroups",()=>oo([])),Es("onOpened"),Es("onClosed")].concat(j$())),hW=J([Qc({factory:Ef,schema:Hb(),name:"primary"}),Cu({schema:Hb(),name:"overflow"}),Cu({name:"overflow-button"}),Cu({name:"overflow-group"})]),Ey=J((t,s)=>{ut(t,Math.floor(s))}),G$=J([gh(["toggledClass"]),Zt("lazySink"),Xi("fetch"),Lu("getBounds"),Or("fireDismissalEventInstead",[et("event",Uf())]),fg(),Es("onToggled")]),q$=J([Cu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:hn([ds.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Cu({factory:Ef,schema:Hb(),name:"toolbar",overrides:t=>({toolbarBehaviours:hn([yo.config({mode:"cyclic",onEscape:s=>(mn(s,t,"button").each($o.focus),T.none())})])})})]),LA=Ys(),K$=(t,s)=>{LA.set(!0),eR(t,s),LA.clear()},eR=(t,s)=>{const a=$a.getCoupled(t,"toolbarSandbox");Rs.isOpen(a)?Rs.close(a):Rs.open(a,s.toolbar())},tR=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();ui.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:Ey()}}},d)},Y$=(t,s,a,i,d)=>{Ef.setGroups(s,d),tR(t,s,a,i),ds.on(t)},pW=(t,s,a)=>{const i=KC(),d=(p,S)=>{const E=LA.get().getOr(!1);a.fetch().get(O=>{Y$(t,S,a,s.layouts,O),i.link(t.element),E||yo.focusIn(S)})},g=()=>{ds.off(t),LA.get().getOr(!1)||$o.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:hn([yo.config({mode:"special",onEscape:p=>(Rs.close(p),T.some(!0))}),Rs.config({onOpen:d,onClose:g,isPartOf:(p,S,E)=>bh(S,E)||bh(t,E),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ol.config({channels:{...wg({isExtraPart:Ve,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...Dw({doReposition:()=>{Rs.getState($a.getCoupled(t,"toolbarSandbox")).each(p=>{tR(t,p,a,s.layouts)})}})}})])}},m1=wi({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...di.sketch({...i.button(),action:d=>{eR(d,i)},buttonBehaviours:yu.augment({dump:i.button().buttonBehaviours},[$a.config({others:{toolbarSandbox:d=>pW(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Rs.getState($a.getCoupled(d,"toolbarSandbox")).each(p=>{Y$(d,p,t,a.layouts,g)})},reposition:d=>{Rs.getState($a.getCoupled(d,"toolbarSandbox")).each(g=>{tR(d,g,t,a.layouts)})},toggle:d=>{eR(d,i)},toggleWithoutFocusing:d=>{K$(d,i)},getToolbar:d=>Rs.getState($a.getCoupled(d,"toolbarSandbox")),isOpen:d=>Rs.isOpen($a.getCoupled(d,"toolbarSandbox"))}}),configFields:G$(),partFields:q$(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),bW=J([Zt("items"),gh(["itemSelector"]),Dc("tgroupBehaviours",[yo])]),X$=J([Pv({name:"items",unit:"item"})]),J$=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.tgroupBehaviours,[yo.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),xS=wi({name:"ToolbarGroup",configFields:bW(),partFields:X$(),factory:J$}),Q$=t=>Ne(t,s=>Ml(s)),eI=(t,s,a)=>{Z$(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{m1.setGroups(d,Q$(i))})})},tI=(t,s,a,i)=>{const d=qs(m1.sketch({fetch:()=>mi.nu(g=>{g(Q$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ka,ac],onRtl:()=>[ac,ka],onBottomLtr:()=>[Yc,sr],onBottomRtl:()=>[sr,Yc]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.splitToolbarBehaviours,[$a.config({others:{overflowGroup:()=>xS.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ne(p,g.getSystem().build)),eI(g,d,t)},refresh:g=>eI(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{m1.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(m1.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(m1.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{m1.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(m1.getToolbar)},domModification:{attributes:{role:"group"}}}},nR=wi({name:"SplitFloatingToolbar",configFields:Ud(),partFields:hW(),factory:tI,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),nI=J([gh(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Es("onOpened"),Es("onClosed")].concat(j$())),vW=J([Qc({factory:Ef,schema:Hb(),name:"primary"}),Qc({factory:Ef,schema:Hb(),name:"overflow",overrides:t=>({toolbarBehaviours:hn([cl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{mn(s,t,"overflow-button").each(a=>{ds.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{mn(s,t,"overflow-button").each(ds.on)}}),yo.config({mode:"acyclic",onEscape:s=>(mn(s,t,"overflow-button").each($o.focus),T.some(!0))})])})}),Cu({name:"overflow-button",overrides:t=>({buttonBehaviours:hn([ds.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Cu({name:"overflow-group"})]),yW=(t,s)=>mn(t,s,"overflow").map(cl.hasGrown).getOr(!1),oR=(t,s,a)=>{mn(t,s,"overflow-button").each(i=>{mn(t,s,"overflow").each(d=>{if(HA(t,s),cl.hasShrunk(d)){const g=s.onOpened;s.onOpened=p=>{a||yo.focusIn(d),g(p),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=p=>{a||$o.focus(i),g(p),s.onClosed=g}}cl.toggleGrow(d)})})},HA=(t,s)=>{mn(t,s,"overflow").each(a=>{Z$(t,s,i=>{const d=Ne(i,g=>Ml(g));Ef.setGroups(a,d)}),mn(t,s,"overflow-button").each(i=>{cl.hasGrown(a)&&ds.on(i)}),cl.refresh(a)})},CW=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,S)=>{const E=Ne(S,p.getSystem().build);t.builtGroups.set(E)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Oc(t.splitToolbarBehaviours,[$a.config({others:{overflowGroup:p=>xS.sketch({...i["overflow-group"](),items:[di.sketch({...i["overflow-button"](),action:S=>{rs(p,d)}})]})}}),ts("toolbar-toggle-events",[Gt(d,p=>{oR(p,t,!1)})])]),apis:{setGroups:(p,S)=>{g(p,S),HA(p,t)},refresh:p=>HA(p,t),toggle:p=>{oR(p,t,!1)},toggleWithoutFocusing:p=>{oR(p,t,!0)},isOpen:p=>yW(p,t)},domModification:{attributes:{role:"group"}}}},sR=wi({name:"SplitSlidingToolbar",configFields:nI(),partFields:vW(),factory:CW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),oI=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[xS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:hn([Ir.config({}),$o.config({})])}},zA=t=>xS.sketch(oI(t)),sI=(t,s)=>{const a=Zr(i=>{const d=Ne(t.initGroups,zA);Ef.setGroups(i,d)});return hn([Dm.toolbarButton(t.providers.isDisabled),Fc(),yo.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ts("toolbar-events",[a])])},rI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":oI({title:T.none(),items:[]}),"overflow-button":LV({name:"more",icon:T.some("more-drawer"),enabled:!0,tooltip:T.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:T.none(),borderless:!1},T.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:sI(t,s)}},wW=t=>{const s=rI(t),a=4,i=nR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return nR.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=ki(d),p=pi(d),S=ki(p),E=Math.max(p.dom.scrollHeight,S.height);return Wr(g.x+a,S.y,g.width-a*2,E)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},SW=t=>{const s=sR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=sR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=rI(t);return sR.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([zb()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([zb()],{type:"closed"}),t.onToggled(d,!1)}})},VA=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Ef.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Bd.scrolling?["tox-toolbar--scrolling"]:[])},components:[Ef.parts.groups({})],toolbarBehaviours:sI(t,s)})},aI=[Hh,$d,Ka("tooltip"),el("buttonType","secondary",["primary","secondary"]),Ta("borderless",!1),Xi("onAction")],cI=[...aI,Lh,Gc("type",["button"])],xW=[...aI,Ta("active",!1),Gc("type",["togglebutton"])],iI={button:cI,togglebutton:xW},rR=[Gc("type",["group"]),x("buttons",[],sc("type",iI))],EW=sc("type",{...iI,group:rR}),UA=ko([x("buttons",[],EW),Xi("onShow"),Xi("onHide")]),TW=t=>oa("view",UA,t),lI=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(We=>c1(We,s.icons)).map(qs),S=We=>{const Ut=Hn=>{g.map($t=>$t.getOpt(We).each(Kn=>{Uo.set(Kn,[c1(Hn,s.icons)])}))},Bt=Hn=>{const $t=We.element;Hn?(Pr($t,"tox-button--enabled"),q($t,"aria-pressed",!0)):(ma($t,"tox-button--enabled"),$($t,"aria-pressed"))},_n=()=>pl(We.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Ut,setActive:Bt,isActive:_n});if(t.type==="button")return t.onAction({setIcon:Ut})},E={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:T.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},O=xO((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),F=d?t.text.map(s.translate):T.some(s.translate(t.text)),z=F.map(fa),X=E.tooltip.or(F).map(We=>({"aria-label":s.translate(We)})).getOr({}),ee=g.map(We=>We.asSpec()),me=Ob([ee,z]),pe=t.icon.isSome()&&z.isSome(),Ye={tag:"button",classes:O.concat(...t.icon.isSome()&&!pe?["tox-button--icon"]:[]).concat(...pe?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:X},Oe=[],Ue=lS(E,T.some(S),Oe,Ye,me,t.tooltip,s);return di.sketch(Ue)},uI=(t,s)=>lI(t,s),AW=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ne(t.buttons,a=>uI(a,s))}),kW=os().deviceType,_W=kW.isPhone(),DW=kW.isTablet(),aR=t=>{let s=!1;const a=Ne(t.buttons,i=>i.type==="group"?(s=!0,AW(i,t.providers)):uI(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",..._W||DW?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:hn([$o.config({}),yo.config({mode:"flow",selector:"button, .tox-button",focusInside:hf.OnEnterOrSpaceMode})]),components:s?a:[Cf.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Cf.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},OW=t=>({uid:t.uid,behaviours:hn([$o.config({}),Ir.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),WA=(t,s,a,i)=>{const d={getPane:g=>uc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:hn([$o.config({}),yo.config({mode:"cyclic",focusInside:hf.OnEnterOrSpaceMode})]),apis:d}};var Vb=wi({name:"silver.View",configFields:[Zt("viewConfig")],partFields:[Hl({factory:{sketch:aR},schema:[Zt("buttons"),Zt("providers")],name:"header"}),Hl({factory:{sketch:OW},schema:[],name:"pane"})],factory:WA,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const dI=(t,s,a)=>ir(s,(i,d)=>{const g=un(TW(i));return t.slot(d,Vb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Vb.parts.header({buttons:g.buttons,providers:a})]:[],Vb.parts.pane({})]}))}),cR=(t,s)=>zi.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:dI(a,t,s),slotBehaviours:ny.unnamedEvents([Zr(i=>zi.hideAllSlots(i))])})),mI=t=>I(zi.getSlotNames(t),s=>zi.isShowing(t,s)),fI=t=>{const s=t.element;pt(s,"display","none"),q(s,"aria-hidden","true")},Ty=t=>{const s=t.element;qo(s,"display"),$(s,"aria-hidden")},gI=t=>({getContainer:J(t)}),hI=(t,s,a)=>{zi.getSlot(t,s).each(i=>{Vb.getPane(i).each(d=>{a(i)(gI(d.element.dom))})})},RW=(t,s)=>hI(t,s,Vb.getOnShow),FW=(t,s)=>hI(t,s,Vb.getOnHide);var ZA=Tl({factory:(t,s)=>{const g={setViews:(p,S)=>{Uo.set(p,[cR(S,s.backstage.shared.providers)])},whichView:p=>Fs.getCurrent(p).bind(mI),toggleView:(p,S,E,O)=>Fs.getCurrent(p).exists(F=>{const z=mI(F),X=z.exists(me=>O===me),ee=zi.getSlot(F,O).isSome();return ee&&(zi.hideAllSlots(F),X?(fI(p),S()):(E(),Ty(p),zi.showSlot(F,O),RW(F,O)),z.each(me=>FW(F,me))),ee})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:hn([Uo.config({}),Fs.config({find:p=>{const S=Uo.contents(p);return wn(S)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Zt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const NW=(t,s,a)=>{let i=!1;const d=p=>{Od(p,".tox-statusbar").each(S=>{Os(S,"display")==="none"&&Ie(S,"aria-hidden")==="true"?(qo(S,"display"),$(S,"aria-hidden")):(pt(S,"display","none"),q(S,"aria-hidden","true"))})},g={getSocket:p=>uc.getPart(p,t,"socket"),setSidebar:(p,S,E)=>{uc.getPart(p,t,"sidebar").each(O=>nW(O,S,E))},toggleSidebar:(p,S)=>{uc.getPart(p,t,"sidebar").each(E=>oW(E,S))},whichSidebar:p=>uc.getPart(p,t,"sidebar").bind(sW).getOrNull(),getHeader:p=>uc.getPart(p,t,"header"),getToolbar:p=>uc.getPart(p,t,"toolbar"),setToolbar:(p,S)=>{uc.getPart(p,t,"toolbar").each(E=>{const O=Ne(S,zA);E.getApis().setGroups(E,O)})},setToolbars:(p,S)=>{uc.getPart(p,t,"multiple-toolbar").each(E=>{const O=Ne(S,F=>Ne(F,zA));S$.setItems(E,O)})},refreshToolbar:p=>{uc.getPart(p,t,"toolbar").each(E=>E.getApis().refresh(E))},toggleToolbarDrawer:p=>{uc.getPart(p,t,"toolbar").each(S=>{bs(S.getApis().toggle,E=>E(S))})},toggleToolbarDrawerWithoutFocusing:p=>{uc.getPart(p,t,"toolbar").each(S=>{bs(S.getApis().toggleWithoutFocusing,E=>E(S))})},isToolbarDrawerToggled:p=>uc.getPart(p,t,"toolbar").bind(S=>T.from(S.getApis().isOpen).map(E=>E(S))).getOr(!1),getThrobber:p=>uc.getPart(p,t,"throbber"),focusToolbar:p=>{uc.getPart(p,t,"toolbar").orThunk(()=>uc.getPart(p,t,"multiple-toolbar")).each(E=>{yo.focusIn(E)})},setMenubar:(p,S)=>{uc.getPart(p,t,"menubar").each(E=>{KO.setMenus(E,S)})},focusMenubar:p=>{uc.getPart(p,t,"menubar").each(S=>{KO.focus(S)})},setViews:(p,S)=>{uc.getPart(p,t,"viewWrapper").each(E=>{ZA.setViews(E,S)})},toggleView:(p,S)=>uc.getPart(p,t,"viewWrapper").exists(E=>ZA.toggleView(E,()=>g.showMainView(p),()=>g.hideMainView(p),S)),whichView:p=>uc.getPart(p,t,"viewWrapper").bind(ZA.whichView).getOrNull(),hideMainView:p=>{i=g.isToolbarDrawerToggled(p),i&&g.toggleToolbarDrawer(p),uc.getPart(p,t,"editorContainer").each(S=>{const E=S.element;d(E),pt(E,"display","none"),q(E,"aria-hidden","true")})},showMainView:p=>{i&&g.toggleToolbarDrawer(p),uc.getPart(p,t,"editorContainer").each(S=>{const E=S.element;d(E),qo(E,"display"),$(E,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},bI=xf.optional({factory:KO,name:"menubar",schema:[Zt("backstage")]}),vI=t=>t.type===Bd.sliding?SW:t.type===Bd.floating?wW:VA,jA=xf.optional({factory:{sketch:t=>S$.sketch({uid:t.uid,dom:t.dom,listBehaviours:hn([yo.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>VA({type:t.type,uid:Vn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),T.some(!0))}),setupItem:(s,a,i,d)=>{Ef.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Zt("dom"),Zt("onEscape")]}),iR=xf.optional({factory:{sketch:t=>{const s=vI(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),T.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Zt("dom"),Zt("onEscape"),Zt("getSink")]}),BW=xf.optional({factory:{sketch:qO},name:"header",schema:[Zt("dom")]}),MW=xf.optional({factory:{sketch:YO},name:"promotion",schema:[Zt("dom")]}),yI=xf.optional({name:"socket",schema:[Zt("dom")]}),PW=xf.optional({factory:{sketch:I$},name:"sidebar",schema:[Zt("dom")]}),$W=xf.optional({factory:{sketch:gY},name:"throbber",schema:[Zt("dom")]}),IW=xf.optional({factory:ZA,name:"viewWrapper",schema:[Zt("backstage")]}),CI=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),LW=xf.optional({factory:{sketch:CI},name:"editorContainer",schema:[]});var Lr=wi({name:"OuterContainer",factory:NW,configFields:[Zt("dom"),Zt("behaviours")],partFields:[BW,bI,iR,jA,yI,PW,MW,$W,IW,LW],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const lR="file edit view insert format tools table help",wI={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},HW=(t,s,a)=>{const i=fT(a).split(/[ ,]/);return{text:t.title,getItems:()=>L(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:An(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},GA=t=>t.split(" "),SI=(t,s)=>{const a={...wI,...s.menus},i=sn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?GA(lR):GA(s.menubar===!1?"":s.menubar),g=Ct(d,S=>{const E=Zo(wI,S);return i?E||on(s.menus,S).exists(O=>Zo(O,"items")):E}),p=Ne(g,S=>{const E=a[S];return HW({title:E.title,items:GA(E.items)},s,t)});return Ct(p,S=>{const E=O=>Q(O)||O.type!=="separator";return S.getItems().length>0&&An(S.getItems(),E)})},xI=t=>{const s=()=>{t._skinLoaded=!0,h9(t)};return()=>{t.initialized?s():t.on("init",s)}},zW=(t,s)=>()=>p9(t,{message:s}),uR=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),dR=(t,s,a,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),VW=async(t,s)=>{const i="ui/"+vT(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(Q(d))dR(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,p=s+`/skin${g}.css`;return uR(t,p,t.ui.styleSheetLoader)}},UW=async(t,s)=>{if(te(Le.fromDom(t.getElement()))){const d="ui/"+vT(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(Q(g))dR(t,d,g,bb.DOM.styleSheetLoader);else{const p=t.editorManager.suffix,S=s+`/skin.shadowdom${p}.css`;return uR(t,S,bb.DOM.styleSheetLoader)}}},EI=async(t,s)=>{const a=()=>{const d=L3(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};vT(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",p=tinymce.Resource.get(g);Q(p)?dR(s,g,p,s.ui.styleSheetLoader):a()});const i=L3(s);if(!I3(s)&&Q(i))return Promise.all([VW(s,i),UW(s,i)]).then()},TI=(t,s)=>EI(t,s).then(xI(s),zW(s,"Skin could not be loaded")),WW=gn(TI,!1),ZW=gn(TI,!0),f1=(t,s,a)=>Ce(a)?t.translate(s):t.translate([s,t.translate(a)]),mR=(t,s)=>{const a=(p,S,E,O)=>{const F=t.shared.providers.translate(p.title);if(p.type==="separator")return T.some({type:"separator",text:F});if(p.type==="submenu"){const z=L(p.getStyleItems(),X=>i(X,S,O));return S===0&&z.length<=0?T.none():T.some({type:"nestedmenuitem",text:F,enabled:z.length>0,getSubmenuItems:()=>L(p.getStyleItems(),X=>i(X,S,O))})}else return T.some({type:"togglemenuitem",text:F,icon:p.icon,active:p.isSelected(O),enabled:!E,onAction:s.onAction(p),...p.getStylePreview().fold(()=>({}),z=>({meta:{style:z}}))})},i=(p,S,E)=>{const O=p.type==="formatter"&&s.isInvalid(p);return S===0?O?[]:a(p,S,!1,E).toArray():a(p,S,O,E).toArray()},d=p=>{const S=s.getCurrentValue(),E=s.shouldHide?0:1;return L(p,O=>i(O,E,S))};return{validateItems:d,getFetch:(p,S)=>(E,O)=>{const F=S(),z=d(F),X=by(z,km.CLOSE_ON_EXECUTE,p,{isHorizontalMenu:!1,search:T.none()});O(X)}}},Ay=(t,s)=>{const a=s.dataset,i=a.type==="basic"?()=>Ne(a.data,d=>RA(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:mR(t,s),getStyleItems:i}},ES=(t,s,a,i,d,g)=>{const{items:p,getStyleItems:S}=Ay(s,a),E=oo(a.tooltip),O=z=>({getComponent:J(z),setTooltip:X=>{const ee=s.shared.providers.translate(X);q(z.element,"aria-label",ee),E.set(X)}}),F=z=>{const X=ee=>z.setTooltip(f1(t,i(ee.value),ee.value));return t.on(d,X),YT(Nb(t,"NodeChange",ee=>{const me=ee.getComponent();a.updateText(me),l.set(ee.getComponent(),!t.selection.isEditable())})(z),()=>t.off(d,X))};return rO({text:a.icon.isSome()?T.none():a.text,icon:a.icon,ariaLabel:T.some(a.tooltip),tooltip:T.none(),role:T.none(),fetch:p.getFetch(s,S),onSetup:F,getApi:O,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Da.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:z=>{if(a.tooltip!==E.get()){const X=s.shared.providers.translate(E.get());Da.setComponents(z,s.shared.providers.tooltips.getComponents({tooltipText:X}))}}})})]},"tox-tbtn",s.shared,g)},jW=t=>Ne(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),GW=t=>({type:"basic",data:t});var ky;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(ky||(ky={}));const qW=(t,s)=>s===ky.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),fR=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:jW(qW(i,a))}},KW="Align",AI=J("Alignment {0}"),gR="left",_y=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],qA=t=>{const s=()=>I(_y,S=>t.formatter.match(S.format)),a=S=>()=>t.formatter.match(S),i=S=>T.none,d=S=>{const O=s().fold(J(gR),F=>F.title.toLowerCase());wo(S,i1,{icon:`align-${O}`}),GD(t,{value:O})},g=GW(_y),p=S=>()=>I(_y,E=>E.format===S.format).each(E=>t.execCommand(E.command));return{tooltip:f1(t,AI(),gR),text:T.none(),icon:T.some("align-left"),isSelectedFor:a,getCurrentValue:T.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:S=>!t.formatter.canApply(S.format)}},kI=(t,s)=>ES(t,s,qA(t),AI,"AlignTextUpdate","align"),g1=(t,s)=>{const a=Ay(s,qA(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(KW),onSetup:al(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},hR=(t,s)=>{const a=s(),i=Ne(a,d=>d.format);return T.from(t.formatter.closest(i)).bind(d=>I(a,g=>g.format===d))},YW="Blocks",_I=J("Block {0}"),pR="Paragraph",DI=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const p=t.formatter.get(g);return p?T.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):T.none()},i=g=>{const S=hR(t,()=>d.data).fold(J(pR),E=>E.title);wo(g,rd,{text:S}),S9(t,{value:S})},d=fR(t,"block_formats",ky.SemiColon);return{tooltip:f1(t,_I(),pR),text:T.some(pR),icon:T.none(),isSelectedFor:s,getCurrentValue:T.none,getPreviewFor:a,onAction:$M(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},XW=(t,s)=>ES(t,s,DI(t),_I,"BlocksTextUpdate","blocks"),JW=(t,s)=>{const a=Ay(s,DI(t));t.ui.registry.addNestedMenuItem("blocks",{text:YW,onSetup:al(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},QW="Fonts",bR=J("Font {0}"),vR="System Font",eZ=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],KA=t=>{const s=t.split(/\s*,\s*/);return Ne(s,a=>a.replace(/^['"]+|['"]+$/g,""))},OI=(t,s)=>s.length>0&&ye(s,a=>t.indexOf(a.toLowerCase())>-1),tZ=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=KA(t.toLowerCase());return OI(a,eZ)||OI(a,s)}else return!1},RI=t=>{const s=()=>{const E=me=>me?KA(me)[0]:"",O=t.queryCommandValue("FontName"),F=S.data,z=O?O.toLowerCase():"",X=yB(t);return{matchOpt:I(F,me=>{const pe=me.format;return pe.toLowerCase()===z||E(pe).toLowerCase()===E(z).toLowerCase()}).orThunk(()=>Qn(tZ(z,X),{title:vR,format:z})),font:O}},a=E=>O=>O.exists(F=>F.format===E),i=()=>{const{matchOpt:E}=s();return E},d=E=>()=>T.some({tag:"div",styles:E.indexOf("dings")===-1?{"font-family":E}:{}}),g=E=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,E.format)})},p=E=>{const{matchOpt:O,font:F}=s(),z=O.fold(J(F),X=>X.title);wo(E,rd,{text:z}),PM(t,{value:z})},S=fR(t,"font_family_formats",ky.SemiColon);return{tooltip:f1(t,bR(),vR),text:T.some(vR),icon:T.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:p,dataset:S,shouldHide:!1,isInvalid:Ve}},nZ=(t,s)=>ES(t,s,RI(t),bR,"FontFamilyTextUpdate","fontfamily"),oZ=(t,s)=>{const a=Ay(s,RI(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(QW),onSetup:al(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},sZ={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},FI=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=S=>`(?:${S})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),NI=(t,s)=>An(s,a=>An(sZ[a],i=>t===i)),TS=(t,s)=>T.from(FI.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return NI(g,s)?T.some({value:d,unit:g}):T.none()}),rZ=(t,s)=>TS(t,s).map(({value:a,unit:i})=>a+i),yR={tab:J(9),escape:J(27),enter:J(13),backspace:J(8),delete:J(46),left:J(37),up:J(38),right:J(39),down:J(40),space:J(32),home:J(36),end:J(35),pageUp:J(33),pageDown:J(34)},aZ=(t,s,a,i)=>{let d=T.none();const g=We=>We.map(Ut=>Ln.getValue(Ut)).getOr(""),p=Nb(t,"NodeChange SwitchMode",We=>{const Ut=We.getComponent();d=T.some(Ut),a.updateInputValue(Ut),l.set(Ut,!t.selection.isEditable())}),S=We=>({getComponent:J(We)}),E=oo(ie),O=Vn("custom-number-input-events"),F=(We,Ut,Bt)=>{const _n=g(d),Hn=a.getNewValue(_n,We),$t=_n.length-`${Hn}`.length,Kn=d.map(eo=>eo.element.dom.selectionStart-$t),Tn=d.map(eo=>eo.element.dom.selectionEnd-$t);a.onAction(Hn,Bt),d.each(eo=>{Ln.setValue(eo,Hn),Ut&&(Kn.each(vs=>eo.element.dom.selectionStart=vs),Tn.each(vs=>eo.element.dom.selectionEnd=vs))})},z=(We,Ut)=>F((Bt,_n)=>Bt-_n,We,Ut),X=(We,Ut)=>F((Bt,_n)=>Bt+_n,We,Ut),ee=We=>tc(We.element).fold(T.none,Ut=>(Pl(Ut),T.some(!0))),me=We=>U1(We.element)?(Ei(We.element).each(Ut=>Pl(Ut)),T.some(!0)):T.none(),pe=(We,Ut,Bt,_n)=>{const Hn=oo(ie),$t=s.shared.providers.translate(Bt),Kn=Vn("altExecuting"),Tn=Nb(t,"NodeChange SwitchMode",vs=>{l.set(vs.getComponent(),!t.selection.isEditable())}),eo=vs=>{l.isDisabled(vs)||We(!0)};return di.sketch({dom:{tag:"button",attributes:{"aria-label":$t,"data-mce-name":Ut},classes:_n.concat(Ut)},components:[SA(Ut,s.shared.providers.icons)],buttonBehaviours:hn([l.config({}),Da.config(s.shared.providers.tooltips.getConfig({tooltipText:$t})),ts(Kn,[Hi({onSetup:Tn,getApi:S},Hn),Jp({getApi:S},Hn),Gt(Vu(),(vs,Hr)=>{(Hr.event.raw.keyCode===yR.space()||Hr.event.raw.keyCode===yR.enter())&&(l.isDisabled(vs)||We(!1))}),Gt(nh(),eo),Gt(Tr(),eo)])]),eventOrder:{[Vu()]:[Kn,"keying"],[nh()]:[Kn,"alloy.base.behaviour"],[Tr()]:[Kn,"alloy.base.behaviour"],[Oi()]:["alloy.base.behaviour",Kn,"tooltipping"],[gu()]:[Kn,"tooltipping"]}})},Ye=qs(pe(We=>z(!1,We),"minus","Decrease font size",[])),Oe=qs(pe(We=>X(!1,We),"plus","Increase font size",[])),Ue=qs({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ab.sketch({inputBehaviours:hn([l.config({}),ts(O,[Hi({onSetup:p,getApi:S},E),Jp({getApi:S},E)]),ts("input-update-display-text",[Gt(rd,(We,Ut)=>{Ln.setValue(We,Ut.event.text)}),Gt(um(),We=>{a.onAction(Ln.getValue(We))}),Gt(lp(),We=>{a.onAction(Ln.getValue(We))})]),yo.config({mode:"special",onEnter:We=>(F(Yt,!0,!0),T.some(!0)),onEscape:ee,onUp:We=>(X(!0,!1),T.some(!0)),onDown:We=>(z(!0,!1),T.some(!0)),onLeft:(We,Ut)=>(Ut.cut(),T.none()),onRight:(We,Ut)=>(Ut.cut(),T.none())})])})],behaviours:hn([$o.config({}),yo.config({mode:"special",onEnter:me,onSpace:me,onEscape:ee}),ts("input-wrapper-events",[Gt(fl(),We=>{dt([Ye,Oe],Ut=>{const Bt=Le.fromDom(Ut.get(We).element.dom);U1(Bt)&&W0(Bt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Lt(i)?{"data-mce-name":i}:{}}},components:[Ye.asSpec(),Ue.asSpec(),Oe.asSpec()],behaviours:hn([$o.config({}),yo.config({mode:"flow",focusInside:hf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:We=>U1(We.element)?T.none():(Pl(We.element),T.some(!0))})])}},cZ="Font sizes",BI=J("Font size {0}"),CR="12pt",iZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MI={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},lZ=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},uZ=(t,s)=>/[0-9.]+px$/.test(t)?lZ(parseInt(t,10)*72/96,s||0)+"pt":on(MI,t).getOr(t),dZ=t=>on(iZ,t).getOr(""),PI=t=>{const s=()=>{let E=T.none();const O=S.data,F=t.queryCommandValue("FontSize");if(F)for(let z=3;E.isNone()&&z>=0;z--){const X=uZ(F,z),ee=dZ(X);E=I(O,me=>me.format===F||me.format===X||me.format===ee)}return{matchOpt:E,size:F}},a=E=>O=>O.exists(F=>F.format===E),i=()=>{const{matchOpt:E}=s();return E},d=J(T.none),g=E=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,E.format)})},p=E=>{const{matchOpt:O,size:F}=s(),z=O.fold(J(F),X=>X.title);wo(E,rd,{text:z}),BM(t,{value:z})},S=fR(t,"font_size_formats",ky.Space);return{tooltip:f1(t,BI(),CR),text:T.some(CR),icon:T.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:S,shouldHide:!1,isInvalid:Ve}},mZ=(t,s)=>ES(t,s,PI(t),BI,"FontSizeTextUpdate","fontsize"),fZ=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},gZ=16,$I=t=>t>=0,hZ=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>wo(i,rd,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{TS(i,["unsupportedLength","empty"]);const g=s(),p=TS(i,["unsupportedLength","empty"]).or(TS(g,["unsupportedLength","empty"])),S=p.map(X=>X.value).getOr(gZ),E=gT(t),O=p.map(X=>X.unit).filter(X=>X!=="").getOr(E),F=d(S,fZ(O).step),z=`${$I(F)?F:S}${O}`;return z!==g&&MM(t,{value:z}),z}}},pZ=(t,s)=>aZ(t,s,hZ(t),"fontsizeinput"),bZ=(t,s)=>{const a=Ay(s,PI(t));t.ui.registry.addNestedMenuItem("fontsize",{text:cZ,onSetup:al(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},vZ="Formats",II=t=>Ce(t)?"Formats":"Format {0}",LI=(t,s)=>{const a="Formats",i=p=>()=>t.formatter.match(p),d=p=>()=>{const S=t.formatter.get(p);return S!==void 0?T.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):T.none()},g=p=>{const S=z=>PO(z)?L(z.items,S):a$(z)?[{title:z.title,format:z.format}]:[],E=L(hS(t),S),F=hR(t,J(E)).fold(J({title:a,tooltipLabel:""}),z=>({title:z.title,tooltipLabel:z.title}));wo(p,rd,{text:F.title}),w9(t,{value:F.tooltipLabel})};return{tooltip:f1(t,II(""),""),text:T.some(a),icon:T.none(),isSelectedFor:i,getCurrentValue:T.none,getPreviewFor:d,onAction:$M(t),updateText:g,shouldHide:rB(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},yZ=(t,s)=>{const a={type:"advanced",...s.styles};return ES(t,s,LI(t,a),II,"StylesTextUpdate","styles")},HI=(t,s)=>{const a={type:"advanced",...s.styles},i=Ay(s,LI(t,a));t.ui.registry.addNestedMenuItem("styles",{text:vZ,onSetup:al(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},CZ=J([Zt("toggleClass"),Zt("fetch"),pm("onExecute"),et("getHotspot",T.some),et("getAnchorOverrides",J({})),fg(),pm("onItemExecute"),$s("lazySink"),Zt("dom"),Es("onOpen"),Dc("splitDropdownBehaviours",[$a,yo,$o]),et("matchWidth",!1),et("useMinWidth",!1),et("eventOrder",{}),$s("role"),$s("listRole")].concat(tA())),wZ=Qc({factory:di,schema:[Zt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:hn([$o.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Zf)},buttonBehaviours:hn([ds.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),zI=Qc({factory:di,schema:[Zt("dom")],name:"button",defaults:()=>({buttonBehaviours:hn([$o.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),SZ=J([wZ,zI,Hl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Zt("text")],name:"aria-descriptor"}),Cu({schema:[vp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),cP()]),VI=(t,s,a,i)=>{const d=F=>{Fs.getCurrent(F).each(z=>{ao.highlightFirst(z),yo.focusIn(z)})},g=F=>{i4(t,Yt,F,i,d,Pa.HighlightMenuAndItem).get(ie)},p=F=>(g(F),T.some(!0)),S=F=>{const z=zl(F,t,"button");return Zf(z),T.some(!0)},E={...Mr([Zr((F,z)=>{mn(F,t,"aria-descriptor").each(ee=>{const me=Vn("aria");q(ee.element,"id",me),q(F.element,"aria-describedby",me)})})]),...iT(T.some(g))},O={repositionMenus:F=>{ds.isOn(F)&&lP(F)}};return{uid:t.uid,dom:t.dom,components:s,apis:O,eventOrder:{...t.eventOrder,[fu()]:["disabling","toggling","alloy.base.behaviour"]},events:E,behaviours:Oc(t.splitDropdownBehaviours,[$a.config({others:{sandbox:F=>{const z=zl(F,t,"arrow");return d4(t,F,{onOpen:()=>{ds.on(z),ds.on(F)},onClose:()=>{ds.off(z),ds.off(F)}})}}}),yo.config({mode:"special",onSpace:S,onEnter:S,onDown:p}),$o.config({}),ds.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},AS=wi({name:"SplitDropdown",configFields:CZ(),partFields:SZ(),factory:VI,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),UI=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>wo(t,rd,{text:s}),setIcon:s=>wo(t,i1,{icon:s})}),xZ=t=>({setActive:s=>{ds.set(t,s)},isActive:()=>ds.isOn(t),isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>wo(t,rd,{text:s}),setIcon:s=>wo(t,i1,{icon:s})}),WI=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),Ub=Vn("focus-button"),wR=(t,s,a,i,d,g)=>{const p=s.map(E=>qs(sO(E,"tox-tbtn",d))),S=t.map(E=>qs(c1(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...WI(a,d),...Lt(g)?{"data-mce-name":g}:{}}},components:Ob([S.map(E=>E.asSpec()),p.map(E=>E.asSpec())]),eventOrder:{[ya()]:["focusing","alloy.base.behaviour",a1],[Oi()]:[a1,"toolbar-group-button-events"]},buttonBehaviours:hn([Dm.toolbarButton(d.isDisabled),Fc(),ts(a1,[Zr((E,O)=>nO(E)),Gt(rd,(E,O)=>{p.bind(F=>F.getOpt(E)).each(F=>{Uo.set(F,[fa(d.translate(O.event.text))])})}),Gt(i1,(E,O)=>{S.bind(F=>F.getOpt(E)).each(F=>{Uo.set(F,[c1(O.event.icon,d.icons)])})}),Gt(ya(),(E,O)=>{O.event.prevent(),rs(E,Ub)})])].concat(i.getOr([])))}},EZ=(t,s,a,i,d)=>{const g=s.shared,p=oo(ie),S={toolbarButtonBehaviours:[],getApi:UI,onSetup:t.onSetup},E=[ts("toolbar-group-button-events",[Hi(S,p),Jp(S,p)])];return m1.sketch({lazySink:g.getSink,fetch:()=>mi.nu(O=>{O(Ne(a(t.items),zA))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:wR(t.icon,t.text,t.tooltip,T.some(E),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},ZI=(t,s,a,i)=>{var d;const g=oo(ie),p=wR(t.icon,t.text,t.tooltip,T.none(),a,i);return di.sketch({dom:p.dom,components:p.components,eventOrder:tO,buttonBehaviours:{...hn([ts("toolbar-button-events",[Yz({onAction:t.onAction,getApi:s.getApi}),Hi(s,g),Jp(s,g)]),...t.tooltip.map(S=>Da.config(a.tooltips.getConfig({tooltipText:a.translate(S)+t.shortcut.map(E=>` (${WT(E)})`).getOr("")}))).toArray(),Dm.toolbarButton(()=>!t.enabled||a.isDisabled()),Fc()].concat(s.toolbarButtonBehaviours)),[a1]:(d=p.buttonBehaviours)===null||d===void 0?void 0:d[a1]}})},TZ=(t,s,a)=>jI(t,s,[],a),jI=(t,s,a,i)=>ZI(t,{toolbarButtonBehaviours:a.length>0?[ts("toolbarButtonWith",a)]:[],getApi:UI,onSetup:t.onSetup},s,i),AZ=(t,s,a)=>GI(t,s,[],a),GI=(t,s,a,i)=>ZI(t,{toolbarButtonBehaviours:[Uo.config({}),ds.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ts("toolbarToggleButtonWith",a)]:[]),getApi:xZ,onSetup:t.onSetup},s,i),kZ=(t,s,a)=>i=>mi.nu(d=>s.fetch(d)).map(d=>T.from(rA(xr(r4(Vn("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,km.CLOSE_ON_EXECUTE,s.select.getOr(Ve),a),{movement:eA(s.columns,s.presets),menuBehaviours:ny.unnamedEvents(s.columns!=="auto"?[]:[Zr((g,p)=>{BD(g,4,hD(s.presets)).each(({numRows:S,numColumns:E})=>{yo.setGridSize(g,S,E)})})])})))),SR=(t,s,a)=>{const i=oo(t.tooltip.getOr("")),d=S=>({isEnabled:()=>!l.isDisabled(S),setEnabled:E=>l.set(S,!E),setIconFill:(E,O)=>{Jr(S.element,`svg path[class="${E}"], rect[class="${E}"]`).each(F=>{q(F,"fill",O)})},setActive:E=>{q(S.element,"aria-pressed",E),Jr(S.element,"span").each(O=>{S.getSystem().getByDom(O).each(F=>ds.set(F,E))})},isActive:()=>Jr(S.element,"span").exists(E=>S.getSystem().getByDom(E).exists(ds.isOn)),setText:E=>Jr(S.element,"span").each(O=>S.getSystem().getByDom(O).each(F=>wo(F,rd,{text:E}))),setIcon:E=>Jr(S.element,"span").each(O=>S.getSystem().getByDom(O).each(F=>wo(F,i1,{icon:E}))),setTooltip:E=>{const O=s.providers.translate(E);q(S.element,"aria-label",O),i.set(E)}}),g=oo(ie),p={getApi:d,onSetup:t.onSetup};return AS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...WI(t.tooltip,s.providers),...Lt(a)?{"data-mce-name":a}:{}}},onExecute:S=>{const E=d(S);E.isEnabled()&&t.onAction(E)},onItemExecute:(S,E,O)=>{},splitDropdownBehaviours:hn([Dm.splitButton(s.providers.isDisabled),Fc(),ts("split-dropdown-events",[Zr((S,E)=>nO(S)),Gt(Ub,$o.focus),Hi(p,g),Jp(p,g)]),fy.config({}),...t.tooltip.map(S=>Da.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(S),onShow:E=>{if(i.get()!==S){const O=s.providers.translate(i.get());Da.setComponents(E,s.providers.tooltips.getComponents({tooltipText:O}))}}})})).toArray()]),eventOrder:{[Oi()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[gu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:kZ(d,t,s.providers),parts:{menu:y2(!1,t.columns,t.presets)},components:[AS.parts.button(wR(t.icon,t.text,T.none(),T.some([ds.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),AS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:iD("chevron-down",s.providers.icons)},buttonBehaviours:hn([Dm.splitButton(s.providers.isDisabled),Fc(),kT()])}),AS.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},_Z=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],kS=(t,s)=>(a,i,d,g)=>{const p=t(a).mapError(S=>lu(S)).getOrDie();return s(p,i,d,g)},qI={button:kS(tM,(t,s,a,i)=>TZ(t,s.shared.providers,i)),togglebutton:kS(nM,(t,s,a,i)=>AZ(t,s.shared.providers,i)),menubutton:kS(R$,(t,s,a,i)=>cS(t,"tox-tbtn",s,T.none(),!1,i)),splitbutton:kS(XU,(t,s,a,i)=>SR(t,s.shared,i)),grouptoolbarbutton:kS(yS,(t,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=S=>_S(a,{buttons:d,toolbar:S,allowToolbarGroups:!1},s,T.none()),p={[lw]:s.shared.header.isPositionedAtTop()?$l.TopToBottom:$l.BottomToTop};switch(wb(a)){case Bd.floating:return EZ(t,s,g,p,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},KI=(t,s,a,i)=>on(qI,t.type).fold(()=>(console.error("skipping button defined by",t),T.none()),d=>T.some(d(t,s,a,i))),YI={styles:yZ,fontsize:mZ,fontsizeinput:pZ,fontfamily:nZ,blocks:XW,align:kI},DZ=t=>{const s=Ne(_Z,a=>{const i=Ct(a.items,d=>Zo(t,d)||Zo(YI,d));return{name:a.name,items:i}});return Ct(s,a=>a.items.length>0)},OZ=t=>{const s=t.split("|");return Ne(s,a=>({items:a.trim().split(" ")}))},RZ=t=>Qe(t,s=>Zo(s,"name")&&Zo(s,"items")),FZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?DZ(a):Q(s)?OZ(s):RZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},NZ=(t,s,a,i,d,g)=>on(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Xt(p,S=>on(s,S+a.toLowerCase())))).fold(()=>on(YI,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),T.none()):KI(p,d,t,a.toLowerCase())),_S=(t,s,a,i)=>{const d=FZ(s),g=Ne(d,p=>{const S=L(p.items,E=>E.trim().length===0?[]:NZ(t,s.buttons,E,s.allowToolbarGroups,a,i).toArray());return{title:T.from(t.translate(p.name)),items:S}});return Ct(g,p=>p.items.length>0)},XI=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Qe(g,Q)){const S=g.map(E=>{const O={toolbar:E,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return _S(t,O,i,T.none())});Lr.setToolbars(d,S)}else Lr.setToolbar(d,_S(t,a,i,T.none()))},JI=os(),BZ=JI.os.isiOS()&&JI.os.version.major<=12,MZ=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=oo(Dr(d.innerWidth,d.innerHeight)),S=oo(Dr(g.offsetWidth,g.offsetHeight)),E=()=>{const X=p.get();(X.left!==d.innerWidth||X.top!==d.innerHeight)&&(p.set(Dr(d.innerWidth,d.innerHeight)),KT(t))},O=()=>{const X=t.getDoc().documentElement,ee=S.get();(ee.left!==X.offsetWidth||ee.top!==X.offsetHeight)&&(S.set(Dr(X.offsetWidth,X.offsetHeight)),KT(t))},F=X=>{b9(t,X)};i.bind(d,"resize",E),i.bind(d,"scroll",F);const z=ow(Le.fromDom(t.getBody()),"load",O);t.on("hide",()=>{dt(a,X=>{pt(X.element,"display","none")})}),t.on("show",()=>{dt(a,X=>{qo(X.element,"display")})}),t.on("NodeChange",O),t.on("remove",()=>{z.unbind(),i.unbind(d,"resize",E),i.unbind(d,"scroll",F),d=null})},YA=(t,s,a)=>{Gp(t)&&xh(a.mainUi.mothership.element,a.popupUi.mothership),ob(s,a.dialogUi.mothership)};var XA=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,S=oo(0),E=g.outerContainer;WW(t);const O=Le.fromDom(d.targetNode),F=Za(Ur(O));xh(O,g.mothership),YA(t,F,s),t.on("SkinLoaded",()=>{Lr.setSidebar(E,a.sidebar,pT(t)),XI(t,s,a,i),S.set(t.getWin().innerWidth),Lr.setMenubar(E,SI(t,a)),Lr.setViews(E,a.views),MZ(t,s)});const z=Lr.getSocket(E).getOrDie("Could not find expected socket element");if(BZ){vo(z.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const pe=zz(()=>{t.dispatch("ScrollContent")},20),Ye=$i(z.element,"scroll",pe.throttle);t.on("remove",Ye.unbind)}MD(t,s),t.addCommand("ToggleSidebar",(pe,Ye)=>{Lr.toggleSidebar(E,Ye),x9(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var pe;return(pe=Lr.whichSidebar(E))!==null&&pe!==void 0?pe:""}),t.addCommand("ToggleView",(pe,Ye)=>{if(Lr.toggleView(E,Ye)){const Oe=E.element;g.mothership.broadcastOn([Cm()],{target:Oe}),dt(p,Ue=>{Ue.broadcastOn([Cm()],{target:Oe})}),wt(Lr.whichView(E))&&(t.focus(),t.nodeChanged(),Lr.refreshToolbar(E)),E9(t)}}),t.addQueryValueHandler("ToggleView",()=>{var pe;return(pe=Lr.whichView(E))!==null&&pe!==void 0?pe:""});const X=wb(t),ee=()=>{Lr.refreshToolbar(s.mainUi.outerContainer)};(X===Bd.sliding||X===Bd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const pe=t.getWin().innerWidth;pe!==S.get()&&(ee(),S.set(pe))});const me={setEnabled:pe=>{oy(s,!pe)},isEnabled:()=>!l.isDisabled(E)};return{iframeContainer:z.element.dom,editorContainer:E.element.dom,api:me}}});const DS=t=>/^[0-9\.]+(|px)$/i.test(""+t)?T.some(parseInt(""+t,10)):T.none(),JA=t=>st(t)?t+"px":t,QA=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},PZ=t=>{const s=n2(t),a=qv(t),i=mT(t);return DS(s).map(d=>QA(d,a,i))},$Z=t=>PZ(t).getOr(n2(t)),QI=t=>{const s=F3(t),a=Cb(t),i=o2(t);return DS(s).map(d=>QA(d,a,i))},IZ=t=>QI(t).getOr(F3(t)),{ToolbarLocation:Dy,ToolbarMode:xR}=SB,e6=40,t6=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,S=bb.DOM,E=Kv(t),O=Sb(t),F=o2(t).or(QI(t)),z=i.shared.header,X=z.isPositionedAtTop,ee=150,me=wb(t),pe=me===xR.sliding||me===xR.floating,Ye=oo(!1),Oe=()=>Ye.get()&&!t.removed,Ue=Jn=>pe?Jn.fold(J(0),ln=>ln.components().length>1?nr(ln.components()[1].element):0):0,We=Jn=>{switch(s2(t)){case Dy.auto:const ln=Lr.getToolbar(g.outerContainer),Rn=Ue(ln),Io=nr(Jn.element)-Rn,Do=Yr(s);if(Do.y>Io)return"top";{const Ko=pi(s),wr=Math.max(Ko.dom.scrollHeight,nr(Ko));return Do.bottom<wr-Io||Ba().bottom<Do.bottom-Io?"bottom":"top"}case Dy.bottom:return"bottom";case Dy.top:default:return"top"}},Ut=Jn=>{d.on(ln=>{$r.setModes(ln,[Jn]),z.setDockingMode(Jn);const Rn=X()?$l.TopToBottom:$l.BottomToTop;q(ln.element,lw,Rn)})},Bt=()=>{d.on(Jn=>{const ln=F.getOrThunk(()=>sm().width-bi(s).left-10);pt(Jn.element,"max-width",ln+"px")})},_n=(Jn,ln)=>{d.on(Rn=>{const Io=Lr.getToolbar(g.outerContainer),Do=Ue(Io),ho=Yr(s),Ko=Hn(t,g.outerContainer.element),wr=()=>Ko.fold(()=>ho.x,xi=>{const dd=Yr(xi);return ks(xi,es())?ho.x:ho.x-dd.x}),Ks=()=>Ko.fold(()=>X()?Math.max(ho.y-nr(Rn.element)+Do,0):ho.bottom,xi=>{var dd;const Kd=Yr(xi),Yl=(dd=xi.dom.scrollTop)!==null&&dd!==void 0?dd:0,Jb=ks(xi,es())?Math.max(ho.y-nr(Rn.element)+Do,0):ho.y-Kd.y+Yl-nr(Rn.element)+Do;return X()?Jb:ho.bottom}),Ui=wr(),ud=Qn(Jn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(xi=>xi>ee).map(xi=>{const dd=ln.getOr(Mc()),Kd=window.innerWidth-(Ui-dd.left),Yl=Math.max(Math.min(xi,Kd),ee);return Kd<xi&&pt(g.outerContainer.element,"width",Yl+"px"),{width:Yl+"px"}}).getOr({width:"max-content"}),kf={position:"absolute",left:Math.round(Ui)+"px",top:Ks()+"px"};vo(g.outerContainer.element,{...kf,...ud})})},Hn=(Jn,ln)=>Gp(Jn)?qf(ln):T.none(),$t=()=>{dt(p,Jn=>{Jn.broadcastOn([Th()],{})})},Kn=()=>!E&&(La(g.outerContainer.element).left+fe(g.outerContainer.element)>=window.innerWidth-e6||Hs(g.outerContainer.element,"width").isSome())?(pt(g.outerContainer.element,"position","absolute"),pt(g.outerContainer.element,"left","0px"),qo(g.outerContainer.element,"width"),!0):!1,Tn=Jn=>{if(!Oe())return;E||Bt();const ln=Mc(),Rn=E?!1:Kn();if(pe&&Lr.refreshToolbar(g.outerContainer),!E){const Io=Mc(),Do=Qn(ln.left!==Io.left,ln);_n(Rn,Do),Do.each(ho=>{gd(ho.left,Io.top)})}O&&d.on(Jn),$t()},eo=()=>E||!O||!Oe()?!1:d.get().exists(Jn=>{const ln=z.getDockingMode(),Rn=We(Jn);return Rn!==ln?(Ut(Rn),!0):!1});return{isVisible:Oe,isPositionedAtTop:X,show:()=>{Ye.set(!0),pt(g.outerContainer.element,"display","flex"),S.addClass(t.getBody(),"mce-edit-focus"),dt(p,Jn=>{qo(Jn.element,"display")}),eo(),Gp(t)?Tn(Jn=>$r.isDocked(Jn)?$r.reset(Jn):$r.refresh(Jn)):Tn($r.refresh)},hide:()=>{Ye.set(!1),pt(g.outerContainer.element,"display","none"),S.removeClass(t.getBody(),"mce-edit-focus"),dt(p,Jn=>{pt(Jn.element,"display","none")})},update:Tn,updateMode:()=>{eo()&&Tn($r.reset)},repositionPopups:$t}},ER=(t,s)=>{const a=Yr(t);return{pos:s?a.y:a.bottom,bounds:a}},LZ=(t,s,a,i)=>{const d=oo(ER(s,a.isPositionedAtTop())),g=O=>{const{pos:F,bounds:z}=ER(s,a.isPositionedAtTop()),{pos:X,bounds:ee}=d.get(),me=z.height!==ee.height||z.width!==ee.width;d.set({pos:F,bounds:z}),me&&KT(t,O),a.isVisible()&&(X!==F?a.update($r.reset):me&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update($r.reset)),t.on("NodeChange keydown",O=>{requestAnimationFrame(()=>g(O))});let p=0;const S=G4(()=>a.update($r.refresh),33);t.on("ScrollWindow",()=>{const O=Mc().left;O!==p&&(p=O,S.throttle()),a.updateMode()}),Gp(t)&&t.on("ElementScroll",O=>{a.update($r.refresh)});const E=oc();E.set(ow(Le.fromDom(t.getBody()),"load",O=>g(O.raw))),t.on("remove",()=>{E.clear()})};var zZ=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,p=Ys(),S=Le.fromDom(d.targetNode),E=t6(t,S,s,i,p),O=iB(t);ZW(t);const F=()=>{if(p.isSet()){E.show();return}p.set(Lr.getHeader(g.outerContainer).getOrDie());const X=z3(t);Gp(t)?(xh(S,g.mothership),xh(S,s.popupUi.mothership)):ob(X,g.mothership),ob(X,s.dialogUi.mothership);const ee=()=>{XI(t,s,a,i),Lr.setMenubar(g.outerContainer,SI(t,a)),E.show(),LZ(t,S,E,O),t.nodeChanged()};O?t.once("SkinLoaded",ee):ee()};t.on("show",F),t.on("hide",E.hide),O||(t.on("focus",F),t.on("blur",E.hide)),t.on("init",()=>{(t.hasFocus()||O)&&F()}),MD(t,s);const z={show:F,hide:E.hide,setEnabled:X=>{oy(s,!X)},isEnabled:()=>!l.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:z}}});const VZ=()=>{const t=Ys(),s=Ys(),a=Ys();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(S=>S.mothership),p=s.get().map(S=>S.mothership);return g.fold(()=>p.toArray(),S=>p.fold(()=>[S],E=>ks(S.element,E.element)?[S]:[S,E]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(S=>p(S.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},UZ="contexttoolbar-show",n6="contexttoolbar-hide",WZ=t=>({hide:()=>rs(t,A1()),getValue:()=>Ln.getValue(t)}),Oy=(t,s)=>Gt(C5,(a,i)=>{const d=t.get(a),g=WZ(d);s.onAction(g,i.event.buttonApi)}),ZZ=(t,s,a)=>{const{primary:i,...d}=s.original,g=un(tM({...d,type:"button",onAction:ie}));return jI(g,a,[Oy(t,s)])},jZ=(t,s,a)=>{const{primary:i,...d}=s.original,g=un(nM({...d,type:"togglebutton",onAction:ie}));return GI(g,a,[Oy(t,s)])},GZ=t=>t.type==="contextformtogglebutton",o6=(t,s,a)=>GZ(s)?jZ(t,s,a):ZZ(t,s,a),qZ=(t,s,a)=>{const i=Ne(s,p=>qs(o6(t,p,a)));return{asSpecs:()=>Ne(i,p=>p.asSpec()),findPrimary:p=>Xt(s,(S,E)=>S.primary?T.from(i[E]).bind(O=>O.getOpt(p)).filter(rt(l.isDisabled)):T.none())}},TR=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=qs(Ab.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:hn([yo.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Zf(p),!0)),onLeft:(g,p)=>(p.cut(),T.none()),onRight:(g,p)=>(p.cut(),T.none())})])})),d=qZ(i,t.commands,s);return[{title:T.none(),items:[i.asSpec()]},{title:T.none(),items:d.asSpecs()}]},KZ={renderContextForm:(t,s,a)=>VA({type:t,uid:Vn("context-toolbar"),initGroups:TR(s,a),onEscape:T.none,cyclicKeying:!0,providers:a}),buildInitGroups:TR},s6=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,YZ=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Ti(Le.fromDom(t.startContainer),t.startOffset).element;return(is(a)?Fa(a):T.some(a)).filter(fo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},AR=t=>{const s=t.selection.getRng(),a=YZ(s);if(t.inline){const i=Mc();return Wr(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=ki(Le.fromDom(t.getBody()));return Wr(i.x+a.left,i.y+a.top,a.width,a.height)}},OS=(t,s)=>s.filter(a=>$n(a)&&la(a)).map(ki).getOrThunk(()=>AR(t)),r6=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},XZ=(t,s,a,i,d,g)=>{const p=Le.fromDom(t.getContainer()),S=Jr(p,".tox-editor-header").getOr(p),E=Yr(S),O=E.y>=s.bottom,F=i&&!O;if(t.inline&&F)return{y:Math.max(E.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!F)return{y:a.y,bottom:Math.min(E.y-g,a.bottom)};const z=d==="line"?Yr(p):s;return F?{y:Math.max(E.bottom+g,a.y),bottom:Math.min(z.bottom-g,a.bottom)}:{y:Math.max(z.y+g,a.y),bottom:Math.min(E.y-g,a.bottom)}},a6=(t,s,a,i=0)=>{const d=sm(window),g=Yr(Le.fromDom(t.getContentAreaContainer())),p=bT(t)||c2(t)||i2(t),{x:S,width:E}=r6(g,d,i);if(t.inline&&!p)return Wr(S,d.y,E,d.height);{const O=s.header.isPositionedAtTop(),{y:F,bottom:z}=XZ(t,g,d,O,a,i);return Wr(S,F,E,z-F)}},RS=12,ek={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},kR={maxHeightFunction:Ep(),maxWidthFunction:Ey()},c6=(t,s)=>{const a=t.selection.getRng(),i=Ti(Le.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&ks(i.element,s)},JZ=(t,s,a)=>{const i=Hs(t,"position");pt(t,"position",s);const d=a(t);return i.each(g=>pt(t,"position",g)),d},Wb=t=>t==="node",tk=(t,s,a,i,d)=>{const g=AR(t),p=i.lastElement().exists(S=>ks(a,S));if(c6(t,a))return p?n$:xu;if(p)return JZ(s,i.getMode(),()=>s6(g,Yr(s),-20)&&!i.isReposition()?o$:n$);{const S=i.getMode()==="fixed"?d.y+Mc().top:d.y,E=nr(s)+RS;return S+E<=g.y?xu:wy}},nk=(t,s,a,i)=>{const d=E=>(O,F,z,X,ee)=>{const me=tk(t,X,E,a,ee),pe={...O,y:ee.y,height:ee.height};return{...me(pe,F,z,X,ee),alwaysFit:!0}},g=E=>Wb(i)?[d(E)]:[];return s?{onLtr:E=>[ic,ac,ka,sr,Yc,cc].concat(g(E)),onRtl:E=>[ic,ka,ac,Yc,sr,cc].concat(g(E))}:{onLtr:E=>[cc,ic,sr,ac,Yc,ka].concat(g(E)),onRtl:E=>[cc,ic,Yc,ka,sr,ac].concat(g(E))}},_R=(t,s,a,i)=>s==="line"?{bubble:ju(RS,0,ek),layouts:{onLtr:()=>[H0],onRtl:()=>[z0]},overrides:kR}:{bubble:ju(0,RS,ek,1/RS),layouts:nk(t,a,i,s),overrides:kR},FS=(t,s)=>{const a=Ct(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Ao(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},i6=t=>{if(t.length<=1)return t;{const s=g=>An(t,p=>p.position===g),a=g=>Ct(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=Ne(a("selection"),S=>({...S,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},ok=t=>{if(t.length<=1)return t;{const s=i=>I(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Ct(t,d=>d.position===i))}},l6=(t,s,a)=>{const i=FS(t,s);if(i.contextForms.length>0)return T.some({elem:t,toolbars:[i.contextForms[0]]});{const d=FS(t,a);if(d.contextForms.length>0)return T.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=i6(i.contextToolbars.concat(d.contextToolbars));return T.some({elem:t,toolbars:g})}else return T.none()}},u6=(t,s,a)=>t(s)?T.none():uu(s,i=>{if(fo(i)){const{contextToolbars:d,contextForms:g}=FS(i,a.inNodeScope),p=g.length>0?g:ok(d);return p.length>0?T.some({elem:i,toolbars:p}):T.none()}else return T.none()},t),DR=(t,s)=>{const a=Le.fromDom(s.getBody()),i=p=>ks(p,a),d=p=>!i(p)&&!Sa(a,p),g=Le.fromDom(s.selection.getNode());return d(g)?T.none():l6(g,t.inNodeScope,t.inEditorScope).orThunk(()=>u6(i,g,t))},QZ=(t,s)=>{const a={},i=[],d=[],g={},p={},S=(F,z)=>{const X=un(J7(z));a[F]=X,X.launch.map(ee=>{g["form:"+F]={...z.launch,type:ee.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(X)}}}),X.scope==="editor"?d.push(X):i.push(X),p[F]=X},E=(F,z)=>{E2(z).each(X=>{z.scope==="editor"?d.push(X):i.push(X),p[F]=X})},O=sn(t);return dt(O,F=>{const z=t[F];z.type==="contextform"?S(F,z):z.type==="contexttoolbar"&&E(F,z)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},OR=Vn("forward-slide"),d6=Vn("backward-slide"),RR=Vn("change-slide-event"),Ry="tox-pop--resizing",m6=t=>{const s=oo([]);return Qr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Qr.getContent(a).each(i=>{qo(i.element,"visibility")}),ma(a.element,Ry),qo(a.element,"width")},inlineBehaviours:hn([ts("context-toolbar-events",[up(xd(),(a,i)=>{i.event.raw.propertyName==="width"&&(ma(a.element,Ry),qo(a.element,"width"))}),Gt(RR,(a,i)=>{const d=a.element;qo(d,"width");const g=ae(d);Qr.setContent(a,i.event.contents),Pr(d,Ry);const p=ae(d);pt(d,"width",g+"px"),Qr.getContent(a).each(S=>{i.event.focus.bind(E=>(Pl(E),Pi(d))).orThunk(()=>(yo.focusIn(S),Rd(Ur(d))))}),setTimeout(()=>{pt(a.element,"width",p+"px")},0)}),Gt(OR,(a,i)=>{Qr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Rd(Ur(a.element))}]))}),wo(a,RR,{contents:i.event.forwardContents,focus:T.none()})}),Gt(d6,(a,i)=>{ot(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),wo(a,RR,{contents:Ml(d.bar),focus:d.focus})})})]),yo.config({mode:"special",onEscape:a=>ot(s.get()).fold(()=>t.onEscape(),i=>(rs(a,d6),T.some(!0)))})]),lazySink:()=>Yo.value(t.sink)})},FR="tox-pop--transition",ej=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=os().deviceType.isTouch,S=Ys(),E=Ys(),O=Ys(),F=li(m6({sink:a,onEscape:()=>(t.focus(),T.some(!0))})),z=()=>{const Tn=O.get().getOr("node"),eo=Wb(Tn)?1:0;return a6(t,g,Tn,eo)},X=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),ee=Tn=>tr(ea(Tn,S.get(),ks),!0),me=()=>{if(X()){const Tn=z(),eo=tr(O.get(),"node")?OS(t,S.get()):AR(t);return Tn.height<=0||!s6(eo,Tn,.01)}else return!0},pe=()=>{S.clear(),E.clear(),O.clear(),Qr.hide(F)},Ye=()=>{if(Qr.isOpen(F)){const Tn=F.element;qo(Tn,"display"),me()?pt(Tn,"display","none"):(E.set(0),Qr.reposition(F))}},Oe=Tn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Tn],behaviours:hn([yo.config({mode:"acyclic"}),ts("pop-dialog-wrap-events",[Zr(eo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>yo.focusIn(eo))}),fm(eo=>{t.shortcuts.remove("ctrl+F9")})])])}),Ue=zt(()=>QZ(s,Tn=>{const eo=Bt([Tn]);wo(F,OR,{forwardContents:Oe(eo)})})),We=(Tn,eo)=>_S(t,{buttons:Tn,toolbar:eo.items,allowToolbarGroups:!1},i.backstage,T.some(["form:"])),Ut=(Tn,eo)=>KZ.buildInitGroups(Tn,eo),Bt=Tn=>{const{buttons:eo}=t.ui.registry.getAll(),vs=Ue(),Hr={...eo,...vs.formNavigators},Zs=wb(t)===Bd.scrolling?Bd.scrolling:Bd.default,Jn=le(Ne(Tn,ln=>ln.type==="contexttoolbar"?We(Hr,ln):Ut(ln,g.providers)));return VA({type:Zs,uid:Vn("context-toolbar"),initGroups:Jn,onEscape:T.none,cyclicKeying:!0,providers:g.providers})},_n=(Tn,eo)=>{const vs=Tn==="node"?g.anchors.node(eo):g.anchors.cursor(),Hr=_R(t,Tn,p(),{lastElement:S.get,isReposition:()=>tr(E.get(),0),getMode:()=>ui.getMode(a)});return xr(vs,Hr)},Hn=(Tn,eo)=>{if(Kn.cancel(),!X())return;const vs=Bt(Tn),Hr=Tn[0].position,Zs=_n(Hr,eo);O.set(Hr),E.set(1);const Jn=F.element;qo(Jn,"display"),ee(eo)||(ma(Jn,FR),ui.reset(a,F)),Qr.showWithinBounds(F,Oe(vs),{anchor:Zs,transition:{classes:[FR],mode:"placement"}},()=>T.some(z())),eo.fold(S.clear,S.set),me()&&pt(Jn,"display","none")};let $t=!1;const Kn=G4(()=>{if(!(!t.hasFocus()||t.removed||$t))if(pl(F.element,FR))Kn.throttle();else{const Tn=Ue();DR(Tn,t).fold(pe,eo=>{Hn(eo.toolbars,T.some(eo.elem))})}},17);t.on("init",()=>{t.on("remove",pe),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ye),t.on("click keyup focus SetContent",Kn.throttle),t.on(n6,pe),t.on(UZ,Tn=>{const eo=Ue();on(eo.lookupTable,Tn.toolbarKey).each(vs=>{Hn([vs],Qn(Tn.target!==t,Tn.target)),Qr.getContent(F).each(yo.focusIn)})}),t.on("focusout",Tn=>{Gv.setEditorTimeout(t,()=>{Pi(a.element).isNone()&&Pi(F.element).isNone()&&pe()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&pe()}),t.on("ExecCommand",({command:Tn})=>{Tn.toLowerCase()==="toggleview"&&pe()}),t.on("AfterProgressState",Tn=>{Tn.state?pe():t.hasFocus()&&Kn.throttle()}),t.on("dragstart",()=>{$t=!0}),t.on("dragend drop",()=>{$t=!1}),t.on("NodeChange",Tn=>{Pi(F.element).fold(Kn.throttle,ie)})})},tj=t=>{dt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Su(t,a.cmd),onSetup:XT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:al(t),onAction:Su(t,"JustifyNone")})},f6=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Ys();return Ne(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:S=>{const E=F=>{F&&(g.on(z=>z.setActive(!1)),g.set(S)),S.setActive(F)};E(tr(d,s.hash(p)));const O=s.watcher(t,p,E);return()=>{g.clear(),O()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},nj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:CB,hash:s=>rZ(s,["fixed","relative","empty"]).getOr(s),display:Yt,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>T.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:al(t),onMenuSetup:al(t)}),g6=t=>T.from(aB(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:J(a),hash:i=>Tt(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=Le.fromDom(i.selection.getNode());return Nl(d,g=>T.some(g).filter(fo).bind(p=>nn(p,"lang").map(E=>{const O=nn(p,"data-mce-lang").getOrUndefined();return{code:E,customCode:O,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=oc();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),YT(d.clear,al(t)(i))},onMenuSetup:al(t)})),h6=t=>{f6(t,nj(t)),g6(t).each(s=>f6(t,s))},p6=(t,s)=>{g1(t,s),oZ(t,s),HI(t,s),JW(t,s),bZ(t,s)},b6=t=>Nb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),oj=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:b6(t),onAction:Su(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:al(t),onAction:Su(t,"indent")})},v6=t=>{oj(t)},NR=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),YT(()=>t.off("PastePlainTextToggle",i),al(t)(a))},sj=t=>{const s=oo($3(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:NR(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:NR(t,s)})},y6=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},rj=t=>{Zh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:XT(t,s.name),onAction:y6(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:XT(t,a),onAction:y6(t,a),shortcut:i})}},aj=t=>{Zh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Su(t,s.action),shortcut:s.shortcut})}),Zh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:al(t),onAction:Su(t,s.action)})})},cj=t=>{Zh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Su(t,s.action),onSetup:XT(t,s.name)})})},ij=t=>{rj(t),aj(t),cj(t)},lj=t=>{Zh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Su(t,s.action)})}),Zh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:al(t),onAction:Su(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:al(t),onAction:y6(t,"code")})},uj=t=>{ij(t),lj(t)},sk=(t,s)=>Nb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),dj=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:sk(t,"hasUndo"),onAction:Su(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:sk(t,"hasRedo"),onAction:Su(t,"redo")})},mj=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:sk(t,"hasUndo"),onAction:Su(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:sk(t,"hasRedo"),onAction:Su(t,"redo"),shortcut:"Meta+Y"})},fj=t=>{dj(t),mj(t)},gj=t=>Nb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),hj=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:gj(t),onAction:Su(t,"mceToggleVisualAid")})},pj=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Su(t,"mceToggleVisualAid")})},C6=t=>{pj(t),hj(t)},bj=(t,s)=>{tj(t),uj(t),p6(t,s),fj(t),N9(t),C6(t),v6(t),h6(t),sj(t)},vj=t=>Q(t)?t.split(/[ ,]/):t,w6=t=>s=>s.options.get(t),yj=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Q(a)||Qe(a,Q)?{value:vj(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},S6=w6("contextmenu_never_use_native"),Cj=w6("contextmenu_avoid_overlap"),wj=t=>x6(t).length===0,x6=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Ct(a,i=>Zo(s,i))},NS=(t,s)=>({type:"makeshift",x:t,y:s}),BR=(t,s,a)=>NS(t.x+s,t.y+a),E6=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Sj=t=>{if(E6(t)){const s=t.touches[0];return NS(s.pageX,s.pageY)}else return NS(t.pageX,t.pageY)},MR=t=>{if(E6(t)){const s=t.touches[0];return NS(s.clientX,s.clientY)}else return NS(t.clientX,t.clientY)},T6=(t,s)=>{const a=bb.DOM.getPos(t);return BR(s,a.x,a.y)},A6=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Sj(s):T6(t.getContentAreaContainer(),MR(s)):k6(t),k6=t=>({type:"selection",root:Le.fromDom(t.selection.getNode())}),xj=t=>({type:"node",node:T.some(Le.fromDom(t.selection.getNode())),root:Le.fromDom(t.getBody())}),_6=(t,s,a)=>{switch(a){case"node":return xj(t);case"point":return A6(t,s);case"selection":return k6(t)}},Ej=(t,s,a,i,d,g)=>{const p=a(),S=_6(t,s,g);by(p,km.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:T.none()}).map(E=>{s.preventDefault(),Qr.showMenuAt(d,{anchor:S},{menu:{markers:Tb("normal")},data:E})})},Tj={onLtr:()=>[ic,ac,ka,sr,Yc,cc,xu,wy,Cy,DA,fS,_A],onRtl:()=>[ic,ka,ac,Yc,sr,cc,xu,wy,fS,_A,Cy,DA]},PR=12,Aj={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},D6=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Ya(t.getWin(),hg.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},kj=t=>{const s=t.selection.getRng(),a=()=>{Gv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},_j=(t,s,a)=>{const i=_6(t,s,a);return{bubble:ju(0,a==="point"?PR:0,Aj),layouts:Tj,overrides:{maxWidthFunction:Ey(),maxHeightFunction:Ep()},...i}},$R=(t,s,a,i,d,g,p)=>{const S=_j(t,s,g);by(a,km.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:T.none()}).map(E=>{s.preventDefault();const O=p?Pa.HighlightMenuAndItem:Pa.HighlightNone;Qr.showMenuWithinBounds(d,{anchor:S},{menu:{markers:Tb("normal"),highlightOnOpen:O},data:E,type:"horizontal"},()=>T.some(a6(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(n6)})},Dj=(t,s,a,i,d,g)=>{const p=os(),S=p.os.isiOS(),E=p.os.isMacOS(),O=p.os.isAndroid(),F=p.deviceType.isTouch(),z=()=>!(O||S||E&&F),X=()=>{const ee=a();$R(t,s,ee,i,d,g,z())};if((E||S)&&g!=="node"){const ee=()=>{kj(t),X()};D6(t,s)?ee():(t.once("selectionchange",ee),t.once("touchend",()=>t.off("selectionchange",ee)))}else X()},IR=t=>Q(t)?t==="|":t.type==="separator",LR={type:"separator"},O6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Q(t))return t;switch(t.type){case"separator":return LR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Q(i)?i:Ne(i,O6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:St(a.onAction)}}},rk=(t,s)=>{if(s.length===0)return t;const i=ot(t).filter(d=>!IR(d)).fold(()=>[],d=>[LR]);return t.concat(i).concat(s).concat([LR])},Oj=(t,s,a)=>{const i=tt(s,(d,g)=>on(t,g.toLowerCase()).map(p=>{const S=p.update(a);if(Q(S)&&Ae(lr(S)))return rk(d,S.split(" "));if(Xe(S)&&S.length>0){const E=Ne(S,O6);return rk(d,E)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&IR(i[i.length-1])&&i.pop(),i},Rj=(t,s)=>s.ctrlKey&&!S6(t),Fj=t=>t.type==="longpress"||Zo(t,"touches"),R6=(t,s)=>!Fj(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),F6=(t,s)=>R6(t,s)?t.selection.getStart(!0):s.target,N6=(t,s)=>{const a=Cj(t),i=R6(t,s)?"selection":"point";if(Ae(a)){const d=F6(t,s);return B2(Le.fromDom(d),a)?"node":i}else return i},Nj=(t,s,a)=>{const d=os().deviceType.isTouch,g=li(Qr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:hn([ts("dismissContextMenu",[Gt(Uf(),(E,O)=>{Rs.close(E),t.focus()})])])})),p=()=>Qr.hide(g),S=E=>{if(S6(t)&&E.preventDefault(),Rj(t,E)||wj(t))return;const O=N6(t,E),F=()=>{const X=F6(t,E),ee=t.ui.registry.getAll(),me=x6(t);return Oj(ee.contextMenus,me,X)};(d()?Dj:Ej)(t,E,F,a,g,O)};t.on("init",()=>{const E="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(E,p),t.on("longpress contextmenu",S)})},HR=ue.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ak=t=>s=>s.translate(-t.left,-t.top),ck=t=>s=>s.translate(t.left,t.top),Gh=t=>(s,a)=>tt(t,(i,d)=>d(i),Dr(s,a)),ik=(t,s,a)=>t.fold(Gh([ck(a),ak(s)]),Gh([ak(s)]),Gh([])),Fy=(t,s,a)=>t.fold(Gh([ck(a)]),Gh([]),Gh([ck(s)])),B6=(t,s,a)=>t.fold(Gh([]),Gh([ak(a)]),Gh([ck(s),ak(a)])),M6=(t,s,a,i,d,g)=>{const p=Fy(t,d,g),S=Fy(s,d,g);return Math.abs(p.left-S.left)<=a&&Math.abs(p.top-S.top)<=i},Bj=(t,s,a,i,d,g)=>{const p=Fy(t,d,g),S=Fy(s,d,g),E=Math.abs(p.left-S.left),O=Math.abs(p.top-S.top);return Dr(E,O)},zR=(t,s,a)=>{const i=t.fold((d,g)=>({position:T.some("absolute"),left:T.some(d+"px"),top:T.some(g+"px")}),(d,g)=>({position:T.some("absolute"),left:T.some(d-a.left+"px"),top:T.some(g-a.top+"px")}),(d,g)=>({position:T.some("fixed"),left:T.some(d+"px"),top:T.some(g+"px")}));return{right:T.none(),bottom:T.none(),...i}},Mj=(t,s,a)=>t.fold((i,d)=>lk(i+s,d+a),(i,d)=>cd(i+s,d+a),(i,d)=>h1(i+s,d+a)),VR=(t,s,a,i)=>{const d=(g,p)=>(S,E)=>{const O=g(s,a,i);return p(S.getOr(O.left),E.getOr(O.top))};return t.fold(d(B6,lk),d(Fy,cd),d(ik,h1))},lk=HR.offset,cd=HR.absolute,h1=HR.fixed,P6=(t,s)=>{const a=Ie(t,s);return Tt(a)?NaN:parseInt(a,10)},Pj=(t,s)=>{const a=t.element,i=P6(a,s.leftAttr),d=P6(a,s.topAttr);return isNaN(i)||isNaN(d)?T.none():T.some(Dr(i,d))},$j=(t,s,a)=>{const i=t.element;q(i,s.leftAttr,a.left+"px"),q(i,s.topAttr,a.top+"px")},Ij=(t,s)=>{const a=t.element;$(a,s.leftAttr),$(a,s.topAttr)},$6=(t,s,a,i)=>Pj(t,s).fold(()=>a,d=>h1(d.left+i.left,d.top+i.top)),Lj=(t,s,a,i,d,g)=>{const p=$6(t,s,a,i),S=s.mustSnap?zj(t,s,p,d,g):Vj(t,s,p,d,g),E=ik(p,d,g);return $j(t,s,E),S.fold(()=>({coord:h1(E.left,E.top),extra:T.none()}),O=>({coord:O.output,extra:O.extra}))},Hj=(t,s)=>{Ij(t,s)},I6=(t,s,a,i)=>Xt(t,d=>{const g=d.sensor;return M6(s,g,d.range.left,d.range.top,a,i)?T.some({output:VR(d.output,s,a,i),extra:d.extra}):T.none()}),zj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return I6(g,a,i,d).orThunk(()=>tt(g,(E,O)=>{const F=O.sensor,z=Bj(a,F,O.range.left,O.range.top,i,d);return E.deltas.fold(()=>({deltas:T.some(z),snap:T.some(O)}),X=>{const ee=(z.left+z.top)/2,me=(X.left+X.top)/2;return ee<=me?{deltas:T.some(z),snap:T.some(O)}:E})},{deltas:T.none(),snap:T.none()}).snap.map(E=>({output:VR(E.output,a,i,d),extra:E.extra})))},Vj=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return I6(g,a,i,d)},Uj=(t,s,a)=>({coord:VR(t.output,t.output,s,a),extra:t.extra});var Wj=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ha(t.element),p=Mc(g),S=vC(d),E=Uj(i,p,S),O=zR(E.coord,p,S);Ps(d,O)}}});const UR="data-initial-z-index",Zj=t=>{Fa(t.element).filter(fo).each(s=>{nn(s,UR).fold(()=>qo(s,"z-index"),a=>pt(s,"z-index",a)),$(s,UR)})},L6=t=>{Fa(t.element).filter(fo).each(s=>{Hs(s,"z-index").each(a=>{q(s,UR,a)}),pt(s,"z-index",Os(t.element,"z-index"))})},WR=(t,s)=>{t.getSystem().addToGui(s),L6(s)},jj=t=>{Zj(t),t.getSystem().removeFromGui(t)},Ny=(t,s,a)=>t.getSystem().build(Cf.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Gj=Or("snaps",[Zt("getSnapPoints"),Es("onSensor"),Zt("leftAttr"),Zt("topAttr"),et("lazyViewport",Ba),et("mustSnap",!1)]);const ZR=[et("useFixed",Ve),Zt("blockerClass"),et("getTarget",Yt),et("onDrag",ie),et("repositionTarget",!0),et("onDrop",ie),da("getBounds",Ba),Gj],jR=t=>Gr(Hs(t,"left"),Hs(t,"top"),Hs(t,"position"),(s,a,i)=>(i==="fixed"?h1:lk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=La(t);return cd(s.left,s.top)}),qj=(t,s,a,i,d)=>{const g=d.bounds,p=Fy(s,a,i),S=Cl(p.left,g.x,g.x+g.width-d.width),E=Cl(p.top,g.y,g.y+g.height-d.height),O=cd(S,E);return s.fold(()=>{const F=B6(O,a,i);return lk(F.left,F.top)},J(O),()=>{const F=ik(O,a,i);return h1(F.left,F.top)})},Kj=(t,s,a,i,d,g,p)=>{const S=s.fold(()=>{const E=Mj(a,g.left,g.top),O=ik(E,i,d);return h1(O.left,O.top)},E=>{const O=Lj(t,E,a,g,i,d);return O.extra.each(F=>{E.onSensor(t,F)}),O.coord});return qj(t,S,i,d,p)},Yj=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ha(t.element),p=Mc(g),S=vC(d),E=jR(d),O=Kj(t,s.snaps,E,p,S,i,a),F=zR(O,p,S);Ps(d,F)}s.onDrag(t,d,i)},H6=(t,s)=>({bounds:t.getBounds(),height:ji(s.element),width:fe(s.element)}),GR=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>H6(s,t));g.each(S=>{Yj(t,s,p,S)})},z6=(t,s,a,i)=>{s.each(jj),a.snaps.each(g=>{Hj(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},qR=t=>(s,a)=>{const i=d=>{a.setStartData(H6(s,d))};return Mr([Gt(oh(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},Xj=t=>Mr([Gt(ya(),t.forceDrop),Gt(Jm(),t.drop),Gt(ip(),(s,a)=>{t.move(a.event)}),Gt(Xm(),t.delayDrop)]);var Jj=Object.freeze({__proto__:null,getData:t=>T.from(Dr(t.x,t.y)),getDelta:(t,s)=>Dr(s.left-t.left,s.top-t.top)});const V6=(t,s,a)=>[Gt(ya(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>z6(i,T.some(O),t,s),S=dP(p,200),E={drop:p,delayDrop:S.schedule,forceDrop:p,move:z=>{S.cancel(),GR(i,t,s,Jj,z)}},O=Ny(i,t.blockerClass,Xj(E));(()=>{a(i),WR(i,O)})()})],Qj=[...ZR,hr("dragger",{handlers:qR(V6)})],eG=t=>Mr([Gt(du(),t.forceDrop),Gt(Tr(),t.drop),Gt(ai(),t.drop),Gt(Ms(),(s,a)=>{t.move(a.event)})]),tG=t=>{const s=t[0];return T.some(Dr(s.clientX,s.clientY))};var BS=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?tG(a):T.none()},getDelta:(t,s)=>Dr(s.left-t.left,s.top-t.top)});const U6=(t,s,a)=>{const i=Ys(),d=g=>{z6(g,i.get(),t,s),i.clear()};return[Gt(du(),(g,p)=>{p.stop();const S=()=>d(g),E={drop:S,delayDrop:ie,forceDrop:S,move:z=>{GR(g,t,s,BS,z)}},O=Ny(g,t.blockerClass,eG(E));i.set(O),(()=>{a(g),WR(g,O)})()}),Gt(Ms(),(g,p)=>{p.stop(),GR(g,t,s,BS,p.event)}),Gt(Tr(),(g,p)=>{p.stop(),d(g)}),Gt(ai(),d)]},nG=[...ZR,hr("dragger",{handlers:qR(U6)})],oG=(t,s,a)=>[...V6(t,s,a),...U6(t,s,a)],sG=[...ZR,hr("dragger",{handlers:qR(oG)})];var aG=Object.freeze({__proto__:null,mouse:Qj,touch:nG,mouseOrTouch:sG}),cG=Object.freeze({__proto__:null,init:()=>{let t=T.none(),s=T.none();const a=()=>{t=T.none(),s=T.none()},i=(E,O)=>{const F=t.map(z=>E.getDelta(z,O));return t=T.some(O),F},d=(E,O)=>E.getData(O).bind(F=>i(E,F)),g=E=>{s=T.some(E)},p=()=>s,S=J({});return hl({readState:S,reset:a,update:d,getStartData:p,setStartData:g})}});const Zb=ix({branchKey:"mode",branches:aG,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:T.from(t.extra)})},state:cG,apis:Wj}),KR=40,By=KR/2,YR=(t,s,a,i,d,g)=>t.fold(()=>Zb.snap({sensor:cd(a-By,i-By),range:Dr(d,g),output:cd(T.some(a),T.some(i)),extra:{td:s}}),p=>{const S=a-By,E=i-By,O=KR,F=KR,z=p.element.dom.getBoundingClientRect();return Zb.snap({sensor:cd(S,E),range:Dr(O,F),output:cd(T.some(a-z.width/2),T.some(i-z.height/2)),extra:{td:s}})}),W6=(t,s,a)=>{const i=(d,g)=>d.exists(p=>ks(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},Z6=t=>qs(di.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:hn([Zb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),fy.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),iG=(t,s)=>{const a=oo([]),i=oo([]),d=oo(!1),g=Ys(),p=Ys(),S=Hn=>{const $t=ki(Hn);return YR(ee.getOpt(s),Hn,$t.x,$t.y,$t.width,$t.height)},E=()=>Ne(a.get(),Hn=>S(Hn)),O=Hn=>{const $t=ki(Hn);return YR(me.getOpt(s),Hn,$t.right,$t.bottom,$t.width,$t.height)},F=()=>Ne(i.get(),Hn=>O(Hn)),z=W6(E,g,Hn=>{p.get().each($t=>{t.dispatch("TableSelectorChange",{start:Hn,finish:$t})})}),X=W6(F,p,Hn=>{g.get().each($t=>{t.dispatch("TableSelectorChange",{start:$t,finish:Hn})})}),ee=Z6(z),me=Z6(X),pe=li(ee.asSpec()),Ye=li(me.asSpec()),Oe=(Hn,$t,Kn,Tn)=>{const eo=$t.dom.getBoundingClientRect();qo(Hn.element,"display");const vs=xa(Le.fromDom(t.getBody())).dom.innerHeight,Hr=Kn(eo),Zs=Tn(eo,vs);(Hr||Zs)&&pt(Hn.element,"display","none")},Ue=(Hn,$t,Kn,Tn)=>{const eo=Kn($t);Zb.snapTo(Hn,eo),Oe(Hn,$t,Zs=>Zs[Tn]<0,(Zs,Jn)=>Zs[Tn]>Jn)},We=Hn=>Ue(pe,Hn,S,"top"),Ut=()=>g.get().each(We),Bt=Hn=>Ue(Ye,Hn,O,"bottom"),_n=()=>p.get().each(Bt);if(os().deviceType.isTouch()){const Hn=$t=>Ne($t,Le.fromDom);t.on("TableSelectionChange",$t=>{d.get()||(Gu(s,pe),Gu(s,Ye),d.set(!0));const Kn=Le.fromDom($t.start),Tn=Le.fromDom($t.finish);g.set(Kn),p.set(Tn),T.from($t.otherCells).each(eo=>{a.set(Hn(eo.upOrLeftCells)),i.set(Hn(eo.downOrRightCells)),We(Kn),Bt(Tn)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ut(),_n()}),t.on("TableSelectionClear",()=>{d.get()&&(df(pe),df(Ye),d.set(!1)),g.clear(),p.clear()})}};var lG=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const uG=(t,s)=>{const a=T.from(Ie(t,"id")).getOrThunk(()=>{const i=Vn("aria");return q(s,"id",i),i});q(t,"aria-describedby",a)},dG=t=>{$(t,"aria-describedby")},mG=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",fG=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(O,F,z)=>di.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":z}},components:[fa(O)],action:X=>{t.focus(),t.selection.select(F),t.nodeChanged()},buttonBehaviours:hn([Da.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",F.nodeName.toLowerCase()]),onShow:(X,ee)=>{uG(X.element,ee.element)},onHide:X=>{dG(X.element)}})}),Dm.button(a.isDisabled),Fc()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[fa(` ${d} `)]}),S=O=>tt(O,(F,z,X)=>{const ee=g(z.name,z.element,X);return X===0?F.concat([ee]):F.concat([p(),ee])},[]),E=O=>{const F=[];let z=O.length;for(;z-- >0;){const X=O[z];if(X.nodeType===1&&!mG(X)){const ee=y9(t,X);if(ee.isDefaultPrevented()||F.push({name:ee.name,element:X}),ee.isPropagationStopped())break}}return F};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:hn([yo.config({mode:"flow",selector:"div[role=button]"}),l.config({disabled:a.isDisabled}),Fc(),Ir.config({}),Uo.config({}),ts("elementPathEvents",[Zr((O,F)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>yo.focusIn(O)),t.on("NodeChange",z=>{const X=E(z.parents),ee=X.length>0?S(X):[];Uo.set(O,ee)})})])]),components:[]}};var p1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(p1||(p1={}));const gG=(t,s,a,i,d)=>{const g={height:QA(i+s.top,qv(t),mT(t))};return a===p1.Both&&(g.width=QA(d+s.left,Cb(t),o2(t))),g},j6=(t,s,a)=>{const i=Le.fromDom(t.getContainer()),d=gG(t,s,a,nr(i),ae(i));po(d,(g,p)=>{st(g)&&pt(i,p,JA(g))}),qT(t)},hG=t=>{const s=bB(t);return s===!1?p1.None:s==="both"?p1.Both:p1.Vertical},uk=(t,s,a,i)=>{const g=Dr(a*20,i*20);return j6(t,g,s),T.some(!0)},pG=(t,s)=>{const a=hG(t);if(a===p1.None)return T.none();const i=a===p1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return T.some(Qu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[Zb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>j6(t,p,a),blockerClass:"tox-blocker"}),yo.config({mode:"special",onLeft:()=>uk(t,a,-1,0),onRight:()=>uk(t,a,1,0),onUp:()=>uk(t,a,0,-1),onDown:()=>uk(t,a,0,1)}),Ir.config({}),$o.config({}),Da.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},G6=(t,s)=>{const a=(i,d,g)=>Uo.set(i,[fa(s.translate(["{0} "+g,d[g]]))]);return di.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:hn([Dm.button(s.isDisabled),Fc(),Ir.config({}),Uo.config({}),Ln.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ts("wordcount-events",[Uu(i=>{const d=Ln.getValue(i),g=d.mode==="words"?"characters":"words";Ln.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Zr(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ln.getValue(i);Ln.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[fu()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},bG=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",lG.trim()])},behaviours:hn([$o.config({})])}]}),i=()=>{const S=WT("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[fa(Ju.translate(["Press {0} for help",S]))]}},d=()=>{const S=[];return t.hasPlugin("wordcount")&&S.push(G6(t,s)),P3(t)&&S.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:S}},g=()=>{const S=[],E=a2(t),O=pB(t),F=P3(t)||t.hasPlugin("wordcount"),z=()=>{const X="tox-statusbar__text-container--flex-start",ee="tox-statusbar__text-container--flex-end",me="tox-statusbar__text-container--space-around";if(E){const pe="tox-statusbar__text-container-3-cols";return!F&&!O?[pe,me]:F&&!O?[pe,ee]:[pe,X]}return[F&&!O?ee:X]};return O&&S.push(fG(t,{},s)),E&&S.push(i()),F&&S.push(d()),S.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...z()]},components:S}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const S=g(),E=pG(t,s);return S.concat(E.toArray())})()}},q6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),vG=(t,s)=>{const a=t.inline,i=a?zZ:XA,d=Sb(t)?qU:E$,g=VZ(),p=Ys(),S=Ys(),E=Ys(),X=os().deviceType.isTouch()?["tox-platform-touch"]:[],ee=l2(t),me=wb(t),pe=qs({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ye=qs({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Oe=()=>g.mainUi.get().map(ho=>ho.outerContainer).bind(Lr.getHeader),Ue=()=>Yo.fromOption(g.dialogUi.get().map(ho=>ho.sink),"UI has not been rendered"),We=()=>Yo.fromOption(g.popupUi.get().map(ho=>ho.sink),"(popup) UI has not been rendered"),Ut=g.lazyGetInOuterOrDie("anchor bar",pe.getOpt),Bt=g.lazyGetInOuterOrDie("bottom anchor bar",Ye.getOpt),_n=g.lazyGetInOuterOrDie("toolbar",Lr.getToolbar),Hn=g.lazyGetInOuterOrDie("throbber",Lr.getThrobber),$t=C$({popup:We,dialog:Ue},t,Ut,Bt),Kn=()=>{const ho={attributes:{[lw]:ee?$l.BottomToTop:$l.TopToBottom}},Ko=Lr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:$t.popup,onEscape:()=>{t.focus()}}),wr=Lr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:$t.popup.shared.getSink,providers:$t.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Jb=>{C9(t,Jb)},type:me,lazyToolbar:_n,lazyHeader:()=>Oe().getOrDie("Could not find header element"),...ho}),Ks=Lr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:$t.popup.shared.providers,onEscape:()=>{t.focus()},type:me}),Ui=i2(t),ud=c2(t),kf=bT(t),xi=vB(t),dd=Tn(),Kd=Ui||ud||kf,Yl=()=>Ui?[Ks]:ud?[wr]:[],Mg=xi?[dd,Ko]:[Ko];return Lr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Kd?[]:["tox-editor-header--empty"]),...ho},components:le([kf?Mg:[],Yl(),Kv(t)?[]:[pe.asSpec()]]),sticky:Sb(t),editor:t,sharedBackstage:$t.popup.shared})},Tn=()=>Lr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),eo=()=>{const ho=Lr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Ko=Lr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ho,Ko]}},vs=()=>{const ho=z3(t),Ko=ks(es(),ho)&&Os(ho,"display")==="grid",wr={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(X),attributes:{...Ju.isRtl()?{dir:"rtl"}:{}}},behaviours:hn([ui.config({useFixed:()=>d.isDocked(Oe)})])},Ks={dom:{styles:{width:document.body.clientWidth+"px"}},events:Mr([Gt(Ad(),kf=>{pt(kf.element,"width",document.body.clientWidth+"px")})])},Ui=li(xr(wr,Ko?Ks:{})),ud=I2(Ui);return S.set(ud),{sink:Ui,mothership:ud}},Hr=()=>{const ho={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(X),attributes:{...Ju.isRtl()?{dir:"rtl"}:{}}},behaviours:hn([ui.config({useFixed:()=>d.isDocked(Oe),getBounds:()=>s.getPopupSinkBounds()})])},Ko=li(ho),wr=I2(Ko);return E.set(wr),{sink:Ko,mothership:wr}},Zs=()=>{const ho=Kn(),Ko=eo(),wr=Lr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:$t.popup}),Ks=Lr.parts.viewWrapper({backstage:$t.popup}),Ui=hB(t)&&!a?T.some(bG(t,$t.popup.shared.providers)):T.none(),ud=le([ee?[]:[ho],a?[]:[Ko],ee?[ho]:[]]),kf=Lr.parts.editorContainer({components:le([ud,a?[]:[Ye.asSpec()]])}),xi=u2(t),dd={role:"application",...Ju.isRtl()?{dir:"rtl"}:{},...xi?{"aria-hidden":"true"}:{}},Kd=li(Lr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(ee?["tox-tinymce--toolbar-bottom"]:[]).concat(X),styles:{visibility:"hidden",...xi?{opacity:"0",border:"0"}:{}},attributes:dd},components:[kf,...a?[]:[Ks,...Ui.toArray()],wr],behaviours:hn([Fc(),l.config({disableClass:"tox-tinymce--disabled"}),yo.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Yl=I2(Kd);return p.set(Yl),{mothership:Yl,outerContainer:Kd}},Jn=ho=>{const Ko=JA($Z(t)),wr=JA(IZ(t));return t.inline||(gc("div","width",wr)&&pt(ho.element,"width",wr),gc("div","height",Ko)?pt(ho.element,"height",Ko):pt(ho.element,"height","400px")),Ko},ln=ho=>{t.addShortcut("alt+F9","focus menubar",()=>{Lr.focusMenubar(ho)}),t.addShortcut("alt+F10","focus toolbar",()=>{Lr.focusToolbar(ho)}),t.addCommand("ToggleToolbarDrawer",(Ko,wr)=>{wr!=null&&wr.skipFocus?Lr.toggleToolbarDrawerWithoutFocusing(ho):Lr.toggleToolbarDrawer(ho)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Lr.isToolbarDrawerToggled(ho))},Rn=ho=>{const{mainUi:Ko,popupUi:wr,uiMotherships:Ks}=ho;ro(N3(t),(zy,vk)=>{t.ui.registry.addGroupToolbarButton(vk,zy)});const{buttons:Ui,menuItems:ud,contextToolbars:kf,sidebars:xi,views:dd}=t.ui.registry.getAll(),Kd=H3(t),Yl={menuItems:ud,menus:wB(t),menubar:uB(t),toolbar:Kd.getOrThunk(()=>r2(t)),allowToolbarGroups:me===Bd.floating,buttons:Ui,sidebar:xi,views:dd};ln(Ko.outerContainer),w$(t,Ko.mothership,Ks),d.setup(t,$t.popup.shared,Oe),bj(t,$t.popup),Nj(t,$t.popup.shared.getSink,$t.popup),JO(t),dW(t,Hn,$t.popup.shared),ej(t,kf,wr.sink,{backstage:$t.popup}),iG(t,wr.sink);const Mg=t.getElement(),Jb=Jn(Ko.outerContainer),mF={targetNode:Mg,height:Jb};return i.render(t,ho,Yl,$t.popup,mF)},Io=ho=>(E.set(ho.mothership),ho),Do=()=>{const ho=Zs(),Ko=vs(),wr=Gp(t)?Hr():Io(Ko);g.dialogUi.set(Ko),g.popupUi.set(wr),g.mainUi.set(ho);const Ks={popupUi:wr,dialogUi:Ko,mainUi:ho,uiMotherships:g.getUiMotherships()};return Rn(Ks)};return{popups:{backstage:$t.popup,getMothership:()=>q6("popups",E)},dialogs:{backstage:$t.dialog,getMothership:()=>q6("dialogs",S)},renderUI:Do}},yG=t=>t.dom.textContent,CG=(t,s)=>{const a=nn(t,"id").fold(()=>{const i=Vn("dialog-label");return q(s,"id",i),i},Yt);q(t,"aria-labelledby",a)},wG=J([Zt("lazySink"),$s("dragBlockClass"),da("getBounds",Ba),et("useTabstopAt",je),et("firstTabstop",0),et("eventOrder",{}),Dc("modalBehaviours",[yo]),nl("onExecute"),E0("onEscape")]),XR={sketch:Yt},SG=J([Hl({name:"draghandle",overrides:(t,s)=>({behaviours:hn([Zb.config({mode:"mouse",getTarget:a=>cg(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Qc({schema:[Zt("dom")],name:"title"}),Qc({factory:XR,schema:[Zt("dom")],name:"close"}),Qc({factory:XR,schema:[Zt("dom")],name:"body"}),Hl({factory:XR,schema:[Zt("dom")],name:"footer"}),Cu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[et("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),et("components",[])],name:"blocker"})]),K6=(t,s,a,i)=>{const d=Ys(),g=me=>{d.set(me);const pe=t.lazySink(me).getOrDie(),Ye=i.blocker(),Oe=pe.getSystem().build({...Ye,components:Ye.components.concat([Ml(me)]),behaviours:hn([$o.config({}),ts("dialog-blocker-events",[up(Sd(),()=>{Nm.isBlocked(me)?ie():yo.focusIn(me)})])])});Gu(pe,Oe),yo.focusIn(me)},p=me=>{d.clear(),Fa(me.element).each(pe=>{me.getSystem().getByDom(pe).each(Ye=>{df(Ye)})})},S=me=>zl(me,t,"body"),E=me=>mn(me,t,"footer"),O=(me,pe)=>{Nm.block(me,pe)},F=me=>{Nm.unblock(me)},z=Vn("modal-events"),X={...t.eventOrder,[Oi()]:[z].concat(t.eventOrder["alloy.system.attached"]||[])},ee=os();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:S,getFooter:E,setIdle:F,setBusy:O},eventOrder:X,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Oc(t.modalBehaviours,[Uo.config({}),yo.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Nm.config({getRoot:d.get}),ts(z,[Zr(me=>{const pe=zl(me,t,"title").element,Ye=yG(pe);ee.os.isMacOS()&&Lt(Ye)?q(me.element,"aria-label",Ye):CG(me.element,pe)})])])}},Cc=wi({name:"ModalDialog",configFields:wG(),partFields:SG(),factory:K6,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),jb=ko([Ua,IT].concat(Xp)),xG=dl,MS=[AD("button"),$d,el("align","end",["start","end"]),ey,Id,rp("buttonType",["primary","secondary"])],PS=[...MS,Lh],JR=[Gc("type",["submit","cancel","custom"]),...PS],EG=[Gc("type",["menu"]),Hh,Qv,$d,Ji("items",jb),...MS],TG=[...MS,Gc("type",["togglebutton"]),Qv,$d,Hh,Ta("active",!1)],AG=sc("type",{submit:JR,cancel:JR,custom:JR,menu:EG,togglebutton:TG}),kG=[Ua,Lh,Gc("level",["info","warn","error","success"]),XB,et("url","")],Gb=ko(kG),Y6=t=>[Ua,t],_G=[Ua,Lh,Id,AD("button"),$d,Z7,rp("buttonType",["primary","secondary","toolbar"]),ey],DG=ko(_G),My=[Ua,IT],Tf=My.concat([LT]),OG=My.concat([xD,Id]),RG=ko(OG),FG=dl,NG=Tf.concat([QB("auto")]),QR=ko(NG),$S=x1([w2,Lh,XB]),eF=Tf.concat([qc("storageKey","default")]),dk=ko(eF),qb=Mn,BG=ko(Tf),X6=Mn,J6=My.concat([qc("tag","textarea"),Va("scriptId"),Va("scriptUrl"),Lu("onFocus"),tC("settings",void 0)]),Q6=My.concat([qc("tag","textarea"),Xi("init")]),MG=Qg(t=>oa("customeditor.old",ri(Q6),t).orThunk(()=>oa("customeditor.new",ri(J6),t))),PG=Mn,e8=ko(Tf),t8=qm(),nF=t=>[Ua,eh("columns"),t],$G=[Ua,Va("html"),el("presets","presentation",["presentation","document"]),da("onInit",ie),Ta("stretched",!1)],IG=ko($G),LG=Tf.concat([Ta("border",!1),Ta("sandboxed",!0),Ta("streamContent",!1),Ta("transparent",!0)]),n8=ko(LG),HG=Mn,zG=ko(My.concat([Ka("height")])),VG=ko([Va("url"),Km("zoom"),Km("cachedWidth"),Km("cachedHeight")]),oF=Tf.concat([Ka("inputMode"),Ka("placeholder"),Ta("maximized",!1),Id]),sF=ko(oF),UG=Mn,o8=t=>[Ua,xD,t,el("align","start",["start","center","end"]),Ka("for")],WG=[Lh,w2],ZG=[Lh,Ji("items",If("items",()=>rF))],rF=$f([ko(WG),ko(ZG)]),jG=Tf.concat([Ji("items",rF),Id]),GG=ko(jG),Kb=Mn,s8=Tf.concat([d0("items",[Lh,w2]),Hf("size",1),Id]),qG=ko(s8),mk=Mn,Py=Tf.concat([Ta("constrain",!0),Id]),fk=ko(Py),aF=ko([Va("width"),Va("height")]),gk=My.concat([xD,Hf("min",0),Hf("max",0)]),Gl=ko(gk),hk=im,r8=[Ua,Ji("header",Mn),Ji("cells",Yi(Mn))],a8=ko(r8),KG=Tf.concat([Ka("placeholder"),Ta("maximized",!1),Id]),YG=ko(KG),b1=Mn,XG=[Gc("type",["directory","leaf"]),YB,Va("id"),Iu("menu",O$)],cF=ko(XG),$y=XG.concat([Ji("children",If("children",()=>lm("type",{directory:IS,leaf:cF})))]),IS=ko($y),c8=lm("type",{directory:IS,leaf:cF}),JG=[Ua,Ji("items",c8),Lu("onLeafAction"),Lu("onToggleExpand"),x("defaultExpandedIds",[],Mn),Ka("defaultSelectedId")],QG=ko(JG),eq=Tf.concat([el("filetype","file",["image","media","file"]),Id,Ka("picker_text")]),tq=ko(eq),Iy=ko([w2,ED]),i8=t=>qa("items","items",si(),Yi(Qg(s=>oa(`Checking item of ${t}`,iF,s).fold(a=>Yo.error(lu(a)),a=>Yo.value(a))))),iF=za(()=>lm("type",{alertbanner:Gb,bar:ko(Y6(i8("bar"))),button:DG,checkbox:RG,colorinput:dk,colorpicker:BG,dropzone:e8,grid:ko(nF(i8("grid"))),iframe:n8,input:sF,listbox:GG,selectbox:qG,sizeinput:fk,slider:Gl,textarea:YG,urlinput:tq,customeditor:MG,htmlpanel:IG,imagepreview:zG,collection:QR,label:ko(o8(i8("label"))),table:a8,tree:QG,panel:oq})),nq=[Ua,et("classes",[]),Ji("items",iF)],oq=ko(nq),sq=[AD("tab"),YB,Ji("items",iF)],rq=[Ua,d0("tabs",sq)],LS=ko(rq),aq=PS,cq=AG,l8=ko([Va("title"),Vs("body",lm("type",{panel:oq,tabpanel:LS})),qc("size","normal"),x("buttons",[],cq),et("initialData",{}),da("onAction",ie),da("onChange",ie),da("onSubmit",ie),da("onClose",ie),da("onCancel",ie),da("onTabChange",ie)]),iq=t=>oa("dialog",l8,t),_Y=ko([Gc("type",["cancel","custom"]),...aq]),e=ko([Va("title"),Va("url"),Km("height"),Km("width"),Hu("buttons",_Y),da("onAction",ie),da("onCancel",ie),da("onClose",ie),da("onMessage",ie)]),n=t=>oa("dialog",e,t),o=t=>Te(t)?[t].concat(L(zr(t),o)):Xe(t)?L(t,o):[],r=t=>Q(t.type)&&Q(t.name),c={checkbox:FG,colorinput:qb,colorpicker:X6,dropzone:t8,input:UG,iframe:HG,imagepreview:VG,selectbox:mk,sizeinput:aF,slider:hk,listbox:Kb,size:aF,textarea:b1,urlinput:Iy,customeditor:PG,collection:$S,togglemenuitem:xG},u=t=>T.from(c[t.type]),f=t=>Ct(o(t),r),v=t=>{const s=f(t),a=L(s,i=>u(i).fold(()=>[],d=>[Vs(i.name,d)]));return ko(a)},w=t=>{var s;const a=un(iq(t)),i=v(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},_={open:(t,s)=>{const a=w(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=un(n(s));return t(a)},redial:t=>w(t)};var H=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?Wv:Uv)(i,p)})};return Mr([Gt(mu(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;Dt(g.channels,p)&&a(i,g.data)}}),Zr((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),oe=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),ge=[Zt("channel"),$s("renderComponents"),$s("updateState"),$s("initialData"),Ta("reuseDom",!0)],be=Object.freeze({__proto__:null,init:()=>{const t=oo(T.none()),s=()=>t.set(T.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Me=Ic({fields:ge,name:"reflecting",active:H,apis:oe,state:be}),qe=t=>{const s=[],a={};return po(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Yo.error(s):Yo.value(a)},Ze=(t,s,a,i)=>{const d=qs(s1.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ne(t.items,p=>tU(g,p,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:hn([yo.config({mode:"acyclic",useTabstopAt:rt(Q2)}),Om.memento(d),Bz(d,{postprocess:g=>qe(g).fold(p=>(console.error(p),{}),Yt)}),ts("dialog-body-panel",[Gt(Sd(),(g,p)=>{g.getSystem().broadcastOn([CA],{newFocus:T.some(p.event.target)})})])])}},bt=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:iT(t.action),behaviours:Oc(t.tabButtonBehaviours,[$o.config({}),yo.config({mode:"execution",useSpace:!0,useEnter:!0}),Ln.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Jt=Tl({name:"TabButton",configFields:[et("uid",void 0),Zt("value"),qa("dom","dom",Pf(()=>({attributes:{role:"tab",id:Vn("aria"),"aria-selected":"false"}})),Rl()),$s("action"),et("domModification",{}),Dc("tabButtonBehaviours",[$o,yo,Ln]),Zt("view")],factory:bt}),yn=J([Zt("tabs"),Zt("dom"),et("clickToDismiss",!1),Dc("tabbarBehaviours",[ao,yo]),gh(["tabClass","selectedClass"])]),In=Pv({factory:Jt,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{ao.dehighlight(i,d),wo(i,ox(),{tabbar:i,button:d})},a=(i,d)=>{ao.highlight(i,d),wo(i,nx(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=ao.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?ie:a)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Pt=J([In]),At=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Oc(t.tabbarBehaviours,[ao.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{q(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{q(g.element,"aria-selected","false")}}),yo.config({mode:"flow",getInitial:d=>ao.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Kt=wi({name:"Tabbar",configFields:yn(),partFields:Pt(),factory:At}),qn=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Oc(t.tabviewBehaviours,[Uo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),uo=Tl({name:"Tabview",configFields:[Dc("tabviewBehaviours",[Uo])],factory:qn}),ps=J([et("selectFirst",!0),Es("onChangeTab"),Es("onDismissTab"),et("tabs",[]),Dc("tabSectionBehaviours",[])]),Cs=Qc({factory:Kt,schema:[Zt("dom"),wd("markers",[Zt("tabClass"),Zt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Xs=Qc({factory:uo,name:"tabview"}),fr=J([Cs,Xs]),Oa=(t,s,a,i)=>{const d=p=>{const S=Ln.getValue(p);mn(p,t,"tabview").each(E=>{I(t.tabs,F=>F.value===S).each(F=>{const z=F.view();nn(p.element,"id").each(X=>{q(E.element,"aria-labelledby",X)}),Uo.set(E,z),t.onChangeTab(E,p,z)})})},g=(p,S)=>{mn(p,t,"tabbar").each(E=>{S(E).each(Zf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:ab(t.tabSectionBehaviours),events:Mr(le([t.selectFirst?[Zr((p,S)=>{g(p,ao.getFirst)})]:[],[Gt(nx(),(p,S)=>{const E=S.event.button;d(E)}),Gt(ox(),(p,S)=>{const E=S.event.button;t.onDismissTab(p,E)})]])),apis:{getViewItems:p=>mn(p,t,"tabview").map(S=>Uo.contents(S)).getOr([]),showTab:(p,S)=>{g(p,O=>{const F=ao.getCandidates(O);return I(F,X=>Ln.getValue(X)===S).filter(X=>!ao.isHighlighted(O,X))})}}}},dc=wi({name:"TabSection",configFields:ps(),partFields:fr(),factory:Oa,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Cr=(t,s,a)=>Ne(t,(i,d)=>{Uo.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Uo.set(a,[]),g.height}),En=t=>wn(cn(t,(s,a)=>s>a?-1:s<a?1:0)),co=(t,s,a)=>{const i=pi(t).dom,d=cg(t,".tox-dialog-wrap").getOr(t),g=Os(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const S=nr(s),O=s.dom.offsetLeft>=a.dom.offsetLeft+ae(a)?Math.max(nr(a),S):S,F=parseInt(Os(t,"margin-top"),10)||0,z=parseInt(Os(t,"margin-bottom"),10)||0,ee=nr(t)+F+z-O;return p-ee},Us=(t,s)=>{wn(t).each(a=>dc.showTab(s,a.value))},Nn=(t,s)=>{pt(t,"height",s+"px"),pt(t,"flex-basis",s+"px")},So=(t,s,a)=>{cg(t,'[role="dialog"]').each(i=>{Jr(i,'[role="tablist"]').each(d=>{a.get().map(g=>(pt(s,"height","0"),pt(s,"flex-basis","0"),Math.min(g,co(i,s,d)))).each(g=>{Nn(s,g)})})})},fs=t=>Jr(t,'[role="tabpanel"]'),Pn=t=>{const s=Ys();return{extraEvents:[Zr(d=>{const g=d.element;fs(g).each(p=>{pt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(S=>{const E=Cr(t,p,S);En(E).fold(s.clear,s.set)}),So(g,p,s),qo(p,"visibility"),Us(t,d),requestAnimationFrame(()=>{So(g,p,s)})})}),Gt(Ad(),d=>{const g=d.element;fs(g).each(p=>{So(g,p,s)})}),Gt(b4,(d,g)=>{const p=d.element;fs(p).each(S=>{const E=Rd(Ur(S));pt(S,"visibility","hidden");const O=Hs(S,"height").map(X=>parseInt(X,10));qo(S,"height"),qo(S,"flex-basis");const F=S.dom.getBoundingClientRect().height;O.forall(X=>F>X)?(s.set(F),So(p,S,s)):O.each(X=>{Nn(S,X)}),qo(S,"visibility"),E.each(Pl)})})],selectFirst:!1}},gs="send-data-to-section",ws="send-data-to-view",Bc=(t,s,a,i)=>{const d=oo({}),g=F=>{const z=Ln.getValue(F),X=qe(z).getOr({}),ee=d.get(),me=xr(ee,X);d.set(me)},p=F=>{const z=d.get();Ln.setValue(F,z)},S=oo(null),E=Ne(t.tabs,F=>({value:F.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[fa(a.shared.providers.translate(F.title))],view:()=>[s1.sketch(z=>({dom:{tag:"div",classes:["tox-form"]},components:Ne(F.items,X=>tU(z,X,s,a,i)),formBehaviours:hn([yo.config({mode:"acyclic",useTabstopAt:rt(Q2)}),ts("TabView.form.events",[Zr(p),fm(g)]),ol.config({channels:js([{key:gs,value:{onReceive:g}},{key:ws,value:{onReceive:p}}])})])}))]})),O=Pn(E);return dc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(F,z,X)=>{const ee=Ln.getValue(z);wo(F,wP,{name:ee,oldName:S.get()}),S.set(ee)},tabs:E,components:[dc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Kt.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:hn([Ir.config({})])}),dc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:O.selectFirst,tabSectionBehaviours:hn([ts("tabpanel",O.extraEvents),yo.config({mode:"acyclic"}),Fs.config({find:F=>wn(dc.getViewItems(F))}),r1(T.none(),F=>(F.getSystem().broadcastOn([gs],{}),d.get()),(F,z)=>{d.set(z),F.getSystem().broadcastOn([ws],{})})])})},er=(t,s,a,i,d,g)=>{const p=O=>{const F=O.body;switch(F.type){case"tabpanel":return[Bc(F,O.initialData,i,g)];default:return[Ze(F,O.initialData,i,g)]}},S=(O,F)=>T.some({isTabPanel:()=>F.body.type==="tabpanel"}),E={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(O=>({id:O})).getOr({}),...d?E:{}}},components:[],behaviours:hn([Om.childAt(0),Me.config({channel:`${Y4}-${s}`,updateState:S,renderComponents:p,initialData:t})])}},wc=(t,s,a,i,d,g)=>er(t,s,T.some(a),i,d,g),Wd=(t,s,a,i)=>{const d=er(t,s,T.none(),a,!1,i);return Cc.parts.body(d)},Af=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[m5(T.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:hn([Ir.config({}),$o.config({})])})]}],behaviours:hn([yo.config({mode:"acyclic",useTabstopAt:rt(Q2)})])};return Cc.parts.body(s)},il=vb.deviceType.isTouch(),ql=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),id=(t,s)=>Cc.parts.close(di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:hn([Ir.config({})])})),Kl=()=>Cc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),ld=(t,s)=>Cc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:pf(`<p>${rD(s.translate(t))}</p>`)}]}]}),mo=t=>Cc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),_s=(t,s)=>[Cf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Cf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],ra=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Cc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),T.some(!0)),useTabstopAt:g=>!Q2(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:pf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:il?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:hn([$o.config({}),ts("dialog-events",t.dialogEvents.concat([up(Sd(),(g,p)=>{Nm.isBlocked(g)?ie():yo.focusIn(g)}),Gt(sh(),(g,p)=>{g.getSystem().broadcastOn([CA],{newFocus:p.event.newFocus})})])),ts("scroll-lock",[Zr(()=>{Pr(es(),d)}),fm(()=>{ma(es(),d)})]),...t.extraBehaviours]),eventOrder:{[fu()]:["dialog-events"],[Oi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[gu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Ra=t=>di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:hn([Ir.config({}),Da.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Qu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{rs(s,zh)}}),Xa=(t,s,a,i)=>{const d=g=>[fa(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:hn([Me.config({channel:`${g5}-${s}`,initialData:t,renderComponents:d})])}},Vc=()=>({dom:pf('<div class="tox-dialog__draghandle"></div>')}),Ja=(t,s,a,i)=>Cf.sketch({dom:pf('<div class="tox-dialog__header"></div>'),components:[Xa(t,s,T.some(a),i),Vc(),Ra(i)],containerBehaviours:hn([Zb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Zu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Qa=(t,s,a)=>{const i=Cc.parts.title(Xa(t,s,T.none(),a)),d=Cc.parts.draghandle(Vc()),g=Cc.parts.close(Ra(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Cf.sketch({dom:pf('<div class="tox-dialog__header"></div>'),components:p})},Vi=(t,s,a)=>Qa({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Zd=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),jd=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=Jr(t().element,".tox-dialog__header").map(g=>nr(g));Cc.setBusy(t(),(g,p)=>Zd(i.message,p,s,d))},onUnblock:()=>{Cc.setIdle(t())}}),Gd="tox-dialog--fullscreen",Eu="tox-dialog--width-lg",Rg="tox-dialog--width-md",qh=t=>{switch(t){case"large":return T.some(Eu);case"medium":return T.some(Rg);default:return T.none()}},Yb=(t,s)=>{const a=Le.fromDom(s.element.dom);pl(a,Gd)||(bl(a,[Eu,Rg]),qh(t).each(i=>Pr(a,i)))},pk=(t,s)=>{const a=Le.fromDom(t.element.dom),i=$k(a),d=I(i,g=>g===Eu||g===Rg).or(qh(s));Bk(a,[Gd,...d.toArray()])},Fg=(t,s,a)=>li(ra({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[bA({}),...t.extraBehaviours],onEscape:i=>{rs(i,zh)},dialogEvents:s,eventOrder:{[mu()]:[Me.name(),ol.name()],[Oi()]:["scroll-lock",Me.name(),"messages","dialog-events","alloy.base.behaviour"],[gu()]:["alloy.base.behaviour","dialog-events","messages",Me.name(),"scroll-lock"]}})),Ly=(t,s={})=>{const a=i=>{const d=Ne(i.items,g=>{const p=on(s,g.name).getOr(oo(!1));return{...g,storage:p}});return{...i,items:d}};return Ne(t,i=>i.type==="menu"?a(i):i)},lF=t=>tt(t,(s,a)=>a.type==="menu"?tt(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Si=(t,s)=>[uC(Sd(),Vz),t(dy,(a,i,d,g)=>{Rd(Ur(g.element)).fold(ie,W0),s.onClose(),i.onClose()}),t(zh,(a,i,d,g)=>{i.onCancel(a),rs(g,dy)}),Gt(p4,(a,i)=>s.onUnblock()),Gt(h4,(a,i)=>s.onBlock(i.event))],Xb=(t,s)=>{const a=(d,g)=>Gt(d,(p,S)=>{i(p,(E,O)=>{g(t(),E,S.event,p)})}),i=(d,g)=>{Me.getState(d).get().each(p=>{g(p,d)})};return[...Si(a,s),a(Tg,(d,g,p)=>{g.onAction(d,{name:p.name})})]},uF=(t,s,a)=>{const i=(g,p)=>Gt(g,(S,E)=>{d(S,(O,F)=>{p(t(),O,E.event,S)})}),d=(g,p)=>{Me.getState(g).get().each(S=>{p(S.internalDialog,g)})};return[...Si(i,s),i(H2,(g,p)=>p.onSubmit(g)),i(Zl,(g,p,S)=>{p.onChange(g,{name:S.name})}),i(Tg,(g,p,S,E)=>{const O=()=>E.getSystem().isConnected()?yo.focusIn(E):void 0,F=ee=>zo(ee,"disabled")||nn(ee,"aria-disabled").exists(me=>me==="true"),z=Ur(E.element),X=Rd(z);p.onAction(g,{name:S.name,value:S.value}),Rd(z).fold(O,ee=>{F(ee)||X.exists(me=>Sa(ee,me)&&F(me))?O():a().toOptional().filter(me=>!Sa(me.element,ee)).each(O)})}),i(wP,(g,p,S)=>{p.onTabChange(g,{newTabName:S.name,oldTabName:S.oldName})}),fm(g=>{const p=t();Ln.setValue(g,p.getData())})]},dF=(t,s)=>mS(t,t.type,s),Ng=(t,s,a)=>I(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),HS=(t,s)=>{const a=s.map(S=>S.footerButtons).getOr([]),i=Ao(a,S=>S.align==="start"),d=(S,E)=>Cf.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${S}`]},components:Ne(E,O=>O.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},Et=(t,s,a)=>{const i=(d,g)=>{const p=Ne(g.buttons,E=>{const O=qs(dF(E,a));return{name:E.name,align:E.align,memento:O}}),S=E=>Ng(d,p,E);return T.some({lookupByName:S,footerButtons:p})};return{dom:pf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:hn([Me.config({channel:`${h5}-${s}`,initialData:t,updateState:i,renderComponents:HS})])}},kt=(t,s,a)=>Et(t,s,a),Sn=(t,s,a)=>Cc.parts.footer(Et(t,s,a)),pn=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Fs.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return s1.getField(i,s).orThunk(()=>t.getFooter().bind(p=>Me.getState(p).get()).bind(p=>p.lookupByName(s)))}else return T.none()},No=(t,s)=>{const a=t.getRoot();return Me.getState(a).get().map(i=>un(oa("data",i.dataValidator,s))).getOr(s)},xs=(t,s,a)=>{const i=me=>{const pe=t.getRoot();pe.getSystem().isConnected()&&me(pe)},ee={getData:()=>{const me=t.getRoot(),pe=me.getSystem().isConnected()?t.getFormWrapper():me,Ye=Ln.getValue(pe),Oe=ro(a,Ue=>Ue.get());return{...Ye,...Oe}},setData:me=>{i(pe=>{const Ye=ee.getData(),Oe=xr(Ye,me),Ue=No(t,Oe),We=t.getFormWrapper();Ln.setValue(We,Ue),po(a,(Ut,Bt)=>{Zo(Oe,Bt)&&Ut.set(Oe[Bt])})})},setEnabled:(me,pe)=>{pn(t,me).each(pe?l.enable:l.disable)},focus:me=>{pn(t,me).each($o.focus)},block:me=>{if(!Q(me))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(pe=>{wo(pe,h4,{message:me})})},unblock:()=>{i(me=>{rs(me,p4)})},showTab:me=>{i(pe=>{const Ye=t.getBody();Me.getState(Ye).get().exists(Ue=>Ue.isTabPanel())&&Fs.getCurrent(Ye).each(Ue=>{dc.showTab(Ue,me)})})},redial:me=>{i(pe=>{const Ye=t.getId(),Oe=s(me),Ue=Ly(Oe.internalDialog.buttons,a);pe.getSystem().broadcastOn([`${eS}-${Ye}`],Oe),pe.getSystem().broadcastOn([`${g5}-${Ye}`],Oe.internalDialog),pe.getSystem().broadcastOn([`${Y4}-${Ye}`],Oe.internalDialog),pe.getSystem().broadcastOn([`${h5}-${Ye}`],{...Oe.internalDialog,buttons:Ue}),ee.setData(Oe.initialData)})},close:()=>{i(me=>{rs(me,dy)})},toggleFullscreen:t.toggleFullscreen};return ee},ga=(t,s,a)=>{const i=Vn("dialog"),d=t.internalDialog,g=Vi(d.title,i,a),p=oo(d.size),S=We=>pn(Oe,We),E=qh(p.get()).toArray(),O=(We,Ut)=>(p.set(Ut.internalDialog.size),Yb(Ut.internalDialog.size,We),T.some(Ut)),F=Wd({body:d.body,initialData:d.initialData},i,a,S),z=Ly(d.buttons),X=lF(z),ee=Qn(z.length!==0,Sn({buttons:z},i,a)),me=uF(()=>Ue,jd(()=>Ye,a.shared.providers,s),a.shared.getSink),pe={id:i,header:g,body:F,footer:ee,extraClasses:E,extraBehaviours:[Me.config({channel:`${eS}-${i}`,updateState:O,initialData:t})],extraStyles:{}},Ye=Fg(pe,me,a),Oe=(()=>{const We=()=>{const Bt=Cc.getBody(Ye);return Fs.getCurrent(Bt).getOr(Bt)},Ut=()=>{pk(Ye,p.get())};return{getId:J(i),getRoot:J(Ye),getBody:()=>Cc.getBody(Ye),getFooter:()=>Cc.getFooter(Ye),getFormWrapper:We,toggleFullscreen:Ut}})(),Ue=xs(Oe,s.redial,X);return{dialog:Ye,instanceApi:Ue}},qd=(t,s,a,i=!1,d)=>{const g=Vn("dialog"),p=Vn("dialog-label"),S=Vn("dialog-content"),E=t.internalDialog,O=Kn=>pn(Hn,Kn),F=oo(E.size),z=qh(F.get()).toArray(),X=(Kn,Tn)=>(F.set(Tn.internalDialog.size),Yb(Tn.internalDialog.size,Kn),d(),T.some(Tn)),ee=qs(Ja({title:E.title,draggable:!0},g,p,a.shared.providers)),me=qs(wc({body:E.body,initialData:E.initialData},g,S,a,i,O)),pe=Ly(E.buttons),Ye=lF(pe),Oe=Qn(pe.length!==0,qs(kt({buttons:pe},g,a))),Ue=uF(()=>$t,{onBlock:Kn=>{Nm.block(Bt,(Tn,eo)=>{const vs=ee.getOpt(Bt).map(Hr=>nr(Hr.element));return Zd(Kn.message,eo,a.shared.providers,vs)})},onUnblock:()=>{Nm.unblock(Bt)},onClose:()=>s.closeWindow()},a.shared.getSink),We="tox-dialog-inline",Ut=os().os,Bt=li({dom:{tag:"div",classes:["tox-dialog",We,...z],attributes:{role:"dialog",...Ut.isMacOS()?{"aria-label":E.title}:{"aria-labelledby":p}}},eventOrder:{[mu()]:[Me.name(),ol.name()],[fu()]:["execute-on-form"],[Oi()]:["reflecting","execute-on-form"]},behaviours:hn([yo.config({mode:"cyclic",onEscape:Kn=>(rs(Kn,dy),T.some(!0)),useTabstopAt:Kn=>!Q2(Kn)&&(As(Kn)!=="button"||Ie(Kn,"disabled")!=="disabled"),firstTabstop:1}),Me.config({channel:`${eS}-${g}`,updateState:X,initialData:t}),$o.config({}),ts("execute-on-form",Ue.concat([up(Sd(),(Kn,Tn)=>{yo.focusIn(Kn)}),Gt(sh(),(Kn,Tn)=>{Kn.getSystem().broadcastOn([CA],{newFocus:Tn.event.newFocus})})])),Nm.config({getRoot:()=>T.some(Bt)}),Uo.config({}),bA({})]),components:[ee.asSpec(),me.asSpec(),...Oe.map(Kn=>Kn.asSpec()).toArray()]}),_n=()=>{pk(Bt,F.get())},Hn={getId:J(g),getRoot:J(Bt),getFooter:()=>Oe.map(Kn=>Kn.get(Bt)),getBody:()=>me.get(Bt),getFormWrapper:()=>{const Kn=me.get(Bt);return Fs.getCurrent(Kn).getOr(Kn)},toggleFullscreen:_n},$t=xs(Hn,s.redial,Ye);return{dialog:Bt,instanceApi:$t}};var Hy=tinymce.util.Tools.resolve("tinymce.util.URI");const lq=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Q(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(S=>{wo(S,h4,{message:p})})},unblock:()=>{s(p=>{rs(p,p4)})},close:()=>{s(p=>{rs(p,dy)})},sendMessage:p=>{s(S=>{S.getSystem().broadcastOn([p5],p)})}}},bk=["insertContent","setContent","execCommand","close","block","unblock"],Bg=t=>Te(t)&&bk.indexOf(t.mceAction)!==-1,u8=t=>!Bg(t)&&Te(t)&&Zo(t,"mceAction"),d8=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=yt(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},m8=(t,s,a,i)=>{const d=Vn("dialog"),g=Vi(t.title,d,i),p=Af(t),S=t.buttons.bind(We=>We.length===0?T.none():T.some(Sn({buttons:We},d,i))),E=Xb(()=>Ue,jd(()=>Oe,i.shared.providers,s)),O={...t.height.fold(()=>({}),We=>({height:We+"px","max-height":We+"px"})),...t.width.fold(()=>({}),We=>({width:We+"px","max-width":We+"px"}))},F=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],z=new Hy(t.url,{base_uri:new Hy(window.location.href)}),X=`${z.protocol}://${z.host}${z.port?":"+z.port:""}`,ee=oc(),me=(We,Ut)=>T.some(Ut),pe=[Me.config({channel:`${eS}-${d}`,updateState:me,initialData:t}),ts("messages",[Zr(()=>{const We=$i(Le.fromDom(window),"message",Ut=>{if(z.isSameOrigin(new Hy(Ut.raw.origin))){const Bt=Ut.raw.data;Bg(Bt)?d8(a,Ue,Bt):u8(Bt)&&t.onMessage(Ue,Bt)}});ee.set(We)}),fm(ee.clear)]),ol.config({channels:{[p5]:{onReceive:(We,Ut)=>{Jr(We.element,"iframe").each(Bt=>{const _n=Bt.dom.contentWindow;Lt(_n)&&_n.postMessage(Ut,X)})}}}})],Oe=Fg({id:d,header:g,body:p,footer:S,extraClasses:F,extraBehaviours:pe,extraStyles:O},E,i),Ue=lq(Oe);return{dialog:Oe,instanceApi:Ue}},f8=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Cc.hide(O),d()},p=qs(mS({name:"close-alert",text:"OK",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"cancel",t)),S=Kl(),E=id(g,s.providers),O=li(ra({lazySink:()=>s.getSink(),header:ql(S,E),body:ld(i,s.providers),footer:T.some(mo(_s([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Gt(zh,g)],eventOrder:{}}));Cc.show(O);const F=p.get(O);$o.focus(F)}}},uq=t=>{const s=t.shared;return{open:(i,d)=>{const g=X=>{Cc.hide(F),d(X)},p=qs(mS({name:"yes",text:"Yes",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"submit",t)),S=mS({name:"no",text:"No",primary:!1,buttonType:T.some("secondary"),align:"end",enabled:!0,icon:T.none()},"cancel",t),E=Kl(),O=id(()=>g(!1),s.providers),F=li(ra({lazySink:()=>s.getSink(),header:ql(E,O),body:ld(i,s.providers),footer:T.some(mo(_s([],[S,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Gt(zh,()=>g(!1)),Gt(H2,()=>g(!0))],eventOrder:{}}));Cc.show(F);const z=p.get(F);$o.focus(z)}}},Ss=(t,s)=>un(oa("data",s,t)),Ot=t=>B2(t,".tox-alert-dialog")||B2(t,".tox-confirm-dialog"),so=(t,s,a)=>s&&a?[]:[$r.config({contextual:{lazyContext:()=>T.some(Yr(Le.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>$h(t,i.element).map(g=>({bounds:xb(g),optScrollEnv:T.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:La(g.element).top})})).getOrThunk(()=>({bounds:Ba(),optScrollEnv:T.none()}))})],Vo=t=>{const s=t.editor,a=Sb(s),i=f8(t.backstages.dialog),d=uq(t.backstages.dialog),g=(me,pe,Ye)=>{if(!Tt(pe)){if(pe.inline==="toolbar")return O(me,t.backstages.popup.shared.anchors.inlineDialog(),Ye,pe);if(pe.inline==="bottom")return F(me,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ye,pe);if(pe.inline==="cursor")return O(me,t.backstages.popup.shared.anchors.cursor(),Ye,pe)}return E(me,Ye)},p=(me,pe)=>S(me,pe),S=(me,pe)=>{const Ye=Oe=>{const Ue=m8(Oe,{closeWindow:()=>{Cc.hide(Ue.dialog),pe(Ue.instanceApi)}},s,t.backstages.dialog);return Cc.show(Ue.dialog),Ue.instanceApi};return _.openUrl(Ye,me)},E=(me,pe)=>{const Ye=(Oe,Ue,We)=>{const Ut=Ue,_n=ga({dataValidator:We,initialData:Ut,internalDialog:Oe},{redial:_.redial,closeWindow:()=>{Cc.hide(_n.dialog),pe(_n.instanceApi)}},t.backstages.dialog);return Cc.show(_n.dialog),_n.instanceApi.setData(Ut),_n.instanceApi};return _.open(Ye,me)},O=(me,pe,Ye,Oe)=>{const Ue=(We,Ut,Bt)=>{const _n=Ss(Ut,Bt),Hn=Ys(),$t=t.backstages.popup.shared.header.isPositionedAtTop(),Kn={dataValidator:Bt,initialData:_n,internalDialog:We},Tn=()=>Hn.on(Zs=>{Qr.reposition(Zs),(!a||!$t)&&$r.refresh(Zs)}),eo=qd(Kn,{redial:_.redial,closeWindow:()=>{Hn.on(Qr.hide),s.off("ResizeEditor",Tn),Hn.clear(),Ye(eo.instanceApi)}},t.backstages.popup,Oe.ariaAttrs,Tn),vs=li(Qr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Oe.persistent?{event:"doNotDismissYet"}:{},...$t?{}:{fireRepositionEventInstead:{}},inlineBehaviours:hn([ts("window-manager-inline-events",[Gt(Uf(),(Zs,Jn)=>{rs(eo.dialog,zh)})]),...so(s,a,$t)]),isExtraPart:(Zs,Jn)=>Ot(Jn)}));Hn.set(vs);const Hr=()=>{const Zs=s.inline?es():Le.fromDom(s.getContainer()),Jn=Yr(Zs);return T.some(Jn)};return Qr.showWithinBounds(vs,Ml(eo.dialog),{anchor:pe},Hr),(!a||!$t)&&($r.refresh(vs),s.on("ResizeEditor",Tn)),eo.instanceApi.setData(_n),yo.focusIn(eo.dialog),eo.instanceApi};return _.open(Ue,me)},F=(me,pe,Ye,Oe)=>{const Ue=(We,Ut,Bt)=>{const _n=Ss(Ut,Bt),Hn=Ys(),$t=t.backstages.popup.shared.header.isPositionedAtTop(),Kn={dataValidator:Bt,initialData:_n,internalDialog:We},Tn=()=>Hn.on(Zs=>{Qr.reposition(Zs),$r.refresh(Zs)}),eo=qd(Kn,{redial:_.redial,closeWindow:()=>{Hn.on(Qr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Tn),Hn.clear(),Ye(eo.instanceApi)}},t.backstages.popup,Oe.ariaAttrs,Tn),vs=li(Qr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Oe.persistent?{event:"doNotDismissYet"}:{},...$t?{}:{fireRepositionEventInstead:{}},inlineBehaviours:hn([ts("window-manager-inline-events",[Gt(Uf(),(Zs,Jn)=>{rs(eo.dialog,zh)})]),$r.config({contextual:{lazyContext:()=>T.some(Yr(Le.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Zs=>$h(s,Zs.element).map(ln=>({bounds:xb(ln),optScrollEnv:T.some({currentScrollTop:ln.element.dom.scrollTop,scrollElmTop:La(ln.element).top})})).getOrThunk(()=>({bounds:Ba(),optScrollEnv:T.none()}))})]),isExtraPart:(Zs,Jn)=>Ot(Jn)}));Hn.set(vs);const Hr=()=>t.backstages.popup.shared.getSink().toOptional().bind(Zs=>{const Jn=$h(s,Zs.element),ln=15,Rn=Jn.map(ho=>xb(ho)).getOr(Ba()),Io=Yr(Le.fromDom(s.getContentAreaContainer())),Do=pd(Io,Rn);return T.some(Wr(Do.x,Do.y,Do.width,Do.height-ln))});return Qr.showWithinBounds(vs,Ml(eo.dialog),{anchor:pe},Hr),$r.refresh(vs),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Tn),eo.instanceApi.setData(_n),yo.focusIn(eo.dialog),eo.instanceApi};return _.open(Ue,me)};return{open:g,openUrl:p,alert:(me,pe)=>{i.open(me,pe)},close:me=>{me.close()},confirm:(me,pe)=>{d.open(me,pe)}}},Wa=t=>{tB(t),_9(t),yj(t)};var ll=()=>{Bu.add("silver",t=>{Wa(t);let s=()=>Ba();const{dialogs:a,popups:i,renderUI:d}=vG(t,{getPopupSinkBounds:()=>s()}),g=()=>{const O=d();return $h(t,i.getMothership().element).each(z=>{s=()=>xb(z)}),O};vH.register(t,i.backstage.shared);const p=Vo({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),S=Ys(),E=()=>D7(t,{backstage:i.backstage},i.getMothership(),S);return{renderUI:g,getWindowManagerImpl:J(p),getNotificationManagerImpl:E}})};ll()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var h=tinymce.util.Tools.resolve("tinymce.ModelManager");const C=(l,m,b)=>{var y;return b(l,m.prototype)?!0:((y=l.constructor)===null||y===void 0?void 0:y.name)===m.name},D=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&C(l,String,(b,y)=>y.isPrototypeOf(b))?"string":m},N=l=>m=>D(m)===l,W=l=>m=>typeof m===l,Y=l=>m=>l===m,de=N("string"),Q=N("object"),Te=N("array"),ct=Y(null),Xe=W("boolean"),wt=Y(void 0),yt=l=>l==null,Tt=l=>!yt(l),_t=W("function"),Lt=W("number"),gt=()=>{},st=(l,m)=>(...b)=>l(m.apply(null,b)),Qe=(l,m)=>b=>l(m(b)),ie=l=>()=>l,St=l=>l,Wn=(l,m)=>l===m;function vt(l,...m){return(...b)=>{const y=m.concat(b);return l.apply(null,y)}}const J=l=>m=>!l(m),Yt=l=>()=>{throw new Error(l)},On=l=>l(),gn=ie(!1),rt=ie(!0);class we{constructor(m,b){this.tag=m,this.value=b}static some(m){return new we(!0,m)}static none(){return we.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?we.some(m(this.value)):we.none()}bind(m){return this.tag?m(this.value):we.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:we.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Tt(m)?we.some(m):we.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}we.singletonNone=new we(!1);const Ro=Array.prototype.slice,Ve=Array.prototype.indexOf,je=Array.prototype.push,T=(l,m)=>Ve.call(l,m),it=(l,m)=>T(l,m)>-1,ve=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];if(m(k,b))return!0}return!1},Rt=(l,m)=>{const b=[];for(let y=0;y<l;y++)b.push(m(y));return b},It=(l,m)=>{const b=l.length,y=new Array(b);for(let k=0;k<b;k++){const B=l[k];y[k]=m(B,k)}return y},_e=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];m(k,b)}},Dt=(l,m)=>{for(let b=l.length-1;b>=0;b--){const y=l[b];m(y,b)}},An=(l,m)=>{const b=[],y=[];for(let k=0,B=l.length;k<B;k++){const Z=l[k];(m(Z,k)?b:y).push(Z)}return{pass:b,fail:y}},nt=(l,m)=>{const b=[];for(let y=0,k=l.length;y<k;y++){const B=l[y];m(B,y)&&b.push(B)}return b},rn=(l,m,b)=>(Dt(l,(y,k)=>{b=m(b,y,k)}),b),Ne=(l,m,b)=>(_e(l,(y,k)=>{b=m(b,y,k)}),b),dt=(l,m,b)=>{for(let y=0,k=l.length;y<k;y++){const B=l[y];if(m(B,y))return we.some(B);if(b(B,y))break}return we.none()},V=(l,m)=>dt(l,m,gn),Ao=(l,m)=>{for(let b=0,y=l.length;b<y;b++){const k=l[b];if(m(k,b))return we.some(b)}return we.none()},Ct=l=>{const m=[];for(let b=0,y=l.length;b<y;++b){if(!Te(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);je.apply(m,l[b])}return m},jt=(l,m)=>Ct(It(l,m)),tt=(l,m)=>{for(let b=0,y=l.length;b<y;++b){const k=l[b];if(m(k,b)!==!0)return!1}return!0},re=l=>{const m=Ro.call(l,0);return m.reverse(),m},I=(l,m)=>{const b={};for(let y=0,k=l.length;y<k;y++){const B=l[y];b[String(B)]=m(B,y)}return b},G=(l,m)=>{const b=Ro.call(l,0);return b.sort(m),b},le=(l,m)=>m>=0&&m<l.length?we.some(l[m]):we.none(),L=l=>le(l,0),ye=l=>le(l,l.length-1),He=(l,m)=>{for(let b=0;b<l.length;b++){const y=m(l[b],b);if(y.isSome())return y}return we.none()},ke=Object.keys,lt=Object.hasOwnProperty,Je=(l,m)=>{const b=ke(l);for(let y=0,k=b.length;y<k;y++){const B=b[y],Z=l[B];m(Z,B)}},cn=(l,m)=>Wt(l,(b,y)=>({k:y,v:m(b,y)})),Wt=(l,m)=>{const b={};return Je(l,(y,k)=>{const B=m(y,k);b[B.k]=B.v}),b},wn=l=>(m,b)=>{l[b]=m},ot=(l,m,b,y)=>{Je(l,(k,B)=>{(m(k,B)?b:y)(k,B)})},mt=(l,m)=>{const b={};return ot(l,m,wn(b),gt),b},Xt=(l,m)=>{const b=[];return Je(l,(y,k)=>{b.push(m(y,k))}),b},sn=l=>Xt(l,St),lo=(l,m)=>po(l,m)?we.from(l[m]):we.none(),po=(l,m)=>lt.call(l,m),ro=(l,m)=>po(l,m)&&l[m]!==void 0&&l[m]!==null,Ds=l=>{for(const m in l)if(lt.call(l,m))return!1;return!0},to=typeof window<"u"?window:Function("return this;")(),Qo=(l,m)=>{let b=m??to;for(let y=0;y<l.length&&b!==void 0&&b!==null;++y)b=b[l[y]];return b},ss=(l,m)=>{const b=l.split(".");return Qo(b,m)},Lo=(l,m)=>ss(l,m),ir=(l,m)=>{const b=Lo(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},xo=Object.getPrototypeOf,zr=l=>ir("HTMLElement",l),on=l=>{const m=ss("ownerDocument.defaultView",l);return Q(l)&&(zr(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(xo(l).constructor.name))},Zo=8,gr=9,tr=11,Rr=1,_r=3,ys=l=>l.dom.nodeName.toLowerCase(),ea=l=>l.dom.nodeType,Gr=l=>m=>ea(m)===l,bs=l=>ea(l)===Zo||ys(l)==="#comment",Qn=l=>Ns(l)&&on(l.dom),Ns=Gr(Rr),Ke=Gr(_r),xt=Gr(gr),xn=Gr(tr),Bn=l=>m=>Ns(m)&&ys(m)===l,Ho=(l,m,b)=>{if(de(b)||Xe(b)||Lt(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},as=(l,m,b)=>{Ho(l.dom,m,b)},pr=(l,m)=>{const b=l.dom;Je(m,(y,k)=>{Ho(b,k,y)})},Sr=(l,m)=>{Je(m,(b,y)=>{b.fold(()=>{Ce(l,y)},k=>{Ho(l.dom,y,k)})})},lr=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},Ae=(l,m)=>we.from(lr(l,m)),Ce=(l,m)=>{l.dom.removeAttribute(m)},ht=l=>Ne(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),Ft=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const k="HTML does not have a single root node";throw console.error(k,l),new Error(k)}return Bo(y.childNodes[0])},Yn=(l,m)=>{const y=(m||document).createElement(l);return Bo(y)},Co=(l,m)=>{const y=(m||document).createTextNode(l);return Bo(y)},Bo=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Le={fromHtml:Ft,fromTag:Yn,fromText:Co,fromDom:Bo,fromPoint:(l,m,b)=>we.from(l.dom.elementFromPoint(m,b)).map(Bo)},Fo=(l,m)=>{const b=l.dom;if(b.nodeType!==Rr)return!1;{const y=b;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Re=l=>l.nodeType!==Rr&&l.nodeType!==gr&&l.nodeType!==tr||l.childElementCount===0,Be=(l,m)=>{const b=m===void 0?document:m.dom;return Re(b)?[]:It(b.querySelectorAll(l),Le.fromDom)},qt=(l,m)=>{const b=m===void 0?document:m.dom;return Re(b)?we.none():we.from(b.querySelector(l)).map(Le.fromDom)},tn=(l,m)=>l.dom===m.dom,Dn=(l,m)=>{const b=l.dom,y=m.dom;return b===y?!1:b.contains(y)},Zn=Fo,Gn=l=>Le.fromDom(l.dom.ownerDocument),zn=l=>xt(l)?l:Gn(l),no=l=>Le.fromDom(zn(l).dom.documentElement),bo=l=>Le.fromDom(zn(l).dom.defaultView),hs=l=>we.from(l.dom.parentNode).map(Le.fromDom),As=l=>we.from(l.dom.parentElement).map(Le.fromDom),Ls=(l,m)=>{const b=_t(m)?m:gn;let y=l.dom;const k=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const B=y.parentNode,Z=Le.fromDom(B);if(k.push(Z),b(Z)===!0)break;y=B}return k},wa=l=>we.from(l.dom.previousSibling).map(Le.fromDom),la=l=>we.from(l.dom.nextSibling).map(Le.fromDom),fo=l=>It(l.dom.childNodes,Le.fromDom),is=(l,m)=>{const b=l.dom.childNodes;return we.from(b[m]).map(Le.fromDom)},ms=l=>is(l,0),aa=(l,m)=>{hs(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},ta=(l,m)=>{la(l).fold(()=>{hs(l).each(k=>{dr(k,m)})},y=>{aa(y,m)})},Fr=(l,m)=>{ms(l).fold(()=>{dr(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},dr=(l,m)=>{l.dom.appendChild(m.dom)},_l=(l,m,b)=>{is(l,b).fold(()=>{dr(l,m)},y=>{aa(y,m)})},ec=(l,m)=>{aa(l,m),dr(m,l)},ks=(l,m)=>{_e(m,(b,y)=>{const k=y===0?l:m[y-1];ta(k,b)})},Sa=(l,m)=>{_e(m,b=>{dr(l,b)})},ha=l=>{l.dom.textContent="",_e(fo(l),m=>{Vr(m)})},Vr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},pi=l=>{const m=fo(l);m.length>0&&ks(l,m),Vr(l)},xa=(l,m)=>Le.fromDom(l.dom.cloneNode(m)),Fa=l=>xa(l,!1),fc=l=>xa(l,!0),tc=(l,m)=>{const b=Le.fromTag(m),y=ht(l);return pr(b,y),b},Wi=(l,m)=>{const b=tc(l,m),y=fo(fc(l));return Sa(b,y),b},ni=(l,m)=>{const b=tc(l,m);ta(l,b);const y=fo(l);return Sa(b,y),Vr(l),b},Uc=["tfoot","thead","tbody","colgroup"],Na=l=>it(Uc,l),Nr=(l,m)=>({rows:l,columns:m}),Ei=(l,m)=>({row:l,column:m}),Zi=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Ti=(l,m,b,y)=>({element:l,rowspan:m,colspan:b,isNew:y}),Ai=(l,m,b,y,k,B)=>({element:l,rowspan:m,colspan:b,row:y,column:k,isLocked:B}),Ur=(l,m,b)=>({element:l,cells:m,section:b}),Za=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),te=(l,m,b)=>({element:l,isNew:m,isLocked:b}),Se=(l,m,b,y)=>({element:l,cells:m,section:b,isNew:y}),Ge=(l,m,b,y)=>({startRow:l,startCol:m,finishRow:b,finishCol:y}),Ht=(l,m,b)=>({element:l,colspan:m,column:b}),dn=(l,m)=>({element:l,columns:m}),$n=l=>xn(l)&&Tt(l.dom.host),es=l=>Le.fromDom(l.dom.getRootNode()),Ws=l=>{const m=es(l);return $n(m)?we.some(m):we.none()},ls=l=>Le.fromDom(l.dom.host),q=l=>{if(Tt(l.target)){const m=Le.fromDom(l.target);if(Ns(m)&&xe(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return L(b)}}return we.from(l.target)},xe=l=>Tt(l.dom.shadowRoot),Ie=l=>{const m=Ke(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return Ws(Le.fromDom(m)).fold(()=>b.body.contains(m),Qe(Ie,ls))},nn=()=>zo(Le.fromDom(document)),zo=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Le.fromDom(m)},$=(l,m,b)=>nt(Ls(l,b),m),se=(l,m)=>nt(fo(l),m),De=(l,m)=>{let b=[];return _e(fo(l),y=>{m(y)&&(b=b.concat([y])),b=b.concat(De(y,m))}),b},at=(l,m,b)=>$(l,y=>Fo(y,m),b),pt=(l,m)=>se(l,b=>Fo(b,m)),vo=(l,m)=>Be(m,l);var Ps=(l,m,b,y,k)=>l(b,y)?we.some(b):_t(k)&&k(b)?we.none():m(b,y,k);const Os=(l,m,b)=>{let y=l.dom;const k=_t(b)?b:gn;for(;y.parentNode;){y=y.parentNode;const B=Le.fromDom(y);if(m(B))return we.some(B);if(k(B))break}return we.none()},Qt=(l,m,b)=>Ps((k,B)=>B(k),Os,l,m,b),Hs=(l,m)=>{const b=k=>m(Le.fromDom(k));return V(l.dom.childNodes,b).map(Le.fromDom)},pa=(l,m)=>{const b=y=>{for(let k=0;k<y.childNodes.length;k++){const B=Le.fromDom(y.childNodes[k]);if(m(B))return we.some(B);const Z=b(y.childNodes[k]);if(Z.isSome())return Z}return we.none()};return b(l.dom)},gc=(l,m,b)=>Os(l,y=>Fo(y,m),b),qo=(l,m)=>Hs(l,b=>Fo(b,m)),hc=(l,m)=>qt(m,l),qr=(l,m,b)=>Ps((k,B)=>Fo(k,B),gc,l,m,b),eu=(l,m,b=Wn)=>l.exists(y=>b(y,m)),nr=l=>{const m=[],b=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(b);return m},ji=(l,m)=>l!=null?m(l):we.none(),Qd=(l,m)=>l?we.some(m):we.none(),Of=(l,m)=>l.substring(m),Dr=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,em=(l,m)=>La(l,m)?Of(l,m.length):l,ca=(l,m,b=0,y)=>{const k=l.indexOf(m,b);return k!==-1?wt(y)?!0:k+m.length<=y:!1},La=(l,m)=>Dr(l,m,0),bi=(l,m)=>Dr(l,m,l.length-m.length),Tu=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),ae=l=>l.length>0,fe=l=>{const m=parseFloat(l);return isNaN(m)?we.none():we.some(m)},ut=l=>l.style!==void 0&&_t(l.style.getPropertyValue),zt=(l,m,b)=>{if(!de(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);ut(l)&&l.style.setProperty(m,b)},go=(l,m)=>{ut(l)&&l.style.removeProperty(m)},Mo=(l,m,b)=>{const y=l.dom;zt(y,m,b)},Bs=(l,m)=>{const b=l.dom;Je(m,(y,k)=>{zt(b,k,y)})},Js=(l,m)=>{const b=l.dom,k=window.getComputedStyle(b).getPropertyValue(m);return k===""&&!Ie(l)?Ha(b,m):k},Ha=(l,m)=>ut(l)?l.style.getPropertyValue(m):"",pc=(l,m)=>{const b=l.dom,y=Ha(b,m);return we.from(y).filter(k=>k.length>0)},ia=(l,m)=>{const b=l.dom;go(b,m),eu(Ae(l,"style").map(Tu),"")&&Ce(l,"style")},bc=(l,m)=>{const b=l.dom,y=m.dom;ut(b)&&ut(y)&&(y.style.cssText=b.style.cssText)},or=(l,m,b=0)=>Ae(l,m).map(y=>parseInt(y,10)).getOr(b),Sc=(l,m)=>or(l,m,1),nc=l=>Bn("col")(l)?or(l,"span",1)>1:Sc(l,"colspan")>1,Kr=l=>Sc(l,"rowspan")>1,Br=(l,m)=>parseInt(Js(l,m),10),br=ie(10),Au=ie(10),ku=(l,m)=>_u(l,m,rt),_u=(l,m,b)=>jt(fo(l),y=>Fo(y,m)?b(y)?[y]:[]:_u(y,m,b)),$m=(l,m,b=gn)=>{if(b(m))return we.none();if(it(l,ys(m)))return we.some(m);const y=k=>Fo(k,"table")||b(k);return gc(m,l.join(","),y)},Du=(l,m)=>$m(["td","th"],l,m),Gi=l=>ku(l,"th,td"),Im=l=>Fo(l,"colgroup")?pt(l,"col"):jt(Lg(l),m=>pt(m,"col")),ba=(l,m)=>qr(l,"table",m),Lm=l=>ku(l,"tr"),Lg=l=>ba(l).fold(ie([]),m=>pt(m,"colgroup")),Dl=(l,m)=>It(l,b=>{if(ys(b)==="colgroup"){const y=It(Im(b),k=>{const B=or(k,"span",1);return Zi(k,1,B)});return Ur(b,y,"colgroup")}else{const y=It(Gi(b),k=>{const B=or(k,"rowspan",1),Z=or(k,"colspan",1);return Zi(k,B,Z)});return Ur(b,y,m(b))}}),Hg=l=>hs(l).map(m=>{const b=ys(m);return Na(b)?b:"tbody"}).getOr("tbody"),Ou=l=>{const m=Lm(l),y=[...Lg(l),...m];return Dl(y,Hg)},zg=(l,m)=>Dl(l,()=>m),tu=l=>{let m=!1,b;return(...y)=>(m||(m=!0,b=l.apply(null,y)),b)},Vg=(l,m,b,y)=>{const k=l.isiOS()&&/ipad/i.test(b)===!0,B=l.isiOS()&&!k,Z=l.isiOS()||l.isAndroid(),ne=Z||y("(pointer:coarse)"),he=k||!B&&Z&&y("(min-device-width:768px)"),Pe=B||Z&&!he,ft=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,fn=!Pe&&!he&&!ft;return{isiPad:ie(k),isiPhone:ie(B),isTablet:ie(he),isPhone:ie(Pe),isTouch:ie(ne),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ie(ft),isDesktop:ie(fn)}},Hm=(l,m)=>{for(let b=0;b<l.length;b++){const y=l[b];if(y.test(m))return y}},Rf=(l,m)=>{const b=Hm(l,m);if(!b)return{major:0,minor:0};const y=k=>Number(m.replace(b,"$"+k));return Fe(y(1),y(2))},Ru=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?Ff():Rf(l,b)},Ff=()=>Fe(0,0),Fe=(l,m)=>({major:l,minor:m}),nu={nu:Fe,detect:Ru,unknown:Ff},Ol=(l,m)=>He(m.brands,b=>{const y=b.brand.toLowerCase();return V(l,k=>{var B;return y===((B=k.brand)===null||B===void 0?void 0:B.toLowerCase())}).map(k=>({current:k.name,version:nu.nu(parseInt(b.version,10),0)}))}),Ug=(l,m)=>{const b=String(m).toLowerCase();return V(l,y=>y.search(b))},S1=(l,m)=>Ug(l,m).map(b=>{const y=nu.detect(b.versionRegexes,m);return{current:b.name,version:y}}),Fu=(l,m)=>Ug(l,m).map(b=>{const y=nu.detect(b.versionRegexes,m);return{current:b.name,version:y}}),os=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ea=l=>m=>ca(m,l),qi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ca(l,"edge/")&&ca(l,"chrome")&&ca(l,"safari")&&ca(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,os],search:l=>ca(l,"chrome")&&!ca(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ca(l,"msie")||ca(l,"trident")},{name:"Opera",versionRegexes:[os,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ea("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ea("firefox")},{name:"Safari",versionRegexes:[os,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ca(l,"safari")||ca(l,"mobile/"))&&ca(l,"applewebkit")}],Nu=[{name:"Windows",search:Ea("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ca(l,"iphone")||ca(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ea("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ea("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ea("linux"),versionRegexes:[]},{name:"Solaris",search:Ea("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ea("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ea("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],zm={browsers:ie(qi),oses:ie(Nu)},tm="Edge",xc="Chromium",Vm="IE",ou="Opera",Um="Firefox",su="Safari",Wc=()=>Wg({current:void 0,version:nu.unknown()}),Wg=l=>{const m=l.current,b=l.version,y=k=>()=>m===k;return{current:m,version:b,isEdge:y(tm),isChromium:y(xc),isIE:y(Vm),isOpera:y(ou),isFirefox:y(Um),isSafari:y(su)}},nm={unknown:Wc,nu:Wg,edge:ie(tm),chromium:ie(xc),ie:ie(Vm),opera:ie(ou),firefox:ie(Um),safari:ie(su)},ja="Windows",oi="iOS",Mc="Android",gd="Linux",om="macOS",Zg="Solaris",sm="FreeBSD",ul="ChromeOS",Wm=()=>Xh({current:void 0,version:nu.unknown()}),Xh=l=>{const m=l.current,b=l.version,y=k=>()=>m===k;return{current:m,version:b,isWindows:y(ja),isiOS:y(oi),isAndroid:y(Mc),isMacOS:y(om),isLinux:y(gd),isSolaris:y(Zg),isFreeBSD:y(sm),isChromeOS:y(ul)}},jg={unknown:Wm,nu:Xh,windows:ie(ja),ios:ie(oi),android:ie(Mc),linux:ie(gd),macos:ie(om),solaris:ie(Zg),freebsd:ie(sm),chromeos:ie(ul)},Nf={detect:(l,m,b)=>{const y=zm.browsers(),k=zm.oses(),B=m.bind(he=>Ol(y,he)).orThunk(()=>S1(y,l)).fold(nm.unknown,nm.nu),Z=Fu(k,l).fold(jg.unknown,jg.nu),ne=Vg(Z,B,l,b);return{browser:B,os:Z,deviceType:ne}}},rm=l=>window.matchMedia(l).matches;let hd=tu(()=>Nf.detect(window.navigator.userAgent,we.from(window.navigator.userAgentData),rm));const am=()=>hd(),Wr=(l,m)=>{const b=(ne,he)=>{if(!Lt(he)&&!he.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+he);const Pe=ne.dom;ut(Pe)&&(Pe.style[l]=he+"px")},y=ne=>{const he=m(ne);if(he<=0||he===null){const Pe=Js(ne,l);return parseFloat(Pe)||0}return he},k=y,B=(ne,he)=>Ne(he,(Pe,ft)=>{const fn=Js(ne,ft),Fn=fn===void 0?0:parseInt(fn,10);return isNaN(Fn)?Pe:Pe+Fn},0);return{set:b,get:y,getOuter:k,aggregate:B,max:(ne,he,Pe)=>{const ft=B(ne,Pe);return he>ft?he-ft:0}}},Yr=(l,m)=>fe(l).getOr(m),ki=(l,m,b)=>Yr(Js(l,m),b),pd=(l,m,b,y)=>{const k=ki(l,`padding-${b}`,0),B=ki(l,`padding-${y}`,0),Z=ki(l,`border-${b}-width`,0),ne=ki(l,`border-${y}-width`,0);return m-k-B-Z-ne},Gg=(l,m)=>{const b=l.dom,y=b.getBoundingClientRect().width||b.offsetWidth;return m==="border-box"?y:pd(l,y,"left","right")},Ba=l=>ki(l,"height",l.dom.offsetHeight),oo=l=>ki(l,"width",l.dom.offsetWidth),ru=l=>Gg(l,"content-box"),Bf=Wr("width",l=>l.dom.offsetWidth),oc=l=>Bf.get(l),Ys=l=>Bf.getOuter(l),Bu=ru,qg=oo,cm=(l,m,b)=>{const y=l.cells,k=y.slice(0,m),B=y.slice(m),Z=k.concat(b).concat(B);return Ma(l,Z)},Jh=(l,m,b)=>cm(l,m,[b]),Yo=(l,m,b)=>{const y=l.cells;y[m]=b},Ma=(l,m)=>Se(l.element,m,l.section,l.isNew),bd=(l,m)=>{const b=l.cells,y=It(b,m);return Se(l.element,y,l.section,l.isNew)},vc=(l,m)=>l.cells[m],Zc=(l,m)=>vc(l,m).element,_i=l=>l.cells.length,Ga=l=>{const m=An(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},Pc=(l,m,b)=>{const y=It(l.cells,b);return Se(m(l.element),y,l.section,!0)},yi="data-snooker-locked-cols",Mf=l=>Ae(l,yi).bind(m=>we.from(m.match(/\d+/g))).map(m=>I(m,rt)),na=l=>{const m=Ne(Ga(l).rows,(y,k)=>(_e(k.cells,(B,Z)=>{B.isLocked&&(y[Z]=!0)}),y),{}),b=Xt(m,(y,k)=>parseInt(k,10));return G(b)},vd=(l,m)=>l+","+m,ua=(l,m,b)=>we.from(l.access[vd(m,b)]),Mu=(l,m,b)=>{const y=yd(l,k=>b(m,k.element));return y.length>0?we.some(y[0]):we.none()},yd=(l,m)=>{const b=jt(l.all,y=>y.cells);return nt(b,m)},mr=l=>{const m={};let b=0;return _e(l.cells,y=>{const k=y.colspan;Rt(k,B=>{const Z=b+B;m[Z]=Ht(y.element,k,Z)}),b+=k}),m},Ki=l=>{const m={},b=[],k=L(l).map(kn=>kn.element).bind(ba).bind(Mf).getOr({});let B=0,Z=0,ne=0;const{pass:he,fail:Pe}=An(l,kn=>kn.section==="colgroup");_e(Pe,kn=>{const Cn=[];_e(kn.cells,Xn=>{let an=0;for(;m[vd(ne,an)]!==void 0;)an++;const bn=ro(k,an.toString()),Oo=Ai(Xn.element,Xn.rowspan,Xn.colspan,ne,an,bn);for(let Po=0;Po<Xn.colspan;Po++)for(let ao=0;ao<Xn.rowspan;ao++){const sa=ne+ao,rr=an+Po,_a=vd(sa,rr);m[_a]=Oo,Z=Math.max(Z,rr+1)}Cn.push(Oo)}),B++,b.push(Ur(kn.element,Cn,kn.section)),ne++});const{columns:ft,colgroups:fn}=ye(he).map(kn=>{const Cn=mr(kn);return{colgroups:[dn(kn.element,sn(Cn))],columns:Cn}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Nr(B,Z),access:m,all:b,columns:ft,colgroups:fn}},us={fromTable:l=>{const m=Ou(l);return Ki(m)},generate:Ki,getAt:ua,findItem:Mu,filterItems:yd,justCells:l=>jt(l.all,m=>m.cells),justColumns:l=>sn(l.columns),hasColumns:l=>ke(l.columns).length>0,getColumnAt:(l,m)=>we.from(l.columns[m])},Cd=(l,m=rt)=>{const b=l.grid,y=Rt(b.columns,St),k=Rt(b.rows,St);return It(y,B=>Zm(()=>jt(k,Pe=>us.getAt(l,Pe,B).filter(ft=>ft.column===B).toArray()),Pe=>Pe.colspan===1&&m(Pe.element),()=>us.getAt(l,0,B)))},Zm=(l,m,b)=>{const y=l();return V(y,m).orThunk(()=>we.from(y[0]).orThunk(b)).map(Z=>Z.element)},Pf=l=>{const m=l.grid,b=Rt(m.rows,St),y=Rt(m.columns,St);return It(b,k=>Zm(()=>jt(y,he=>us.getAt(l,k,he).filter(Pe=>Pe.row===k).fold(ie([]),Pe=>[Pe])),he=>he.rowspan===1,()=>us.getAt(l,k,0)))},A=(l,m)=>{if(m<0||m>=l.length-1)return we.none();const b=l[m].fold(()=>{const k=re(l.slice(0,m));return He(k,(B,Z)=>B.map(ne=>({value:ne,delta:Z+1})))},k=>we.some({value:k,delta:0})),y=l[m+1].fold(()=>{const k=l.slice(m+1);return He(k,(B,Z)=>B.map(ne=>({value:ne,delta:Z+1})))},k=>we.some({value:k,delta:1}));return b.bind(k=>y.map(B=>{const Z=B.delta+k.delta;return Math.abs(B.value-k.value)/Z}))},M=(l,m)=>b=>K(b)==="rtl"?m:l,K=l=>Js(l,"direction")==="rtl"?"rtl":"ltr",Ee=Wr("height",l=>{const m=l.dom;return Ie(l)?m.getBoundingClientRect().height:m.offsetHeight}),$e=l=>Ee.get(l),en=l=>Ee.getOuter(l),Eo=Ba,Xo=(l,m)=>({left:l,top:m,translate:(y,k)=>Xo(l+y,m+k)}),_o=Xo,To=l=>{const m=l.getBoundingClientRect();return _o(m.left,m.top)},Er=(l,m)=>l!==void 0?l:m!==void 0?m:0,va=l=>{const m=l.dom.ownerDocument,b=m.body,y=m.defaultView,k=m.documentElement;if(b===l.dom)return _o(b.offsetLeft,b.offsetTop);const B=Er(y==null?void 0:y.pageYOffset,k.scrollTop),Z=Er(y==null?void 0:y.pageXOffset,k.scrollLeft),ne=Er(k.clientTop,b.clientTop),he=Er(k.clientLeft,b.clientLeft);return Di(l).translate(Z-he,B-ne)},Di=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?_o(y.offsetLeft,y.offsetTop):Ie(l)?To(m):_o(0,0)},cu=(l,m)=>({row:l,y:m}),jm=(l,m)=>({col:l,x:m}),Kg=l=>va(l).left+Ys(l),$c=l=>va(l).left,Yg=(l,m)=>jm(l,$c(m)),c0=(l,m)=>jm(l,Kg(m)),ep=l=>va(l).top,Ec=(l,m)=>cu(l,ep(m)),tp=(l,m)=>cu(l,ep(m)+en(m)),za=(l,m,b)=>{if(b.length===0)return[];const y=It(b.slice(1),(B,Z)=>B.map(ne=>l(Z,ne))),k=b[b.length-1].map(B=>m(b.length-1,B));return y.concat([k])},i0=l=>-l,ri={delta:St,positions:l=>za(Ec,tp,l),edge:ep},$f=M({delta:St,edge:$c,positions:l=>za(Yg,c0,l)},{delta:i0,edge:Kg,positions:l=>za(c0,Yg,l)}),Xg={delta:(l,m)=>$f(m).delta(l,m),positions:(l,m)=>$f(m).positions(l,m),edge:l=>$f(l).edge(l)},np={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},x1=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),y="\\.",k=ne=>`(?:${ne})?`,Z=`[+-]?(?:${["Infinity",l+y+k(l)+k(b),y+l+k(b),l+k(b)].join("|")})`;return new RegExp(`^(${Z})(.*)$`)})(),Rl=(l,m)=>ve(m,b=>ve(np[b],y=>l===y)),$u=(l,m)=>we.from(x1.exec(l)).bind(y=>{const k=Number(y[1]),B=y[2];return Rl(B,m)?we.some({value:k,unit:B}):we.none()}),im=/(\d+(\.\d+)?)%/,Mn=/(\d+(\.\d+)?)px|em/,dl=Bn("col"),op=Bn("tr"),Gm=(l,m,b)=>{const y=As(l).getOrThunk(()=>zo(Gn(l)));return m(l)/b(y)*100},Fl=(l,m)=>{Mo(l,"width",m+"px")},Jg=(l,m)=>{Mo(l,"width",m+"%")},lm=(l,m)=>{Mo(l,"height",m+"px")},qm=l=>{ia(l,"height")},Qg=l=>Eo(l)+"px",iu=(l,m,b,y)=>{const k=ba(l).map(B=>{const Z=b(B);return Math.floor(m/100*Z)}).getOr(m);return y(l,k),k},l0=(l,m,b,y)=>{const k=parseFloat(l);return bi(l,"%")&&ys(m)!=="table"?iu(m,k,b,y):k},oa=l=>{const m=Qg(l);return m?l0(m,l,$e,lm):$e(l)},un=(l,m,b)=>{const y=b(l),k=Sc(l,m);return y/k},jc=(l,m)=>pc(l,m).orThunk(()=>Ae(l,m).map(b=>b+"px")),lu=l=>jc(l,"width"),sc=l=>jc(l,"height"),If=l=>Gm(l,oc,Bu),qa=l=>dl(l)?oc(l):qg(l),zs=l=>op(l)?$e(l):un(l,"rowspan",oa),sp=l=>lu(l).bind(b=>$u(b,["fixed","relative","empty"])),Zt=(l,m,b)=>{Mo(l,"width",m+b)},Vs=l=>oc(l)+"px",eh=l=>$e(l)+"px",Va=l=>Gm(l,oc,Bu)+"%",Gc=l=>lu(l).exists(m=>im.test(m)),u0=l=>lu(l).exists(m=>Mn.test(m)),Xi=l=>lu(l).isNone(),eC=ie(im),wd=Bn("col"),d0=l=>lu(l).getOrThunk(()=>qa(l)+"px"),Ji=l=>sc(l).getOrThunk(()=>zs(l)+"px"),$s=l=>It(us.justColumns(l),m=>we.from(m.element)),Iu=l=>{const m=am().browser,b=m.isChromium()||m.isFirefox();return wd(l)?b:!0},Km=(l,m,b,y,k,B)=>l.filter(y).fold(()=>B(A(b,m)),Z=>k(Z)),Ka=(l,m,b,y)=>{const k=Cd(l),B=us.hasColumns(l)?$s(l):k,Z=[we.some(Xg.edge(m))].concat(It(Xg.positions(k,m),he=>he.map(Pe=>Pe.x))),ne=J(nc);return It(B,(he,Pe)=>Km(he,Pe,Z,ne,ft=>{if(Iu(ft))return b(ft);{const fn=ji(k[Pe],St);return Km(fn,Pe,Z,ne,Fn=>y(we.some(oc(Fn))),y)}},y))},rp=l=>l.map(m=>m+"px").getOr(""),Lu=(l,m)=>Ka(l,m,d0,rp),Hu=(l,m,b)=>Ka(l,m,If,y=>y.fold(()=>b.minCellWidth(),k=>k/b.pixelWidth()*100)),Or=(l,m,b)=>Ka(l,m,qa,y=>y.getOrThunk(b.minCellWidth)),Lf=(l,m,b,y)=>{const k=Pf(l),B=It(l.all,ne=>we.some(ne.element)),Z=[we.some(ri.edge(m))].concat(It(ri.positions(k,m),ne=>ne.map(he=>he.y)));return It(B,(ne,he)=>Km(ne,he,Z,rt,b,y))},et=(l,m)=>Lf(l,m,zs,b=>b.getOrThunk(Au)),Qi=(l,m)=>Lf(l,m,Ji,rp),Hf=(l,m)=>()=>Ie(l)?m(l):parseFloat(pc(l,"width").getOr("0")),qc=l=>{const m=Hf(l,oc),b=ie(0);return{width:m,pixelWidth:m,getWidths:(k,B)=>Or(k,l,B),getCellDelta:b,singleColumnWidth:ie([0]),minCellWidth:b,setElementWidth:gt,adjustTableWidth:gt,isRelative:!0,label:"none"}},el=l=>{const m=Hf(l,he=>parseFloat(Va(he))),b=Hf(l,oc);return{width:m,pixelWidth:b,getWidths:(he,Pe)=>Hu(he,l,Pe),getCellDelta:he=>he/b()*100,singleColumnWidth:(he,Pe)=>[100-he],minCellWidth:()=>br()/b()*100,setElementWidth:Jg,adjustTableWidth:he=>{const Pe=m(),ft=he/100*Pe,fn=Pe+ft;Jg(l,fn)},isRelative:!0,label:"percent"}},Ta=l=>{const m=Hf(l,oc);return{width:m,pixelWidth:m,getWidths:(Z,ne)=>Or(Z,l,ne),getCellDelta:St,singleColumnWidth:(Z,ne)=>[Math.max(br(),Z+ne)-Z],minCellWidth:br,setElementWidth:Fl,adjustTableWidth:Z=>{const ne=m()+Z;Fl(l,ne)},isRelative:!1,label:"pixel"}},da=(l,m)=>eC().exec(m)!==null?el(l):Ta(l),x={getTableSize:l=>lu(l).fold(()=>qc(l),b=>da(l,b)),pixelSize:Ta,percentageSize:el,noneSize:qc},R=(l,m,b,y,k,B)=>({minRow:l,minCol:m,maxRow:b,maxCol:y,allCells:k,selectedCells:B}),j=(l,m)=>{const b=l.grid.columns;let k=l.grid.rows,B=b,Z=0,ne=0;const he=[],Pe=[];return Je(l.access,ft=>{if(he.push(ft),m(ft)){Pe.push(ft);const fn=ft.row,Fn=fn+ft.rowspan-1,kn=ft.column,Cn=kn+ft.colspan-1;fn<k?k=fn:Fn>Z&&(Z=Fn),kn<B?B=kn:Cn>ne&&(ne=Cn)}}),R(k,B,Z,ne,he,Pe)},ue=(l,m,b)=>{const y=l[b].element,k=Le.fromTag("td");dr(k,Le.fromTag("br")),(m?dr:Fr)(y,k)},ze=(l,m,b,y)=>{const k=nt(l,ne=>ne.section!=="colgroup"),B=m.grid.columns,Z=m.grid.rows;for(let ne=0;ne<Z;ne++){let he=!1;for(let Pe=0;Pe<B;Pe++)ne<b.minRow||ne>b.maxRow||Pe<b.minCol||Pe>b.maxCol||(us.getAt(m,ne,Pe).filter(y).isNone()?ue(k,he,ne):he=!0)}},Vt=(l,m,b,y)=>{Je(b.columns,Z=>{(Z.column<m.minCol||Z.column>m.maxCol)&&Vr(Z.element)});const k=nt(ku(l,"tr"),Z=>Z.dom.childElementCount===0);_e(k,Vr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&_e(ku(l,"th,td"),Z=>{Ce(Z,"rowspan"),Ce(Z,"colspan")}),Ce(l,yi),Ce(l,"data-snooker-col-series"),x.getTableSize(l).adjustTableWidth(y)},vn=(l,m,b,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const k=Or(m,l,b),B=Ne(k,(Pe,ft)=>Pe+ft,0),he=Ne(k.slice(y.minCol,y.maxCol+1),(Pe,ft)=>Pe+ft,0)/B*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(he)},jn=(l,m)=>{const b=Fn=>Fo(Fn.element,m),y=fc(l),k=Ou(y),B=x.getTableSize(l),Z=us.generate(k),ne=j(Z,b),he="th:not("+m+"),td:not("+m+")",Pe=_u(y,"th,td",Fn=>Fo(Fn,he));_e(Pe,Vr),ze(k,Z,ne,b);const ft=us.fromTable(l),fn=vn(l,ft,B,ne);return Vt(y,ne,Z,fn),y},jo=" ",js=((l,m)=>{const b=B=>{if(!l(B))throw new Error("Can only get "+m+" value of a "+m+" node");return y(B).getOr("")},y=B=>l(B)?we.from(B.dom.nodeValue):we.none();return{get:b,getOption:y,set:(B,Z)=>{if(!l(B))throw new Error("Can only set raw "+m+" value of a "+m+" node");B.dom.nodeValue=Z}}})(Ke,"text"),Gs=l=>js.get(l),Xr=l=>js.getOption(l),tl=(l,m)=>js.set(l,m),Tc=l=>ys(l)==="img"?1:Xr(l).fold(()=>fo(l).length,m=>m.length),uu=l=>Xr(l).filter(m=>m.trim().length!==0||m.indexOf(jo)>-1).isSome(),Nl=l=>Qn(l)&&lr(l,"contenteditable")==="false",zu=["img","br"],th=l=>uu(l)||it(zu,ys(l))||Nl(l),ml=l=>pa(l,th),zf=l=>ap(l,th),ap=(l,m)=>{const b=y=>{const k=fo(y);for(let B=k.length-1;B>=0;B--){const Z=k[B];if(m(Z))return we.some(Z);const ne=b(Z);if(ne.isSome())return ne}return we.none()};return b(l)},cp={scope:["row","col"]},Ym=l=>()=>{const m=Le.fromTag("td",l.dom);return dr(m,Le.fromTag("br",l.dom)),m},rc=l=>()=>Le.fromTag("col",l.dom),du=l=>()=>Le.fromTag("colgroup",l.dom),Ms=l=>()=>Le.fromTag("tr",l.dom),Tr=(l,m,b)=>{const y=Wi(l,m);return Je(b,(k,B)=>{k===null?Ce(y,B):as(y,B,k)}),y},ai=l=>l,ya=(l,m,b)=>ml(l).map(k=>{const B=b.join(","),Z=at(k,B,ne=>tn(ne,l));return rn(Z,(ne,he)=>{const Pe=Fa(he);return dr(ne,Pe),Pe},m)}).getOr(m),ip=(l,m)=>{Je(cp,(b,y)=>Ae(l,y).filter(k=>it(b,k)).each(k=>as(m,y,k)))},Xm=(l,m,b)=>{const y=(Z,ne)=>{bc(Z.element,ne),ia(ne,"height"),Z.colspan!==1&&ia(ne,"width")},k=Z=>{const ne=Le.fromTag(ys(Z.element),m.dom),he=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Pe=he.length>0?ya(Z.element,ne,he):ne;return dr(Pe,Le.fromTag("br")),y(Z,ne),ip(Z.element,ne),l(Z.element,ne),ne};return{col:Z=>{const ne=Le.fromTag(ys(Z.element),m.dom);return y(Z,ne),l(Z.element,ne),ne},colgroup:du(m),row:Ms(m),cell:k,replace:Tr,colGap:rc(m),gap:Ym(m)}},Jm=l=>({col:rc(l),colgroup:du(l),row:Ms(l),cell:Ym(l),replace:ai,colGap:rc(l),gap:Ym(l)}),fl=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,fo(Le.fromDom(y))},Sd=l=>It(l,Le.fromDom),um=l=>m=>m.options.get(l),Vu="100%",E1=l=>{var m;const b=l.dom,y=(m=b.getParent(l.selection.getStart(),b.isBlock))!==null&&m!==void 0?m:l.getBody();return Bu(Le.fromDom(y))+"px"},dm=(l,m)=>mu(l)||!T1(l)?m:Qm(l)?{...m,width:E1(l)}:{...m,width:Vu},lp=(l,m)=>mu(l)||T1(l)?m:Qm(l)?{...m,width:E1(l)}:{...m,width:Vu},nh=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const y=it(["section","cells","sectionCells","auto"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const y=it(["preservetable","resizetable"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},QS=l=>we.from(l.options.get("table_clone_elements")),xd=l=>{const m=l.options.get("object_resizing");return it(m.split(","),"table")},ex=um("table_header_type"),nC=um("table_column_resizing"),Aa=l=>nC(l)==="preservetable",m0=l=>nC(l)==="resizetable",Ed=um("table_sizing_mode"),Vf=l=>Ed(l)==="relative",Qm=l=>Ed(l)==="fixed",mu=l=>Ed(l)==="responsive",fu=um("table_resize_bars"),T1=um("table_style_by_css"),Td=um("table_merge_content_on_paste"),ci=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:lp(l,b)},A1=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:dm(l,b)},oC=um("table_use_colgroups"),k1=l=>qr(l,"[contenteditable]"),_1=(l,m=!1)=>Ie(l)?l.dom.isContentEditable:k1(l).fold(ie(m),b=>sC(b)==="true"),sC=l=>l.dom.contentEditable,oh=l=>Le.fromDom(l.getBody()),Ad=l=>m=>tn(m,oh(l)),Oi=l=>{Ce(l,"data-mce-style");const m=b=>Ce(b,"data-mce-style");_e(Gi(l),m),_e(Im(l),m),_e(Lm(l),m)},gu=l=>Le.fromDom(l.selection.getStart()),Uf=l=>l.getBoundingClientRect().width,rC=l=>l.getBoundingClientRect().height,sh=l=>(m,b)=>{const y=m.dom.getStyle(b,l)||m.dom.getAttrib(b,l);return we.from(y).filter(ae)},aC=sh("width"),tx=sh("height"),nx=l=>/^(\d+(\.\d+)?)%$/.test(l),ox=l=>/^(\d+(\.\d+)?)px$/.test(l),Wf=l=>Qt(l,Bn("table")).exists(_1),rh=(l,m)=>{const b=m.column,y=m.column+m.colspan-1,k=m.row,B=m.row+m.rowspan-1;return b<=l.finishCol&&y>=l.startCol&&k<=l.finishRow&&B>=l.startRow},rs=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,wo=(l,m)=>{let b=!0;const y=vt(rs,m);for(let k=m.startRow;k<=m.finishRow;k++)for(let B=m.startCol;B<=m.finishCol;B++)b=b&&us.getAt(l,k,B).exists(y);return b?we.some(m):we.none()},Zf=(l,m)=>Ge(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),D1=(l,m,b)=>{const y=us.findItem(l,m,tn),k=us.findItem(l,b,tn);return y.bind(B=>k.map(Z=>Zf(B,Z)))},f0=(l,m,b)=>D1(l,m,b).bind(y=>wo(l,y)),cC=(l,m,b,y)=>us.findItem(l,m,tn).bind(k=>{const B=b>0?k.row+k.rowspan-1:k.row,Z=y>0?k.column+k.colspan-1:k.column;return us.getAt(l,B+b,Z+y).map(he=>he.element)}),mm=(l,m,b)=>D1(l,m,b).map(y=>{const k=us.filterItems(l,vt(rh,y));return It(k,B=>B.element)}),Mr=(l,m)=>{const b=(y,k)=>Dn(k,y);return us.findItem(l,m,b).map(y=>y.element)},sx=(l,m,b)=>ba(l).bind(y=>{const k=ah(y);return cC(k,l,m,b)}),iC=(l,m,b)=>{const y=ah(l);return mm(y,m,b)},lC=(l,m,b,y,k)=>{const B=ah(l),Z=tn(l,b)?we.some(m):Mr(B,m),ne=tn(l,k)?we.some(y):Mr(B,y);return Z.bind(he=>ne.bind(Pe=>mm(B,he,Pe)))},Gt=(l,m,b)=>{const y=ah(l);return f0(y,m,b)},ah=us.fromTable;var Rk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jf=()=>{const l=Pe=>Le.fromDom(Pe.dom.cloneNode(!1)),m=Pe=>zn(Pe).dom,b=Pe=>Ns(Pe)?ys(Pe)==="body"?!0:it(Rk,ys(Pe)):!1,y=Pe=>Ns(Pe)?it(["br","img","hr","input"],ys(Pe)):!1,k=Pe=>Ns(Pe)&&lr(Pe,"contenteditable")==="false",B=(Pe,ft)=>Pe.dom.compareDocumentPosition(ft.dom),Z=(Pe,ft)=>{const fn=ht(Pe);pr(ft,fn)},ne=Pe=>{const ft=ys(Pe);return it(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ft)},he=Pe=>Ns(Pe)?Ae(Pe,"lang"):we.none();return{up:ie({selector:gc,closest:qr,predicate:Os,all:Ls}),down:ie({selector:vo,predicate:De}),styles:ie({get:Js,getRaw:pc,set:Mo,remove:ia}),attrs:ie({get:lr,set:as,remove:Ce,copyTo:Z}),insert:ie({before:aa,after:ta,afterAll:ks,append:dr,appendAll:Sa,prepend:Fr,wrap:ec}),remove:ie({unwrap:pi,remove:Vr}),create:ie({nu:Le.fromTag,clone:l,text:Le.fromText}),query:ie({comparePosition:B,prevSibling:wa,nextSibling:la}),property:ie({children:fo,name:ys,parent:hs,document:m,isText:Ke,isComment:bs,isElement:Ns,isSpecial:ne,getLanguage:he,getText:Gs,setText:tl,isBoundary:b,isEmptyTag:y,isNonEditable:k}),eq:tn,is:Zn}};const Fk=(l,m,b,y)=>{const k=b[0],B=b.slice(1);return y(l,m,k,B)},ch=(l,m,b)=>b.length>0?Fk(l,m,b,uC):we.none(),uC=(l,m,b,y)=>{const k=m(l,b);return rn(y,(B,Z)=>{const ne=m(l,Z);return kd(l,B,ne)},k)},kd=(l,m,b)=>m.bind(y=>b.filter(vt(l.eq,y))),dC=(l,m)=>vt(l.eq,m),up=(l,m,b,y=gn)=>{const k=[m].concat(l.up().all(m)),B=[b].concat(l.up().all(b)),Z=ft=>Ao(ft,y).fold(()=>ft,Fn=>ft.slice(0,Fn+1)),ne=Z(k),he=Z(B),Pe=V(ne,ft=>ve(he,dC(l,ft)));return{firstpath:ne,secondpath:he,shared:Pe}},Zr=ch,fm=up,mC=jf(),Uu=(l,m)=>Zr(mC,(b,y)=>l(y),m),fC=(l,m,b)=>fm(mC,l,m,b),O1=l=>gc(l,"table"),dp=(l,m,b)=>{const y=k=>B=>b!==void 0&&b(B)||tn(B,k);return tn(l,m)?we.some({boxes:we.some([l]),start:l,finish:m}):O1(l).bind(k=>O1(m).bind(B=>{if(tn(k,B))return we.some({boxes:iC(k,l,m),start:l,finish:m});if(Dn(k,B)){const Z=at(m,"td,th",y(k)),ne=Z.length>0?Z[Z.length-1]:m;return we.some({boxes:lC(k,l,k,m,B),start:l,finish:ne})}else if(Dn(B,k)){const Z=at(l,"td,th",y(B)),ne=Z.length>0?Z[Z.length-1]:l;return we.some({boxes:lC(B,l,k,m,B),start:l,finish:ne})}else return fC(l,m).shared.bind(Z=>qr(Z,"table",b).bind(ne=>{const he=at(m,"td,th",y(ne)),Pe=he.length>0?he[he.length-1]:m,ft=at(l,"td,th",y(ne)),fn=ft.length>0?ft[ft.length-1]:l;return we.some({boxes:lC(ne,l,k,m,B),start:fn,finish:Pe})}))}))},R1=(l,m)=>{const b=vo(l,m);return b.length>0?we.some(b):we.none()},gl=(l,m)=>V(l,b=>Fo(b,m)),rx=(l,m,b)=>hc(l,m).bind(y=>hc(l,b).bind(k=>Uu(O1,[y,k]).map(B=>({first:y,last:k,table:B})))),F1=(l,m)=>gc(l,"table").bind(b=>hc(b,m).bind(y=>dp(y,l).bind(k=>k.boxes.map(B=>({boxes:B,start:k.start,finish:k.finish}))))),gC=(l,m,b,y,k)=>gl(l,k).bind(B=>sx(B,m,b).bind(Z=>F1(Z,y))),Gf=(l,m)=>R1(l,m),hC=(l,m,b)=>rx(l,m,b).bind(y=>{const k=he=>tn(l,he),B="thead,tfoot,tbody,table",Z=gc(y.first,B,k),ne=gc(y.last,B,k);return Z.bind(he=>ne.bind(Pe=>tn(he,Pe)?Gt(y.table,y.first,y.last):we.none()))}),ax=St,pC=l=>{const m=(y,k)=>Ae(y,k).exists(B=>parseInt(B,10)>1),b=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&tt(l,b)?we.some(l):we.none()},cx=(l,m,b)=>m.length<=1?we.none():hC(l,b.firstSelectedSelector,b.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Ci="data-mce-selected",hl="td["+Ci+"],th["+Ci+"]",hn="["+Ci+"]",g0="data-mce-first-selected",Ic="td["+g0+"],th["+g0+"]",h0="data-mce-last-selected",ix="td["+h0+"],th["+h0+"]",jr=hn,ef={selected:Ci,selectedSelector:hl,firstSelected:g0,firstSelectedSelector:Ic,lastSelected:h0,lastSelectedSelector:ix},p0=(l,m,b)=>({element:b,mergable:cx(m,l,ef),unmergable:pC(l),selection:ax(l)}),Nk=(l,m,b)=>({element:l,clipboard:m,generators:b}),tf=(l,m,b,y)=>({selection:ax(l),clipboard:b,generators:y}),b0=l=>ba(l).bind(m=>Gf(m,ef.firstSelectedSelector)).fold(ie(l),m=>m[0]),_d=l=>(m,b)=>{const y=ys(m),k=y==="col"||y==="colgroup"?b0(m):m;return qr(k,l,b)},lx=_d("th,td,caption"),bC=_d("th,td"),Pr=l=>Sd(l.model.table.getSelectedCells()),mp=l=>nt(Pr(l),m=>Fo(m,ef.selectedSelector)),ma=l=>ba(l[0]).map(m=>{const b=jn(m,jr);return Oi(b),[b]}),ux=(l,m)=>It(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),pl=l=>It(l,m=>m.dom.innerText).join(""),fp=(l,m)=>{l.on("BeforeGetContent",b=>{const y=k=>{b.preventDefault(),ma(k).each(B=>{b.content=b.format==="text"?pl(B):ux(l,B)})};if(b.selection===!0){const k=mp(l);k.length>=1&&y(k)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const y=Pr(l);L(y).each(k=>{ba(k).each(B=>{const Z=nt(fl(b.content),he=>ys(he)!=="meta"),ne=Bn("table");if(Td(l)&&Z.length===1&&ne(Z[0])){b.preventDefault();const he=Le.fromDom(l.getDoc()),Pe=Jm(he),ft=Nk(k,Z[0],Pe);m.pasteCells(B,ft).each(()=>{l.focus()})}})})}})},bl=(l,m)=>({element:l,offset:m}),Bk=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(y=>Bk(l,y,b).orThunk(()=>we.some(y))):we.none(),Mk=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Pk=(l,m)=>{const b=Bk(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return bl(b,Mk(l,b));const y=l.property().children(b);return y.length>0?Pk(l,y[y.length-1]):bl(b,Mk(l,b))},$k=Pk,Ac=jf(),Ri=l=>$k(Ac,l),N1=(l,m)=>{nc(l)||sp(l).each(y=>{const k=y.value/2;Zt(l,k,y.unit),Zt(m,k,y.unit)})},qf=l=>It(l,ie(0)),vC=(l,m,b,y,k)=>k(l.slice(0,m)).concat(y).concat(k(l.slice(b))),gp=l=>(m,b,y,k)=>{if(l(y)){const B=Math.max(k,m[b]-Math.abs(y)),Z=Math.abs(B-m[b]);return y>=0?Z:-Z}else return y},gm=gp(l=>l<0),hp=gp(rt),ih=()=>{const l=(ne,he,Pe,ft,fn)=>{const Fn=gm(ne,he,ft,fn);return vC(ne,he,Pe+1,[Fn,0],qf)},m=(ne,he,Pe,ft)=>{const fn=(100+Pe)/100,Fn=Math.max(ft,(ne[he]+Pe)/fn);return It(ne,(kn,Cn)=>(Cn===he?Fn:kn/fn)-kn)},b=(ne,he,Pe,ft,fn,Fn)=>Fn?m(ne,he,ft,fn):l(ne,he,Pe,ft,fn);return{resizeTable:(ne,he)=>ne(he),clampTableDelta:gm,calcLeftEdgeDeltas:b,calcMiddleDeltas:(ne,he,Pe,ft,fn,Fn,kn)=>b(ne,Pe,ft,fn,Fn,kn),calcRightEdgeDeltas:(ne,he,Pe,ft,fn,Fn)=>{if(Fn)return m(ne,Pe,ft,fn);{const kn=gm(ne,Pe,ft,fn);return qf(ne.slice(0,Pe)).concat([kn])}},calcRedestributedWidths:(ne,he,Pe,ft)=>{if(ft){const Fn=(he+Pe)/he,kn=It(ne,Cn=>Cn/Fn);return{delta:Fn*100-100,newSizes:kn}}else return{delta:Pe,newSizes:ne}}}},Kf=()=>{const l=(Z,ne,he,Pe,ft)=>{const fn=Pe>=0?he:ne,Fn=hp(Z,fn,Pe,ft);return vC(Z,ne,he+1,[Fn,-Fn],qf)};return{resizeTable:(Z,ne,he)=>{he&&Z(ne)},clampTableDelta:(Z,ne,he,Pe,ft)=>{if(ft){if(he>=0)return he;{const fn=Ne(Z,(Fn,kn)=>Fn+kn-Pe,0);return Math.max(-fn,he)}}else return gm(Z,ne,he,Pe)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(Z,ne,he,Pe,ft,fn)=>l(Z,he,Pe,ft,fn),calcRightEdgeDeltas:(Z,ne,he,Pe,ft,fn)=>{if(fn)return qf(Z);{const Fn=Pe/Z.length;return It(Z,ie(Fn))}},calcRedestributedWidths:(Z,ne,he,Pe)=>({delta:0,newSizes:Z})}},hm=l=>us.fromTable(l).grid,lh=Bn("th"),uh=l=>tt(l,m=>lh(m.element)),Ik=(l,m)=>l&&m?"sectionCells":l?"section":"cells",yC=l=>{const m=l.section==="thead",b=eu(v0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:Ik(m,b)}:{type:"body"}},v0=l=>{const m=nt(l,b=>lh(b.element));return m.length===0?we.some("td"):m.length===l.length?we.some("th"):we.none()},dx=l=>{const m=It(l,k=>yC(k).type),b=it(m,"header"),y=it(m,"footer");if(!b&&!y)return we.some("body");{const k=it(m,"body");return b&&!k&&!y?we.some("header"):!b&&!k&&y?we.some("footer"):we.none()}},CC=l=>He(l.all,m=>{const b=yC(m);return b.type==="header"?we.from(b.subType):we.none()}),y0=(l,m,b)=>te(b(l.element,m),!0,l.isLocked),wC=(l,m)=>l.section!==m?Se(l.element,l.cells,m,l.isNew):l,SC=()=>({transformRow:wC,transformCell:(l,m,b)=>{const y=b(l.element,m),k=ys(y)!=="td"?ni(y,"td"):y;return te(k,l.isNew,l.isLocked)}}),xC=()=>({transformRow:wC,transformCell:y0}),B1=()=>({transformRow:(l,m)=>wC(l,m==="thead"?"tbody":m),transformCell:y0}),M1={getTableSectionType:(l,m)=>{const b=us.fromTable(l);switch(CC(b).getOr(m)){case"section":return SC();case"sectionCells":return xC();case"cells":return B1()}},section:SC,sectionCells:xC,cells:B1,fallback:()=>({transformRow:St,transformCell:y0})},pp=(l,m,b,y)=>{b===y?Ce(l,m):as(l,m,b)},Yf=(l,m,b)=>{ye(pt(l,m)).fold(()=>Fr(l,b),y=>ta(y,b))},EC=(l,m)=>{const b=qo(l,m).getOrThunk(()=>{const y=Le.fromTag(m,Gn(l).dom);return m==="thead"?Yf(l,"caption,colgroup",y):m==="colgroup"?Yf(l,"caption",y):dr(l,y),y});return ha(b),b},TC=(l,m)=>{const b=[],y=[],k=kn=>It(kn,Cn=>{Cn.isNew&&b.push(Cn.element);const Xn=Cn.element;return ha(Xn),_e(Cn.cells,an=>{an.isNew&&y.push(an.element),pp(an.element,"colspan",an.colspan,1),pp(an.element,"rowspan",an.rowspan,1),dr(Xn,an.element)}),Xn}),B=kn=>jt(kn,Cn=>It(Cn.cells,Xn=>(pp(Xn.element,"span",Xn.colspan,1),Xn.element))),Z=(kn,Cn)=>{const Xn=EC(l,Cn),bn=(Cn==="colgroup"?B:k)(kn);Sa(Xn,bn)},ne=kn=>{qo(l,kn).each(Vr)},he=(kn,Cn)=>{kn.length>0?Z(kn,Cn):ne(Cn)},Pe=[],ft=[],fn=[],Fn=[];return _e(m,kn=>{switch(kn.section){case"thead":Pe.push(kn);break;case"tbody":ft.push(kn);break;case"tfoot":fn.push(kn);break;case"colgroup":Fn.push(kn);break}}),he(Fn,"colgroup"),he(Pe,"thead"),he(ft,"tbody"),he(fn,"tfoot"),{newRows:b,newCells:y}},mx=l=>It(l,m=>{const b=Fa(m.element);return _e(m.cells,y=>{const k=fc(y.element);pp(k,"colspan",y.colspan,1),pp(k,"rowspan",y.rowspan,1),dr(b,k)}),b}),AC=(l,m)=>It(l,b=>vc(b,m)),dh=(l,m)=>l[m],Lk=(l,m)=>{if(l.length===0)return 0;const b=l[0];return Ao(l,k=>!m(b.element,k.element)).getOr(l.length)},kC=(l,m,b,y)=>{const k=dh(l,m),B=k.section==="colgroup",Z=Lk(k.cells.slice(b),y),ne=B?1:Lk(AC(l.slice(m),b),y);return{colspan:Z,rowspan:ne}},Xf=(l,m)=>{const b=It(l,k=>It(k.cells,gn)),y=(k,B,Z,ne)=>{for(let he=k;he<k+Z;he++)for(let Pe=B;Pe<B+ne;Pe++)b[he][Pe]=!0};return It(l,(k,B)=>{const Z=jt(k.cells,(ne,he)=>{if(b[B][he]===!1){const Pe=kC(l,B,he,m);return y(B,he,Pe.rowspan,Pe.colspan),[Ti(ne.element,Pe.rowspan,Pe.colspan,ne.isNew)]}else return[]});return Za(k.element,Z,k.section,k.isNew)})},bp=(l,m,b)=>{const y=[];_e(l.colgroups,k=>{const B=[];for(let Z=0;Z<l.grid.columns;Z++){const ne=us.getColumnAt(l,Z).map(he=>te(he.element,b,!1)).getOrThunk(()=>te(m.colGap(),!0,!1));B.push(ne)}y.push(Se(k.element,B,"colgroup",b))});for(let k=0;k<l.grid.rows;k++){const B=[];for(let he=0;he<l.grid.columns;he++){const Pe=us.getAt(l,k,he).map(ft=>te(ft.element,b,ft.isLocked)).getOrThunk(()=>te(m.gap(),!0,!1));B.push(Pe)}const Z=l.all[k],ne=Se(Z.element,B,Z.section,b);y.push(ne)}return y},_C=(l,m)=>bp(l,m,!1),w0=l=>Xf(l,tn),DC=(l,m)=>He(l.all,b=>V(b.cells,y=>tn(m,y.element))),fx=(l,m,b)=>{const y=It(m.selection,B=>Du(B).bind(Z=>DC(l,Z)).filter(b)),k=nr(y);return Qd(k.length>0,k)},ii=(l,m,b,y,k)=>(B,Z,ne,he)=>{const Pe=us.fromTable(B),ft=we.from(he==null?void 0:he.section).getOrThunk(M1.fallback);return m(Pe,Z).map(Fn=>{const kn=_C(Pe,ne),Cn=l(kn,Fn,tn,k(ne),ft),Xn=na(Cn.grid),an=w0(Cn.grid);return{info:Fn,grid:an,cursor:Cn.cursor,lockedColumns:Xn}}).bind(Fn=>{const kn=TC(B,Fn.grid),Cn=we.from(he==null?void 0:he.sizing).getOrThunk(()=>x.getTableSize(B)),Xn=we.from(he==null?void 0:he.resize).getOrThunk(Kf);return b(B,Fn.grid,Fn.info,{sizing:Cn,resize:Xn,section:ft}),y(B),Ce(B,yi),Fn.lockedColumns.length>0&&as(B,yi,Fn.lockedColumns.join(",")),we.some({cursor:Fn.cursor,newRows:kn.newRows,newCells:kn.newCells})})},RF=(l,m)=>Du(m.element).bind(b=>DC(l,b).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),OC=(l,m)=>fx(l,m,rt).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),P1=(l,m)=>m.mergable,Hk=(l,m)=>m.unmergable,vl=(l,m)=>fx(l,m,rt),Wu=(l,m)=>fx(l,m,b=>!b.isLocked),Jf=(l,m)=>DC(l,m).exists(b=>!b.isLocked),mh=(l,m)=>tt(m,b=>Jf(l,b)),gx=(l,m)=>P1(l,m).filter(b=>mh(l,b.cells)),$1=(l,m)=>Hk(l,m).filter(b=>mh(l,b)),S0=(l,m,b,y)=>{const k=Ga(l).rows;if(k.length===0)return l;for(let B=m.startRow;B<=m.finishRow;B++)for(let Z=m.startCol;Z<=m.finishCol;Z++){const ne=k[B],he=vc(ne,Z).isLocked;Yo(ne,Z,te(y(),!1,he))}return l},hx=(l,m,b,y)=>{const k=Ga(l).rows;let B=!0;for(let Z=0;Z<k.length;Z++)for(let ne=0;ne<_i(k[0]);ne++){const he=k[Z],Pe=vc(he,ne),ft=Pe.element,fn=b(ft,m);fn&&!B?Yo(he,ne,te(y(),!0,Pe.isLocked)):fn&&(B=!1)}return l},Qf=(l,m)=>Ne(l,(b,y)=>ve(b,k=>m(k.element,y.element))?b:b.concat([y]),[]),fh=(l,m,b,y)=>(m>0&&m<l[0].cells.length&&_e(l,k=>{const B=k.cells[m-1];let Z=0;const ne=y();for(;k.cells.length>m+Z&&b(B.element,k.cells[m+Z].element);)Yo(k,m+Z,te(ne,!0,k.cells[m+Z].isLocked)),Z++}),l),hu=(l,m,b,y)=>{const k=Ga(l).rows;if(m>0&&m<k.length){const B=k[m-1].cells,Z=Qf(B,b);_e(Z,ne=>{let he=we.none();for(let Pe=m;Pe<k.length;Pe++)for(let ft=0;ft<_i(k[0]);ft++){const fn=k[Pe],Fn=vc(fn,ft);b(Fn.element,ne.element)&&(he.isNone()&&(he=we.some(y())),he.each(Cn=>{Yo(fn,ft,te(Cn,!0,Fn.isLocked))}))}})}return l},x0=l=>{const m=B=>B(l),b=ie(l),y=()=>k,k={tag:!0,inner:l,fold:(B,Z)=>Z(l),isValue:rt,isError:gn,map:B=>Fi.value(B(l)),mapError:y,bind:m,exists:m,forall:m,getOr:b,or:y,getOrThunk:b,orThunk:y,getOrDie:b,each:B=>{B(l)},toOptional:()=>we.some(l)};return k},yc=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(y,k)=>y(l),isValue:gn,isError:rt,map:m,mapError:y=>Fi.error(y(l)),bind:m,exists:gn,forall:rt,getOr:St,or:St,getOrThunk:On,orThunk:On,getOrDie:Yt(String(l)),each:gt,toOptional:we.none};return b},Fi={value:x0,error:yc,fromOption:(l,m)=>l.fold(()=>yc(m),x0)},zk=(l,m,b)=>{if(l.row>=m.length||l.column>_i(m[0]))return Fi.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),k=y[0].cells.slice(l.column),B=_i(b[0]),Z=b.length;return Fi.value({rowDelta:y.length-Z,colDelta:k.length-B})},px=(l,m)=>{const b=_i(l[0]),y=_i(m[0]);return{rowDelta:0,colDelta:b-y}},nf=(l,m)=>{const b=l.length,y=m.length;return{rowDelta:b-y,colDelta:0}},eg=(l,m,b,y)=>{const k=m.section==="colgroup"?b.col:b.cell;return Rt(l,B=>te(k(),!0,y(B)))},of=(l,m,b,y)=>{const k=l[l.length-1];return l.concat(Rt(m,()=>{const B=k.section==="colgroup"?b.colgroup:b.row,Z=Pc(k,B,St),ne=eg(Z.cells.length,Z,b,he=>po(y,he.toString()));return Ma(Z,ne)}))},yl=(l,m,b,y)=>It(l,k=>{const B=eg(m,k,b,gn);return cm(k,y,B)}),bx=(l,m,b)=>It(l,y=>Ne(b,(k,B)=>{const Z=eg(1,y,m,rt)[0];return Jh(k,B,Z)},y)),I1=(l,m,b)=>{const y=m.colDelta<0?yl:St,k=m.rowDelta<0?of:St,B=na(l),Z=_i(l[0]),ne=ve(B,ft=>ft===Z-1),he=y(l,Math.abs(m.colDelta),b,ne?Z-1:Z),Pe=na(he);return k(he,Math.abs(m.rowDelta),b,I(Pe,rt))},FC=(l,m,b,y)=>{const k=vc(l[m],b),B=vt(y,k.element),Z=l[m];return l.length>1&&_i(Z)>1&&(b>0&&B(Zc(Z,b-1))||b<Z.cells.length-1&&B(Zc(Z,b+1))||m>0&&B(Zc(l[m-1],b))||m<l.length-1&&B(Zc(l[m+1],b)))},vp=(l,m,b,y,k,B)=>{const Z=l.row,ne=l.column,he=b.length,Pe=_i(b[0]),ft=Z+he,fn=ne+Pe+B.length,Fn=I(B,rt);for(let kn=Z;kn<ft;kn++){let Cn=0;for(let Xn=ne;Xn<fn;Xn++){if(Fn[Xn]){Cn++;continue}FC(m,kn,Xn,k)&&hx(m,Zc(m[kn],Xn),k,y.cell);const an=Xn-ne-Cn,bn=vc(b[kn-Z],an),Oo=bn.element,Po=y.replace(Oo);Yo(m[kn],Xn,te(Po,!0,bn.isLocked))}}return m},gh=(l,m,b)=>{const y=_i(m[0]),k=Ga(m).cols.length+l.row,B=Rt(y-l.column,ne=>ne+l.column),Z=V(B,ne=>tt(b,he=>he!==ne)).getOr(y-1);return{row:k,column:Z}},tg=(l,m,b)=>nt(b,y=>y>=l.column&&y<=_i(m[0])+l.column),Es=(l,m,b,y,k)=>{const B=na(m),Z=gh(l,m,B),ne=Ga(b).rows,he=tg(Z,ne,B);return zk(Z,m,ne).map(ft=>{const fn={...ft,colDelta:ft.colDelta-he.length},Fn=I1(m,fn,y),kn=na(Fn),Cn=tg(Z,ne,kn);return vp(Z,Fn,ne,y,k,Cn)})},nl=(l,m,b,y,k)=>{fh(m,l,k,y.cell);const B=nf(b,m),Z=I1(b,B,y),ne=nf(m,Z),he=I1(m,ne,y);return It(he,(Pe,ft)=>cm(Pe,l,Z[ft].cells))},pm=(l,m,b,y,k)=>{hu(m,l,k,y.cell);const B=na(m),Z=px(m,b),ne={...Z,colDelta:Z.colDelta-B.length},he=I1(m,ne,y),{cols:Pe,rows:ft}=Ga(he),fn=na(he),Fn=px(b,m),kn={...Fn,colDelta:Fn.colDelta+fn.length},Cn=bx(b,y,fn),Xn=I1(Cn,kn,y);return[...Pe,...ft.slice(0,l),...Xn,...ft.slice(l,ft.length)]},E0=(l,m,b,y)=>Pc(l,k=>y(k,b),m),hr=(l,m,b,y,k)=>{const{rows:B,cols:Z}=Ga(l),ne=B.slice(0,m),he=B.slice(m),Pe=E0(B[b],(ft,fn)=>m>0&&m<B.length&&y(Zc(B[m-1],fn),Zc(B[m],fn))?vc(B[m],fn):te(k(ft.element,y),!0,ft.isLocked),y,k);return[...Z,...ne,Pe,...he]},ng=(l,m,b,y,k,B,Z)=>{if(b==="colgroup"||!y){const ne=vc(l,k);return te(Z(ne.element,B),!0,!1)}else return vc(l,m)},T0=(l,m,b,y,k)=>It(l,B=>{const Z=m>0&&m<_i(B)&&y(Zc(B,m-1),Zc(B,m)),ne=ng(B,m,B.section,Z,b,y,k);return Jh(B,m,ne)}),Vk=(l,m)=>jt(l,b=>{const y=b.cells,k=rn(m,(B,Z)=>Z>=0&&Z<B.length?B.slice(0,Z).concat(B.slice(Z+1)):B,y);return k.length>0?[Se(b.element,k,b.section,b.isNew)]:[]}),Uk=(l,m,b)=>{const{rows:y,cols:k}=Ga(l);return[...k,...y.slice(0,m),...y.slice(b+1)]},L1=(l,m,b,y)=>Zc(l[m],b)!==void 0&&m>0&&y(Zc(l[m-1],b),Zc(l[m],b)),$r=(l,m,b)=>m>0&&b(Zc(l,m-1),Zc(l,m)),vx=(l,m,b,y)=>L1(l,m,b,y)||$r(l[m],b,y),Wk=(l,m)=>tt(m,St)&&uh(l.cells)?rt:(y,k,B)=>!(ys(y.element)==="th"&&m[B]),yx=(l,m)=>tt(m,St)&&uh(l)?rt:(y,k,B)=>!(ys(y.element)==="th"&&m[k]),hh=(l,m,b,y)=>{const k=Z=>Z==="row"?Kr(m):nc(m),B=Z=>k(Z)?`${Z}group`:Z;return l?lh(m)?B(b):null:y&&lh(m)?B(b==="row"?"col":"row"):null},Cl=(l,m)=>(b,y,k)=>we.some(hh(l,b.element,"col",m[k])),og=(l,m)=>(b,y)=>we.some(hh(l,b.element,"row",m[y])),NC=(l,m,b)=>te(b(l.element,m),!0,l.isLocked),Vn=(l,m,b,y,k,B,Z)=>{const ne=he=>ve(m,Pe=>b(he.element,Pe.element));return It(l,(he,Pe)=>bd(he,(ft,fn)=>{if(ne(ft)){const Fn=Z(ft,Pe,fn)?k(ft,b,y):ft;return B(Fn,Pe,fn).each(kn=>{Sr(Fn.element,{scope:we.from(kn)})}),Fn}else return ft}))},BC=(l,m,b)=>jt(l,(y,k)=>vx(l,k,m,b)?[]:[vc(y,m)]),Zk=(l,m,b)=>{const y=l[m];return jt(y.cells,(k,B)=>vx(l,m,B,b)?[]:[k])},Cx=(l,m,b,y,k)=>{const B=Ga(l).rows,Z=jt(m,ft=>BC(B,ft,y)),ne=It(B,ft=>uh(ft.cells)),he=yx(Z,ne),Pe=og(b,ne);return Vn(l,Z,y,k,NC,Pe,he)},MC=(l,m,b,y,k,B,Z)=>{const{cols:ne,rows:he}=Ga(l),Pe=he[m[0]],ft=jt(m,an=>Zk(he,an,k)),fn=It(Pe.cells,(an,bn)=>uh(BC(he,bn,k))),Fn=[...he];_e(m,an=>{Fn[an]=Z.transformRow(he[an],b)});const kn=[...ne,...Fn],Cn=Wk(Pe,fn),Xn=Cl(y,fn);return Vn(kn,ft,k,B,Z.transformCell,Xn,Cn)},wx=(l,m,b,y)=>{const k=Ga(l).rows,B=It(m,Z=>vc(k[Z.row],Z.column));return Vn(l,B,b,y,NC,we.none,rt)},Dd={generate:l=>{if(!Te(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return _e(l,(y,k)=>{const B=ke(y);if(B.length!==1)throw new Error("one and only one name per case");const Z=B[0],ne=y[Z];if(b[Z]!==void 0)throw new Error("duplicate key detected:"+Z);if(Z==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Te(ne))throw new Error("case arguments must be an array");m.push(Z),b[Z]=(...he)=>{const Pe=he.length;if(Pe!==ne.length)throw new Error("Wrong number of arguments to case "+Z+". Expected "+ne.length+" ("+ne+"), got "+Pe);return{fold:(...fn)=>{if(fn.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+fn.length);return fn[k].apply(null,he)},match:fn=>{const Fn=ke(fn);if(m.length!==Fn.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Fn.join(","));if(!tt(m,Cn=>it(Fn,Cn)))throw new Error("Not all branches were specified when using match. Specified: "+Fn.join(", ")+`
Required: `+m.join(", "));return fn[Z].apply(null,he)},log:fn=>{console.log(fn,{constructors:m,constructor:Z,params:he})}}}}),b}},ph={...Dd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},A0=(l,m)=>l.length===0?ph.none():l.length===1?ph.only(0):m===0?ph.left(0,1):m===l.length-1?ph.right(m-1,m):m>0&&m<l.length-1?ph.middle(m-1,m,m+1):ph.none(),jk=(l,m,b,y,k)=>{const B=l.slice(0),Z=A0(l,m),ne=ie(It(B,ie(0))),he=Fn=>y.singleColumnWidth(B[Fn],b),Pe=(Fn,kn)=>k.calcLeftEdgeDeltas(B,Fn,kn,b,y.minCellWidth(),y.isRelative),ft=(Fn,kn,Cn)=>k.calcMiddleDeltas(B,Fn,kn,Cn,b,y.minCellWidth(),y.isRelative),fn=(Fn,kn)=>k.calcRightEdgeDeltas(B,Fn,kn,b,y.minCellWidth(),y.isRelative);return Z.fold(ne,he,Pe,ft,fn)},Bl=(l,m,b)=>{let y=0;for(let k=l;k<m;k++)y+=b[k]!==void 0?b[k]:0;return y},xx=(l,m)=>{const b=us.justCells(l);return It(b,y=>{const k=Bl(y.column,y.column+y.colspan,m);return{element:y.element,width:k,colspan:y.colspan}})},PC=(l,m)=>{const b=us.justColumns(l);return It(b,(y,k)=>({element:y.element,width:m[k],colspan:y.colspan}))},Ex=(l,m)=>It(l.all,(b,y)=>({element:b.element,height:m[y]})),k0=l=>rn(l,(m,b)=>m+b,0),Gk=(l,m)=>us.hasColumns(l)?PC(l,m):xx(l,m),_0=(l,m,b)=>{const y=Gk(l,m);_e(y,k=>{b.setElementWidth(k.element,k.width)})},$C=(l,m,b,y,k)=>{const B=us.fromTable(l),Z=k.getCellDelta(m),ne=k.getWidths(B,k),he=b===B.grid.columns-1,Pe=y.clampTableDelta(ne,b,Z,k.minCellWidth(),he),ft=jk(ne,b,Pe,k,y),fn=It(ft,(Fn,kn)=>Fn+ne[kn]);_0(B,fn,k),y.resizeTable(k.adjustTableWidth,Pe,he)},IC=(l,m,b)=>{const y=us.fromTable(l),k=et(y,l),B=It(k,(he,Pe)=>b===Pe?Math.max(m+he,Au()):he),Z=Ex(y,B);_e(Z,he=>{lm(he.element,he.height)}),_e(us.justCells(y),he=>{qm(he.element)});const ne=k0(B);lm(l,ne)},Tx=(l,m,b,y,k)=>{const B=us.generate(m),Z=y.getWidths(B,y),ne=y.pixelWidth(),{newSizes:he,delta:Pe}=k.calcRedestributedWidths(Z,ne,b.pixelDelta,y.isRelative);_0(B,he,y),y.adjustTableWidth(Pe)},qk=(l,m,b,y)=>{const k=us.generate(m),B=y.getWidths(k,y);_0(k,B,y)},bm=l=>Ne(l,(b,y)=>ve(b,B=>B.column===y.column)?b:b.concat([y]),[]).sort((b,y)=>b.column-y.column),Ax=Bn("col"),yp=Bn("colgroup"),Cp=l=>ys(l)==="tr"||yp(l),kx=l=>{const m=or(l,"colspan",1),b=or(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},D0=(l,m=kx)=>{const b=ne=>Ax(ne.element)?l.col(ne):l.cell(ne),y=ne=>yp(ne.element)?l.colgroup(ne):l.row(ne),k=ne=>{if(Cp(ne))return y({element:ne});{const he=ne,Pe=b(m(he));return B=we.some({item:he,replacement:Pe}),Pe}};let B=we.none();return{getOrInit:(ne,he)=>B.fold(()=>k(ne),Pe=>he(ne,Pe.item)?Pe.replacement:k(ne))}},LC=l=>m=>{const b=[],y=(Z,ne)=>V(b,he=>ne(he.item,Z)),k=Z=>{const ne=l==="td"?{scope:null}:{},he=m.replace(Z,l,ne);return b.push({item:Z,sub:he}),he};return{replaceOrInit:(Z,ne)=>{if(Cp(Z)||Ax(Z))return Z;{const he=Z;return y(he,ne).fold(()=>k(he),Pe=>ne(Z,Pe.item)?Pe.sub:k(he))}}}},O0=l=>Ae(l,"scope").map(m=>m.substr(0,3)),Ni={modification:D0,transform:LC,merging:l=>({unmerge:y=>{const k=O0(y);return k.each(B=>as(y,"scope",B)),()=>{const B=l.cell({element:y,colspan:1,rowspan:1});return ia(B,"width"),ia(y,"width"),k.each(Z=>as(B,"scope",Z)),B}},merge:y=>{const k=()=>{const B=nr(It(y,O0));if(B.length===0)return we.none();{const Z=B[0],ne=["row","col"];return ve(B,Pe=>Pe!==Z&&it(ne,Pe))?we.none():we.from(Z)}};return ia(y[0],"width"),k().fold(()=>Ce(y[0],"scope"),B=>as(y[0],"scope",B+"group")),ie(y[0])}})},Yk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Xk=(l,m)=>{const b=l.property().name(m);return it(["ol","ul"],b)},sg=(l,m)=>{const b=l.property().name(m);return it(Yk,b)},rg=(l,m)=>it(["br","img","hr","input"],l.property().name(m)),sf=jf(),HC=l=>sg(sf,l),Mt=l=>Xk(sf,l),R0=l=>rg(sf,l),rf=l=>{const m=Bn("br"),b=he=>tt(he,Pe=>m(Pe)||Ke(Pe)&&Gs(Pe).trim().length===0),y=he=>ys(he)==="li"||Os(he,Mt).isSome(),k=he=>la(he).map(Pe=>HC(Pe)?!0:R0(Pe)?ys(Pe)!=="img":!1).getOr(!1),B=he=>zf(he).bind(Pe=>{const ft=k(Pe);return hs(Pe).map(fn=>ft===!0||y(fn)||m(Pe)||HC(fn)&&!tn(he,fn)?[]:[Le.fromTag("br")])}).getOr([]),ne=(()=>{const he=jt(l,Pe=>{const ft=fo(Pe);return b(ft)?[]:ft.concat(B(Pe))});return he.length===0?[Le.fromTag("br")]:he})();ha(l[0]),Sa(l[0],ne)},ag=l=>_1(l,!0),F0=l=>{Gi(l).length===0&&Vr(l)},wl=(l,m)=>({grid:l,cursor:m}),zC=l=>He(l,m=>He(m.cells,b=>{const y=b.element;return Qd(ag(y),y)})),VC=(l,m,b)=>{var y,k;const B=Ga(l).rows;return we.from((k=(y=B[m])===null||y===void 0?void 0:y.cells[b])===null||k===void 0?void 0:k.element).filter(ag).orThunk(()=>zC(B))},Bi=(l,m,b)=>{const y=VC(l,m,b);return wl(l,y)},wp=l=>Ne(l,(b,y)=>ve(b,B=>B.row===y.row)?b:b.concat([y]),[]).sort((b,y)=>b.row-y.row),_x=(l,m,b,y)=>{const k=m[0].row,B=wp(m),Z=rn(B,(ne,he)=>({grid:hr(ne.grid,k,he.row+ne.delta,b,y.getOrInit),delta:ne.delta+1}),{grid:l,delta:0}).grid;return Bi(Z,k,m[0].column)},Dx=(l,m,b,y)=>{const k=wp(m),B=k[k.length-1],Z=B.row+B.rowspan,ne=rn(k,(he,Pe)=>hr(he,Z,Pe.row,b,y.getOrInit),l);return Bi(ne,Z,m[0].column)},Jk=(l,m,b,y)=>{const k=m.details,B=bm(k),Z=B[0].column,ne=rn(B,(he,Pe)=>({grid:T0(he.grid,Z,Pe.column+he.delta,b,y.getOrInit),delta:he.delta+1}),{grid:l,delta:0}).grid;return Bi(ne,k[0].row,Z)},Ox=(l,m,b,y)=>{const k=m.details,B=k[k.length-1],Z=B.column+B.colspan,ne=bm(k),he=rn(ne,(Pe,ft)=>T0(Pe,Z,ft.column,b,y.getOrInit),l);return Bi(he,k[0].row,Z)},Qk=(l,m,b,y)=>{const k=bm(m),B=It(k,ne=>ne.column),Z=Cx(l,B,!0,b,y.replaceOrInit);return Bi(Z,m[0].row,m[0].column)},Rx=(l,m,b,y)=>{const k=wx(l,m,b,y.replaceOrInit);return Bi(k,m[0].row,m[0].column)},e_=(l,m,b,y)=>{const k=bm(m),B=It(k,ne=>ne.column),Z=Cx(l,B,!1,b,y.replaceOrInit);return Bi(Z,m[0].row,m[0].column)},t_=(l,m,b,y)=>{const k=wx(l,m,b,y.replaceOrInit);return Bi(k,m[0].row,m[0].column)},N0=(l,m)=>(b,y,k,B,Z)=>{const ne=wp(y),he=It(ne,ft=>ft.row),Pe=MC(b,he,l,m,k,B.replaceOrInit,Z);return Bi(Pe,y[0].row,y[0].column)},B0=N0("thead",!0),n_=N0("tbody",!1),Fx=N0("tfoot",!1),o_=(l,m,b,y)=>{const k=bm(m.details),B=Vk(l,It(k,ne=>ne.column)),Z=B.length>0?B[0].cells.length-1:0;return Bi(B,k[0].row,Math.min(k[0].column,Z))},UC=(l,m,b,y)=>{const k=wp(m),B=Uk(l,k[0].row,k[k.length-1].row),Z=Math.max(Ga(B).rows.length-1,0);return Bi(B,Math.min(m[0].row,Z),m[0].column)},fa=(l,m,b,y)=>{const k=m.cells;rf(k);const B=S0(l,m.bounds,b,y.merge(k));return wl(B,we.from(k[0]))},WC=(l,m,b,y)=>{const B=rn(m,(Z,ne)=>hx(Z,ne,b,y.unmerge(ne)),l);return wl(B,we.from(m[0]))},Nx=(l,m,b,y)=>{const B=((he,Pe)=>{const ft=us.fromTable(he);return bp(ft,Pe,!0)})(m.clipboard,m.generators),Z=Ei(m.row,m.column);return Es(Z,l,B,m.generators,b).fold(()=>wl(l,we.some(m.element)),he=>Bi(he,m.row,m.column))},M0=(l,m,b)=>{const y=zg(l,b.section),k=us.generate(y);return bp(k,m,!0)},P0=(l,m,b,y)=>{const k=Ga(l).rows,B=m.cells[0].column,Z=k[m.cells[0].row],ne=M0(m.clipboard,m.generators,Z),he=nl(B,l,ne,m.generators,b);return Bi(he,m.cells[0].row,m.cells[0].column)},li=(l,m,b,y)=>{const k=Ga(l).rows,B=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,Z=k[m.cells[0].row],ne=M0(m.clipboard,m.generators,Z),he=nl(B,l,ne,m.generators,b);return Bi(he,m.cells[0].row,B)},Ml=(l,m,b,y)=>{const k=Ga(l).rows,B=m.cells[0].row,Z=k[B],ne=M0(m.clipboard,m.generators,Z),he=pm(B,l,ne,m.generators,b);return Bi(he,m.cells[0].row,m.cells[0].column)},ZC=(l,m,b,y)=>{const k=Ga(l).rows,B=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,Z=k[m.cells[0].row],ne=M0(m.clipboard,m.generators,Z),he=pm(B,l,ne,m.generators,b);return Bi(he,B,m.cells[0].column)},jC=(l,m)=>{const b=us.fromTable(l);return vl(b,m).bind(k=>{const B=k[k.length-1],Z=k[0].column,ne=B.column+B.colspan,he=Ct(It(b.all,Pe=>nt(Pe.cells,ft=>ft.column>=Z&&ft.column<ne)));return v0(he)}).getOr("")},Bx=(l,m)=>{const b=us.fromTable(l);return vl(b,m).bind(v0).getOr("")},GC=(l,m)=>{const b=us.fromTable(l);return vl(b,m).bind(k=>{const B=k[k.length-1],Z=k[0].row,ne=B.row+B.rowspan,he=b.all.slice(Z,ne);return dx(he)}).getOr("")},z1=(l,m,b,y)=>qk(l,m,b,y.sizing),$0=(l,m,b,y)=>Tx(l,m,b,y.sizing,y.resize),Mx=(l,m)=>ve(m,b=>b.column===0&&b.isLocked),Mi=(l,m)=>ve(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),cg=(l,m)=>{const b=Cd(l),y=bm(m);return Ne(y,(k,B)=>{const ne=b[B.column].map(Ys).getOr(0);return k+ne},0)},Od=l=>(m,b)=>vl(m,b).filter(y=>!(l?Mx:Mi)(m,y)).map(y=>({details:y,pixelDelta:cg(m,y)})),qC=(l,m)=>Wu(l,m).map(b=>({details:b,pixelDelta:-cg(l,b)})),Jr=l=>(m,b)=>OC(m,b).filter(y=>!(l?Mx:Mi)(m,y.cells)),Zu=Ni.transform("th"),ig=Ni.transform("td"),s_=ii(_x,vl,gt,gt,Ni.modification),KC=ii(Dx,vl,gt,gt,Ni.modification),Px=ii(Jk,Od(!0),$0,gt,Ni.modification),bh=ii(Ox,Od(!1),$0,gt,Ni.modification),kc=ii(o_,qC,$0,F0,Ni.modification),af=ii(UC,vl,gt,F0,Ni.modification),r_=ii(Qk,Wu,gt,gt,Zu),YC=ii(e_,Wu,gt,gt,ig),a_=ii(B0,Wu,gt,gt,Zu),I0=ii(n_,Wu,gt,gt,ig),XC=ii(Fx,Wu,gt,gt,ig),L0=ii(Rx,Wu,gt,gt,Zu),Un=ii(t_,Wu,gt,gt,ig),V1=ii(fa,gx,z1,gt,Ni.merging),JC=ii(WC,$1,z1,gt,Ni.merging),$x=ii(Nx,RF,z1,gt,Ni.modification),Ix=ii(P0,Jr(!0),gt,gt,Ni.modification),c_=ii(li,Jr(!1),gt,gt,Ni.modification),Lc=ii(Ml,OC,gt,gt,Ni.modification),i_=ii(ZC,OC,gt,gt,Ni.modification),lg=jC,QC=Bx,Lx=GC,Kc=(l,m)=>l.dispatch("NewRow",{node:m}),ug=(l,m)=>l.dispatch("NewCell",{node:m}),cf=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},Hx=(l,m,b,y,k)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:y,otherCells:k})},l_=l=>{l.dispatch("TableSelectionClear")},u_=(l,m,b,y,k)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:y,origin:k})},ac=(l,m,b,y,k)=>{l.dispatch("ObjectResized",{target:m,width:b,height:y,origin:k})},ka={structure:!1,style:!0},sr={structure:!0,style:!1},Yc={structure:!0,style:!0},cc=(l,m)=>Vf(l)?x.percentageSize(m):Qm(l)?x.pixelSize(m):x.getTableSize(m),ic=(l,m,b)=>{const y=Jo=>ys(oh(Jo))==="table",k=Jo=>!y(l)||hm(Jo).rows>1,B=Jo=>!y(l)||hm(Jo).columns>1,Z=QS(l),ne=m0(l)?gt:N1,he=Jo=>{switch(ex(l)){case"section":return M1.section();case"sectionCells":return M1.sectionCells();case"cells":return M1.cells();default:return M1.getTableSectionType(Jo,"section")}},Pe=(Jo,Wl)=>Wl.cursor.fold(()=>{const Yu=Gi(Jo);return L(Yu).filter(Ie).map(xm=>{b.clearSelectedCells(Jo.dom);const lc=l.dom.createRng();return lc.selectNode(xm.dom),l.selection.setRng(lc),as(xm,"data-mce-selected","1"),lc})},Yu=>{const xm=Ri(Yu),lc=l.dom.createRng();return lc.setStart(xm.element.dom,xm.offset),lc.setEnd(xm.element.dom,xm.offset),l.selection.setRng(lc),b.clearSelectedCells(Jo.dom),we.some(lc)}),ft=(Jo,Wl,Yu,xm)=>(lc,Is,jw=!1)=>{Oi(lc);const Gw=Le.fromDom(l.getDoc()),Lv=Xm(Yu,Gw,Z),QE={sizing:cc(l,lc),resize:m0(l)?ih():Kf(),section:he(lc)};return Wl(lc)?Jo(lc,Is,Lv,QE).bind(hf=>{m.refresh(lc.dom),_e(hf.newRows,zp=>{Kc(l,zp.dom)}),_e(hf.newCells,zp=>{ug(l,zp.dom)});const Nh=Pe(lc,hf);return Ie(lc)&&(Oi(lc),jw||cf(l,lc.dom,xm)),Nh.map(zp=>({rng:zp,effect:xm}))}):we.none()},fn=ft(af,k,gt,sr),Fn=ft(kc,B,gt,sr),kn=ft(s_,rt,gt,sr),Cn=ft(KC,rt,gt,sr),Xn=ft(Px,rt,ne,sr),an=ft(bh,rt,ne,sr),bn=ft(V1,rt,gt,sr),Oo=ft(JC,rt,gt,sr),Po=ft(Ix,rt,gt,sr),ao=ft(c_,rt,gt,sr),sa=ft(Lc,rt,gt,sr),rr=ft(i_,rt,gt,sr),_a=ft($x,rt,gt,Yc),Vl=ft(L0,rt,gt,sr),ei=ft(Un,rt,gt,sr),Rh=ft(r_,rt,gt,sr),Fh=ft(YC,rt,gt,sr),Qs=ft(a_,rt,gt,sr),Rc=ft(I0,rt,gt,sr),Ii=ft(XC,rt,gt,sr);return{deleteRow:fn,deleteColumn:Fn,insertRowsBefore:kn,insertRowsAfter:Cn,insertColumnsBefore:Xn,insertColumnsAfter:an,mergeCells:bn,unmergeCells:Oo,pasteColsBefore:Po,pasteColsAfter:ao,pasteRowsBefore:sa,pasteRowsAfter:rr,pasteCells:_a,makeCellsHeader:Vl,unmakeCellsHeader:ei,makeColumnsHeader:Rh,unmakeColumnsHeader:Fh,makeRowsHeader:Qs,makeRowsBody:Rc,makeRowsFooter:Ii,getTableRowType:Lx,getTableCellType:QC,getTableColType:lg}},H0=(l,m,b)=>{const y=or(l,m,1);b===1||y<=1?Ce(l,m):as(l,m,Math.min(b,y))},z0=(l,m)=>b=>{const y=b.column+b.colspan-1,k=b.column;return y>=l&&k<m},zx=(l,m,b)=>{if(us.hasColumns(l)){const y=nt(us.justColumns(l),z0(m,b)),k=It(y,Z=>{const ne=fc(Z.element);return H0(ne,"span",b-m),ne}),B=Le.fromTag("colgroup");return Sa(B,k),[B]}else return[]},Vx=(l,m,b)=>It(l.all,y=>{const k=nt(y.cells,z0(m,b)),B=It(k,ne=>{const he=fc(ne.element);return H0(he,"colspan",b-m),he}),Z=Le.fromTag("tr");return Sa(Z,B),Z}),Ux=(l,m)=>{const b=us.fromTable(l);return Wu(b,m).map(k=>{const B=k[k.length-1],Z=k[0].column,ne=B.column+B.colspan,he=zx(b,Z,ne),Pe=Vx(b,Z,ne);return[...he,...Pe]})},V0=(l,m,b)=>{const y=us.fromTable(l);return vl(y,m).bind(B=>{const Z=bp(y,b,!1),he=Ga(Z).rows.slice(B[0].row,B[B.length-1].row+B[B.length-1].rowspan),Pe=jt(he,fn=>{const Fn=nt(fn.cells,kn=>!kn.isLocked);return Fn.length>0?[{...fn,cells:Fn}]:[]}),ft=w0(Pe);return Qd(ft.length>0,ft)}).map(B=>mx(B))},dg=Dd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),U0=(l,m,b)=>{const y=b.substring(0,b.length-l.length),k=parseFloat(y);return y===k.toString()?m(k):dg.invalid(b)},Sp={...dg,from:l=>bi(l,"%")?U0("%",dg.percent,l):bi(l,"px")?U0("px",dg.pixels,l):dg.invalid(l)},m_=(l,m)=>It(l,b=>Sp.from(b).fold(()=>b,k=>k/m*100+"%",k=>k+"%")),f_=(l,m,b)=>{const y=b/m;return It(l,k=>Sp.from(k).fold(()=>k,Z=>Z*y+"px",Z=>Z/100*b+"px"))},ol=(l,m)=>{const b=l.fold(()=>ie(""),y=>{const k=y/m;return ie(k+"px")},()=>{const y=100/m;return ie(y+"%")});return Rt(m,b)},FF=(l,m,b)=>l.fold(()=>m,y=>f_(m,b,y),y=>m_(m,b)),Wx=(l,m,b)=>{const y=Sp.from(b),k=tt(l,B=>B==="0px")?ol(y,l.length):FF(y,l,m);return Rd(k)},Pl=(l,m)=>l.length===0?m:rn(l,(b,y)=>Sp.from(y).fold(ie(0),St,St)+b,0),W0=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},U1=(l,m)=>Sp.from(l).fold(ie(l),b=>b+m+"px",b=>b+m+"%"),Rd=l=>{if(l.length===0)return l;const m=rn(l,(y,k)=>{const B=Sp.from(k).fold(()=>({value:k,remainder:0}),Z=>W0(Z,"px"),Z=>({value:Z+"%",remainder:0}));return{output:[B.value].concat(y.output),remainder:y.remainder+B.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([U1(b[b.length-1],Math.round(m.remainder))])},Pi=Sp.from,mg=(l,m,b)=>{_e(m,y=>{const k=l.slice(y.column,y.colspan+y.column),B=Pl(k,br());Mo(y.element,"width",B+b)})},ew=(l,m,b)=>{_e(m,(y,k)=>{const B=Pl([l[k]],br());Mo(y.element,"width",B+b)})},Z0=(l,m,b)=>{_e(b,y=>{ia(y.element,"height")}),_e(m,(y,k)=>{Mo(y.element,"height",l[k])})},Zx=l=>Pi(l).fold(ie("px"),ie("px"),ie("%")),lf=(l,m,b)=>{const y=us.fromTable(l),k=y.all,B=us.justCells(y),Z=us.justColumns(y);m.each(ne=>{const he=Zx(ne),Pe=oc(l),ft=Lu(y,l),fn=Wx(ft,Pe,ne);us.hasColumns(y)?ew(fn,Z,he):mg(fn,B,he),Mo(l,"width",ne)}),b.each(ne=>{const he=$e(l),Pe=Qi(y,l),ft=Wx(Pe,he,ne);Z0(ft,k,B),Mo(l,"height",ne)})},jx=Gc,tw=u0,Gx=Xi,W1=l=>{Ce(l,"width"),Ce(l,"height")},Z1=l=>{const m=Va(l);lf(l,we.some(m),we.none()),W1(l)},j1=l=>{const m=Vs(l);lf(l,we.some(m),we.none()),W1(l)},g_=l=>{const m=eh(l);lf(l,we.none(),we.some(m)),W1(l)},j0=l=>{ia(l,"width");const m=Im(l),b=m.length>0?m:Gi(l);_e(b,y=>{ia(y,"width"),W1(y)}),W1(l)},h_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},qx=()=>Le.fromTag("th"),p_=()=>Le.fromTag("td"),G0=()=>Le.fromTag("col"),Kx=(l,m,b,y)=>{const k=Le.fromTag("tr");for(let B=0;B<l;B++){const Z=y<m||B<b?qx():p_();B<b&&as(Z,"scope","row"),y<m&&as(Z,"scope","col"),dr(Z,Le.fromTag("br")),dr(k,Z)}return k},b_=l=>{const m=Le.fromTag("colgroup");return Rt(l,()=>dr(m,G0())),m},nw=(l,m,b,y)=>Rt(l,k=>Kx(m,b,y,k)),q0=(l,m,b,y,k,B=h_)=>{const Z=Le.fromTag("table"),ne=k!=="cells";Bs(Z,B.styles),pr(Z,B.attributes),B.colGroups&&dr(Z,b_(m));const he=Math.min(l,b);if(ne&&b>0){const kn=Le.fromTag("thead");dr(Z,kn);const Xn=nw(b,m,k==="sectionCells"?he:0,y);Sa(kn,Xn)}const Pe=Le.fromTag("tbody");dr(Z,Pe);const ft=ne?l-he:l,Fn=nw(ft,m,ne?0:b,y);return Sa(Pe,Fn),Z},v_=l=>l.dom.innerHTML,Yx=l=>{const m=Le.fromTag("div"),b=Le.fromDom(l.dom.cloneNode(!0));return dr(m,b),v_(m)},$i=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},ow=(l,m)=>{hc(m,"td,th").each(vt($i,l))},sw=(l,m)=>{_e(vo(m,"tr"),b=>{Kc(l,b.dom),_e(vo(b,"th,td"),y=>{ug(l,y.dom)})})},rw=l=>de(l)&&l.indexOf("%")!==-1,K0=(l,m,b,y,k)=>{const B=A1(l),Z={styles:B,attributes:ci(l),colGroups:oC(l)};return l.undoManager.ignore(()=>{const ne=q0(b,m,k,y,ex(l),Z);as(ne,"data-mce-id","__mce");const he=Yx(ne);l.insertContent(he),l.addVisual()}),hc(oh(l),'table[data-mce-id="__mce"]').map(ne=>(Qm(l)?j1(ne):mu(l)?j0(ne):(Vf(l)||rw(B.width))&&Z1(ne),Oi(ne),Ce(ne,"data-mce-id"),sw(l,ne),ow(l,ne),ne.dom)).getOrNull()},y_=(l,m,b,y={})=>{const k=B=>Lt(B)&&B>0;if(k(m)&&k(b)){const B=y.headerRows||0,Z=y.headerColumns||0;return K0(l,b,m,Z,B)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Y0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Xx="x-tinymce/dom-table-",aw=Xx+"rows",cw=Xx+"columns",Jx=l=>{const m=Y0.FakeClipboardItem(l);Y0.write([m])},xp=l=>{var m;const b=(m=Y0.read())!==null&&m!==void 0?m:[];return He(b,y=>we.from(y.getType(l)))},Qx=l=>{xp(l).isSome()&&Y0.clear()},eE=l=>{l.fold(C_,m=>Jx({[aw]:m}))},tE=()=>xp(aw),C_=()=>Qx(aw),nE=l=>{l.fold(w_,m=>Jx({[cw]:m}))},oE=()=>xp(cw),w_=()=>Qx(cw),X0=l=>lx(gu(l),Ad(l)).filter(Wf),sE=l=>bC(gu(l),Ad(l)).filter(Wf),Ep=(l,m)=>{const b=Ad(l),y=()=>X0(l).each(an=>{ba(an,b).filter(J(b)).each(bn=>{const Oo=Le.fromText("");if(ta(bn,Oo),Vr(bn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Po=l.dom.createRng();Po.setStart(Oo.dom,0),Po.setEnd(Oo.dom,0),l.selection.setRng(Po),l.nodeChanged()}})}),k=an=>X0(l).each(bn=>{mu(l)||Qm(l)||Vf(l)||ba(bn,b).each(Po=>{an==="relative"&&!jx(Po)?Z1(Po):an==="fixed"&&!tw(Po)?j1(Po):an==="responsive"&&!Gx(Po)&&j0(Po),Oi(Po),cf(l,Po.dom,sr)})}),B=an=>ba(an,b),Z=an=>sE(l).bind(bn=>B(bn).map(Oo=>an(Oo,bn))),ne=(an,bn)=>{Z(Oo=>{l.formatter.toggle("tableclass",{value:bn},Oo.dom),cf(l,Oo.dom,ka)})},he=(an,bn)=>{Z(Oo=>{const Po=Pr(l),sa=tt(Po,rr=>l.formatter.match("tablecellclass",{value:bn},rr.dom))?l.formatter.remove:l.formatter.apply;_e(Po,rr=>sa("tablecellclass",{value:bn},rr.dom)),cf(l,Oo.dom,ka)})},Pe=()=>{X0(l).each(an=>{ba(an,b).each(bn=>{qo(bn,"caption").fold(()=>{const Oo=Le.fromTag("caption");dr(Oo,Le.fromText("Caption")),_l(bn,Oo,0),l.selection.setCursorLocation(Oo.dom,0)},Oo=>{Bn("caption")(an)&&qt("td",bn).each(Po=>l.selection.setCursorLocation(Po.dom,0)),Vr(Oo)}),cf(l,bn.dom,sr)})})},ft=an=>{l.focus()},fn=(an,bn=!1)=>Z((Oo,Po)=>{const ao=p0(Pr(l),Oo,Po);an(Oo,ao,bn).each(ft)}),Fn=()=>Z((an,bn)=>{const Oo=p0(Pr(l),an,bn),Po=Xm(gt,Le.fromDom(l.getDoc()),we.none());return V0(an,Oo,Po)}),kn=()=>Z((an,bn)=>{const Oo=p0(Pr(l),an,bn);return Ux(an,Oo)}),Cn=(an,bn)=>bn().each(Oo=>{const Po=It(Oo,ao=>fc(ao));Z((ao,sa)=>{const rr=Jm(Le.fromDom(l.getDoc())),_a=tf(Pr(l),sa,Po,rr);an(ao,_a).each(ft)})}),Xn=an=>(bn,Oo)=>lo(Oo,"type").each(Po=>{fn(an(Po),Oo.no_events)});Je({mceTableSplitCells:()=>fn(m.unmergeCells),mceTableMergeCells:()=>fn(m.mergeCells),mceTableInsertRowBefore:()=>fn(m.insertRowsBefore),mceTableInsertRowAfter:()=>fn(m.insertRowsAfter),mceTableInsertColBefore:()=>fn(m.insertColumnsBefore),mceTableInsertColAfter:()=>fn(m.insertColumnsAfter),mceTableDeleteCol:()=>fn(m.deleteColumn),mceTableDeleteRow:()=>fn(m.deleteRow),mceTableCutCol:()=>kn().each(an=>{nE(an),fn(m.deleteColumn)}),mceTableCutRow:()=>Fn().each(an=>{eE(an),fn(m.deleteRow)}),mceTableCopyCol:()=>kn().each(an=>nE(an)),mceTableCopyRow:()=>Fn().each(an=>eE(an)),mceTablePasteColBefore:()=>Cn(m.pasteColsBefore,oE),mceTablePasteColAfter:()=>Cn(m.pasteColsAfter,oE),mceTablePasteRowBefore:()=>Cn(m.pasteRowsBefore,tE),mceTablePasteRowAfter:()=>Cn(m.pasteRowsAfter,tE),mceTableDelete:y,mceTableCellToggleClass:he,mceTableToggleClass:ne,mceTableToggleCaption:Pe,mceTableSizingMode:(an,bn)=>k(bn),mceTableCellType:Xn(an=>an==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Xn(an=>an==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Xn(an=>{switch(an){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(an,bn)=>l.addCommand(bn,an)),l.addCommand("mceInsertTable",(an,bn)=>{y_(l,bn.rows,bn.columns,bn.options)}),l.addCommand("mceTableApplyCellStyle",(an,bn)=>{const Oo=sa=>"tablecell"+sa.toLowerCase().replace("-","");if(!Q(bn))return;const Po=nt(Pr(l),Wf);if(Po.length===0)return;const ao=mt(bn,(sa,rr)=>l.formatter.has(Oo(rr))&&de(sa));Ds(ao)||(Je(ao,(sa,rr)=>{const _a=Oo(rr);_e(Po,Vl=>{sa===""?l.formatter.remove(_a,{value:null},Vl.dom,!0):l.formatter.apply(_a,{value:sa},Vl.dom)})}),B(Po[0]).each(sa=>cf(l,sa.dom,ka)))})},rE=(l,m)=>{const b=Ad(l),y=k=>bC(gu(l)).bind(B=>ba(B,b).map(Z=>{const ne=p0(Pr(l),Z,B);return k(Z,ne)})).getOr("");Je({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(k,B)=>l.addQueryValueHandler(B,k))},iw=Dd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),aE=(l,m,b,y)=>l.fold(m,b,y),S_=l=>l.fold(St,St,St),ju=iw.before,J0=iw.on,Q0=iw.after,Xc={before:ju,on:J0,after:Q0,cata:aE,getStart:S_},$l={create:(l,m)=>({selection:l,kill:m})},lw=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},x_=(l,m)=>{const b=l.document.createRange();return fg(b,m),b},fg=(l,m)=>l.selectNodeContents(m.dom),G1=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,y)=>{l.setStart(b.dom,y)},b=>{l.setStartAfter(b.dom)})},E_=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,y)=>{l.setEnd(b.dom,y)},b=>{l.setEndAfter(b.dom)})},cE=(l,m,b)=>{const y=l.document.createRange();return G1(y,m),E_(y,b),y},uw=(l,m,b,y,k)=>{const B=l.document.createRange();return B.setStart(m.dom,b),B.setEnd(y.dom,k),B},iE=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),ev=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?we.some(b).map(iE):we.none()},q1=Dd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),lE=(l,m,b)=>m(Le.fromDom(b.startContainer),b.startOffset,Le.fromDom(b.endContainer),b.endOffset),uE=(l,m)=>m.match({domRange:b=>({ltr:ie(b),rtl:we.none}),relative:(b,y)=>({ltr:tu(()=>cE(l,b,y)),rtl:tu(()=>we.some(cE(l,y,b)))}),exact:(b,y,k,B)=>({ltr:tu(()=>uw(l,b,y,k,B)),rtl:tu(()=>we.some(uw(l,k,B,b,y)))})}),T_=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(k=>k.collapsed===!1).map(k=>q1.rtl(Le.fromDom(k.endContainer),k.endOffset,Le.fromDom(k.startContainer),k.startOffset)).getOrThunk(()=>lE(l,q1.ltr,b)):lE(l,q1.ltr,b)},tv=(l,m)=>{const b=uE(l,m);return T_(l,b)},nv=(l,m)=>tv(l,m).match({ltr:(y,k,B,Z)=>{const ne=l.document.createRange();return ne.setStart(y.dom,k),ne.setEnd(B.dom,Z),ne},rtl:(y,k,B,Z)=>{const ne=l.document.createRange();return ne.setStart(B.dom,Z),ne.setEnd(y.dom,k),ne}});q1.ltr,q1.rtl;const Tp={create:(l,m,b,y)=>({start:l,soffset:m,finish:b,foffset:y})},ov={create:(l,m,b,y)=>({start:Xc.on(l,m),finish:Xc.on(b,y)})},dw=(l,m)=>{const b=nv(l,m);return Tp.create(Le.fromDom(b.startContainer),b.startOffset,Le.fromDom(b.endContainer),b.endOffset)},sv=ov.create,k_=(l,m,b,y,k,B,Z)=>tn(b,k)&&y===B?we.none():qr(b,"td,th",m).bind(ne=>qr(k,"td,th",m).bind(he=>mE(l,m,ne,he,Z))),mE=(l,m,b,y,k)=>tn(b,y)?we.none():dp(b,y,m).bind(B=>{const Z=B.boxes.getOr([]);return Z.length>1?(k(l,Z,B.start,B.finish),we.some($l.create(we.some(sv(b,0,b,Tc(b))),!0))):we.none()}),vh=(l,m,b,y,k)=>{const B=Z=>(k.clearBeforeUpdate(b),k.selectRange(b,Z.boxes,Z.start,Z.finish),Z.boxes);return gC(y,l,m,k.firstSelectedSelector,k.lastSelectedSelector).map(B)},fE=(l,m)=>({item:l,mode:m}),K1=(l,m,b,y=gg)=>l.property().parent(m).map(k=>fE(k,y)),gg=(l,m,b,y=Y1)=>b.sibling(l,m).map(k=>fE(k,y)),Y1=(l,m,b,y=Y1)=>{const k=l.property().children(m);return b.first(k).map(Z=>fE(Z,y))},gE=[{current:K1,next:gg,fallback:we.none()},{current:gg,next:Y1,fallback:we.some(K1)},{current:Y1,next:Y1,fallback:we.some(gg)}],hE=(l,m,b,y,k=gE)=>V(k,Z=>Z.current===b).bind(Z=>Z.current(l,m,y,Z.next).orThunk(()=>Z.fallback.bind(ne=>hE(l,m,ne,y)))),Ap={left:()=>({sibling:(b,y)=>b.query().prevSibling(y),first:b=>b.length>0?we.some(b[b.length-1]):we.none()}),right:()=>({sibling:(b,y)=>b.query().nextSibling(y),first:b=>b.length>0?we.some(b[0]):we.none()})},vm=(l,m,b,y,k,B)=>hE(l,m,y,k).bind(ne=>B(ne.item)?we.none():b(ne.item)?we.some(ne.item):vm(l,ne.item,b,ne.mode,k,B)),D_=(l,m,b,y)=>vm(l,m,b,gg,Ap.left(),y),mw=(l,m,b,y)=>vm(l,m,b,gg,Ap.right(),y),pE=l=>m=>l.property().children(m).length===0,bE=(l,m,b)=>fw(l,m,pE(l),b),vE=(l,m,b)=>yE(l,m,pE(l),b),fw=D_,yE=mw,hg=jf(),CE=(l,m)=>bE(hg,l,m),yh=(l,m)=>vE(hg,l,m),pg=(l,m,b)=>fw(hg,l,m,b),X1=(l,m,b)=>yE(hg,l,m,b),kp=(l,m,b)=>Os(l,m,b).isSome(),rv=Dd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),bg=(l,m,b)=>{const y=l.getRect(m),k=l.getRect(b);return k.right>y.left&&k.left<y.right},Il=l=>qr(l,"tr"),_p={...rv,verify:(l,m,b,y,k,B,Z)=>qr(y,"td,th",Z).bind(ne=>qr(m,"td,th",Z).map(he=>tn(ne,he)?tn(y,ne)&&Tc(ne)===k?B(he):rv.none("in same cell"):Uu(Il,[ne,he]).fold(()=>bg(l,he,ne)?rv.success():B(he),Pe=>B(he)))).getOr(rv.none("default")),cata:(l,m,b,y,k)=>l.fold(m,b,y,k)},wE=(l,m,b,y)=>({parent:l,children:m,element:b,index:y}),Dp=l=>hs(l).bind(m=>{const b=fo(m);return Op(b,l).map(y=>wE(m,b,l,y))}),Op=(l,m)=>Ao(l,vt(tn,m)),Hc=Bn("br"),av=(l,m,b)=>m(l,b).bind(y=>Ke(y)&&Gs(y).trim().length===0?av(y,m,b):we.some(y)),J1=(l,m,b)=>b.traverse(m).orThunk(()=>av(m,b.gather,l)).map(b.relative),cv=(l,m)=>is(l,m).filter(Hc).orThunk(()=>is(l,m-1).filter(Hc)),SE=(l,m,b,y)=>cv(m,b).bind(k=>y.traverse(k).fold(()=>av(k,y.gather,l).map(y.relative),B=>Dp(B).map(Z=>Xc.on(Z.parent,Z.index)))),hw=(l,m,b,y)=>(Hc(m)?J1(l,m,y):SE(l,m,b,y)).map(B=>({start:B,finish:B})),iv=l=>_p.cata(l,m=>we.none(),()=>we.none(),m=>we.some(bl(m,0)),m=>we.some(bl(m,Tc(m)))),Ya=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),lv=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),ym=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),xE=l=>l.top,pw=l=>l.bottom,uf=(l,m,b)=>b>=0&&b<Tc(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):we.none(),Q1=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Rp=(l,m)=>we.some(l.getRect(m)),uv=(l,m,b)=>Ns(m)?Rp(l,m).map(Q1):Ke(m)?uf(l,m,b).map(Q1):we.none(),dv=(l,m)=>Ns(m)?Rp(l,m).map(Q1):Ke(m)?l.getRangedRect(m,0,m,Tc(m)).map(Q1):we.none(),vg=5,R_=100,Sl=Dd.generate([{none:[]},{retry:["caret"]}]),Fd=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,bw=(l,m,b)=>Qt(m,HC).fold(gn,y=>dv(l,y).exists(k=>Fd(b,k))),EE=(l,m,b,y,k)=>{const B=Ya(k,vg);return Math.abs(b.bottom-y.bottom)<1||b.top>k.bottom?Sl.retry(B):b.top===k.bottom?Sl.retry(Ya(k,1)):bw(l,m,k)?Sl.retry(ym(B,vg,0)):Sl.none()},vw={point:xE,adjuster:(l,m,b,y,k)=>{const B=lv(k,vg);return Math.abs(b.top-y.top)<1||b.bottom<k.top?Sl.retry(B):b.bottom===k.top?Sl.retry(lv(k,1)):bw(l,m,k)?Sl.retry(ym(B,vg,0)):Sl.none()},move:lv,gather:CE},yw={point:pw,adjuster:EE,move:Ya,gather:yh},AE=(l,m,b)=>l.elementFromPoint(m,b).filter(y=>ys(y)==="table").isSome(),kE=(l,m,b,y,k)=>sl(l,m,b,m.move(y,vg),k),sl=(l,m,b,y,k)=>k===0?we.some(y):AE(l,y.left,m.point(y))?kE(l,m,b,y,k-1):l.situsFromPoint(y.left,m.point(y)).bind(B=>B.start.fold(we.none,Z=>dv(l,Z).bind(ne=>m.adjuster(l,Z,ne,b,y).fold(we.none,he=>sl(l,m,b,he,k-1))).orThunk(()=>we.some(y)),we.none)),Ch=(l,m,b)=>l.point(m)>b.getInnerHeight()?we.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?we.some(-l.point(m)):we.none(),Cw=(l,m,b)=>{const y=l.move(b,vg),k=sl(m,l,b,y,R_).getOr(y);return Ch(l,k,m).fold(()=>m.situsFromPoint(k.left,l.point(k)),B=>(m.scrollBy(0,B),m.situsFromPoint(k.left,l.point(k)-B)))},yg={tryUp:vt(Cw,vw),tryDown:vt(Cw,yw),getJumpSize:ie(vg)},rl=20,xl=(l,m,b)=>l.getSelection().bind(y=>hw(m,y.finish,y.foffset,b).fold(()=>we.some(bl(y.finish,y.foffset)),k=>{const B=l.fromSitus(k),Z=_p.verify(l,y.finish,y.foffset,B.finish,B.foffset,b.failure,m);return iv(Z)})),Jc=(l,m,b,y,k,B)=>B===0?we.none():bu(l,m,b,y,k).bind(Z=>{const ne=l.fromSitus(Z),he=_p.verify(l,b,y,ne.finish,ne.foffset,k.failure,m);return _p.cata(he,()=>we.none(),()=>we.some(Z),Pe=>tn(b,Pe)&&y===0?pu(l,b,y,lv,k):Jc(l,m,Pe,0,k,B-1),Pe=>tn(b,Pe)&&y===Tc(Pe)?pu(l,b,y,Ya,k):Jc(l,m,Pe,Tc(Pe),k,B-1))}),pu=(l,m,b,y,k)=>uv(l,m,b).bind(B=>mv(l,k,y(B,yg.getJumpSize()))),mv=(l,m,b)=>{const y=am().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,b):we.none()},bu=(l,m,b,y,k)=>uv(l,b,y).bind(B=>mv(l,k,B)),wh=(l,m,b)=>xl(l,m,b).bind(y=>Jc(l,m,y.element,y.offset,b,rl).map(l.fromSitus)),F_=(l,m)=>kp(l,b=>hs(b).exists(y=>tn(y,m))),ww=(l,m,b,y,k)=>qr(y,"td,th",m).bind(B=>qr(B,"table",m).bind(Z=>F_(k,Z)?wh(l,m,b).bind(ne=>qr(ne.finish,"td,th",m).map(he=>({start:B,finish:he,range:ne}))):we.none())),N_=(l,m,b,y,k,B)=>B(y,m).orThunk(()=>ww(l,m,b,y,k).map(Z=>{const ne=Z.range;return $l.create(we.some(sv(ne.start,ne.soffset,ne.finish,ne.foffset)),!0)})),B_=(l,m)=>qr(l,"tr",m).bind(b=>qr(b,"table",m).bind(y=>{const k=vo(y,"tr");return tn(b,k[0])?pg(y,B=>zf(B).isSome(),m).map(B=>{const Z=Tc(B);return $l.create(we.some(sv(B,Z,B,Z)),!0)}):we.none()})),_E=(l,m)=>qr(l,"tr",m).bind(b=>qr(b,"table",m).bind(y=>{const k=vo(y,"tr");return tn(b,k[k.length-1])?X1(y,B=>ml(B).isSome(),m).map(B=>$l.create(we.some(sv(B,0,B,0)),!0)):we.none()})),fv=(l,m,b,y,k,B,Z)=>ww(l,b,y,k,B).bind(ne=>mE(m,b,ne.start,ne.finish,Z)),gv=l=>{let m=l;return{get:()=>m,set:k=>{m=k}}},ui=l=>{const m=gv(we.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(we.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:ne=>{b(),m.set(we.some(ne))}}},Fp=()=>{const l=ui(gt);return{...l,on:b=>l.get().each(b)}},Np=(l,m)=>qr(l,"td,th",m),eb=l=>As(l).exists(_1),Sw=(l,m,b,y)=>{const k=Fp(),B=k.clear,Z=ft=>{k.on(fn=>{y.clearBeforeUpdate(m),Np(ft.target,b).each(Fn=>{dp(fn,Fn,b).each(kn=>{const Cn=kn.boxes.getOr([]);if(Cn.length===1){const Xn=Cn[0],an=sC(Xn)==="false",bn=eu(k1(ft.target),Xn,tn);an&&bn&&y.selectRange(m,Cn,Xn,Xn)}else Cn.length>1&&(y.selectRange(m,Cn,kn.start,kn.finish),l.selectContents(Fn))})})})};return{clearstate:B,mousedown:ft=>{y.clear(m),Np(ft.target,b).filter(eb).each(k.set)},mouseover:ft=>{Z(ft)},mouseup:ft=>{Z(ft),B()}}},tb={traverse:la,gather:yh,relative:Xc.before,retry:yg.tryDown,failure:_p.failedDown},nb={traverse:wa,gather:CE,relative:Xc.before,retry:yg.tryUp,failure:_p.failedUp},Sh=l=>m=>m===l,xw=Sh(38),hv=Sh(40),Gu=l=>l>=37&&l<=40,DE={isBackward:Sh(37),isForward:Sh(39)},OE={isBackward:Sh(39),isForward:Sh(37)},df=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return _o(b,y)},Ll=(l,m,b)=>{const k=(b!==void 0?b.dom:document).defaultView;k&&k.scrollBy(l,m)},ob=Dd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xh=l=>ob.exact(l.start,l.soffset,l.finish,l.foffset),Cg=l=>l.match({domRange:m=>Le.fromDom(m.startContainer),relative:(m,b)=>Xc.getStart(m),exact:(m,b,y,k)=>m}),Ew=ob.domRange,pv=ob.relative,RE=ob.exact,M_=l=>{const m=Cg(l);return bo(m)},P_=Tp.create,Eh={domRange:Ew,relative:pv,exact:RE,exactFromRange:xh,getWin:M_,range:P_},Tw=(l,m,b)=>{var y;return we.from((y=l.caretPositionFromPoint)===null||y===void 0?void 0:y.call(l,m,b)).bind(k=>{if(k.offsetNode===null)return we.none();const B=l.createRange();return B.setStart(k.offsetNode,k.offset),B.collapse(),we.some(B)})},Bp=(l,m,b)=>{var y;return we.from((y=l.caretRangeFromPoint)===null||y===void 0?void 0:y.call(l,m,b))},sb=(l,m,b)=>l.caretPositionFromPoint?Tw(l,m,b):l.caretRangeFromPoint?Bp(l,m,b):we.none(),$_=(l,m,b)=>{const y=l.document;return sb(y,m,b).map(k=>Tp.create(Le.fromDom(k.startContainer),k.startOffset,Le.fromDom(k.endContainer),k.endOffset))},bv=(l,m)=>{const b=ys(l);return b==="input"?Xc.after(l):it(["br","img"],b)?m===0?Xc.before(l):Xc.after(l):Xc.on(l,m)},Aw=(l,m)=>{const b=l.fold(Xc.before,bv,Xc.after),y=m.fold(Xc.before,bv,Xc.after);return Eh.relative(b,y)},kw=(l,m,b,y)=>{const k=bv(l,m),B=bv(b,y);return Eh.relative(k,B)},vv=(l,m,b,y)=>{const B=Gn(l).dom.createRange();return B.setStart(l.dom,m),B.setEnd(b.dom,y),B},_w=(l,m,b,y)=>{const k=vv(l,m,b,y),B=tn(l,b)&&m===y;return k.collapsed&&!B},Mp=l=>we.from(l.getSelection()),yv=(l,m)=>{Mp(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},Cv=(l,m,b,y,k)=>{const B=uw(l,m,b,y,k);yv(l,B)},wv=(l,m,b,y,k,B)=>{m.collapse(b.dom,y),m.extend(k.dom,B)},Sv=(l,m)=>tv(l,m).match({ltr:(b,y,k,B)=>{Cv(l,b,y,k,B)},rtl:(b,y,k,B)=>{Mp(l).each(Z=>{if(Z.setBaseAndExtent)Z.setBaseAndExtent(b.dom,y,k.dom,B);else if(Z.extend)try{wv(l,Z,b,y,k,B)}catch{Cv(l,k,B,b,y)}else Cv(l,k,B,b,y)})}}),Rs=(l,m,b,y,k)=>{const B=kw(m,b,y,k);Sv(l,B)},Cm=(l,m,b)=>{const y=Aw(m,b);Sv(l,y)},Th=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return we.some(Tp.create(Le.fromDom(m.startContainer),m.startOffset,Le.fromDom(b.endContainer),b.endOffset))}else return we.none()},xv=l=>{if(l.anchorNode===null||l.focusNode===null)return Th(l);{const m=Le.fromDom(l.anchorNode),b=Le.fromDom(l.focusNode);return _w(m,l.anchorOffset,b,l.focusOffset)?we.some(Tp.create(m,l.anchorOffset,b,l.focusOffset)):Th(l)}},Ev=(l,m,b=!0)=>{const k=(b?x_:lw)(l,m);yv(l,k)},wg=l=>Mp(l).filter(m=>m.rangeCount>0).bind(xv),Tv=l=>wg(l).map(m=>Eh.exact(m.start,m.soffset,m.finish,m.foffset)),Dw=(l,m)=>{const b=nv(l,m);return ev(b)},Ow=(l,m,b)=>$_(l,m,b),Rw=l=>{Mp(l).each(m=>m.removeAllRanges())},mf=l=>({elementFromPoint:(an,bn)=>Le.fromPoint(Le.fromDom(l.document),an,bn),getRect:an=>an.dom.getBoundingClientRect(),getRangedRect:(an,bn,Oo,Po)=>{const ao=Eh.exact(an,bn,Oo,Po);return Dw(l,ao)},getSelection:()=>Tv(l).map(an=>dw(l,an)),fromSitus:an=>{const bn=Eh.relative(an.start,an.finish);return dw(l,bn)},situsFromPoint:(an,bn)=>Ow(l,an,bn).map(Oo=>ov.create(Oo.start,Oo.soffset,Oo.finish,Oo.foffset)),clearSelection:()=>{Rw(l)},collapseSelection:(an=!1)=>{Tv(l).each(bn=>bn.fold(Oo=>Oo.collapse(an),(Oo,Po)=>{const ao=an?Oo:Po;Cm(l,ao,ao)},(Oo,Po,ao,sa)=>{const rr=an?Oo:ao,_a=an?Po:sa;Rs(l,rr,_a,rr,_a)}))},setSelection:an=>{Rs(l,an.start,an.soffset,an.finish,an.foffset)},setRelativeSelection:(an,bn)=>{Cm(l,an,bn)},selectNode:an=>{Ev(l,an,!1)},selectContents:an=>{Ev(l,an)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>df(Le.fromDom(l.document)).top,scrollBy:(an,bn)=>{Ll(an,bn,Le.fromDom(l.document))}}),Ah=(l,m)=>({rows:l,cols:m}),FE=(l,m,b,y)=>{const k=mf(l),B=Sw(k,m,b,y);return{clearstate:B.clearstate,mousedown:B.mousedown,mouseover:B.mouseover,mouseup:B.mouseup}},rb=l=>Qt(l,Qn).exists(_1),Fw=(l,m)=>rb(l)||rb(m),Av=(l,m,b,y)=>{const k=mf(l),B=()=>(y.clear(m),we.none());return{keydown:(he,Pe,ft,fn,Fn,kn)=>{const Cn=he.raw,Xn=Cn.which,an=Cn.shiftKey===!0;return R1(m,y.selectedSelector).fold(()=>(Gu(Xn)&&!an&&y.clearBeforeUpdate(m),Gu(Xn)&&an&&!Fw(Pe,fn)?we.none:hv(Xn)&&an?vt(fv,k,m,b,tb,fn,Pe,y.selectRange):xw(Xn)&&an?vt(fv,k,m,b,nb,fn,Pe,y.selectRange):hv(Xn)?vt(N_,k,b,tb,fn,Pe,_E):xw(Xn)?vt(N_,k,b,nb,fn,Pe,B_):we.none),Oo=>{const Po=ao=>()=>He(ao,rr=>vh(rr.rows,rr.cols,m,Oo,y)).fold(()=>rx(m,y.firstSelectedSelector,y.lastSelectedSelector).map(rr=>{const _a=hv(Xn)||kn.isForward(Xn)?Xc.after:Xc.before;return k.setRelativeSelection(Xc.on(rr.first,0),_a(rr.table)),y.clear(m),$l.create(we.none(),!0)}),rr=>we.some($l.create(we.none(),!0)));return Gu(Xn)&&an&&!Fw(Pe,fn)?we.none:hv(Xn)&&an?Po([Ah(1,0)]):xw(Xn)&&an?Po([Ah(-1,0)]):kn.isBackward(Xn)&&an?Po([Ah(0,-1),Ah(-1,0)]):kn.isForward(Xn)&&an?Po([Ah(0,1),Ah(1,0)]):Gu(Xn)&&!an?B:we.none})()},keyup:(he,Pe,ft,fn,Fn)=>R1(m,y.selectedSelector).fold(()=>{const kn=he.raw,Cn=kn.which;return kn.shiftKey===!0&&Gu(Cn)&&Fw(Pe,fn)?k_(m,b,Pe,ft,fn,Fn,y.selectRange):we.none()},we.none)}},kv=(l,m,b,y)=>{const k=mf(l);return(B,Z)=>{y.clearBeforeUpdate(m),dp(B,Z,b).each(ne=>{const he=ne.boxes.getOr([]);y.selectRange(m,he,ne.start,ne.finish),k.selectContents(Z),k.collapseSelection()})}},Nw=(l,m)=>{const b=lr(l,m);return b===void 0||b===""?[]:b.split(" ")},NE=(l,m,b)=>{const k=Nw(l,m).concat([b]);return as(l,m,k.join(" ")),!0},ff=(l,m,b)=>{const y=nt(Nw(l,m),k=>k!==b);return y.length>0?as(l,m,y.join(" ")):Ce(l,m),!1},_v=l=>l.dom.classList!==void 0,BE=l=>Nw(l,"class"),vu=(l,m)=>NE(l,"class",m),_c=(l,m)=>ff(l,"class",m),gf=(l,m)=>{_v(l)?l.dom.classList.add(m):vu(l,m)},Bw=l=>{(_v(l)?l.dom.classList:BE(l)).length===0&&Ce(l,"class")},I_=(l,m)=>{_v(l)?l.dom.classList.remove(m):_c(l,m),Bw(l)},Dv=(l,m)=>_v(l)&&l.dom.classList.contains(m),Mw=(l,m)=>{_e(m,b=>{I_(l,b)})},Pp=l=>m=>{gf(m,l)},ME=l=>m=>{Mw(m,l)},H_={byClass:l=>{const m=Pp(l.selected),b=ME([l.selected,l.lastSelected,l.firstSelected]),y=B=>{const Z=vo(B,l.selectedSelector);_e(Z,b)};return{clearBeforeUpdate:y,clear:y,selectRange:(B,Z,ne,he)=>{y(B),_e(Z,m),gf(ne,l.firstSelected),gf(he,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const y=he=>{Ce(he,l.selected),Ce(he,l.firstSelected),Ce(he,l.lastSelected)},k=he=>{as(he,l.selected,"1")},B=he=>{Z(he),b()},Z=he=>{const Pe=vo(he,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);_e(Pe,y)};return{clearBeforeUpdate:Z,clear:B,selectRange:(he,Pe,ft,fn)=>{B(he),_e(Pe,k),as(ft,l.firstSelected,"1"),as(fn,l.lastSelected,"1"),m(Pe,ft,fn)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},PE=(l,m,b,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return b(l.elements)}},$E=()=>({tag:"none"}),Ln=l=>({tag:"multiple",elements:l}),Dc=l=>({tag:"single",element:l}),ab=(l,m,b)=>({get:()=>Gf(l(),b).fold(()=>m().fold($E,Dc),Ln)}),Oc=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),y=w0(b);return jt(y,k=>{const B=k.cells.slice(0,m[m.length-1].column+1);return It(B,Z=>Z.element)})},yu=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),y=w0(b);return jt(y,k=>{const B=k.cells.slice(m[0].column+m[0].colspan-1,k.cells.length);return It(B,Z=>Z.element)})},Pw=(l,m,b)=>{const y=us.fromTable(l);return vl(y,m).map(B=>{const Z=bp(y,b,!1),{rows:ne}=Ga(Z),he=Oc(ne,B),Pe=yu(ne,B);return{upOrLeftCells:he,downOrRightCells:Pe}})},kh=(l,m,b,y,k,B,Z)=>({target:l,x:m,y:b,stop:y,prevent:k,kill:B,raw:Z}),cb=l=>{const m=Le.fromDom(q(l).getOr(l.target)),b=()=>l.stopPropagation(),y=()=>l.preventDefault(),k=st(y,b);return kh(m,l.clientX,l.clientY,b,y,k,l)},_h=(l,m)=>b=>{l(b)&&m(cb(b))},ib=(l,m,b,y,k)=>{const B=_h(b,y);return l.dom.addEventListener(m,B,k),{unbind:vt(z_,l,m,B,k)}},IE=(l,m,b,y)=>ib(l,m,b,y,!1),z_=(l,m,b,y)=>{l.dom.removeEventListener(m,b,y)},V_=rt,$p=(l,m,b)=>IE(l,m,V_,b),Dh=cb,$w=l=>!Dv(Le.fromDom(l.target),"ephox-snooker-resizer-bar"),Iw=(l,m)=>{const b=ab(()=>Le.fromDom(l.getBody()),()=>bC(gu(l),Ad(l)),ef.selectedSelector),y=(he,Pe,ft)=>{ba(Pe).each(Fn=>{const kn=It(he,Oo=>Oo.dom),Cn=QS(l),Xn=Xm(gt,Le.fromDom(l.getDoc()),Cn),an=Pr(l),bn=Pw(Fn,{selection:an},Xn).map(Oo=>cn(Oo,Po=>It(Po,ao=>ao.dom))).getOrUndefined();Hx(l,kn,Pe.dom,ft.dom,bn)})},k=()=>l_(l),B=H_.byAttr(ef,y,k);return l.on("init",he=>{const Pe=l.getWin(),ft=oh(l),fn=Ad(l),Fn=()=>{const Qs=l.selection,Rc=Le.fromDom(Qs.getStart()),Ii=Le.fromDom(Qs.getEnd());Uu(ba,[Rc,Ii]).fold(()=>B.clear(ft),gt)},kn=FE(Pe,ft,fn,B),Cn=Av(Pe,ft,fn,B),Xn=kv(Pe,ft,fn,B),an=Qs=>Qs.raw.shiftKey===!0;l.on("TableSelectorChange",Qs=>Xn(Qs.start,Qs.finish));const bn=(Qs,Rc)=>{an(Qs)&&(Rc.kill&&Qs.kill(),Rc.selection.each(Ii=>{const Ku=Eh.relative(Ii.start,Ii.finish),Ul=nv(Pe,Ku);l.selection.setRng(Ul)}))},Oo=Qs=>{const Rc=Dh(Qs);if(Rc.raw.shiftKey&&Gu(Rc.raw.which)){const Ii=l.selection.getRng(),Ku=Le.fromDom(Ii.startContainer),Ul=Le.fromDom(Ii.endContainer);Cn.keyup(Rc,Ku,Ii.startOffset,Ul,Ii.endOffset).each(Hp=>{bn(Rc,Hp)})}},Po=Qs=>{const Rc=Dh(Qs);m.hide();const Ii=l.selection.getRng(),Ku=Le.fromDom(Ii.startContainer),Ul=Le.fromDom(Ii.endContainer),Hp=M(DE,OE)(Le.fromDom(l.selection.getStart()));Cn.keydown(Rc,Ku,Ii.startOffset,Ul,Ii.endOffset,Hp).each(Jo=>{bn(Rc,Jo)}),m.show()},ao=Qs=>Qs.button===0,sa=Qs=>Qs.buttons===void 0?!0:(Qs.buttons&1)!==0,rr=Qs=>{kn.clearstate()},_a=Qs=>{ao(Qs)&&$w(Qs)&&kn.mousedown(Dh(Qs))},Vl=Qs=>{sa(Qs)&&$w(Qs)&&kn.mouseover(Dh(Qs))},ei=Qs=>{ao(Qs)&&$w(Qs)&&kn.mouseup(Dh(Qs))},Fh=(()=>{const Qs=gv(Le.fromDom(ft)),Rc=gv(0);return{touchEnd:Ku=>{const Ul=Le.fromDom(Ku.target);if(Bn("td")(Ul)||Bn("th")(Ul)){const Hp=Qs.get(),Jo=Rc.get();tn(Hp,Ul)&&Ku.timeStamp-Jo<300&&(Ku.preventDefault(),Xn(Ul,Ul))}Qs.set(Ul),Rc.set(Ku.timeStamp)}}})();l.on("dragstart",rr),l.on("mousedown",_a),l.on("mouseover",Vl),l.on("mouseup",ei),l.on("touchend",Fh.touchEnd),l.on("keyup",Oo),l.on("keydown",Po),l.on("NodeChange",Fn)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ef.firstSelected),l.serializer.addTempAttr(ef.lastSelected)}),{getSelectedCells:()=>PE(b.get(),ie([]),he=>It(he,Pe=>Pe.dom),he=>[he.dom]),clearSelectedCells:he=>B.clear(Le.fromDom(he))}},El=l=>{let m=[];return{bind:B=>{if(B===void 0)throw new Error("Event bind error: undefined handler");m.push(B)},unbind:B=>{m=nt(m,Z=>Z!==B)},trigger:(...B)=>{const Z={};_e(l,(ne,he)=>{Z[ne]=B[he]}),_e(m,ne=>{ne(Z)})}}},wm=l=>{const m=cn(l,y=>({bind:y.bind,unbind:y.unbind})),b=cn(l,y=>y.trigger);return{registry:m,trigger:b}},Ov=(l,m)=>{let b=null;const y=()=>{ct(b)||(clearTimeout(b),b=null)};return{cancel:y,throttle:(...B)=>{y(),b=setTimeout(()=>{b=null,l.apply(null,B)},m)}}},qu=l=>l.slice(0).sort(),Rv=(l,m)=>{throw new Error("All required keys ("+qu(l).join(", ")+") were not specified. Specified keys were: "+qu(m).join(", ")+".")},U_=l=>{throw new Error("Unsupported keys for object: "+qu(l).join(", "))},Fv=(l,m)=>{if(!Te(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");_e(m,b=>{if(!de(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},Nv=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+qu(l).join(", ")+") were not.")},W_=l=>{const m=qu(l);V(m,(y,k)=>k<m.length-1&&y===m[k+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Z_=(l,m)=>j_(l,m,{validate:_t,label:"function"}),j_=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Fv("required",m),W_(m),y=>{const k=ke(y);tt(m,ne=>it(k,ne))||Rv(m,k),l(m,k);const Z=nt(m,ne=>!b.validate(y[ne],ne));return Z.length>0&&Nv(Z,b.label),y}},G_=(l,m)=>{const b=nt(m,y=>!it(l,y));b.length>0&&U_(b)},Bv=l=>Z_(G_,l),LE=Bv(["compare","extract","mutate","sink"]),q_=Bv(["element","start","stop","destroy"]),Mv=Bv(["forceDrop","drop","move","delayDrop"]),Qc=()=>{let l=we.none();const m=()=>{l=we.none()},b=(B,Z)=>{const ne=l.map(he=>B.compare(he,Z));return l=we.some(Z),ne},y=(B,Z)=>{Z.extract(B).each(he=>{b(Z,he).each(ft=>{k.trigger.move(ft)})})},k=wm({move:El(["info"])});return{onEvent:y,reset:m,events:k.registry}},Cu=()=>{const l=wm({move:El(["info"])});return{onEvent:gt,reset:gt,events:l.registry}},Hl=()=>{const l=Cu(),m=Qc();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(ne,he)=>{b.onEvent(ne,he)},events:m.events}},Pv=(l,m,b)=>{let y=!1;const k=wm({start:El([]),stop:El([])}),B=Hl(),Z=()=>{Cn.stop(),B.isOn()&&(B.off(),k.trigger.stop())},ne=Ov(Z,200),he=an=>{Cn.start(an),B.on(),k.trigger.start()},Pe=an=>{ne.cancel(),B.onEvent(an,m)};B.events.move.bind(an=>{m.mutate(l,an.info)});const ft=()=>{y=!0},fn=()=>{y=!1},Fn=()=>y,kn=an=>(...bn)=>{y&&an.apply(null,bn)},Cn=m.sink(Mv({forceDrop:Z,drop:kn(Z),move:kn(Pe),delayDrop:kn(ne.throttle)}),b),Xn=()=>{Cn.destroy()};return{element:Cn.element,go:he,on:ft,off:fn,isActive:Fn,destroy:Xn,events:k.registry}},lb=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},ub=lb("ephox-dragster").resolve,K_=l=>{const m={layerClass:ub("blocker"),...l},b=Le.fromTag("div");return as(b,"role","presentation"),Bs(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),gf(b,ub("blocker")),gf(b,m.layerClass),{element:ie(b),destroy:()=>{Vr(b)}}};var UE=LE({compare:(l,m)=>_o(m.left-l.left,m.top-l.top),extract:l=>we.some(_o(l.x,l.y)),sink:(l,m)=>{const b=K_(m),y=$p(b.element(),"mousedown",l.forceDrop),k=$p(b.element(),"mouseup",l.drop),B=$p(b.element(),"mousemove",l.move),Z=$p(b.element(),"mouseout",l.delayDrop),ne=()=>{b.destroy(),k.unbind(),B.unbind(),Z.unbind(),y.unbind()},he=ft=>{dr(ft,b.element())},Pe=()=>{Vr(b.element())};return q_({element:b.element,start:he,stop:Pe,destroy:ne})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const $v=(l,m={})=>{var b;const y=(b=m.mode)!==null&&b!==void 0?b:UE;return Pv(l,y,m)},mn=lb("ephox-snooker").resolve,zl=()=>{const l=wm({drag:El(["xDelta","yDelta"])});return{mutate:(b,y)=>{l.trigger.drag(b,y)},events:l.registry}},ZE=()=>{const l=wm({drag:El(["xDelta","yDelta","target"])});let m=we.none();const b=zl();return b.events.drag.bind(B=>{m.each(Z=>{l.trigger.drag(B.xDelta,B.yDelta,Z)})}),{assign:B=>{m=we.some(B)},get:()=>m,mutate:b.mutate,events:l.registry}},Lw=(l,m,b,y,k)=>{const B=Le.fromTag("div");return Bs(B,{position:"absolute",left:m-y/2+"px",top:b+"px",height:k+"px",width:y+"px"}),pr(B,{"data-column":l,role:"presentation"}),B},db=(l,m,b,y,k)=>{const B=Le.fromTag("div");return Bs(B,{position:"absolute",left:m+"px",top:b-k/2+"px",height:k+"px",width:y+"px"}),pr(B,{"data-row":l,role:"presentation"}),B},Oh=mn("resizer-bar"),Hw=mn("resizer-rows"),mb=mn("resizer-cols"),jE=7,X_=(l,m)=>jt(l.all,(b,y)=>m(b.element)?[y]:[]),zw=(l,m)=>{const b=[];return Rt(l.grid.columns,y=>{us.getColumnAt(l,y).map(B=>B.element).forall(m)&&b.push(y)}),nt(b,y=>{const k=us.filterItems(l,B=>B.column===y);return tt(k,B=>m(B.element))})},fb=l=>{const m=vo(l.parent(),"."+Oh);_e(m,Vr)},Sg=(l,m,b)=>{const y=l.origin();_e(m,k=>{k.each(B=>{const Z=b(y,B);gf(Z,Oh),dr(l.parent(),Z)})})},GE=(l,m,b,y)=>{Sg(l,m,(k,B)=>{const Z=Lw(B.col,B.x-k.left,b.top-k.top,jE,y);return gf(Z,mb),Z})},qE=(l,m,b,y)=>{Sg(l,m,(k,B)=>{const Z=db(B.row,b.left-k.left,B.y-k.top,y,jE);return gf(Z,Hw),Z})},J_=(l,m,b,y,k)=>{const B=va(b),Z=m.isResizable,ne=y.length>0?ri.positions(y,b):[],he=ne.length>0?X_(l,Z):[],Pe=nt(ne,(kn,Cn)=>ve(he,Xn=>Cn===Xn));qE(m,Pe,B,Ys(b));const ft=k.length>0?Xg.positions(k,b):[],fn=ft.length>0?zw(l,Z):[],Fn=nt(ft,(kn,Cn)=>ve(fn,Xn=>Cn===Xn));GE(m,Fn,B,en(b))},Vw=(l,m)=>{if(fb(l),l.isResizable(m)){const b=us.fromTable(m),y=Pf(b),k=Cd(b);J_(b,l,m,y,k)}},Q_=(l,m)=>{const b=vo(l.parent(),"."+Oh);_e(b,m)},Tl=l=>{Q_(l,m=>{Mo(m,"display","none")})},wi=l=>{Q_(l,m=>{Mo(m,"display","block")})},Ip=l=>Dv(l,Hw),$F=l=>Dv(l,mb),e3=mn("resizer-bar-dragging"),Uw=l=>{const m=ZE(),b=$v(m,{});let y=we.none();const k=(Cn,Xn)=>we.from(lr(Cn,Xn));m.events.drag.bind(Cn=>{k(Cn.target,"data-row").each(Xn=>{const an=Br(Cn.target,"top");Mo(Cn.target,"top",an+Cn.yDelta+"px")}),k(Cn.target,"data-column").each(Xn=>{const an=Br(Cn.target,"left");Mo(Cn.target,"left",an+Cn.xDelta+"px")})});const B=(Cn,Xn)=>{const an=Br(Cn,Xn),bn=or(Cn,"data-initial-"+Xn,0);return an-bn};b.events.stop.bind(()=>{m.get().each(Cn=>{y.each(Xn=>{k(Cn,"data-row").each(an=>{const bn=B(Cn,"top");Ce(Cn,"data-initial-top"),kn.trigger.adjustHeight(Xn,bn,parseInt(an,10))}),k(Cn,"data-column").each(an=>{const bn=B(Cn,"left");Ce(Cn,"data-initial-left"),kn.trigger.adjustWidth(Xn,bn,parseInt(an,10))}),Vw(l,Xn)})})});const Z=(Cn,Xn)=>{kn.trigger.startAdjust(),m.assign(Cn),as(Cn,"data-initial-"+Xn,Br(Cn,Xn)),gf(Cn,e3),Mo(Cn,"opacity","0.2"),b.go(l.parent())},ne=$p(l.parent(),"mousedown",Cn=>{Ip(Cn.target)&&Z(Cn.target,"top"),$F(Cn.target)&&Z(Cn.target,"left")}),he=Cn=>tn(Cn,l.view()),Pe=Cn=>qr(Cn,"table",he).filter(_1),ft=$p(l.view(),"mouseover",Cn=>{Pe(Cn.target).fold(()=>{Ie(Cn.target)&&fb(l)},Xn=>{b.isActive()&&(y=we.some(Xn),Vw(l,Xn))})}),fn=()=>{ne.unbind(),ft.unbind(),b.destroy(),fb(l)},Fn=Cn=>{Vw(l,Cn)},kn=wm({adjustHeight:El(["table","delta","row"]),adjustWidth:El(["table","delta","column"]),startAdjust:El([])});return{destroy:fn,refresh:Fn,on:b.on,off:b.off,hideBars:vt(Tl,l),showBars:vt(wi,l),events:kn.registry}},t3={create:(l,m,b)=>{const y=ri,k=Xg,B=Uw(l),Z=wm({beforeResize:El(["table","type"]),afterResize:El(["table","type"]),startDrag:El([])});return B.events.adjustHeight.bind(ne=>{const he=ne.table;Z.trigger.beforeResize(he,"row");const Pe=y.delta(ne.delta,he);IC(he,Pe,ne.row),Z.trigger.afterResize(he,"row")}),B.events.startAdjust.bind(ne=>{Z.trigger.startDrag()}),B.events.adjustWidth.bind(ne=>{const he=ne.table;Z.trigger.beforeResize(he,"col");const Pe=k.delta(ne.delta,he),ft=b(he);$C(he,Pe,ne.column,m,ft),Z.trigger.afterResize(he,"col")}),{on:B.on,off:B.off,refreshBars:B.refresh,hideBars:B.hideBars,showBars:B.showBars,destroy:B.destroy,events:Z.registry}}},Sm={only:(l,m)=>{const b=xt(l)?no(l):l;return{parent:ie(b),view:ie(l),origin:ie(_o(0,0)),isResizable:m}},detached:(l,m,b)=>{const y=()=>va(m);return{parent:ie(m),view:ie(l),origin:y,isResizable:b}},body:(l,m,b)=>({parent:ie(m),view:ie(l),origin:ie(_o(0,0)),isResizable:b})},Iv=()=>{const l=Le.fromTag("div");return Bs(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),dr(nn(),l),l},o3=(l,m)=>l.inline?Sm.body(Le.fromDom(l.getBody()),Iv(),m):Sm.only(Le.fromDom(l.getDoc()),m),s3=(l,m)=>{l.inline&&Vr(m.parent())},YE=l=>Tt(l)&&l.nodeName==="TABLE",gb="bar-",Ww=l=>lr(l,"data-mce-resize")!=="false",XE=l=>{const m=us.fromTable(l);us.hasColumns(m)||_e(Gi(l),b=>{const y=Js(b,"width");Mo(b,"width",y),Ce(b,"width")})},LF=l=>La(l,"corner-"),Lp=l=>em(l,"corner-"),Zw=l=>{const m=Fp(),b=Fp(),y=Fp();let k,B,Z,ne;const he=bn=>cc(l,bn),Pe=()=>Aa(l)?Kf():ih(),ft=bn=>hm(bn).columns,fn=bn=>hm(bn).rows,Fn=(bn,Oo,Po,ao)=>{const sa=Lp(Oo),rr=bi(sa,"e"),_a=La(sa,"n");if(B===""&&Z1(bn),ne===""&&g_(bn),Po!==k&&B!==""){Mo(bn,"width",B);const Vl=Pe(),ei=he(bn),Rh=Aa(l)||rr?ft(bn)-1:0;$C(bn,Po-k,Rh,Vl,ei)}else if(nx(B)){const Vl=parseFloat(B.replace("%","")),ei=Po*Vl/k;Mo(bn,"width",ei+"%")}if(ox(B)&&XE(bn),ao!==Z&&ne!==""){Mo(bn,"height",ne);const Vl=_a?0:fn(bn)-1;IC(bn,ao-Z,Vl)}},kn=()=>{b.on(bn=>{bn.destroy()}),y.on(bn=>{s3(l,bn)})};return l.on("init",()=>{const bn=o3(l,Ww);if(y.set(bn),xd(l)&&fu(l)){const Oo=Pe(),Po=t3.create(bn,Oo,he);Po.on(),Po.events.startDrag.bind(ao=>{m.set(l.selection.getRng())}),Po.events.beforeResize.bind(ao=>{const sa=ao.table.dom;u_(l,sa,Uf(sa),rC(sa),gb+ao.type)}),Po.events.afterResize.bind(ao=>{const sa=ao.table,rr=sa.dom;Oi(sa),m.on(_a=>{l.selection.setRng(_a),l.focus()}),ac(l,rr,Uf(rr),rC(rr),gb+ao.type),l.undoManager.add()}),b.set(Po)}}),l.on("ObjectResizeStart",bn=>{const Oo=bn.target;if(YE(Oo)){const Po=Le.fromDom(Oo);_e(l.dom.select(".mce-clonedresizable"),ao=>{l.dom.addClass(ao,"mce-"+nC(l)+"-columns")}),!tw(Po)&&Qm(l)?j1(Po):!jx(Po)&&Vf(l)&&Z1(Po),Gx(Po)&&La(bn.origin,gb)&&Z1(Po),k=bn.width,B=mu(l)?"":aC(l,Oo).getOr(""),Z=bn.height,ne=tx(l,Oo).getOr("")}}),l.on("ObjectResized",bn=>{const Oo=bn.target;if(YE(Oo)){const Po=Le.fromDom(Oo),ao=bn.origin;LF(ao)&&Fn(Po,ao,bn.width,bn.height),Oi(Po),cf(l,Po.dom,ka)}}),l.on("SwitchMode",()=>{b.on(bn=>{l.mode.isReadOnly()?bn.hideBars():bn.showBars()})}),l.on("dragstart dragend",bn=>{b.on(Oo=>{bn.type==="dragstart"?(Oo.hideBars(),Oo.off()):(Oo.on(),Oo.showBars())})}),l.on("remove",()=>{kn()}),{refresh:bn=>{b.on(Oo=>Oo.refreshBars(Le.fromDom(bn)))},hide:()=>{b.on(bn=>bn.hideBars())},show:()=>{b.on(bn=>bn.showBars())}}},HF=l=>{nh(l);const m=Zw(l),b=Iw(l,m),y=ic(l,m,b);return Ep(l,y),rE(l,y),fp(l,y),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},JE=l=>({table:HF(l)});var r3=()=>{h.add("dom",JE)};r3()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(Ve,je,T)=>{const it=je==="UL"?"InsertUnorderedList":"InsertOrderedList";Ve.execCommand(it,!1,T===!1?null:{"list-style-type":T})},D=Ve=>{Ve.addCommand("ApplyUnorderedListStyle",(je,T)=>{C(Ve,"UL",T["list-style-type"])}),Ve.addCommand("ApplyOrderedListStyle",(je,T)=>{C(Ve,"OL",T["list-style-type"])})},N=Ve=>je=>je.options.get(Ve),W=Ve=>{const je=Ve.options.register;je("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),je("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},Y=N("advlist_number_styles"),de=N("advlist_bullet_styles"),Q=Ve=>Ve==null,Te=Ve=>!Q(Ve);var ct=tinymce.util.Tools.resolve("tinymce.util.Tools");class Xe{constructor(je,T){this.tag=je,this.value=T}static some(je){return new Xe(!0,je)}static none(){return Xe.singletonNone}fold(je,T){return this.tag?T(this.value):je()}isSome(){return this.tag}isNone(){return!this.tag}map(je){return this.tag?Xe.some(je(this.value)):Xe.none()}bind(je){return this.tag?je(this.value):Xe.none()}exists(je){return this.tag&&je(this.value)}forall(je){return!this.tag||je(this.value)}filter(je){return!this.tag||je(this.value)?this:Xe.none()}getOr(je){return this.tag?this.value:je}or(je){return this.tag?this:je}getOrThunk(je){return this.tag?this.value:je()}orThunk(je){return this.tag?this:je()}getOrDie(je){if(this.tag)return this.value;throw new Error(je??"Called getOrDie on None")}static from(je){return Te(je)?Xe.some(je):Xe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(je){this.tag&&je(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xe.singletonNone=new Xe(!1);const wt=(Ve,je,T)=>{for(let it=0,ve=Ve.length;it<ve;it++){const Rt=Ve[it];if(je(Rt,it))return Xe.some(Rt);if(T(Rt,it))break}return Xe.none()},yt=Ve=>/\btox\-/.test(Ve.className),Tt=(Ve,je)=>Ve.dom.isChildOf(je,Ve.getBody()),_t=Ve=>je=>Te(je)&&Ve.test(je.nodeName),Lt=_t(/^(OL|UL|DL)$/),gt=_t(/^(TH|TD)$/),st=(Ve,je,T)=>wt(je,it=>Lt(it)&&!yt(it),gt).exists(it=>it.nodeName===T&&Tt(Ve,it)),Qe=Ve=>{const je=Ve.dom.getParent(Ve.selection.getNode(),"ol,ul"),T=Ve.dom.getStyle(je,"listStyleType");return Xe.from(T)},ie=(Ve,je)=>je!==null&&!Ve.dom.isEditable(je),St=(Ve,je)=>{const T=Ve.dom.getParent(je,"ol,ul,dl");return ie(Ve,T)&&Ve.selection.isEditable()},Wn=(Ve,je)=>{const T=Ve.selection.getNode();return je({parents:Ve.dom.getParents(T),element:T}),Ve.on("NodeChange",je),()=>Ve.off("NodeChange",je)},vt=Ve=>Ve.replace(/\-/g," ").replace(/\b\w/g,je=>je.toUpperCase()),J=Ve=>Q(Ve)||Ve==="default"?"":Ve,Yt=(Ve,je)=>T=>{const it=(Rt,It)=>{const _e=Rt.selection.getStart(!0);T.setActive(st(Rt,It,je)),T.setEnabled(!St(Rt,_e)&&Rt.selection.isEditable())};return Wn(Ve,Rt=>it(Ve,Rt.parents))},On=(Ve,je,T,it,ve,Rt)=>{Ve.ui.registry.addSplitButton(je,{tooltip:T,icon:ve==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:It=>{const _e=ct.map(Rt,Dt=>{const An=ve==="OL"?"num":"bull",nt=Dt==="disc"||Dt==="decimal"?"default":Dt,rn=J(Dt),Ne=vt(Dt);return{type:"choiceitem",value:rn,icon:"list-"+An+"-"+nt,text:Ne}});It(_e)},onAction:()=>Ve.execCommand(it),onItemAction:(It,_e)=>{C(Ve,ve,_e)},select:It=>Qe(Ve).map(Dt=>It===Dt).getOr(!1),onSetup:Yt(Ve,ve)})},gn=(Ve,je,T,it,ve,Rt)=>{Ve.ui.registry.addToggleButton(je,{active:!1,tooltip:T,icon:ve==="OL"?"ordered-list":"unordered-list",onSetup:Yt(Ve,ve),onAction:()=>Ve.queryCommandState(it)||Rt===""?Ve.execCommand(it):C(Ve,ve,Rt)})},rt=(Ve,je,T,it,ve,Rt)=>{Rt.length>1?On(Ve,je,T,it,ve,Rt):gn(Ve,je,T,it,ve,J(Rt[0]))},we=Ve=>{rt(Ve,"numlist","Numbered list","InsertOrderedList","OL",Y(Ve)),rt(Ve,"bullist","Bullet list","InsertUnorderedList","UL",de(Ve))};var Ro=()=>{h.add("advlist",Ve=>{Ve.hasPlugin("lists")?(W(Ve),we(Ve),D(Ve)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};Ro()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(x,R,j)=>{var ue;return j(x,R.prototype)?!0:((ue=x.constructor)===null||ue===void 0?void 0:ue.name)===R.name},D=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&C(x,String,(j,ue)=>ue.isPrototypeOf(j))?"string":R},N=x=>R=>D(R)===x,W=x=>R=>typeof R===x,Y=x=>R=>x===R,de=N("string"),Q=N("array"),Te=W("boolean"),ct=Y(void 0),Xe=x=>x==null,wt=x=>!Xe(x),yt=W("function"),Tt=W("number"),_t=()=>{},Lt=(x,R)=>j=>x(R(j)),gt=x=>()=>x,st=x=>x,Qe=(x,R)=>x===R;function ie(x,...R){return(...j)=>{const ue=R.concat(j);return x.apply(null,ue)}}const St=x=>{x()},Wn=gt(!1),vt=gt(!0);class J{constructor(R,j){this.tag=R,this.value=j}static some(R){return new J(!0,R)}static none(){return J.singletonNone}fold(R,j){return this.tag?j(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?J.some(R(this.value)):J.none()}bind(R){return this.tag?R(this.value):J.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:J.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return wt(R)?J.some(R):J.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}J.singletonNone=new J(!1);const Yt=Object.keys,On=Object.hasOwnProperty,gn=(x,R)=>{const j=Yt(x);for(let ue=0,ze=j.length;ue<ze;ue++){const Vt=j[ue],vn=x[Vt];R(vn,Vt)}},rt=x=>(R,j)=>{x[j]=R},we=(x,R,j,ue)=>{gn(x,(ze,Vt)=>{(R(ze,Vt)?j:ue)(ze,Vt)})},Ro=(x,R)=>{const j={};return we(x,R,rt(j),_t),j},Ve=(x,R)=>{const j=[];return gn(x,(ue,ze)=>{j.push(R(ue,ze))}),j},je=x=>Ve(x,st),T=x=>Yt(x).length,it=(x,R)=>ve(x,R)?J.from(x[R]):J.none(),ve=(x,R)=>On.call(x,R),Rt=(x,R)=>ve(x,R)&&x[R]!==void 0&&x[R]!==null,It=x=>{for(const R in x)if(On.call(x,R))return!1;return!0},_e=Array.prototype.indexOf,Dt=Array.prototype.push,An=(x,R)=>_e.call(x,R),nt=(x,R)=>An(x,R)>-1,rn=(x,R)=>{for(let j=0,ue=x.length;j<ue;j++){const ze=x[j];if(R(ze,j))return!0}return!1},Ne=(x,R)=>{const j=[];for(let ue=0;ue<x;ue++)j.push(R(ue));return j},dt=(x,R)=>{const j=x.length,ue=new Array(j);for(let ze=0;ze<j;ze++){const Vt=x[ze];ue[ze]=R(Vt,ze)}return ue},V=(x,R)=>{for(let j=0,ue=x.length;j<ue;j++){const ze=x[j];R(ze,j)}},Ao=(x,R)=>{for(let j=x.length-1;j>=0;j--){const ue=x[j];R(ue,j)}},Ct=(x,R)=>{const j=[],ue=[];for(let ze=0,Vt=x.length;ze<Vt;ze++){const vn=x[ze];(R(vn,ze)?j:ue).push(vn)}return{pass:j,fail:ue}},jt=(x,R)=>{const j=[];for(let ue=0,ze=x.length;ue<ze;ue++){const Vt=x[ue];R(Vt,ue)&&j.push(Vt)}return j},tt=(x,R,j)=>(Ao(x,(ue,ze)=>{j=R(j,ue,ze)}),j),re=(x,R,j)=>(V(x,(ue,ze)=>{j=R(j,ue,ze)}),j),I=(x,R,j)=>{for(let ue=0,ze=x.length;ue<ze;ue++){const Vt=x[ue];if(R(Vt,ue))return J.some(Vt);if(j(Vt,ue))break}return J.none()},G=(x,R)=>I(x,R,Wn),le=x=>{const R=[];for(let j=0,ue=x.length;j<ue;++j){if(!Q(x[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+x);Dt.apply(R,x[j])}return R},L=(x,R)=>le(dt(x,R)),ye=(x,R)=>{for(let j=0,ue=x.length;j<ue;++j){const ze=x[j];if(R(ze,j)!==!0)return!1}return!0},He=(x,R)=>{const j={};for(let ue=0,ze=x.length;ue<ze;ue++){const Vt=x[ue];j[String(Vt)]=R(Vt,ue)}return j},ke=(x,R)=>R>=0&&R<x.length?J.some(x[R]):J.none(),lt=x=>ke(x,0),Je=x=>ke(x,x.length-1),cn=(x,R)=>{for(let j=0;j<x.length;j++){const ue=R(x[j],j);if(ue.isSome())return ue}return J.none()},Wt=8,wn=9,ot=11,mt=1,Xt=3,sn=(x,R)=>{const ue=(R||document).createElement("div");if(ue.innerHTML=x,!ue.hasChildNodes()||ue.childNodes.length>1){const ze="HTML does not have a single root node";throw console.error(ze,x),new Error(ze)}return ro(ue.childNodes[0])},lo=(x,R)=>{const ue=(R||document).createElement(x);return ro(ue)},po=(x,R)=>{const ue=(R||document).createTextNode(x);return ro(ue)},ro=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},to={fromHtml:sn,fromTag:lo,fromText:po,fromDom:ro,fromPoint:(x,R,j)=>J.from(x.dom.elementFromPoint(R,j)).map(ro)},Qo=(x,R)=>{const j=x.dom;if(j.nodeType!==mt)return!1;{const ue=j;if(ue.matches!==void 0)return ue.matches(R);if(ue.msMatchesSelector!==void 0)return ue.msMatchesSelector(R);if(ue.webkitMatchesSelector!==void 0)return ue.webkitMatchesSelector(R);if(ue.mozMatchesSelector!==void 0)return ue.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},ss=x=>x.nodeType!==mt&&x.nodeType!==wn&&x.nodeType!==ot||x.childElementCount===0,Lo=(x,R)=>{const j=R===void 0?document:R.dom;return ss(j)?[]:dt(j.querySelectorAll(x),to.fromDom)},ir=(x,R)=>{const j=R===void 0?document:R.dom;return ss(j)?J.none():J.from(j.querySelector(x)).map(to.fromDom)},xo=(x,R)=>x.dom===R.dom,zr=Qo;typeof window<"u"||Function("return this;")();const on=x=>x.dom.nodeName.toLowerCase(),Zo=x=>x.dom.nodeType,gr=x=>R=>Zo(R)===x,tr=x=>Zo(x)===Wt||on(x)==="#comment",Rr=gr(mt),_r=gr(Xt),ys=gr(wn),ea=gr(ot),Gr=x=>R=>Rr(R)&&on(R)===x,bs=x=>to.fromDom(x.dom.ownerDocument),Qn=x=>ys(x)?x:bs(x),Ns=x=>J.from(x.dom.parentNode).map(to.fromDom),Ke=(x,R)=>{const j=yt(R)?R:Wn;let ue=x.dom;const ze=[];for(;ue.parentNode!==null&&ue.parentNode!==void 0;){const Vt=ue.parentNode,vn=to.fromDom(Vt);if(ze.push(vn),j(vn)===!0)break;ue=Vt}return ze},xt=x=>J.from(x.dom.previousSibling).map(to.fromDom),xn=x=>J.from(x.dom.nextSibling).map(to.fromDom),Bn=x=>dt(x.dom.childNodes,to.fromDom),Ho=(x,R)=>{const j=x.dom.childNodes;return J.from(j[R]).map(to.fromDom)},as=x=>Ho(x,0),pr=x=>ea(x)&&wt(x.dom.host),Sr=x=>to.fromDom(x.dom.getRootNode()),lr=x=>{const R=Sr(x);return pr(R)?J.some(R):J.none()},Ae=x=>to.fromDom(x.dom.host),Ce=x=>{const R=_r(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const j=R.ownerDocument;return lr(to.fromDom(R)).fold(()=>j.body.contains(R),Lt(Ce,Ae))};var ht=(x,R,j,ue,ze)=>x(j,ue)?J.some(j):yt(ze)&&ze(j)?J.none():R(j,ue,ze);const Ft=(x,R,j)=>{let ue=x.dom;const ze=yt(j)?j:Wn;for(;ue.parentNode;){ue=ue.parentNode;const Vt=to.fromDom(ue);if(R(Vt))return J.some(Vt);if(ze(Vt))break}return J.none()},Yn=(x,R,j)=>ht((ze,Vt)=>Vt(ze),Ft,x,R,j),Co=(x,R)=>{const j=ze=>R(to.fromDom(ze));return G(x.dom.childNodes,j).map(to.fromDom)},Bo=(x,R,j)=>Ft(x,ue=>Qo(ue,R),j),ur=(x,R)=>Co(x,j=>Qo(j,R)),Le=(x,R)=>ir(R,x),Fo=(x,R,j)=>ht((ze,Vt)=>Qo(ze,Vt),Bo,x,R,j),Re=x=>Fo(x,"[contenteditable]"),Be=(x,R=!1)=>Ce(x)?x.dom.isContentEditable:Re(x).fold(gt(R),j=>qt(j)==="true"),qt=x=>x.dom.contentEditable,tn=x=>x.nodeName.toLowerCase(),Dn=x=>to.fromDom(x.getBody()),Zn=x=>R=>xo(R,Dn(x)),Gn=x=>x?x.replace(/px$/,""):"",zn=x=>/^\d+(\.\d+)?$/.test(x)?x+"px":x,no=x=>to.fromDom(x.selection.getStart()),bo=x=>to.fromDom(x.selection.getEnd()),hs=x=>Yn(x,Gr("table")).forall(Be),As=(x,R)=>jt(Bn(x),R),Ls=(x,R)=>{let j=[];return V(Bn(x),ue=>{R(ue)&&(j=j.concat([ue])),j=j.concat(Ls(ue,R))}),j},wa=(x,R)=>As(x,j=>Qo(j,R)),la=(x,R)=>Lo(R,x),fo=(x,R,j)=>{if(de(j)||Te(j)||Tt(j))x.setAttribute(R,j+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",j,":: Element ",x),new Error("Attribute value was not simple")},is=(x,R,j)=>{fo(x.dom,R,j)},ms=(x,R)=>{const j=x.dom;gn(R,(ue,ze)=>{fo(j,ze,ue)})},aa=(x,R)=>{const j=x.dom.getAttribute(R);return j===null?void 0:j},ta=(x,R)=>J.from(aa(x,R)),Fr=(x,R)=>{x.dom.removeAttribute(R)},dr=x=>re(x.dom.attributes,(R,j)=>(R[j.name]=j.value,R),{}),_l=(x,R,j=Qe)=>x.exists(ue=>j(ue,R)),ec=x=>{const R=[],j=ue=>{R.push(ue)};for(let ue=0;ue<x.length;ue++)x[ue].each(j);return R},ks=(x,R,j)=>x.isSome()&&R.isSome()?J.some(j(x.getOrDie(),R.getOrDie())):J.none(),Sa=x=>x.bind(st),ha=(x,R)=>x?J.some(R):J.none(),Vr=(x,R)=>x.substring(R),pi=(x,R,j)=>R===""||x.length>=R.length&&x.substr(j,j+R.length)===R,xa=(x,R)=>Fa(x,R)?Vr(x,R.length):x,Fa=(x,R)=>pi(x,R,0),tc=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),Wi=x=>x.length>0,ni=x=>!Wi(x),Uc=(x,R=10)=>{const j=parseInt(x,R);return isNaN(j)?J.none():J.some(j)},Na=x=>{const R=parseFloat(x);return isNaN(R)?J.none():J.some(R)},Nr=x=>x.style!==void 0&&yt(x.style.getPropertyValue),Ei=(x,R,j)=>{if(!de(j))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",j,":: Element ",x),new Error("CSS value must be a string: "+j);Nr(x)&&x.style.setProperty(R,j)},Zi=(x,R)=>{Nr(x)&&x.style.removeProperty(R)},Ti=(x,R,j)=>{const ue=x.dom;Ei(ue,R,j)},Ai=(x,R)=>{const j=x.dom,ze=window.getComputedStyle(j).getPropertyValue(R);return ze===""&&!Ce(x)?Ur(j,R):ze},Ur=(x,R)=>Nr(x)?x.style.getPropertyValue(R):"",Za=(x,R)=>{const j=x.dom,ue=Ur(j,R);return J.from(ue).filter(ze=>ze.length>0)},te=(x,R)=>{const j=x.dom;Zi(j,R),_l(ta(x,"style").map(tc),"")&&Fr(x,"style")},Se=(x,R,j=0)=>ta(x,R).map(ue=>parseInt(ue,10)).getOr(j),Ge=(x,R)=>Ht(x,R,vt),Ht=(x,R,j)=>L(Bn(x),ue=>Qo(ue,R)?j(ue)?[ue]:[]:Ht(ue,R,j)),dn=["tfoot","thead","tbody","colgroup"],$n=x=>nt(dn,x),es=(x,R)=>({rows:x,columns:R}),Ws=(x,R,j)=>({element:x,rowspan:R,colspan:j}),ls=(x,R,j,ue,ze,Vt)=>({element:x,rowspan:R,colspan:j,row:ue,column:ze,isLocked:Vt}),q=(x,R,j)=>({element:x,cells:R,section:j}),xe=(x,R,j,ue)=>({startRow:x,startCol:R,finishRow:j,finishCol:ue}),Ie=(x,R,j)=>({element:x,colspan:R,column:j}),nn=(x,R)=>({element:x,columns:R}),zo=(x,R,j=Wn)=>{if(j(R))return J.none();if(nt(x,on(R)))return J.some(R);const ue=ze=>Qo(ze,"table")||j(ze);return Bo(R,x.join(","),ue)},$=(x,R)=>zo(["td","th"],x,R),se=x=>Ge(x,"th,td"),De=x=>Qo(x,"colgroup")?wa(x,"col"):L(vo(x),R=>wa(R,"col")),at=(x,R)=>Fo(x,"table",R),pt=x=>Ge(x,"tr"),vo=x=>at(x).fold(gt([]),R=>wa(R,"colgroup")),Ps=(x,R)=>dt(x,j=>{if(on(j)==="colgroup"){const ue=dt(De(j),ze=>{const Vt=Se(ze,"span",1);return Ws(ze,1,Vt)});return q(j,ue,"colgroup")}else{const ue=dt(se(j),ze=>{const Vt=Se(ze,"rowspan",1),vn=Se(ze,"colspan",1);return Ws(ze,Vt,vn)});return q(j,ue,R(j))}}),Os=x=>Ns(x).map(R=>{const j=on(R);return $n(j)?j:"tbody"}).getOr("tbody"),Qt=x=>{const R=pt(x),ue=[...vo(x),...R];return Ps(ue,Os)},Hs="data-snooker-locked-cols",pa=x=>ta(x,Hs).bind(R=>J.from(R.match(/\d+/g))).map(R=>He(R,vt)),gc=(x,R)=>x+","+R,qo=(x,R,j)=>J.from(x.access[gc(R,j)]),hc=(x,R,j)=>{const ue=qr(x,ze=>j(R,ze.element));return ue.length>0?J.some(ue[0]):J.none()},qr=(x,R)=>{const j=L(x.all,ue=>ue.cells);return jt(j,R)},eu=x=>{const R={};let j=0;return V(x.cells,ue=>{const ze=ue.colspan;Ne(ze,Vt=>{const vn=j+Vt;R[vn]=Ie(ue.element,ze,vn)}),j+=ze}),R},nr=x=>{const R={},j=[],ze=lt(x).map(tl=>tl.element).bind(at).bind(pa).getOr({});let Vt=0,vn=0,jn=0;const{pass:jo,fail:ns}=Ct(x,tl=>tl.section==="colgroup");V(ns,tl=>{const Tc=[];V(tl.cells,uu=>{let Nl=0;for(;R[gc(jn,Nl)]!==void 0;)Nl++;const zu=Rt(ze,Nl.toString()),th=ls(uu.element,uu.rowspan,uu.colspan,jn,Nl,zu);for(let ml=0;ml<uu.colspan;ml++)for(let zf=0;zf<uu.rowspan;zf++){const ap=jn+zf,cp=Nl+ml,Ym=gc(ap,cp);R[Ym]=th,vn=Math.max(vn,cp+1)}Tc.push(th)}),Vt++,j.push(q(tl.element,Tc,tl.section)),jn++});const{columns:js,colgroups:Gs}=Je(jo).map(tl=>{const Tc=eu(tl);return{colgroups:[nn(tl.element,je(Tc))],columns:Tc}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:es(Vt,vn),access:R,all:j,columns:js,colgroups:Gs}},ca={fromTable:x=>{const R=Qt(x);return nr(R)},generate:nr,getAt:qo,findItem:hc,filterItems:qr,justCells:x=>L(x.all,R=>R.cells),justColumns:x=>je(x.columns),hasColumns:x=>Yt(x.columns).length>0,getColumnAt:(x,R)=>J.from(x.columns[R])};var La=tinymce.util.Tools.resolve("tinymce.util.Tools");const bi=(x,R,j)=>{const ue=x.select("td,th",R);let ze;for(let Vt=0;Vt<ue.length;Vt++){const vn=x.getStyle(ue[Vt],j);if(ct(ze)&&(ze=vn),ze!==vn)return""}return ze},vi=(x,R,j)=>{La.each("left center right".split(" "),ue=>{ue!==j&&x.formatter.remove("align"+ue,{},R)}),j&&x.formatter.apply("align"+j,{},R)},Tu=(x,R,j)=>{La.each("top middle bottom".split(" "),ue=>{ue!==j&&x.formatter.remove("valign"+ue,{},R)}),j&&x.formatter.apply("valign"+j,{},R)},ae=(x,R,j)=>{x.dispatch("TableModified",{...j,table:R})},fe=(x,R)=>Na(x).getOr(R),ut=(x,R,j)=>fe(Ai(x,R),j),zt=(x,R,j,ue)=>{const ze=ut(x,`padding-${j}`,0),Vt=ut(x,`padding-${ue}`,0),vn=ut(x,`border-${j}-width`,0),jn=ut(x,`border-${ue}-width`,0);return R-ze-Vt-vn-jn},go=(x,R)=>{const j=x.dom,ue=j.getBoundingClientRect().width||j.offsetWidth;return R==="border-box"?ue:zt(x,ue,"left","right")},Bs=x=>go(x,"content-box");var Js=tinymce.util.Tools.resolve("tinymce.Env");const Ha="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",pc=Ne(5,x=>{const R=`${x+1}px`;return{title:R,value:R}}),ia=dt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],x=>({title:x,value:x.toLowerCase()})),bc="100%",or=x=>{var R;const j=x.dom,ue=(R=j.getParent(x.selection.getStart(),j.isBlock))!==null&&R!==void 0?R:x.getBody();return Bs(to.fromDom(ue))+"px"},Sc=(x,R)=>Vg(x)||!ba(x)?R:tu(x)?{...R,width:or(x)}:{...R,width:bc},nc=(x,R)=>Vg(x)||ba(x)?R:tu(x)?{...R,width:or(x)}:{...R,width:bc},Kr=x=>R=>R.options.get(x),Br=x=>{const R=x.options.register;R("table_border_widths",{processor:"object[]",default:pc}),R("table_border_styles",{processor:"object[]",default:ia}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!Js.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:Ha}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},br=Kr("table_sizing_mode"),Au=Kr("table_border_widths"),ku=Kr("table_border_styles"),_u=Kr("table_cell_advtab"),$m=Kr("table_row_advtab"),Du=Kr("table_advtab"),Gi=Kr("table_appearance_options"),Im=Kr("table_grid"),ba=Kr("table_style_by_css"),Lm=Kr("table_cell_class_list"),Lg=Kr("table_row_class_list"),Dl=Kr("table_class_list"),Hg=Kr("table_toolbar"),Ou=Kr("table_background_color_map"),zg=Kr("table_border_color_map"),tu=x=>br(x)==="fixed",Vg=x=>br(x)==="responsive",Hm=x=>{const R=x.options,j=R.get("table_default_styles");return R.isSet("table_default_styles")?j:Sc(x,j)},Rf=x=>{const R=x.options,j=R.get("table_default_attributes");return R.isSet("table_default_attributes")?j:nc(x,j)},Ru=(x,R)=>R.column>=x.startCol&&R.column+R.colspan-1<=x.finishCol&&R.row>=x.startRow&&R.row+R.rowspan-1<=x.finishRow,Ff=(x,R)=>{let j=!0;const ue=ie(Ru,R);for(let ze=R.startRow;ze<=R.finishRow;ze++)for(let Vt=R.startCol;Vt<=R.finishCol;Vt++)j=j&&ca.getAt(x,ze,Vt).exists(ue);return j?J.some(R):J.none()},Fe=(x,R)=>xe(Math.min(x.row,R.row),Math.min(x.column,R.column),Math.max(x.row+x.rowspan-1,R.row+R.rowspan-1),Math.max(x.column+x.colspan-1,R.column+R.colspan-1)),nu=(x,R,j)=>{const ue=ca.findItem(x,R,xo),ze=ca.findItem(x,j,xo);return ue.bind(Vt=>ze.map(vn=>Fe(Vt,vn)))},Ol=(x,R,j)=>nu(x,R,j).bind(ue=>Ff(x,ue)),Ug=(x,R,j)=>{const ue=S1(x);return Ol(ue,R,j)},S1=ca.fromTable,Fu=(x,R)=>{Ns(x).each(ue=>{ue.dom.insertBefore(R.dom,x.dom)})},os=(x,R)=>{xn(x).fold(()=>{Ns(x).each(ze=>{qi(ze,R)})},ue=>{Fu(ue,R)})},Ea=(x,R)=>{as(x).fold(()=>{qi(x,R)},ue=>{x.dom.insertBefore(R.dom,ue.dom)})},qi=(x,R)=>{x.dom.appendChild(R.dom)},Nu=(x,R)=>{Fu(x,R),qi(R,x)},zm=(x,R)=>{V(R,(j,ue)=>{const ze=ue===0?x:R[ue-1];os(ze,j)})},tm=(x,R)=>{V(R,j=>{qi(x,j)})},xc=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Vm=x=>{const R=Bn(x);R.length>0&&zm(x,R),xc(x)},Um=((x,R)=>{const j=Vt=>{if(!x(Vt))throw new Error("Can only get "+R+" value of a "+R+" node");return ue(Vt).getOr("")},ue=Vt=>x(Vt)?J.from(Vt.dom.nodeValue):J.none();return{get:j,getOption:ue,set:(Vt,vn)=>{if(!x(Vt))throw new Error("Can only set raw "+R+" value of a "+R+" node");Vt.dom.nodeValue=vn}}})(_r,"text"),su=x=>Um.get(x),Wc=(x,R)=>Um.set(x,R);var Wg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],nm=()=>{const x=ns=>to.fromDom(ns.dom.cloneNode(!1)),R=ns=>Qn(ns).dom,j=ns=>Rr(ns)?on(ns)==="body"?!0:nt(Wg,on(ns)):!1,ue=ns=>Rr(ns)?nt(["br","img","hr","input"],on(ns)):!1,ze=ns=>Rr(ns)&&aa(ns,"contenteditable")==="false",Vt=(ns,js)=>ns.dom.compareDocumentPosition(js.dom),vn=(ns,js)=>{const Gs=dr(ns);ms(js,Gs)},jn=ns=>{const js=on(ns);return nt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],js)},jo=ns=>Rr(ns)?ta(ns,"lang"):J.none();return{up:gt({selector:Bo,closest:Fo,predicate:Ft,all:Ke}),down:gt({selector:la,predicate:Ls}),styles:gt({get:Ai,getRaw:Za,set:Ti,remove:te}),attrs:gt({get:aa,set:is,remove:Fr,copyTo:vn}),insert:gt({before:Fu,after:os,afterAll:zm,append:qi,appendAll:tm,prepend:Ea,wrap:Nu}),remove:gt({unwrap:Vm,remove:xc}),create:gt({nu:to.fromTag,clone:x,text:to.fromText}),query:gt({comparePosition:Vt,prevSibling:xt,nextSibling:xn}),property:gt({children:Bn,name:on,parent:Ns,document:R,isText:_r,isComment:tr,isElement:Rr,isSpecial:jn,getLanguage:jo,getText:su,setText:Wc,isBoundary:j,isEmptyTag:ue,isNonEditable:ze}),eq:xo,is:zr}};const ja=(x,R,j,ue)=>{const ze=j[0],Vt=j.slice(1);return ue(x,R,ze,Vt)},oi=(x,R,j)=>j.length>0?ja(x,R,j,Mc):J.none(),Mc=(x,R,j,ue)=>{const ze=R(x,j);return tt(ue,(Vt,vn)=>{const jn=R(x,vn);return gd(x,Vt,jn)},ze)},gd=(x,R,j)=>R.bind(ue=>j.filter(ie(x.eq,ue))),om=oi,Zg=nm(),sm=(x,R)=>om(Zg,(j,ue)=>x(ue),R),ul=x=>Bo(x,"table"),Wm=(x,R)=>{const j=la(x,R);return j.length>0?J.some(j):J.none()},Xh=(x,R,j)=>Le(x,R).bind(ue=>Le(x,j).bind(ze=>sm(ul,[ue,ze]).map(Vt=>({first:ue,last:ze,table:Vt})))),jg=(x,R)=>Wm(x,R),a0=(x,R,j)=>Xh(x,R,j).bind(ue=>{const ze=jo=>xo(x,jo),Vt="thead,tfoot,tbody,table",vn=Bo(ue.first,Vt,ze),jn=Bo(ue.last,Vt,ze);return vn.bind(jo=>jn.bind(ns=>xo(jo,ns)?Ug(ue.table,ue.first,ue.last):J.none()))}),Nf=x=>dt(x,to.fromDom),rm="data-mce-selected",hd="td["+rm+"],th["+rm+"]",am="data-mce-first-selected",Wr="td["+am+"],th["+am+"]",Yr="data-mce-last-selected",ki="td["+Yr+"],th["+Yr+"]",pd={selected:rm,selectedSelector:hd,firstSelected:am,firstSelectedSelector:Wr,lastSelected:Yr,lastSelectedSelector:ki},Gg=x=>at(x).bind(R=>jg(R,pd.firstSelectedSelector)).fold(gt(x),R=>R[0]),Ba=x=>(R,j)=>{const ue=on(R),ze=ue==="col"||ue==="colgroup"?Gg(R):R;return Fo(ze,x,j)},oo=Ba("th,td,caption"),ru=Ba("th,td"),Bf=x=>Nf(x.model.table.getSelectedCells()),oc=(x,R)=>{const j=ru(x),ue=j.bind(ze=>at(ze)).map(ze=>pt(ze));return ks(j,ue,(ze,Vt)=>jt(Vt,vn=>rn(Nf(vn.dom.cells),jn=>aa(jn,R)==="1"||xo(jn,ze)))).getOr([])},Ys=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Bu=x=>({value:Yo(x)}),qg=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,cm=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Jh=x=>qg.test(x)||cm.test(x),Yo=x=>xa(x,"#").toUpperCase(),Ma=x=>Jh(x)?J.some({value:Yo(x)}):J.none(),bd=x=>{const R=x.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},vc=x=>{const R=bd(x.red)+bd(x.green)+bd(x.blue);return Bu(R)},Zc=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,_i=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ga=(x,R,j,ue)=>({red:x,green:R,blue:j,alpha:ue}),Pc=(x,R,j,ue)=>{const ze=parseInt(x,10),Vt=parseInt(R,10),vn=parseInt(j,10),jn=parseFloat(ue);return Ga(ze,Vt,vn,jn)},yi=x=>{const R=Zc.exec(x);if(R!==null)return J.some(Pc(R[1],R[2],R[3],"1"));const j=_i.exec(x);return j!==null?J.some(Pc(j[1],j[2],j[3],j[4])):J.none()},Mf=x=>Ma(x).orThunk(()=>yi(x).map(vc)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const j=R.getContext("2d");j.clearRect(0,0,R.width,R.height),j.fillStyle="#FFFFFF",j.fillStyle=x,j.fillRect(0,0,1,1);const ue=j.getImageData(0,0,1,1).data,ze=ue[0],Vt=ue[1],vn=ue[2],jn=ue[3];return vc(Ga(ze,Vt,vn,jn))}),na=x=>yi(x).map(vc).map(R=>"#"+R.value).getOr(x),vd=x=>{let R=x;return{get:()=>R,set:ze=>{R=ze}}},ua=x=>{const R=vd(J.none()),j=()=>R.get().each(x);return{clear:()=>{j(),R.set(J.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:jn=>{j(),R.set(J.some(jn))}}},Mu=()=>ua(x=>x.unbind()),yd=(x,R,j)=>ue=>{const ze=Mu(),Vt=ni(j),vn=()=>{const jn=Bf(x),jo=ns=>x.formatter.match(R,{value:j},ns.dom,Vt);Vt?(ue.setActive(!rn(jn,jo)),ze.set(x.formatter.formatChanged(R,ns=>ue.setActive(!ns),!0))):(ue.setActive(ye(jn,jo)),ze.set(x.formatter.formatChanged(R,ue.setActive,!1,{value:j})))};return x.initialized?vn():x.on("init",vn),ze.clear},mr=x=>Rt(x,"menu"),Ki=x=>dt(x,R=>{const j=R.text||R.title||"";return mr(R)?{text:j,items:Ki(R.menu)}:{text:j,value:R.value}}),Qh=x=>x.length?J.some(Ki([{text:"Select...",value:"mce-no-match"},...x])):J.none(),au=(x,R,j,ue)=>dt(R,ze=>{const Vt=ze.text||ze.title;return mr(ze)?{type:"nestedmenuitem",text:Vt,getSubmenuItems:()=>au(x,ze.menu,j,ue)}:{text:Vt,type:"togglemenuitem",onAction:()=>ue(ze.value),onSetup:yd(x,j,ze.value)}}),xr=(x,R)=>j=>{x.execCommand("mceTableApplyCellStyle",!1,{[R]:j})},Pu=x=>L(x,R=>mr(R)?[{...R,menu:Pu(R.menu)}]:Wi(R.value)?[R]:[]),si=(x,R,j,ue)=>ze=>ze(au(x,R,j,ue)),us=(x,R,j)=>{const ue=dt(R,ze=>({text:ze.title,value:"#"+Mf(ze.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ue.length>0?ue:void 0,allowCustomColors:!1},onAction:ze=>{const Vt=ze.value==="remove"?"":ze.value;x.execCommand("mceTableApplyCellStyle",!1,{[j]:Vt})}}]},Cd=x=>()=>{const j=x.queryCommandValue("mceTableRowType")==="header"?"body":"header";x.execCommand("mceTableRowType",!1,{type:j})},Zm=x=>()=>{const j=x.queryCommandValue("mceTableColType")==="th"?"td":"th";x.execCommand("mceTableColType",!1,{type:j})},Pf=x=>Qh(Lm(x)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),A=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Ys}],M=x=>A.concat(Pf(x).toArray()),K=(x,R)=>{const ue=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ki(ku(x)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ue):ue}},$e={normal:(x,R)=>{const j=x.dom;return{setAttrib:(vn,jn)=>{j.setAttrib(R,vn,jn)},setStyle:(vn,jn)=>{j.setStyle(R,vn,jn)},setFormat:(vn,jn)=>{jn===""?x.formatter.remove(vn,{value:null},R,!0):x.formatter.apply(vn,{value:jn},R)}}}},en=Gr("th"),Eo=(x,R)=>x&&R?"sectionCells":x?"section":"cells",Xo=x=>{const R=x.section==="thead",j=_l(_o(x.cells),"th");return x.section==="tfoot"?{type:"footer"}:R||j?{type:"header",subType:Eo(R,j)}:{type:"body"}},_o=x=>{const R=jt(x,j=>en(j.element));return R.length===0?J.some("td"):R.length===x.length?J.some("th"):J.none()},To=x=>{const R=dt(x,ze=>Xo(ze).type),j=nt(R,"header"),ue=nt(R,"footer");if(!j&&!ue)return J.some("body");{const ze=nt(R,"body");return j&&!ze&&!ue?J.some("header"):!j&&!ze&&ue?J.some("footer"):J.none()}},Er=x=>{let R=!1,j;return(...ue)=>(R||(R=!0,j=x.apply(null,ue)),j)},va=(x,R)=>cn(x.all,j=>G(j.cells,ue=>xo(R,ue.element))),Di=(x,R,j)=>{const ue=dt(R.selection,Vt=>$(Vt).bind(vn=>va(x,vn)).filter(j)),ze=ec(ue);return ha(ze.length>0,ze)},cu=(x,R)=>R.mergable,jm=(x,R)=>R.unmergable,Kg=(x,R)=>Di(x,R,vt),$c=(x,R)=>va(x,R).exists(j=>!j.isLocked),Yg=(x,R)=>ye(R,j=>$c(x,j)),c0=(x,R)=>cu(x,R).filter(j=>Yg(x,j.cells)),ep=(x,R)=>jm(x,R).filter(j=>Yg(x,j));({...{generate:x=>{if(!Q(x))throw new Error("cases must be an array");if(x.length===0)throw new Error("there must be at least one case");const R=[],j={};return V(x,(ue,ze)=>{const Vt=Yt(ue);if(Vt.length!==1)throw new Error("one and only one name per case");const vn=Vt[0],jn=ue[vn];if(j[vn]!==void 0)throw new Error("duplicate key detected:"+vn);if(vn==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Q(jn))throw new Error("case arguments must be an array");R.push(vn),j[vn]=(...jo)=>{const ns=jo.length;if(ns!==jn.length)throw new Error("Wrong number of arguments to case "+vn+". Expected "+jn.length+" ("+jn+"), got "+ns);return{fold:(...Gs)=>{if(Gs.length!==x.length)throw new Error("Wrong number of arguments to fold. Expected "+x.length+", got "+Gs.length);return Gs[ze].apply(null,jo)},match:Gs=>{const Xr=Yt(Gs);if(R.length!==Xr.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+Xr.join(","));if(!ye(R,Tc=>nt(Xr,Tc)))throw new Error("Not all branches were specified when using match. Specified: "+Xr.join(", ")+`
Required: `+R.join(", "));return Gs[vn].apply(null,jo)},log:Gs=>{console.log(Gs,{constructors:R,constructor:vn,params:jo})}}}}),j}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const ri=(x,R)=>{const j=ca.fromTable(x);return Kg(j,R).bind(ze=>{const Vt=ze[ze.length-1],vn=ze[0].row,jn=Vt.row+Vt.rowspan,jo=j.all.slice(vn,jn);return To(jo)}).getOr("")},ko=x=>Fa(x,"rgb")?na(x):x,Yi=x=>{const R=to.fromDom(x);return{borderwidth:Za(R,"border-width").getOr(""),borderstyle:Za(R,"border-style").getOr(""),bordercolor:Za(R,"border-color").map(ko).getOr(""),backgroundcolor:Za(R,"background-color").map(ko).getOr("")}},$f=x=>{const R=x[0],j=x.slice(1);return V(j,ue=>{V(Yt(R),ze=>{gn(ue,(Vt,vn)=>{const jn=R[ze];jn!==""&&ze===vn&&jn!==Vt&&(R[ze]=ze==="class"?"mce-no-match":"")})})}),R},Xg=(x,R,j,ue)=>G(x,ze=>!ct(j.formatter.matchNode(ue,R+ze))).getOr(""),np=ie(Xg,["left","center","right"],"align"),x1=ie(Xg,["top","middle","bottom"],"valign"),Rl=(x,R)=>{const j=Hm(x),ue=Rf(x),ze=()=>({borderstyle:it(j,"border-style").getOr(""),bordercolor:ko(it(j,"border-color").getOr("")),backgroundcolor:ko(it(j,"background-color").getOr(""))}),Vt={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},vn=()=>{const js=j["border-width"];return ba(x)&&js?{border:js}:it(ue,"border").fold(()=>({}),Gs=>({border:Gs}))},jn=R?ze():{},jo=()=>{const js=it(j,"border-spacing").or(it(ue,"cellspacing")).fold(()=>({}),Xr=>({cellspacing:Xr})),Gs=it(j,"border-padding").or(it(ue,"cellpadding")).fold(()=>({}),Xr=>({cellpadding:Xr}));return{...js,...Gs}};return{...Vt,...j,...ue,...jn,...vn(),...jo()}},$u=x=>at(to.fromDom(x)).map(R=>{const j={selection:Nf(x.cells)};return ri(R,j)}).getOr(""),im=(x,R,j)=>{const ue=(jn,jo)=>{const ns=Za(to.fromDom(jo),"border-width");return ba(x)&&ns.isSome()?ns.getOr(""):jn.getAttrib(jo,"border")||bi(x.dom,jo,"border-width")||bi(x.dom,jo,"border")||""},ze=x.dom,Vt=ba(x)?ze.getStyle(R,"border-spacing")||ze.getAttrib(R,"cellspacing"):ze.getAttrib(R,"cellspacing")||ze.getStyle(R,"border-spacing"),vn=ba(x)?bi(ze,R,"padding")||ze.getAttrib(R,"cellpadding"):ze.getAttrib(R,"cellpadding")||bi(ze,R,"padding");return{width:ze.getStyle(R,"width")||ze.getAttrib(R,"width"),height:ze.getStyle(R,"height")||ze.getAttrib(R,"height"),cellspacing:Vt??"",cellpadding:vn??"",border:ue(ze,R),caption:!!ze.select("caption",R)[0],class:ze.getAttrib(R,"class",""),align:np(x,R),...j?Yi(R):{}}},Mn=(x,R,j)=>{const ue=x.dom;return{height:ue.getStyle(R,"height")||ue.getAttrib(R,"height"),class:ue.getAttrib(R,"class",""),type:$u(R),align:np(x,R),...j?Yi(R):{}}},dl=(x,R,j,ue)=>{const ze=x.dom,Vt=ue.getOr(R);return{width:((jn,jo)=>ze.getStyle(jn,jo)||ze.getAttrib(jn,jo))(Vt,"width"),scope:ze.getAttrib(R,"scope"),celltype:tn(R),class:ze.getAttrib(R,"class",""),halign:np(x,R),valign:x1(x,R),...j?Yi(R):{}}},op=(x,R)=>{const j=ca.fromTable(x),ue=ca.justCells(j),ze=jt(ue,Vt=>rn(R,vn=>xo(Vt.element,vn)));return dt(ze,Vt=>({element:Vt.element.dom,column:ca.getColumnAt(j,Vt.column).map(vn=>vn.element.dom)}))},Gm=(x,R,j,ue)=>{ue("scope")&&x.setAttrib("scope",j.scope),ue("class")&&j.class!=="mce-no-match"&&x.setAttrib("class",j.class),ue("width")&&R.setStyle("width",zn(j.width))},Fl=(x,R,j)=>{j("backgroundcolor")&&x.setFormat("tablecellbackgroundcolor",R.backgroundcolor),j("bordercolor")&&x.setFormat("tablecellbordercolor",R.bordercolor),j("borderstyle")&&x.setFormat("tablecellborderstyle",R.borderstyle),j("borderwidth")&&x.setFormat("tablecellborderwidth",zn(R.borderwidth))},Jg=(x,R,j,ue)=>{const ze=R.length===1;V(R,Vt=>{const vn=Vt.element,jn=ze?vt:ue,jo=$e.normal(x,vn),ns=Vt.column.map(js=>$e.normal(x,js)).getOr(jo);Gm(jo,ns,j,jn),_u(x)&&Fl(jo,j,jn),ue("halign")&&vi(x,vn,j.halign),ue("valign")&&Tu(x,vn,j.valign)})},lm=(x,R)=>{x.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},qm=(x,R,j,ue)=>{const ze=Ro(ue,(Vt,vn)=>j[vn]!==Vt);T(ze)>0&&R.length>=1&&at(R[0]).each(Vt=>{const vn=op(Vt,R),jn=T(Ro(ze,(ns,js)=>js!=="scope"&&js!=="celltype"))>0,jo=ve(ze,"celltype");(jn||ve(ze,"scope"))&&Jg(x,vn,ue,ie(ve,ze)),jo&&lm(x,ue),ae(x,Vt.dom,{structure:jo,style:jn})})},Qg=(x,R,j,ue)=>{const ze=ue.getData();ue.close(),x.undoManager.transact(()=>{qm(x,R,j,ze),x.focus()})},iu=(x,R)=>{const j=at(R[0]).map(ue=>dt(op(ue,R),ze=>dl(x,ze.element,_u(x),ze.column)));return $f(j.getOrDie())},l0=x=>{const R=Bf(x);if(R.length===0)return;const j=iu(x,R),ue={type:"tabpanel",tabs:[{title:"General",name:"general",items:M(x)},K(x,"cell")]},ze={type:"panel",items:[{type:"grid",columns:2,items:M(x)}]};x.windowManager.open({title:"Cell Properties",size:"normal",body:_u(x)?ue:ze,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:j,onSubmit:ie(Qg,x,R,j)})},oa=x=>Qh(Lg(x)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),un=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],jc=x=>un.concat(oa(x).toArray()),lu=(x,R,j)=>{j("class")&&R.class!=="mce-no-match"&&x.setAttrib("class",R.class),j("height")&&x.setStyle("height",zn(R.height))},sc=(x,R,j)=>{j("backgroundcolor")&&x.setStyle("background-color",R.backgroundcolor),j("bordercolor")&&x.setStyle("border-color",R.bordercolor),j("borderstyle")&&x.setStyle("border-style",R.borderstyle)},If=(x,R,j,ue)=>{const Vt=R.length===1?vt:ue;V(R,vn=>{const jn=wa(to.fromDom(vn),"td,th"),jo=$e.normal(x,vn);lu(jo,j,Vt),$m(x)&&sc(jo,j,Vt),ue("height")&&V(jn,ns=>{x.dom.setStyle(ns.dom,"height",null)}),ue("align")&&vi(x,vn,j.align)})},qa=(x,R)=>{x.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},zs=(x,R,j,ue)=>{const ze=Ro(ue,(Vt,vn)=>j[vn]!==Vt);if(T(ze)>0){const Vt=ve(ze,"type"),vn=Vt?T(ze)>1:!0;vn&&If(x,R,ue,ie(ve,ze)),Vt&&qa(x,ue),at(to.fromDom(R[0])).each(jn=>ae(x,jn.dom,{structure:Vt,style:vn}))}},sp=(x,R,j,ue)=>{const ze=ue.getData();ue.close(),x.undoManager.transact(()=>{zs(x,R,j,ze),x.focus()})},Zt=x=>{const R=oc(no(x),pd.selected);if(R.length===0)return;const j=dt(R,vn=>Mn(x,vn.dom,$m(x))),ue=$f(j),ze={type:"tabpanel",tabs:[{title:"General",name:"general",items:jc(x)},K(x,"row")]},Vt={type:"panel",items:[{type:"grid",columns:2,items:jc(x)}]};x.windowManager.open({title:"Row Properties",size:"normal",body:$m(x)?ze:Vt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ue,onSubmit:ie(sp,x,dt(R,vn=>vn.dom),ue)})},Vs=(x,R,j)=>{const ue=j?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ze=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Vt=Gi(x)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],vn=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],jn=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return ue.concat(ze).concat(Vt).concat(vn).concat(jn)},eh=(x,R,j,ue)=>{if(R.tagName==="TD"||R.tagName==="TH")de(j)&&wt(ue)?x.setStyle(R,j,ue):x.setStyles(R,j);else if(R.children)for(let ze=0;ze<R.children.length;ze++)eh(x,R.children[ze],j,ue)},Va=(x,R,j,ue)=>{const ze=x.dom,Vt={},vn={},jn=ba(x),jo=Du(x),ns=parseFloat(j.border)===0;if(!ct(j.class)&&j.class!=="mce-no-match"&&(Vt.class=j.class),vn.height=zn(j.height),jn?vn.width=zn(j.width):ze.getAttrib(R,"width")&&(Vt.width=Gn(j.width)),jn?(ns?(Vt.border=0,vn["border-width"]=""):(vn["border-width"]=zn(j.border),Vt.border=1),vn["border-spacing"]=zn(j.cellspacing)):(Vt.border=ns?0:j.border,Vt.cellpadding=j.cellpadding,Vt.cellspacing=j.cellspacing),jn&&R.children){const js={};if(ns?js["border-width"]="":ue.border&&(js["border-width"]=zn(j.border)),ue.cellpadding&&(js.padding=zn(j.cellpadding)),jo&&ue.bordercolor&&(js["border-color"]=j.bordercolor),!It(js))for(let Gs=0;Gs<R.children.length;Gs++)eh(ze,R.children[Gs],js)}if(jo){const js=j;vn["background-color"]=js.backgroundcolor,vn["border-color"]=js.bordercolor,vn["border-style"]=js.borderstyle}ze.setStyles(R,{...Hm(x),...vn}),ze.setAttribs(R,{...Rf(x),...Vt})},Gc=(x,R,j,ue)=>{const ze=x.dom,Vt=ue.getData(),vn=Ro(Vt,(jn,jo)=>j[jo]!==jn);ue.close(),x.undoManager.transact(()=>{if(!R){const jn=Uc(Vt.cols).getOr(1),jo=Uc(Vt.rows).getOr(1);x.execCommand("mceInsertTable",!1,{rows:jo,columns:jn}),R=ru(no(x),Zn(x)).bind(ns=>at(ns,Zn(x))).map(ns=>ns.dom).getOrDie()}if(T(vn)>0){const jn={border:ve(vn,"border"),bordercolor:ve(vn,"bordercolor"),cellpadding:ve(vn,"cellpadding")};Va(x,R,Vt,jn);const jo=ze.select("caption",R)[0];(jo&&!Vt.caption||!jo&&Vt.caption)&&x.execCommand("mceTableToggleCaption"),vi(x,R,Vt.align)}if(x.focus(),x.addVisual(),T(vn)>0){const jn=ve(vn,"caption"),jo=jn?T(vn)>1:!0;ae(x,R,{structure:jn,style:jo})}})},u0=(x,R)=>{const j=x.dom;let ue,ze=Rl(x,Du(x));R?(ze.cols="1",ze.rows="1",Du(x)&&(ze.borderstyle="",ze.bordercolor="",ze.backgroundcolor="")):(ue=j.getParent(x.selection.getStart(),"table",x.getBody()),ue?ze=im(x,ue,Du(x)):Du(x)&&(ze.borderstyle="",ze.bordercolor="",ze.backgroundcolor=""));const Vt=Qh(Dl(x));Vt.isSome()&&ze.class&&(ze.class=ze.class.replace(/\s*mce\-item\-table\s*/g,""));const vn={type:"grid",columns:2,items:Vs(x,Vt.getOr([]),R)},jn=()=>({type:"panel",items:[vn]}),jo=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[vn]},K(x,"table")]}),ns=Du(x)?jo():jn();x.windowManager.open({title:"Table Properties",size:"normal",body:ns,onSubmit:ie(Gc,x,ue,ze),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ze})},Xi=x=>{const R=j=>{hs(no(x))&&j()};gn({mceTableProps:ie(u0,x,!1),mceTableRowProps:ie(Zt,x),mceTableCellProps:ie(l0,x),mceInsertTableDialog:ie(u0,x,!0)},(j,ue)=>x.addCommand(ue,()=>R(j)))},eC=(x,R)=>ur(x,R).isSome(),wd=st,d0=x=>{const R=(ue,ze)=>ta(ue,ze).exists(Vt=>parseInt(Vt,10)>1),j=ue=>R(ue,"rowspan")||R(ue,"colspan");return x.length>0&&ye(x,j)?J.some(x):J.none()},Ji=(x,R,j)=>R.length<=1?J.none():a0(x,j.firstSelectedSelector,j.lastSelectedSelector).map(ue=>({bounds:ue,cells:R})),$s=x=>({element:x,mergable:J.none(),unmergable:J.none(),selection:[x]}),Iu=(x,R,j)=>({element:j,mergable:Ji(R,x,pd),unmergable:d0(x),selection:wd(x)}),Km=x=>{const R=vd(J.none()),j=vd([]);let ue=J.none();const ze=Gr("caption"),Vt=Ms=>ue.forall(Tr=>!Tr[Ms]),vn=()=>oo(no(x),Zn(x)),jn=()=>oo(bo(x),Zn(x)),jo=()=>vn().bind(Ms=>Sa(ks(at(Ms),jn().bind(at),(Tr,ai)=>xo(Tr,ai)?ze(Ms)?J.some($s(Ms)):J.some(Iu(Bf(x),Tr,Ms)):J.none()))),ns=Ms=>at(Ms.element).map(ai=>{const ya=ca.fromTable(ai),ip=Kg(ya,Ms).getOr([]),Xm=re(ip,(Jm,fl)=>(fl.isLocked&&(Jm.onAny=!0,fl.column===0?Jm.onFirst=!0:fl.column+fl.colspan>=ya.grid.columns&&(Jm.onLast=!0)),Jm),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:c0(ya,Ms).isSome(),unmergeable:ep(ya,Ms).isSome(),locked:Xm}}),js=()=>{R.set(Er(jo)()),ue=R.get().bind(ns),V(j.get(),St)},Gs=Ms=>(Ms(),j.set(j.get().concat([Ms])),()=>{j.set(jt(j.get(),Tr=>Tr!==Ms))}),Xr=(Ms,Tr)=>Gs(()=>R.get().fold(()=>{Ms.setEnabled(!1)},ai=>{Ms.setEnabled(!Tr(ai)&&x.selection.isEditable())})),tl=(Ms,Tr,ai)=>Gs(()=>R.get().fold(()=>{Ms.setEnabled(!1),Ms.setActive(!1)},ya=>{Ms.setEnabled(!Tr(ya)&&x.selection.isEditable()),Ms.setActive(ai(ya))})),Tc=Ms=>ue.exists(Tr=>Tr.locked[Ms]),uu=Ms=>Xr(Ms,Tr=>!1),Nl=Ms=>Xr(Ms,Tr=>ze(Tr.element)),zu=Ms=>Tr=>Xr(Tr,ai=>ze(ai.element)||Tc(Ms)),th=Ms=>Tr=>Xr(Tr,ai=>ze(ai.element)||Ms().isNone()),ml=(Ms,Tr)=>ai=>Xr(ai,ya=>ze(ya.element)||Ms().isNone()||Tc(Tr)),zf=Ms=>Xr(Ms,Tr=>Vt("mergeable")),ap=Ms=>Xr(Ms,Tr=>Vt("unmergeable")),cp=Ms=>tl(Ms,Wn,Tr=>at(Tr.element,Zn(x)).exists(ya=>eC(ya,"caption"))),Ym=(Ms,Tr)=>ai=>tl(ai,ya=>ze(ya.element),()=>x.queryCommandValue(Ms)===Tr),rc=Ym("mceTableRowType","header"),du=Ym("mceTableColType","th");return x.on("NodeChange ExecCommand TableSelectorChange",js),{onSetupTable:uu,onSetupCellOrRow:Nl,onSetupColumn:zu,onSetupPasteable:th,onSetupPasteableColumn:ml,onSetupMergeable:zf,onSetupUnmergeable:ap,resetTargets:js,onSetupTableWithCaption:cp,onSetupTableRowHeaders:rc,onSetupTableColumnHeaders:du,targets:R.get}};var Ka=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const rp="x-tinymce/dom-table-",Lu=rp+"rows",Hu=rp+"columns",Or=x=>{var R;const j=(R=Ka.read())!==null&&R!==void 0?R:[];return cn(j,ue=>J.from(ue.getType(x)))},Lf=()=>Or(Lu),et=()=>Or(Hu),Qi=x=>R=>{const j=()=>{R.setEnabled(x.selection.isEditable())};return x.on("NodeChange",j),j(),()=>{x.off("NodeChange",j)}},Hf=(x,R)=>{x.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Qi(x),fetch:jn=>jn("inserttable | cell row column | advtablesort | tableprops deletetable")});const j=jn=>()=>x.execCommand(jn),ue=(jn,jo)=>{x.queryCommandSupported(jo.command)&&x.ui.registry.addButton(jn,{...jo,onAction:yt(jo.onAction)?jo.onAction:j(jo.command)})},ze=(jn,jo)=>{x.queryCommandSupported(jo.command)&&x.ui.registry.addToggleButton(jn,{...jo,onAction:yt(jo.onAction)?jo.onAction:j(jo.command)})};ue("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),ue("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),ue("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),ue("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),ue("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),ue("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),ue("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),ue("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),ue("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),ue("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),ue("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),ue("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),ue("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),ue("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),ue("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(Lf)}),ue("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(Lf)}),ue("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),ue("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),ue("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(et,"onFirst")}),ue("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(et,"onLast")}),ue("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Qi(x)});const Vt=Pu(Dl(x));Vt.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:si(x,Vt,"tableclass",jn=>x.execCommand("mceTableToggleClass",!1,jn)),onSetup:R.onSetupTable});const vn=Pu(Lm(x));vn.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:si(x,vn,"tablecellclass",jn=>x.execCommand("mceTableCellToggleClass",!1,jn)),onSetup:R.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:si(x,Ys,"tablecellverticalalign",xr(x,"vertical-align")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:si(x,Au(x),"tablecellborderwidth",xr(x,"border-width")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:si(x,ku(x),"tablecellborderstyle",xr(x,"border-style")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:jn=>jn(us(x,Ou(x),"background-color")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:jn=>jn(us(x,zg(x),"border-color")),onSetup:R.onSetupCellOrRow})),ze("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),ze("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Cd(x),onSetup:R.onSetupTableRowHeaders}),ze("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Zm(x),onSetup:R.onSetupTableColumnHeaders})},qc=x=>{const R=ue=>x.dom.is(ue,"table")&&x.getBody().contains(ue)&&x.dom.isEditable(ue.parentNode),j=Hg(x);j.length>0&&x.ui.registry.addContextToolbar("table",{predicate:R,items:j,scope:"node",position:"node"})},el=x=>R=>{const j=()=>{R.setEnabled(x.selection.isEditable())};return x.on("NodeChange",j),j(),()=>{x.off("NodeChange",j)}},Ta=(x,R)=>{const j=Gs=>()=>x.execCommand(Gs),ue=(Gs,Xr)=>x.queryCommandSupported(Xr.command)?(x.ui.registry.addMenuItem(Gs,{...Xr,onAction:yt(Xr.onAction)?Xr.onAction:j(Xr.command)}),!0):!1,ze=(Gs,Xr)=>{x.queryCommandSupported(Xr.command)&&x.ui.registry.addToggleMenuItem(Gs,{...Xr,onAction:yt(Xr.onAction)?Xr.onAction:j(Xr.command)})},Vt=Gs=>{x.execCommand("mceInsertTable",!1,{rows:Gs.numRows,columns:Gs.numColumns})},vn=[ue("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),ue("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),ue("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),ue("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),ue("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),ue("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),ue("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(Lf)}),ue("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(Lf)})],jn=[ue("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),ue("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),ue("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),ue("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),ue("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),ue("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(et,"onFirst")}),ue("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(et,"onLast")})],jo=[ue("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),ue("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),ue("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];Im(x)?x.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Vt}],onSetup:el(x)}):x.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:j("mceInsertTableDialog"),onSetup:el(x)}),x.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:j("mceInsertTableDialog"),onSetup:el(x)}),ue("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),ue("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),nt(vn,!0)&&x.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:gt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),nt(jn,!0)&&x.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:gt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),nt(jo,!0)&&x.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:gt("tablecellprops tablemergecells tablesplitcells")}),x.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(gt(""),Gs=>on(Gs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const ns=Pu(Dl(x));ns.length!==0&&x.queryCommandSupported("mceTableToggleClass")&&x.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>au(x,ns,"tableclass",Gs=>x.execCommand("mceTableToggleClass",!1,Gs)),onSetup:R.onSetupTable});const js=Pu(Lm(x));js.length!==0&&x.queryCommandSupported("mceTableCellToggleClass")&&x.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>au(x,js,"tablecellclass",Gs=>x.execCommand("mceTableCellToggleClass",!1,Gs)),onSetup:R.onSetupCellOrRow}),x.queryCommandSupported("mceTableApplyCellStyle")&&(x.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>au(x,Ys,"tablecellverticalalign",xr(x,"vertical-align")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>au(x,Au(x),"tablecellborderwidth",xr(x,"border-width")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>au(x,ku(x),"tablecellborderstyle",xr(x,"border-style")),onSetup:R.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>us(x,Ou(x),"background-color"),onSetup:R.onSetupCellOrRow}),x.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>us(x,zg(x),"border-color"),onSetup:R.onSetupCellOrRow})),ze("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),ze("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Cd(x),onSetup:R.onSetupTableRowHeaders}),ze("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Zm(x),onSetup:R.onSetupTableRowHeaders})},da=x=>{const R=Km(x);Br(x),Xi(x),Ta(x,R),Hf(x,R),qc(x)};var tC=()=>{h.add("table",da)};tC()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(A,M,K)=>{var Ee;return K(A,M.prototype)?!0:((Ee=A.constructor)===null||Ee===void 0?void 0:Ee.name)===M.name},D=A=>{const M=typeof A;return A===null?"null":M==="object"&&Array.isArray(A)?"array":M==="object"&&C(A,String,(K,Ee)=>Ee.isPrototypeOf(K))?"string":M},N=A=>M=>D(M)===A,W=A=>M=>typeof M===A,Y=N("string"),de=N("object"),Q=N("array"),Te=W("boolean"),ct=A=>A==null,Xe=A=>!ct(A),wt=W("function"),yt=W("number"),Tt=()=>{},_t=(A,M)=>K=>A(M(K)),Lt=A=>()=>A,gt=(A,M)=>A===M;function st(A,...M){return(...K)=>{const Ee=M.concat(K);return A.apply(null,Ee)}}const Qe=A=>M=>!A(M),ie=Lt(!1);class St{constructor(M,K){this.tag=M,this.value=K}static some(M){return new St(!0,M)}static none(){return St.singletonNone}fold(M,K){return this.tag?K(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?St.some(M(this.value)):St.none()}bind(M){return this.tag?M(this.value):St.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:St.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return Xe(M)?St.some(M):St.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}St.singletonNone=new St(!1);const Wn=Array.prototype.slice,vt=Array.prototype.indexOf,J=Array.prototype.push,Yt=(A,M)=>vt.call(A,M),On=(A,M)=>Yt(A,M)>-1,gn=(A,M)=>{for(let K=0,Ee=A.length;K<Ee;K++){const $e=A[K];if(M($e,K))return!0}return!1},rt=(A,M)=>{const K=A.length,Ee=new Array(K);for(let $e=0;$e<K;$e++){const en=A[$e];Ee[$e]=M(en,$e)}return Ee},we=(A,M)=>{for(let K=0,Ee=A.length;K<Ee;K++){const $e=A[K];M($e,K)}},Ro=(A,M)=>{const K=[];for(let Ee=0,$e=A.length;Ee<$e;Ee++){const en=A[Ee];M(en,Ee)&&K.push(en)}return K},Ve=(A,M)=>{if(A.length===0)return[];{let K=M(A[0]);const Ee=[];let $e=[];for(let en=0,Eo=A.length;en<Eo;en++){const Xo=A[en],_o=M(Xo);_o!==K&&(Ee.push($e),$e=[]),K=_o,$e.push(Xo)}return $e.length!==0&&Ee.push($e),Ee}},je=(A,M,K)=>(we(A,(Ee,$e)=>{K=M(K,Ee,$e)}),K),T=(A,M,K)=>{for(let Ee=0,$e=A.length;Ee<$e;Ee++){const en=A[Ee];if(M(en,Ee))return St.some(en);if(K(en,Ee))break}return St.none()},it=(A,M)=>T(A,M,ie),ve=A=>{const M=[];for(let K=0,Ee=A.length;K<Ee;++K){if(!Q(A[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+A);J.apply(M,A[K])}return M},Rt=(A,M)=>ve(rt(A,M)),It=A=>{const M=Wn.call(A,0);return M.reverse(),M},_e=(A,M)=>M>=0&&M<A.length?St.some(A[M]):St.none(),Dt=A=>_e(A,0),An=A=>_e(A,A.length-1),nt=(A,M)=>{const K=[],Ee=wt(M)?$e=>gn(K,en=>M(en,$e)):$e=>On(K,$e);for(let $e=0,en=A.length;$e<en;$e++){const Eo=A[$e];Ee(Eo)||K.push(Eo)}return K},rn=(A,M,K=gt)=>A.exists(Ee=>K(Ee,M)),Ne=(A,M,K=gt)=>dt(A,M,K).getOr(A.isNone()&&M.isNone()),dt=(A,M,K)=>A.isSome()&&M.isSome()?St.some(K(A.getOrDie(),M.getOrDie())):St.none(),V=8,Ao=11,Ct=1,jt=3,tt=(A,M)=>{const Ee=(M||document).createElement("div");if(Ee.innerHTML=A,!Ee.hasChildNodes()||Ee.childNodes.length>1){const $e="HTML does not have a single root node";throw console.error($e,A),new Error($e)}return G(Ee.childNodes[0])},re=(A,M)=>{const Ee=(M||document).createElement(A);return G(Ee)},I=(A,M)=>{const Ee=(M||document).createTextNode(A);return G(Ee)},G=A=>{if(A==null)throw new Error("Node cannot be null or undefined");return{dom:A}},L={fromHtml:tt,fromTag:re,fromText:I,fromDom:G,fromPoint:(A,M,K)=>St.from(A.dom.elementFromPoint(M,K)).map(G)},ye=(A,M)=>{const K=A.dom;if(K.nodeType!==Ct)return!1;{const Ee=K;if(Ee.matches!==void 0)return Ee.matches(M);if(Ee.msMatchesSelector!==void 0)return Ee.msMatchesSelector(M);if(Ee.webkitMatchesSelector!==void 0)return Ee.webkitMatchesSelector(M);if(Ee.mozMatchesSelector!==void 0)return Ee.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},He=(A,M)=>A.dom===M.dom,ke=(A,M)=>{const K=A.dom,Ee=M.dom;return K===Ee?!1:K.contains(Ee)},lt=ye,Je=typeof window<"u"?window:Function("return this;")(),cn=(A,M)=>{let K=M??Je;for(let Ee=0;Ee<A.length&&K!==void 0&&K!==null;++Ee)K=K[A[Ee]];return K},Wt=(A,M)=>{const K=A.split(".");return cn(K,M)},wn=(A,M)=>Wt(A,M),ot=(A,M)=>{const K=wn(A,M);if(K==null)throw new Error(A+" not available on this browser");return K},mt=Object.getPrototypeOf,Xt=A=>ot("HTMLElement",A),sn=A=>{const M=Wt("ownerDocument.defaultView",A);return de(A)&&(Xt(M).prototype.isPrototypeOf(A)||/^HTML\w*Element$/.test(mt(A).constructor.name))},lo=A=>A.dom.nodeName.toLowerCase(),po=A=>A.dom.nodeType,ro=A=>M=>po(M)===A,Ds=A=>po(A)===V||lo(A)==="#comment",to=A=>Qo(A)&&sn(A.dom),Qo=ro(Ct),ss=ro(jt),Lo=ro(Ao),ir=A=>M=>Qo(M)&&lo(M)===A,xo=A=>St.from(A.dom.parentNode).map(L.fromDom),zr=A=>St.from(A.dom.parentElement).map(L.fromDom),on=A=>St.from(A.dom.nextSibling).map(L.fromDom),Zo=A=>rt(A.dom.childNodes,L.fromDom),gr=(A,M)=>{const K=A.dom.childNodes;return St.from(K[M]).map(L.fromDom)},tr=A=>gr(A,0),Rr=A=>gr(A,A.dom.childNodes.length-1),_r=A=>Lo(A)&&Xe(A.dom.host),ys=A=>L.fromDom(A.dom.getRootNode()),ea=A=>{const M=ys(A);return _r(M)?St.some(M):St.none()},Gr=A=>L.fromDom(A.dom.host),bs=A=>{const M=ss(A)?A.dom.parentNode:A.dom;if(M==null||M.ownerDocument===null)return!1;const K=M.ownerDocument;return ea(L.fromDom(M)).fold(()=>K.body.contains(M),_t(bs,Gr))};var Qn=(A,M,K,Ee,$e)=>A(K,Ee)?St.some(K):wt($e)&&$e(K)?St.none():M(K,Ee,$e);const Ns=(A,M,K)=>{let Ee=A.dom;const $e=wt(K)?K:ie;for(;Ee.parentNode;){Ee=Ee.parentNode;const en=L.fromDom(Ee);if(M(en))return St.some(en);if($e(en))break}return St.none()},Ke=(A,M,K)=>Qn(($e,en)=>en($e),Ns,A,M,K),xt=(A,M,K)=>Ns(A,Ee=>ye(Ee,M),K),xn=(A,M,K)=>Qn(($e,en)=>ye($e,en),xt,A,M,K),Bn=A=>xn(A,"[contenteditable]"),Ho=(A,M=!1)=>bs(A)?A.dom.isContentEditable:Bn(A).fold(Lt(M),K=>as(K)==="true"),as=A=>A.dom.contentEditable,pr=(A,M)=>{xo(A).each(Ee=>{Ee.dom.insertBefore(M.dom,A.dom)})},Sr=(A,M)=>{on(A).fold(()=>{xo(A).each($e=>{Ae($e,M)})},Ee=>{pr(Ee,M)})},lr=(A,M)=>{tr(A).fold(()=>{Ae(A,M)},Ee=>{A.dom.insertBefore(M.dom,Ee.dom)})},Ae=(A,M)=>{A.dom.appendChild(M.dom)},Ce=(A,M)=>{we(M,K=>{pr(A,K)})},ht=(A,M)=>{we(M,K=>{Ae(A,K)})},Ft=A=>{A.dom.textContent="",we(Zo(A),M=>{Yn(M)})},Yn=A=>{const M=A.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var Co=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Bo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ur=tinymce.util.Tools.resolve("tinymce.util.VK");const Le=A=>rt(A,L.fromDom),Fo=Object.keys,Re=(A,M)=>{const K=Fo(A);for(let Ee=0,$e=K.length;Ee<$e;Ee++){const en=K[Ee],Eo=A[en];M(Eo,en)}},Be=A=>(M,K)=>{A[K]=M},qt=(A,M,K,Ee)=>{Re(A,($e,en)=>{(M($e,en)?K:Ee)($e,en)})},tn=(A,M)=>{const K={};return qt(A,M,Be(K),Tt),K},Dn=(A,M,K)=>{if(Y(K)||Te(K)||yt(K))A.setAttribute(M,K+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",K,":: Element ",A),new Error("Attribute value was not simple")},Zn=(A,M)=>{const K=A.dom;Re(M,(Ee,$e)=>{Dn(K,$e,Ee)})},Gn=A=>je(A.dom.attributes,(M,K)=>(M[K.name]=K.value,M),{}),zn=(A,M)=>L.fromDom(A.dom.cloneNode(M)),no=A=>zn(A,!0),bo=(A,M)=>{const K=L.fromTag(M),Ee=Gn(A);return Zn(K,Ee),K},hs=(A,M)=>{const K=bo(A,M);Sr(A,K);const Ee=Zo(A);return ht(K,Ee),Yn(A),K};var As=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ls=tinymce.util.Tools.resolve("tinymce.util.Tools");const wa=A=>M=>Xe(M)&&M.nodeName.toLowerCase()===A,la=A=>M=>Xe(M)&&A.test(M.nodeName),fo=A=>Xe(A)&&A.nodeType===3,is=A=>Xe(A)&&A.nodeType===1,ms=la(/^(OL|UL|DL)$/),aa=la(/^(OL|UL)$/),ta=wa("ol"),Fr=la(/^(LI|DT|DD)$/),dr=la(/^(DT|DD)$/),_l=la(/^(TH|TD)$/),ec=wa("br"),ks=A=>{var M;return((M=A.parentNode)===null||M===void 0?void 0:M.firstChild)===A},Sa=(A,M)=>Xe(M)&&M.nodeName in A.schema.getTextBlockElements(),ha=(A,M)=>Xe(A)&&A.nodeName in M,Vr=(A,M)=>Xe(M)&&M.nodeName in A.schema.getVoidElements(),pi=(A,M)=>ec(M)?A.isBlock(M.nextSibling)&&!ec(M.previousSibling):!1,xa=(A,M,K)=>{const Ee=A.isEmpty(M);return K&&A.select("span[data-mce-type=bookmark]",M).length>0?!1:Ee},Fa=(A,M)=>A.isChildOf(M,A.getRoot()),fc=A=>M=>M.options.get(A),tc=A=>{const M=A.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Wi=fc("lists_indent_on_tab"),ni=fc("forced_root_block"),Uc=fc("forced_root_block_attrs"),Na=(A,M,K={})=>{const Ee=A.dom,$e=A.schema.getBlockElements(),en=Ee.createFragment(),Eo=ni(A),Xo=Uc(A);let _o,To,Er=!1;for(To=Ee.create(Eo,{...Xo,...K.style?{style:K.style}:{}}),ha(M.firstChild,$e)||en.appendChild(To);_o=M.firstChild;){const va=_o.nodeName;!Er&&(va!=="SPAN"||_o.getAttribute("data-mce-type")!=="bookmark")&&(Er=!0),ha(_o,$e)?(en.appendChild(_o),To=null):(To||(To=Ee.create(Eo,Xo),en.appendChild(To)),To.appendChild(_o))}return!Er&&To&&To.appendChild(Ee.create("br",{"data-mce-bogus":"1"})),en},Nr=As.DOM,Ei=(A,M,K)=>{const Ee=To=>{const Er=To.parentNode;Er&&Ls.each($e,va=>{Er.insertBefore(va,K.parentNode)}),Nr.remove(To)},$e=Nr.select('span[data-mce-type="bookmark"]',M),en=Na(A,K),Eo=Nr.createRng();Eo.setStartAfter(K),Eo.setEndAfter(M);const Xo=Eo.extractContents();for(let To=Xo.firstChild;To;To=To.firstChild)if(To.nodeName==="LI"&&A.dom.isEmpty(To)){Nr.remove(To);break}A.dom.isEmpty(Xo)||Nr.insertAfter(Xo,M),Nr.insertAfter(en,M);const _o=K.parentElement;_o&&xa(A.dom,_o)&&Ee(_o),Nr.remove(K),xa(A.dom,M)&&Nr.remove(M)},Zi=ir("dd"),Ti=ir("dt"),Ai=(A,M)=>{Zi(M)?hs(M,"dt"):Ti(M)&&zr(M).each(K=>Ei(A,K.dom,M.dom))},Ur=A=>{Ti(A)&&hs(A,"dd")},Za=(A,M,K)=>{M==="Indent"?we(K,Ur):we(K,Ee=>Ai(A,Ee))},te=(A,M)=>{if(fo(A))return{container:A,offset:M};const K=Co.getNode(A,M);return fo(K)?{container:K,offset:M>=A.childNodes.length?K.data.length:0}:K.previousSibling&&fo(K.previousSibling)?{container:K.previousSibling,offset:K.previousSibling.data.length}:K.nextSibling&&fo(K.nextSibling)?{container:K.nextSibling,offset:0}:{container:A,offset:M}},Se=A=>{const M=A.cloneRange(),K=te(A.startContainer,A.startOffset);M.setStart(K.container,K.offset);const Ee=te(A.endContainer,A.endOffset);return M.setEnd(Ee.container,Ee.offset),M},Ge=["OL","UL","DL"],Ht=Ge.join(","),dn=(A,M)=>{const K=M||A.selection.getStart(!0);return A.dom.getParent(K,Ht,zo(A,K))},$n=(A,M)=>Xe(A)&&M.length===1&&M[0]===A,es=A=>Ro(A.querySelectorAll(Ht),ms),Ws=A=>{const M=dn(A),K=A.selection.getSelectedBlocks();return $n(M,K)?es(M):Ro(K,Ee=>ms(Ee)&&M!==Ee)},ls=(A,M)=>{const K=Ls.map(M,Ee=>{const $e=A.dom.getParent(Ee,"li,dd,dt",zo(A,Ee));return $e||Ee});return nt(K)},q=A=>{const M=A.selection.getSelectedBlocks();return Ro(ls(A,M),Fr)},xe=A=>Ro(q(A),dr),Ie=(A,M)=>{const K=A.dom.getParents(M,"TD,TH");return K.length>0?K[0]:A.getBody()},nn=(A,M)=>!ms(M)&&!Fr(M)&&gn(Ge,K=>A.isValidChild(M.nodeName,K)),zo=(A,M)=>{const K=A.dom.getParents(M,A.dom.isBlock),Ee=en=>en.nodeName.toLowerCase()!==ni(A);return it(K,en=>Ee(en)&&nn(A.schema,en)).getOr(A.getBody())},$=A=>xo(A).exists(M=>Fr(M.dom)&&tr(M).exists(K=>!ms(K.dom))&&Rr(M).exists(K=>!ms(K.dom))),se=(A,M)=>{const K=A.dom.getParents(M,"ol,ul",zo(A,M));return An(K)},De=A=>{const M=se(A,A.selection.getStart()),K=Ro(A.selection.getSelectedBlocks(),aa);return M.toArray().concat(K)},at=A=>{const M=A.selection.getStart();return A.dom.getParents(M,"ol,ul",zo(A,M))},pt=A=>{const M=De(A),K=at(A);return it(K,Ee=>$(L.fromDom(Ee))).fold(()=>vo(A,M),Ee=>[Ee])},vo=(A,M)=>{const K=rt(M,Ee=>se(A,Ee).getOr(Ee));return nt(K)},Ps=A=>/\btox\-/.test(A.className),Os=(A,M)=>T(A,ms,_l).exists(K=>K.nodeName===M&&!Ps(K)),Qt=(A,M)=>M!==null&&!A.dom.isEditable(M),Hs=A=>{const M=dn(A);return Qt(A,M)},pa=(A,M)=>{const K=A.dom.getParent(M,"ol,ul,dl");return Qt(A,K)},gc=(A,M)=>{const K=A.selection.getNode();return M({parents:A.dom.getParents(K),element:K}),A.on("NodeChange",M),()=>A.off("NodeChange",M)},qo=(A,M)=>{const Ee=document.createDocumentFragment();return we(A,$e=>{Ee.appendChild($e.dom)}),L.fromDom(Ee)},hc=(A,M,K)=>A.dispatch("ListMutation",{action:M,element:K}),eu=(A=>M=>M.replace(A,""))(/^\s+|\s+$/g),nr=A=>A.length>0,ji=A=>!nr(A),Qd=A=>A.style!==void 0&&wt(A.style.getPropertyValue),Of=(A,M,K)=>{if(!Y(K))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",K,":: Element ",A),new Error("CSS value must be a string: "+K);Qd(A)&&A.style.setProperty(M,K)},Dr=(A,M,K)=>{const Ee=A.dom;Of(Ee,M,K)},em=A=>lt(A,"OL,UL"),ca=A=>lt(A,"LI"),La=A=>tr(A).exists(em),bi=A=>Rr(A).exists(em),vi=A=>"listAttributes"in A,Tu=A=>"isComment"in A,ae=A=>"isFragment"in A,fe=A=>A.depth>0,ut=A=>A.isSelected,zt=A=>{const M=Zo(A),K=bi(A)?M.slice(0,-1):M;return rt(K,no)},go=(A,M,K)=>xo(A).filter(Qo).map(Ee=>({depth:M,dirty:!1,isSelected:K,content:zt(A),itemAttributes:Gn(A),listAttributes:Gn(Ee),listType:lo(Ee),isInPreviousLi:!1})),Mo=(A,M)=>{Ae(A.item,M.list)},Bs=A=>{for(let M=1;M<A.length;M++)Mo(A[M-1],A[M])},Js=(A,M)=>{dt(An(A),Dt(M),Mo)},Ha=(A,M)=>{const K={list:L.fromTag(M,A),item:L.fromTag("li",A)};return Ae(K.list,K.item),K},pc=(A,M,K)=>{const Ee=[];for(let $e=0;$e<K;$e++)Ee.push(Ha(A,vi(M)?M.listType:M.parentListType));return Ee},ia=(A,M)=>{for(let K=0;K<A.length-1;K++)Dr(A[K].item,"list-style-type","none");An(A).each(K=>{vi(M)&&(Zn(K.list,M.listAttributes),Zn(K.item,M.itemAttributes)),ht(K.item,M.content)})},bc=(A,M)=>{lo(A.list)!==M.listType&&(A.list=hs(A.list,M.listType)),Zn(A.list,M.listAttributes)},or=(A,M,K)=>{const Ee=L.fromTag("li",A);return Zn(Ee,M),ht(Ee,K),Ee},Sc=(A,M)=>{Ae(A.list,M),A.item=M},nc=(A,M,K)=>{const Ee=M.slice(0,K.depth);return An(Ee).each($e=>{if(vi(K)){const en=or(A,K.itemAttributes,K.content);Sc($e,en),bc($e,K)}else if(ae(K))ht($e.item,K.content);else{const en=L.fromHtml(`<!--${K.content}-->`);Ae($e.list,en)}}),Ee},Kr=(A,M,K)=>{const Ee=pc(A,K,K.depth-M.length);return Bs(Ee),ia(Ee,K),Js(M,Ee),M.concat(Ee)},Br=(A,M)=>{let K=St.none();const Ee=je(M,($e,en,Eo)=>Tu(en)?Eo===0?(K=St.some(en),$e):nc(A,$e,en):en.depth>$e.length?Kr(A,$e,en):nc(A,$e,en),[]);return K.each($e=>{const en=L.fromHtml(`<!--${$e.content}-->`);Dt(Ee).each(Eo=>{lr(Eo.list,en)})}),Dt(Ee).map($e=>$e.list)},br=(A,M)=>{switch(A){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},Au=(A,M)=>{vi(A)&&vi(M)&&(A.listType=M.listType,A.listAttributes={...M.listAttributes})},ku=A=>{A.listAttributes=tn(A.listAttributes,(M,K)=>K!=="start")},_u=(A,M)=>{const K=A[M].depth,Ee=en=>en.depth===K&&!en.dirty,$e=en=>en.depth<K;return T(It(A.slice(0,M)),Ee,$e).orThunk(()=>T(A.slice(M+1),Ee,$e))},$m=A=>(we(A,(M,K)=>{_u(A,K).fold(()=>{M.dirty&&vi(M)&&ku(M)},Ee=>Au(M,Ee))}),A),Du=A=>{let M=A;return{get:()=>M,set:$e=>{M=$e}}},Gi=(A,M,K,Ee)=>{var $e;if(Ds(Ee))return[{depth:A+1,content:($e=Ee.dom.nodeValue)!==null&&$e!==void 0?$e:"",dirty:!1,isSelected:!1,isComment:!0}];M.each(Xo=>{He(Xo.start,Ee)&&K.set(!0)});const en=go(Ee,A,K.get());M.each(Xo=>{He(Xo.end,Ee)&&K.set(!1)});const Eo=Rr(Ee).filter(em).map(Xo=>ba(A,M,K,Xo)).getOr([]);return en.toArray().concat(Eo)},Im=(A,M,K,Ee)=>tr(Ee).filter(em).fold(()=>Gi(A,M,K,Ee),$e=>{const en=je(Zo(Ee),(Eo,Xo,_o)=>{if(_o===0)return Eo;if(ca(Xo))return Eo.concat(Gi(A,M,K,Xo));{const To={isFragment:!0,depth:A,content:[Xo],isSelected:!1,dirty:!1,parentListType:lo($e)};return Eo.concat(To)}},[]);return ba(A,M,K,$e).concat(en)}),ba=(A,M,K,Ee)=>Rt(Zo(Ee),$e=>{const en=em($e)?ba:Im,Eo=A+1;return en(Eo,M,K,$e)}),Lm=(A,M)=>{const K=Du(!1),Ee=0;return rt(A,$e=>({sourceList:$e,entries:ba(Ee,M,K,$e)}))},Lg=(A,M)=>{const K=$m(M);return rt(K,Ee=>{const $e=Tu(Ee)?qo([L.fromHtml(`<!--${Ee.content}-->`)]):qo(Ee.content),en=vi(Ee)?Ee.itemAttributes:{};return L.fromDom(Na(A,$e.dom,en))})},Dl=(A,M)=>{const K=$m(M);return Br(A.contentDocument,K).toArray()},Hg=(A,M)=>Rt(Ve(M,fe),K=>Dt(K).exists(fe)?Dl(A,K):Lg(A,K)),Ou=(A,M)=>{we(Ro(A,ut),K=>br(M,K))},zg=A=>{const M=rt(q(A),L.fromDom);return dt(it(M,Qe(La)),it(It(M),Qe(La)),(K,Ee)=>({start:K,end:Ee}))},tu=(A,M,K)=>{const Ee=Lm(M,zg(A));we(Ee,$e=>{Ou($e.entries,K);const en=Hg(A,$e.entries);we(en,Eo=>{hc(A,K==="Indent"?"IndentList":"OutdentList",Eo.dom)}),Ce($e.sourceList,en),Yn($e.sourceList)})},Vg=(A,M)=>{const K=Le(pt(A)),Ee=Le(xe(A));let $e=!1;if(K.length||Ee.length){const en=A.selection.getBookmark();tu(A,K,M),Za(A,M,Ee),A.selection.moveToBookmark(en),A.selection.setRng(Se(A.selection.getRng())),A.nodeChanged(),$e=!0}return $e},Hm=(A,M)=>!Hs(A)&&Vg(A,M),Rf=A=>Hm(A,"Indent"),Ru=A=>Hm(A,"Outdent"),Ff=A=>Hm(A,"Flatten"),Fe="\uFEFF",nu=A=>A===Fe,Ol=(A,M,K)=>Ns(A,M,K).isSome(),Ug=(A,M)=>Ol(A,st(He,M));var S1=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Fu=As.DOM,os=A=>{const M={},K=Ee=>{let $e=A[Ee?"startContainer":"endContainer"],en=A[Ee?"startOffset":"endOffset"];if(is($e)){const Eo=Fu.create("span",{"data-mce-type":"bookmark"});$e.hasChildNodes()?(en=Math.min(en,$e.childNodes.length-1),Ee?$e.insertBefore(Eo,$e.childNodes[en]):Fu.insertAfter(Eo,$e.childNodes[en])):$e.appendChild(Eo),$e=Eo,en=0}M[Ee?"startContainer":"endContainer"]=$e,M[Ee?"startOffset":"endOffset"]=en};return K(!0),A.collapsed||K(),M},Ea=A=>{const M=Ee=>{const $e=Xo=>{var _o;let To=(_o=Xo.parentNode)===null||_o===void 0?void 0:_o.firstChild,Er=0;for(;To;){if(To===Xo)return Er;(!is(To)||To.getAttribute("data-mce-type")!=="bookmark")&&Er++,To=To.nextSibling}return-1};let en=A[Ee?"startContainer":"endContainer"],Eo=A[Ee?"startOffset":"endOffset"];if(en){if(is(en)&&en.parentNode){const Xo=en;Eo=$e(en),en=en.parentNode,Fu.remove(Xo),!en.hasChildNodes()&&Fu.isBlock(en)&&en.appendChild(Fu.create("br"))}A[Ee?"startContainer":"endContainer"]=en,A[Ee?"startOffset":"endOffset"]=Eo}};M(!0),M();const K=Fu.createRng();return K.setStart(A.startContainer,A.startOffset),A.endContainer&&K.setEnd(A.endContainer,A.endOffset),Se(K)},qi=A=>{switch(A){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Nu=(A,M,K)=>{const Ee=K["list-style-type"]?K["list-style-type"]:null;A.setStyle(M,"list-style-type",Ee)},zm=(A,M)=>{Ls.each(M,(K,Ee)=>{A.setAttribute(Ee,K)})},tm=(A,M,K)=>{zm(M,K["list-attributes"]),Ls.each(A.select("li",M),Ee=>{zm(Ee,K["list-item-attributes"])})},xc=(A,M,K)=>{Nu(A,M,K),tm(A,M,K)},Vm=(A,M,K)=>{Ls.each(K,Ee=>A.setStyle(M,Ee,""))},ou=(A,M)=>Xe(M)&&!ha(M,A.schema.getBlockElements()),Um=(A,M,K,Ee)=>{let $e=M[K?"startContainer":"endContainer"];const en=M[K?"startOffset":"endOffset"];is($e)&&($e=$e.childNodes[Math.min(en,$e.childNodes.length-1)]||$e),!K&&ec($e.nextSibling)&&($e=$e.nextSibling);const Eo=_o=>{for(;!A.dom.isBlock(_o)&&_o.parentNode&&Ee!==_o;)_o=_o.parentNode;return _o},Xo=(_o,To)=>{var Er;const va=new Bo(_o,Eo(_o)),Di=To?"next":"prev";let cu;for(;cu=va[Di]();)if(!(Vr(A,cu)||nu(cu.textContent)||((Er=cu.textContent)===null||Er===void 0?void 0:Er.length)===0))return St.some(cu);return St.none()};if(K&&fo($e))if(nu($e.textContent))$e=Xo($e,!1).getOr($e);else for($e.parentNode!==null&&ou(A,$e.parentNode)&&($e=$e.parentNode);$e.previousSibling!==null&&(ou(A,$e.previousSibling)||fo($e.previousSibling));)$e=$e.previousSibling;if(!K&&fo($e))if(nu($e.textContent))$e=Xo($e,!0).getOr($e);else for($e.parentNode!==null&&ou(A,$e.parentNode)&&($e=$e.parentNode);$e.nextSibling!==null&&(ou(A,$e.nextSibling)||fo($e.nextSibling));)$e=$e.nextSibling;for(;$e.parentNode!==Ee;){const _o=$e.parentNode;if(Sa(A,$e)||/^(TD|TH)$/.test(_o.nodeName))return $e;$e=_o}return $e},su=(A,M,K)=>{const Ee=[],$e=A.dom,en=Um(A,M,!0,K),Eo=Um(A,M,!1,K);let Xo;const _o=[];for(let To=en;To&&(_o.push(To),To!==Eo);To=To.nextSibling);return Ls.each(_o,To=>{var Er;if(Sa(A,To)){Ee.push(To),Xo=null;return}if($e.isBlock(To)||ec(To)){ec(To)&&$e.remove(To),Xo=null;return}const va=To.nextSibling;if(S1.isBookmarkNode(To)&&(ms(va)||Sa(A,va)||!va&&To.parentNode===K)){Xo=null;return}Xo||(Xo=$e.create("p"),(Er=To.parentNode)===null||Er===void 0||Er.insertBefore(Xo,To),Ee.push(Xo)),Xo.appendChild(To)}),Ee},Wc=(A,M,K)=>{const Ee=A.getStyle(M,"list-style-type");let $e=K?K["list-style-type"]:"";return $e=$e===null?"":$e,Ee===$e},Wg=(A,M)=>{const K=A.selection.getStart(!0),Ee=Um(A,M,!0,A.getBody());return Ug(L.fromDom(Ee),L.fromDom(M.commonAncestorContainer))?M.commonAncestorContainer:K},nm=(A,M,K)=>{const Ee=A.selection.getRng();let $e="LI";const en=zo(A,Wg(A,Ee)),Eo=A.dom;if(Eo.getContentEditable(A.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&($e="DT");const Xo=os(Ee),_o=Ro(su(A,Ee,en),A.dom.isEditable);Ls.each(_o,To=>{let Er;const va=To.previousSibling,Di=To.parentNode;Fr(Di)||(va&&ms(va)&&va.nodeName===M&&Wc(Eo,va,K)?(Er=va,To=Eo.rename(To,$e),va.appendChild(To)):(Er=Eo.create(M),Di.insertBefore(Er,To),Er.appendChild(To),To=Eo.rename(To,$e)),Vm(Eo,To,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),xc(Eo,Er,K),om(A.dom,Er))}),A.selection.setRng(Ea(Xo))},ja=(A,M)=>ms(A)&&A.nodeName===(M==null?void 0:M.nodeName),oi=(A,M,K)=>{const Ee=A.getStyle(M,"list-style-type",!0),$e=A.getStyle(K,"list-style-type",!0);return Ee===$e},Mc=(A,M)=>A.className===M.className,gd=(A,M,K)=>ja(M,K)&&oi(A,M,K)&&Mc(M,K),om=(A,M)=>{let K,Ee=M.nextSibling;if(gd(A,M,Ee)){const $e=Ee;for(;K=$e.firstChild;)M.appendChild(K);A.remove($e)}if(Ee=M.previousSibling,gd(A,M,Ee)){const $e=Ee;for(;K=$e.lastChild;)M.insertBefore(K,M.firstChild);A.remove($e)}},Zg=(A,M,K,Ee)=>{if(M.nodeName!==K){const $e=A.dom.rename(M,K);xc(A.dom,$e,Ee),hc(A,qi(K),$e)}else xc(A.dom,M,Ee),hc(A,qi(K),M)},sm=(A,M,K,Ee)=>{if(M.classList.forEach(($e,en,Eo)=>{$e.startsWith("tox-")&&(Eo.remove($e),Eo.length===0&&M.removeAttribute("class"))}),M.nodeName!==K){const $e=A.dom.rename(M,K);xc(A.dom,$e,Ee),hc(A,qi(K),$e)}else xc(A.dom,M,Ee),hc(A,qi(K),M)},ul=(A,M,K,Ee,$e)=>{const en=ms(M);if(en&&M.nodeName===Ee&&!Wm($e)&&!Ps(M))Ff(A);else{nm(A,Ee,$e);const Eo=os(A.selection.getRng()),Xo=en?[M,...K]:K,_o=en&&Ps(M)?sm:Zg;Ls.each(Xo,To=>{_o(A,To,Ee,$e)}),A.selection.setRng(Ea(Eo))}},Wm=A=>"list-style-type"in A,Xh=(A,M,K,Ee)=>{if(M!==A.getBody())if(M)if(M.nodeName===K&&!Wm(Ee)&&!Ps(M))Ff(A);else{const $e=os(A.selection.getRng());Ps(M)&&M.classList.forEach((Eo,Xo,_o)=>{Eo.startsWith("tox-")&&(_o.remove(Eo),_o.length===0&&M.removeAttribute("class"))}),xc(A.dom,M,Ee);const en=A.dom.rename(M,K);om(A.dom,en),A.selection.setRng(Ea($e)),nm(A,K,Ee),hc(A,qi(K),en)}else nm(A,K,Ee),hc(A,qi(K),M)},jg=(A,M,K)=>{const Ee=dn(A);if(pa(A,Ee))return;const $e=Ws(A),en=de(K)?K:{};$e.length>0?ul(A,Ee,$e,M,en):Xh(A,Ee,M,en)},a0=As.DOM,Nf=(A,M)=>{const K=M.parentElement;if(K&&K.nodeName==="LI"&&K.firstChild===M){const Ee=K.previousSibling;Ee&&Ee.nodeName==="LI"?(Ee.appendChild(M),xa(A,K)&&a0.remove(K)):a0.setStyle(K,"listStyleType","none")}if(ms(K)){const Ee=K.previousSibling;Ee&&Ee.nodeName==="LI"&&Ee.appendChild(M)}},rm=(A,M)=>{const K=Ls.grep(A.select("ol,ul",M));Ls.each(K,Ee=>{Nf(A,Ee)})},hd=(A,M,K,Ee)=>{let $e=M.startContainer;const en=M.startOffset;if(fo($e)&&(K?en<$e.data.length:en>0))return $e;const Eo=A.schema.getNonEmptyElements();is($e)&&($e=Co.getNode($e,en));const Xo=new Bo($e,Ee);K&&pi(A.dom,$e)&&Xo.next();const _o=K?Xo.next.bind(Xo):Xo.prev2.bind(Xo);for(;$e=_o();)if($e.nodeName==="LI"&&!$e.hasChildNodes()||Eo[$e.nodeName]||fo($e)&&$e.data.length>0)return $e;return null},am=(A,M)=>{const K=M.childNodes;return K.length===1&&!ms(K[0])&&A.isBlock(K[0])},Wr=A=>St.from(A).map(L.fromDom).filter(to).exists(M=>Ho(M)&&!On(["details"],lo(M))),Yr=(A,M)=>{am(A,M)&&Wr(M.firstChild)&&A.remove(M.firstChild,!0)},ki=(A,M,K)=>{let Ee;const $e=am(A,K)?K.firstChild:K;if(Yr(A,M),!xa(A,M,!0))for(;Ee=M.firstChild;)$e.appendChild(Ee)},pd=(A,M,K)=>{let Ee;const $e=M.parentNode;if(!Fa(A,M)||!Fa(A,K))return;ms(K.lastChild)&&(Ee=K.lastChild),$e===K.lastChild&&ec($e.previousSibling)&&A.remove($e.previousSibling);const en=K.lastChild;en&&ec(en)&&M.hasChildNodes()&&A.remove(en),xa(A,K,!0)&&Ft(L.fromDom(K)),ki(A,M,K),Ee&&K.appendChild(Ee);const Xo=ke(L.fromDom(K),L.fromDom(M))?A.getParents(M,ms,K):[];A.remove(M),we(Xo,_o=>{xa(A,_o)&&_o!==A.getRoot()&&A.remove(_o)})},Gg=(A,M,K)=>{Ft(L.fromDom(K)),pd(A.dom,M,K),A.selection.setCursorLocation(K,0)},Ba=(A,M,K,Ee)=>{const $e=A.dom;if($e.isEmpty(Ee))Gg(A,K,Ee);else{const en=os(M);pd($e,K,Ee),A.selection.setRng(Ea(en))}},oo=(A,M,K,Ee)=>{const $e=os(M);pd(A.dom,K,Ee);const en=Ea($e);A.selection.setRng(en)},ru=(A,M)=>{const K=A.dom,Ee=A.selection,$e=Ee.getStart(),en=Ie(A,$e),Eo=K.getParent(Ee.getStart(),"LI",en);if(Eo){const Xo=Eo.parentElement;if(Xo===A.getBody()&&xa(K,Xo))return!0;const _o=Se(Ee.getRng()),To=K.getParent(hd(A,_o,M,en),"LI",en),Er=To&&(M?K.isChildOf(Eo,To):K.isChildOf(To,Eo));if(To&&To!==Eo&&!Er)return A.undoManager.transact(()=>{M?Ba(A,_o,To,Eo):ks(Eo)?Ru(A):oo(A,_o,Eo,To)}),!0;if(Er&&!M&&To!==Eo)return A.undoManager.transact(()=>{if(_o.commonAncestorContainer.parentElement){const va=os(_o),Di=_o.commonAncestorContainer.parentElement;ki(K,_o.commonAncestorContainer.parentElement,To),Di.remove();const cu=Ea(va);A.selection.setRng(cu)}}),!0;if(!To&&!M&&_o.startOffset===0&&_o.endOffset===0)return A.undoManager.transact(()=>{Ff(A)}),!0}return!1},Bf=(A,M,K)=>{const Ee=A.getParent(M.parentNode,A.isBlock,K);A.remove(M),Ee&&A.isEmpty(Ee)&&A.remove(Ee)},oc=(A,M)=>{const K=A.dom,Ee=A.selection.getStart(),$e=Ie(A,Ee),en=K.getParent(Ee,K.isBlock,$e);if(en&&K.isEmpty(en,void 0,{checkRootAsContent:!0})){const Eo=Se(A.selection.getRng()),Xo=K.getParent(hd(A,Eo,M,$e),"LI",$e);if(Xo){const _o=Di=>On(["td","th","caption"],lo(Di)),To=Di=>Di.dom===$e,Er=Ke(L.fromDom(Xo),_o,To),va=Ke(L.fromDom(Eo.startContainer),_o,To);return Ne(Er,va,He)?(A.undoManager.transact(()=>{const Di=Xo.parentNode;Bf(K,en,$e),om(K,Di),A.selection.select(Xo,!0),A.selection.collapse(M)}),!0):!1}}return!1},Ys=(A,M)=>ru(A,M)||oc(A,M),Bu=A=>{const M=A.selection.getStart(),K=Ie(A,M);return A.dom.getParent(M,"LI,DT,DD",K)||q(A).length>0},qg=A=>Bu(A)?(A.undoManager.transact(()=>{A.execCommand("Delete"),rm(A.dom,A.getBody())}),!0):!1,cm=(A,M)=>{const K=A.selection;return!pa(A,K.getNode())&&(K.isCollapsed()?Ys(A,M):qg(A))},Jh=A=>{A.on("ExecCommand",M=>{const K=M.command.toLowerCase();(K==="delete"||K==="forwarddelete")&&Bu(A)&&rm(A.dom,A.getBody())}),A.on("keydown",M=>{M.keyCode===ur.BACKSPACE?cm(A,!1)&&M.preventDefault():M.keyCode===ur.DELETE&&cm(A,!0)&&M.preventDefault()})},Yo=A=>({backspaceDelete:M=>{cm(A,M)}}),Ma=(A,M)=>{const K=dn(A);K===null||pa(A,K)||A.undoManager.transact(()=>{de(M.styles)&&A.dom.setStyles(K,M.styles),de(M.attrs)&&Re(M.attrs,(Ee,$e)=>A.dom.setAttrib(K,$e,Ee))})},bd=A=>{const M=It(eu(A).split("")),K=rt(M,(Ee,$e)=>{const en=Ee.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,$e)*en});return je(K,(Ee,$e)=>Ee+$e,0)},vc=A=>{if(A--,A<0)return"";{const M=A%26,K=Math.floor(A/26),Ee=vc(K),$e=String.fromCharCode(65+M);return Ee+$e}},Zc=A=>/^[A-Z]+$/.test(A),_i=A=>/^[a-z]+$/.test(A),Ga=A=>/^[0-9]+$/.test(A),Pc=A=>Ga(A)?2:Zc(A)?0:_i(A)?1:ji(A)?3:4,yi=A=>{switch(Pc(A)){case 2:return St.some({listStyleType:St.none(),start:A});case 0:return St.some({listStyleType:St.some("upper-alpha"),start:bd(A).toString()});case 1:return St.some({listStyleType:St.some("lower-alpha"),start:bd(A).toString()});case 3:return St.some({listStyleType:St.none(),start:""});case 4:return St.none()}},Mf=A=>{const M=parseInt(A.start,10);return rn(A.listStyleType,"upper-alpha")?vc(M):rn(A.listStyleType,"lower-alpha")?vc(M).toLowerCase():A.start},na=A=>{const M=dn(A);!ta(M)||pa(A,M)||A.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Mf({start:A.dom.getAttrib(M,"start","1"),listStyleType:St.from(A.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:K=>{const Ee=K.getData();yi(Ee.start).each($e=>{A.execCommand("mceListUpdate",!1,{attrs:{start:$e.start==="1"?"":$e.start},styles:{"list-style-type":$e.listStyleType.getOr("")}})}),K.close()}})},vd=(A,M)=>()=>{const K=dn(A);return Xe(K)&&K.nodeName===M},ua=A=>{A.addCommand("mceListProps",()=>{na(A)})},Mu=A=>{A.on("BeforeExecCommand",M=>{const K=M.command.toLowerCase();K==="indent"?Rf(A):K==="outdent"&&Ru(A)}),A.addCommand("InsertUnorderedList",(M,K)=>{jg(A,"UL",K)}),A.addCommand("InsertOrderedList",(M,K)=>{jg(A,"OL",K)}),A.addCommand("InsertDefinitionList",(M,K)=>{jg(A,"DL",K)}),A.addCommand("RemoveList",()=>{Ff(A)}),ua(A),A.addCommand("mceListUpdate",(M,K)=>{de(K)&&Ma(A,K)}),A.addQueryStateHandler("InsertUnorderedList",vd(A,"UL")),A.addQueryStateHandler("InsertOrderedList",vd(A,"OL")),A.addQueryStateHandler("InsertDefinitionList",vd(A,"DL"))};var yd=tinymce.util.Tools.resolve("tinymce.html.Node");const mr=A=>A.type===3,Ki=A=>A.length===0,Qh=A=>{const M=($e,en)=>{const Eo=yd.create("li");we($e,Xo=>Eo.append(Xo)),en?A.insert(Eo,en,!0):A.append(Eo)},K=($e,en)=>mr(en)?[...$e,en]:!Ki($e)&&!mr(en)?(M($e,en),[]):$e,Ee=je(A.children(),K,[]);Ki(Ee)||M(Ee)},au=A=>{A.on("PreInit",()=>{const{parser:M}=A;M.addNodeFilter("ul,ol",K=>we(K,Qh))})},xr=A=>{A.on("keydown",M=>{M.keyCode!==ur.TAB||ur.metaKeyPressed(M)||A.undoManager.transact(()=>{(M.shiftKey?Ru(A):Rf(A))&&M.preventDefault()})})},Pu=A=>{Wi(A)&&xr(A),Jh(A)},si=(A,M)=>K=>{const Ee=$e=>{K.setActive(Os($e.parents,M)),K.setEnabled(!pa(A,$e.element)&&A.selection.isEditable())};return K.setEnabled(A.selection.isEditable()),gc(A,Ee)},us=A=>{const M=K=>()=>A.execCommand(K);A.hasPlugin("advlist")||(A.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:si(A,"OL")}),A.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:si(A,"UL")}))},Cd=(A,M)=>K=>gc(A,$e=>K.setEnabled(Os($e.parents,M)&&!pa(A,$e.element))),Zm=A=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>A.execCommand("mceListProps"),onSetup:Cd(A,"OL")};A.ui.registry.addMenuItem("listprops",M),A.ui.registry.addContextMenu("lists",{update:K=>{const Ee=dn(A,K);return ta(Ee)?["listprops"]:[]}})};var Pf=()=>{h.add("lists",A=>(tc(A),au(A),A.hasPlugin("rtc",!0)?ua(A):(Pu(A),Mu(A)),us(A),Zm(A),Yo(A)))};Pf()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=tinymce.util.Tools.resolve("tinymce.Env"),D=tinymce.util.Tools.resolve("tinymce.util.Tools");const N=Tt=>_t=>_t.options.get(Tt),W=N("content_style"),Y=N("content_css_cors"),de=N("body_class"),Q=N("body_id"),Te=Tt=>{var _t;let Lt="";const gt=Tt.dom.encode,st=(_t=W(Tt))!==null&&_t!==void 0?_t:"";Lt+='<base href="'+gt(Tt.documentBaseURI.getURI())+'">';const Qe=Y(Tt)?' crossorigin="anonymous"':"";D.each(Tt.contentCSS,gn=>{Lt+='<link type="text/css" rel="stylesheet" href="'+gt(Tt.documentBaseURI.toAbsolute(gn))+'"'+Qe+">"}),st&&(Lt+='<style type="text/css">'+st+"</style>");const ie=Q(Tt),St=de(Tt),vt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(C.os.isMacOS()||C.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",J=Tt.getBody().dir,Yt=J?' dir="'+gt(J)+'"':"";return"<!DOCTYPE html><html><head>"+Lt+'</head><body id="'+gt(ie)+'" class="mce-content-body '+gt(St)+'"'+Yt+">"+Tt.getContent()+vt+"</body></html>"},ct=Tt=>{const _t=Te(Tt);Tt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:_t}}).focus("close")},Xe=Tt=>{Tt.addCommand("mcePreview",()=>{ct(Tt)})},wt=Tt=>{const _t=()=>Tt.execCommand("mcePreview");Tt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:_t}),Tt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:_t})};var yt=()=>{h.add("preview",Tt=>{Xe(Tt),wt(Tt)})};yt()})();(function(){const h=ae=>{let fe=ae;return{get:()=>fe,set:go=>{fe=go}}};var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=ae=>({isFullscreen:()=>ae.get()!==null}),N=(ae,fe,ut)=>{var zt;return ut(ae,fe.prototype)?!0:((zt=ae.constructor)===null||zt===void 0?void 0:zt.name)===fe.name},W=ae=>{const fe=typeof ae;return ae===null?"null":fe==="object"&&Array.isArray(ae)?"array":fe==="object"&&N(ae,String,(ut,zt)=>zt.isPrototypeOf(ut))?"string":fe},Y=ae=>fe=>W(fe)===ae,de=ae=>fe=>typeof fe===ae,Q=ae=>fe=>ae===fe,Te=Y("string"),ct=Y("object"),Xe=Y("array"),wt=Q(null),yt=de("boolean"),Tt=Q(void 0),_t=ae=>ae==null,Lt=ae=>!_t(ae),gt=de("function"),st=de("number"),Qe=()=>{},ie=(ae,fe)=>(...ut)=>ae(fe.apply(null,ut)),St=(ae,fe)=>ut=>ae(fe(ut)),Wn=ae=>()=>ae;function vt(ae,...fe){return(...ut)=>{const zt=fe.concat(ut);return ae.apply(null,zt)}}const J=Wn(!1),Yt=Wn(!0);class On{constructor(fe,ut){this.tag=fe,this.value=ut}static some(fe){return new On(!0,fe)}static none(){return On.singletonNone}fold(fe,ut){return this.tag?ut(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?On.some(fe(this.value)):On.none()}bind(fe){return this.tag?fe(this.value):On.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:On.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return Lt(fe)?On.some(fe):On.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}On.singletonNone=new On(!1);const gn=Array.prototype.push,rt=(ae,fe)=>{const ut=ae.length,zt=new Array(ut);for(let go=0;go<ut;go++){const Mo=ae[go];zt[go]=fe(Mo,go)}return zt},we=(ae,fe)=>{for(let ut=0,zt=ae.length;ut<zt;ut++){const go=ae[ut];fe(go,ut)}},Ro=(ae,fe)=>{const ut=[];for(let zt=0,go=ae.length;zt<go;zt++){const Mo=ae[zt];fe(Mo,zt)&&ut.push(Mo)}return ut},Ve=(ae,fe,ut)=>{for(let zt=0,go=ae.length;zt<go;zt++){const Mo=ae[zt];if(fe(Mo,zt))return On.some(Mo);if(ut(Mo,zt))break}return On.none()},je=(ae,fe)=>Ve(ae,fe,J),T=ae=>{const fe=[];for(let ut=0,zt=ae.length;ut<zt;++ut){if(!Xe(ae[ut]))throw new Error("Arr.flatten item "+ut+" was not an array, input: "+ae);gn.apply(fe,ae[ut])}return fe},it=(ae,fe)=>T(rt(ae,fe)),ve=(ae,fe)=>fe>=0&&fe<ae.length?On.some(ae[fe]):On.none(),Rt=ae=>ve(ae,0),It=(ae,fe)=>{for(let ut=0;ut<ae.length;ut++){const zt=fe(ae[ut],ut);if(zt.isSome())return zt}return On.none()},_e=(ae,fe,ut)=>ae.isSome()&&fe.isSome()?On.some(ut(ae.getOrDie(),fe.getOrDie())):On.none(),Dt=ae=>{const fe=h(On.none()),ut=()=>fe.get().each(ae);return{clear:()=>{ut(),fe.set(On.none())},isSet:()=>fe.get().isSome(),get:()=>fe.get(),set:Js=>{ut(),fe.set(On.some(Js))}}},An=()=>Dt(ae=>ae.unbind()),nt=()=>{const ae=Dt(Qe);return{...ae,on:ut=>ae.get().each(ut)}},rn=(ae,fe)=>{let ut=null;return{cancel:()=>{wt(ut)||(clearTimeout(ut),ut=null)},throttle:(...Mo)=>{wt(ut)&&(ut=setTimeout(()=>{ut=null,ae.apply(null,Mo)},fe))}}},Ne=Object.keys,dt=(ae,fe)=>{const ut=Ne(ae);for(let zt=0,go=ut.length;zt<go;zt++){const Mo=ut[zt],Bs=ae[Mo];fe(Bs,Mo)}},V=typeof window<"u"?window:Function("return this;")(),Ao=(ae,fe)=>{let ut=fe??V;for(let zt=0;zt<ae.length&&ut!==void 0&&ut!==null;++zt)ut=ut[ae[zt]];return ut},Ct=(ae,fe)=>{const ut=ae.split(".");return Ao(ut,fe)},jt=(ae,fe)=>Ct(ae,fe),tt=(ae,fe)=>{const ut=jt(ae,fe);if(ut==null)throw new Error(ae+" not available on this browser");return ut},re=Object.getPrototypeOf,I=ae=>tt("HTMLElement",ae),G=ae=>{const fe=Ct("ownerDocument.defaultView",ae);return ct(ae)&&(I(fe).prototype.isPrototypeOf(ae)||/^HTML\w*Element$/.test(re(ae).constructor.name))},le=9,L=11,ye=1,He=3,ke=ae=>ae.dom.nodeType,lt=ae=>fe=>ke(fe)===ae,Je=ae=>cn(ae)&&G(ae.dom),cn=lt(ye),Wt=lt(He),wn=lt(L),ot=(ae,fe,ut)=>{if(Te(ut)||yt(ut)||st(ut))ae.setAttribute(fe,ut+"");else throw console.error("Invalid call to Attribute.set. Key ",fe,":: Value ",ut,":: Element ",ae),new Error("Attribute value was not simple")},mt=(ae,fe,ut)=>{ot(ae.dom,fe,ut)},Xt=(ae,fe)=>{const ut=ae.dom.getAttribute(fe);return ut===null?void 0:ut},sn=(ae,fe)=>{ae.dom.removeAttribute(fe)},lo=ae=>ae.dom.classList!==void 0,po=(ae,fe)=>lo(ae)&&ae.dom.classList.contains(fe),ro=(ae,fe,ut=0,zt)=>{const go=ae.indexOf(fe,ut);return go!==-1?Tt(zt)?!0:go+fe.length<=zt:!1},Ds=ae=>ae.style!==void 0&&gt(ae.style.getPropertyValue),to=(ae,fe)=>{const zt=(fe||document).createElement("div");if(zt.innerHTML=ae,!zt.hasChildNodes()||zt.childNodes.length>1){const go="HTML does not have a single root node";throw console.error(go,ae),new Error(go)}return Lo(zt.childNodes[0])},Qo=(ae,fe)=>{const zt=(fe||document).createElement(ae);return Lo(zt)},ss=(ae,fe)=>{const zt=(fe||document).createTextNode(ae);return Lo(zt)},Lo=ae=>{if(ae==null)throw new Error("Node cannot be null or undefined");return{dom:ae}},xo={fromHtml:to,fromTag:Qo,fromText:ss,fromDom:Lo,fromPoint:(ae,fe,ut)=>On.from(ae.dom.elementFromPoint(fe,ut)).map(Lo)},zr=(ae,fe)=>{const ut=ae.dom;if(ut.nodeType!==ye)return!1;{const zt=ut;if(zt.matches!==void 0)return zt.matches(fe);if(zt.msMatchesSelector!==void 0)return zt.msMatchesSelector(fe);if(zt.webkitMatchesSelector!==void 0)return zt.webkitMatchesSelector(fe);if(zt.mozMatchesSelector!==void 0)return zt.mozMatchesSelector(fe);throw new Error("Browser lacks native selectors")}},on=ae=>ae.nodeType!==ye&&ae.nodeType!==le&&ae.nodeType!==L||ae.childElementCount===0,Zo=(ae,fe)=>{const ut=document;return on(ut)?[]:rt(ut.querySelectorAll(ae),xo.fromDom)},gr=(ae,fe)=>ae.dom===fe.dom,tr=ae=>xo.fromDom(ae.dom.ownerDocument),Rr=ae=>On.from(ae.dom.parentNode).map(xo.fromDom),_r=(ae,fe)=>{const ut=gt(fe)?fe:J;let zt=ae.dom;const go=[];for(;zt.parentNode!==null&&zt.parentNode!==void 0;){const Mo=zt.parentNode,Bs=xo.fromDom(Mo);if(go.push(Bs),ut(Bs)===!0)break;zt=Mo}return go},ys=ae=>{const fe=ut=>Ro(ut,zt=>!gr(ae,zt));return Rr(ae).map(Gr).map(fe).getOr([])},ea=ae=>On.from(ae.dom.nextSibling).map(xo.fromDom),Gr=ae=>rt(ae.dom.childNodes,xo.fromDom),bs=ae=>wn(ae)&&Lt(ae.dom.host),Qn=ae=>xo.fromDom(ae.dom.getRootNode()),Ns=ae=>{const fe=Qn(ae);return bs(fe)?On.some(fe):On.none()},Ke=ae=>xo.fromDom(ae.dom.host),xt=ae=>{if(Lt(ae.target)){const fe=xo.fromDom(ae.target);if(cn(fe)&&xn(fe)&&ae.composed&&ae.composedPath){const ut=ae.composedPath();if(ut)return Rt(ut)}}return On.from(ae.target)},xn=ae=>Lt(ae.dom.shadowRoot),Bn=ae=>{const fe=Wt(ae)?ae.dom.parentNode:ae.dom;if(fe==null||fe.ownerDocument===null)return!1;const ut=fe.ownerDocument;return Ns(xo.fromDom(fe)).fold(()=>ut.body.contains(fe),St(Bn,Ke))},Ho=ae=>{const fe=ae.dom.body;if(fe==null)throw new Error("Body is not available yet");return xo.fromDom(fe)},as=(ae,fe,ut)=>{if(!Te(ut))throw console.error("Invalid call to CSS.set. Property ",fe,":: Value ",ut,":: Element ",ae),new Error("CSS value must be a string: "+ut);Ds(ae)&&ae.style.setProperty(fe,ut)},pr=(ae,fe,ut)=>{const zt=ae.dom;as(zt,fe,ut)},Sr=(ae,fe)=>{const ut=ae.dom;dt(fe,(zt,go)=>{as(ut,go,zt)})},lr=(ae,fe)=>{const ut=ae.dom,go=window.getComputedStyle(ut).getPropertyValue(fe);return go===""&&!Bn(ae)?Ae(ut,fe):go},Ae=(ae,fe)=>Ds(ae)?ae.style.getPropertyValue(fe):"",Ce=(ae,fe,ut,zt,go,Mo,Bs)=>({target:ae,x:fe,y:ut,stop:zt,prevent:go,kill:Mo,raw:Bs}),ht=ae=>{const fe=xo.fromDom(xt(ae).getOr(ae.target)),ut=()=>ae.stopPropagation(),zt=()=>ae.preventDefault(),go=ie(zt,ut);return Ce(fe,ae.clientX,ae.clientY,ut,zt,go,ae)},Ft=(ae,fe)=>ut=>{ae(ut)&&fe(ht(ut))},Yn=(ae,fe,ut,zt,go)=>{const Mo=Ft(ut,zt);return ae.dom.addEventListener(fe,Mo,go),{unbind:vt(Bo,ae,fe,Mo,go)}},Co=(ae,fe,ut,zt)=>Yn(ae,fe,ut,zt,!1),Bo=(ae,fe,ut,zt)=>{ae.dom.removeEventListener(fe,ut,zt)},ur=Yt,Le=(ae,fe,ut)=>Co(ae,fe,ur,ut),Fo=ae=>{let fe=!1,ut;return(...zt)=>(fe||(fe=!0,ut=ae.apply(null,zt)),ut)},Re=(ae,fe,ut,zt)=>{const go=ae.isiOS()&&/ipad/i.test(ut)===!0,Mo=ae.isiOS()&&!go,Bs=ae.isiOS()||ae.isAndroid(),Js=Bs||zt("(pointer:coarse)"),Ha=go||!Mo&&Bs&&zt("(min-device-width:768px)"),pc=Mo||Bs&&!Ha,ia=fe.isSafari()&&ae.isiOS()&&/safari/i.test(ut)===!1,bc=!pc&&!Ha&&!ia;return{isiPad:Wn(go),isiPhone:Wn(Mo),isTablet:Wn(Ha),isPhone:Wn(pc),isTouch:Wn(Js),isAndroid:ae.isAndroid,isiOS:ae.isiOS,isWebView:Wn(ia),isDesktop:Wn(bc)}},Be=(ae,fe)=>{for(let ut=0;ut<ae.length;ut++){const zt=ae[ut];if(zt.test(fe))return zt}},qt=(ae,fe)=>{const ut=Be(ae,fe);if(!ut)return{major:0,minor:0};const zt=go=>Number(fe.replace(ut,"$"+go));return Zn(zt(1),zt(2))},tn=(ae,fe)=>{const ut=String(fe).toLowerCase();return ae.length===0?Dn():qt(ae,ut)},Dn=()=>Zn(0,0),Zn=(ae,fe)=>({major:ae,minor:fe}),Gn={nu:Zn,detect:tn,unknown:Dn},zn=(ae,fe)=>It(fe.brands,ut=>{const zt=ut.brand.toLowerCase();return je(ae,go=>{var Mo;return zt===((Mo=go.brand)===null||Mo===void 0?void 0:Mo.toLowerCase())}).map(go=>({current:go.name,version:Gn.nu(parseInt(ut.version,10),0)}))}),no=(ae,fe)=>{const ut=String(fe).toLowerCase();return je(ae,zt=>zt.search(ut))},bo=(ae,fe)=>no(ae,fe).map(ut=>{const zt=Gn.detect(ut.versionRegexes,fe);return{current:ut.name,version:zt}}),hs=(ae,fe)=>no(ae,fe).map(ut=>{const zt=Gn.detect(ut.versionRegexes,fe);return{current:ut.name,version:zt}}),As=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ls=ae=>fe=>ro(fe,ae),wa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:ae=>ro(ae,"edge/")&&ro(ae,"chrome")&&ro(ae,"safari")&&ro(ae,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,As],search:ae=>ro(ae,"chrome")&&!ro(ae,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:ae=>ro(ae,"msie")||ro(ae,"trident")},{name:"Opera",versionRegexes:[As,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ls("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ls("firefox")},{name:"Safari",versionRegexes:[As,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:ae=>(ro(ae,"safari")||ro(ae,"mobile/"))&&ro(ae,"applewebkit")}],la=[{name:"Windows",search:Ls("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:ae=>ro(ae,"iphone")||ro(ae,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ls("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ls("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ls("linux"),versionRegexes:[]},{name:"Solaris",search:Ls("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ls("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ls("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fo={browsers:Wn(wa),oses:Wn(la)},is="Edge",ms="Chromium",aa="IE",ta="Opera",Fr="Firefox",dr="Safari",_l=()=>ec({current:void 0,version:Gn.unknown()}),ec=ae=>{const fe=ae.current,ut=ae.version,zt=go=>()=>fe===go;return{current:fe,version:ut,isEdge:zt(is),isChromium:zt(ms),isIE:zt(aa),isOpera:zt(ta),isFirefox:zt(Fr),isSafari:zt(dr)}},ks={unknown:_l,nu:ec,edge:Wn(is),chromium:Wn(ms),ie:Wn(aa),opera:Wn(ta),firefox:Wn(Fr),safari:Wn(dr)},Sa="Windows",ha="iOS",Vr="Android",pi="Linux",xa="macOS",Fa="Solaris",fc="FreeBSD",tc="ChromeOS",Wi=()=>ni({current:void 0,version:Gn.unknown()}),ni=ae=>{const fe=ae.current,ut=ae.version,zt=go=>()=>fe===go;return{current:fe,version:ut,isWindows:zt(Sa),isiOS:zt(ha),isAndroid:zt(Vr),isMacOS:zt(xa),isLinux:zt(pi),isSolaris:zt(Fa),isFreeBSD:zt(fc),isChromeOS:zt(tc)}},Uc={unknown:Wi,nu:ni,windows:Wn(Sa),ios:Wn(ha),android:Wn(Vr),linux:Wn(pi),macos:Wn(xa),solaris:Wn(Fa),freebsd:Wn(fc),chromeos:Wn(tc)},Nr={detect:(ae,fe,ut)=>{const zt=fo.browsers(),go=fo.oses(),Mo=fe.bind(Ha=>zn(zt,Ha)).orThunk(()=>bo(zt,ae)).fold(ks.unknown,ks.nu),Bs=hs(go,ae).fold(Uc.unknown,Uc.nu),Js=Re(Bs,Mo,ae,ut);return{browser:Mo,os:Bs,deviceType:Js}}},Ei=ae=>window.matchMedia(ae).matches;let Zi=Fo(()=>Nr.detect(window.navigator.userAgent,On.from(window.navigator.userAgentData),Ei));const Ti=()=>Zi(),Ai=(ae,fe)=>({left:ae,top:fe,translate:(zt,go)=>Ai(ae+zt,fe+go)}),Ur=Ai,Za=ae=>{const fe=ae!==void 0?ae.dom:document,ut=fe.body.scrollLeft||fe.documentElement.scrollLeft,zt=fe.body.scrollTop||fe.documentElement.scrollTop;return Ur(ut,zt)},te=ae=>{const fe=ae===void 0?window:ae;return Ti().browser.isFirefox()?On.none():On.from(fe.visualViewport)},Se=(ae,fe,ut,zt)=>({x:ae,y:fe,width:ut,height:zt,right:ae+ut,bottom:fe+zt}),Ge=ae=>{const fe=ae===void 0?window:ae,ut=fe.document,zt=Za(xo.fromDom(ut));return te(fe).fold(()=>{const go=fe.document.documentElement,Mo=go.clientWidth,Bs=go.clientHeight;return Se(zt.left,zt.top,Mo,Bs)},go=>Se(Math.max(go.pageLeft,zt.left),Math.max(go.pageTop,zt.top),go.width,go.height))},Ht=(ae,fe,ut)=>te(ut).map(zt=>{const go=Mo=>fe(ht(Mo));return zt.addEventListener(ae,go),{unbind:()=>zt.removeEventListener(ae,go)}}).getOrThunk(()=>({unbind:Qe}));var dn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$n=tinymce.util.Tools.resolve("tinymce.Env");const es=(ae,fe)=>{ae.dispatch("FullscreenStateChanged",{state:fe}),ae.dispatch("ResizeEditor")},Ws=ae=>fe=>fe.options.get(ae),ls=ae=>{const fe=ae.options.register;fe("fullscreen_native",{processor:"boolean",default:!1})},q=Ws("fullscreen_native"),xe=ae=>{const fe=xo.fromDom(ae.getElement());return Ns(fe).map(Ke).getOrThunk(()=>Ho(tr(fe)))},Ie=ae=>ae.fullscreenElement!==void 0?ae.fullscreenElement:ae.msFullscreenElement!==void 0?ae.msFullscreenElement:ae.webkitFullscreenElement!==void 0?ae.webkitFullscreenElement:null,nn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",zo=ae=>{const fe=ae.dom;fe.requestFullscreen?fe.requestFullscreen():fe.msRequestFullscreen?fe.msRequestFullscreen():fe.webkitRequestFullScreen&&fe.webkitRequestFullScreen()},$=ae=>{const fe=ae.dom;fe.exitFullscreen?fe.exitFullscreen():fe.msExitFullscreen?fe.msExitFullscreen():fe.webkitCancelFullScreen&&fe.webkitCancelFullScreen()},se=ae=>ae.dom===Ie(tr(ae).dom),De=(ae,fe,ut)=>Ro(_r(ae,ut),fe),at=(ae,fe)=>Ro(ys(ae),fe),pt=ae=>Zo(ae),vo=(ae,fe,ut)=>De(ae,zt=>zr(zt,fe),ut),Ps=(ae,fe)=>at(ae,ut=>zr(ut,fe)),Os="data-ephox-mobile-fullscreen-style",Qt="display:none!important;",Hs="position:absolute!important;",pa="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",gc="background-color:rgb(255,255,255)!important;",qo=$n.os.isAndroid(),hc=ae=>{const fe=lr(ae,"background-color");return fe!==void 0&&fe!==""?"background-color:"+fe+"!important":gc},qr=(ae,fe,ut)=>{const zt=pc=>Ps(pc,"*:not(.tox-silver-sink)"),go=pc=>ia=>{const bc=Xt(ia,"style"),or=bc===void 0?"no-styles":bc.trim();or!==pc&&(mt(ia,Os,or),Sr(ia,ae.parseStyle(pc)))},Mo=vo(fe,"*"),Bs=it(Mo,zt),Js=hc(ut);we(Bs,go(Qt)),we(Mo,go(Hs+pa+Js)),go((qo===!0?"":Hs)+pa+Js)(fe)},eu=ae=>{const fe=pt("["+Os+"]");we(fe,ut=>{const zt=Xt(ut,Os);zt&&zt!=="no-styles"?Sr(ut,ae.parseStyle(zt)):sn(ut,"style"),sn(ut,Os)})},nr=dn.DOM,ji=()=>Ge(window),Qd=ae=>window.scrollTo(ae.x,ae.y),Of=te().fold(()=>({bind:Qe,unbind:Qe}),ae=>{const fe=nt(),ut=An(),zt=An(),go=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Mo=()=>{window.requestAnimationFrame(()=>{fe.on(pc=>Sr(pc,{top:ae.offsetTop+"px",left:ae.offsetLeft+"px",height:ae.height+"px",width:ae.width+"px"}))})},Bs=rn(()=>{go(),Mo()},50);return{bind:pc=>{fe.set(pc),Bs.throttle(),ut.set(Ht("resize",Bs.throttle)),zt.set(Ht("scroll",Bs.throttle))},unbind:()=>{fe.on(()=>{ut.clear(),zt.clear()}),fe.clear()}}}),Dr=(ae,fe)=>{const ut=document.body,zt=document.documentElement,go=ae.getContainer(),Mo=xo.fromDom(go),Bs=ea(Mo).filter(Br=>Je(Br)&&po(Br,"tox-silver-sink")),Js=xe(ae),Ha=fe.get(),pc=xo.fromDom(ae.getBody()),ia=$n.deviceType.isTouch(),bc=go.style,or=ae.iframeElement,Sc=or==null?void 0:or.style,nc=Br=>{Br(ut,"tox-fullscreen"),Br(zt,"tox-fullscreen"),Br(go,"tox-fullscreen"),Ns(Mo).map(br=>Ke(br).dom).each(br=>{Br(br,"tox-fullscreen"),Br(br,"tox-shadowhost")})},Kr=()=>{ia&&eu(ae.dom),nc(nr.removeClass),Of.unbind(),On.from(fe.get()).each(Br=>Br.fullscreenChangeHandler.unbind())};if(Ha)Ha.fullscreenChangeHandler.unbind(),q(ae)&&se(Js)&&$(tr(Js)),Sc.width=Ha.iframeWidth,Sc.height=Ha.iframeHeight,bc.width=Ha.containerWidth,bc.height=Ha.containerHeight,bc.top=Ha.containerTop,bc.left=Ha.containerLeft,_e(Bs,Ha.sinkCssPosition,(Br,br)=>{pr(Br,"position",br)}),Kr(),Qd(Ha.scrollPos),fe.set(null),es(ae,!1),ae.off("remove",Kr);else{const Br=Le(tr(Js),nn(),Au=>{q(ae)&&!se(Js)&&fe.get()!==null&&Dr(ae,fe)}),br={scrollPos:ji(),containerWidth:bc.width,containerHeight:bc.height,containerTop:bc.top,containerLeft:bc.left,iframeWidth:Sc.width,iframeHeight:Sc.height,fullscreenChangeHandler:Br,sinkCssPosition:Bs.map(Au=>lr(Au,"position"))};ia&&qr(ae.dom,Mo,pc),Sc.width=Sc.height="100%",bc.width=bc.height="",nc(nr.addClass),Bs.each(Au=>{pr(Au,"position","fixed")}),Of.bind(Mo),ae.on("remove",Kr),fe.set(br),q(ae)&&zo(Js),es(ae,!0)}},em=(ae,fe)=>{ae.addCommand("mceFullScreen",()=>{Dr(ae,fe)})};var ca=tinymce.util.Tools.resolve("tinymce.util.VK");const La=(ae,fe)=>{ae.on("init",()=>{ae.on("keydown",ut=>{ut.keyCode===ca.TAB&&!(ut.metaKey||ut.ctrlKey)&&fe.get()&&ut.preventDefault()})})},bi=(ae,fe)=>ut=>{ut.setActive(fe.get()!==null);const zt=go=>ut.setActive(go.state);return ae.on("FullscreenStateChanged",zt),()=>ae.off("FullscreenStateChanged",zt)},vi=(ae,fe)=>{const ut=()=>ae.execCommand("mceFullScreen");ae.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ut,onSetup:bi(ae,fe)}),ae.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ut,onSetup:bi(ae,fe),shortcut:"Meta+Shift+F"})};var Tu=()=>{C.add("fullscreen",ae=>{const fe=h(null);return ae.inline||(ls(ae),em(ae,fe),vi(ae,fe),La(ae,fe),ae.addShortcut("Meta+Shift+F","","mceFullScreen")),D(fe)})};Tu()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=(st=>Qe=>typeof Qe===st)("function");var N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),W=tinymce.util.Tools.resolve("tinymce.util.Tools");const Y=st=>Qe=>Qe.options.get(st),de=st=>{const Qe=st.options.register;Qe("save_enablewhendirty",{processor:"boolean",default:!0}),Qe("save_onsavecallback",{processor:"function"}),Qe("save_oncancelcallback",{processor:"function"})},Q=Y("save_enablewhendirty"),Te=Y("save_onsavecallback"),ct=Y("save_oncancelcallback"),Xe=(st,Qe)=>{st.notificationManager.open({text:Qe,type:"error"})},wt=st=>{const Qe=N.DOM.getParent(st.id,"form");if(Q(st)&&!st.isDirty())return;st.save();const ie=Te(st);if(D(ie)){ie.call(st,st),st.nodeChanged();return}Qe?(st.setDirty(!1),(!Qe.onsubmit||Qe.onsubmit())&&(typeof Qe.submit=="function"?Qe.submit():Xe(st,"Error: Form submit field collision.")),st.nodeChanged()):Xe(st,"Error: No form element found.")},yt=st=>{const Qe=W.trim(st.startContent),ie=ct(st);if(D(ie)){ie.call(st,st);return}st.resetContent(Qe)},Tt=st=>{st.addCommand("mceSave",()=>{wt(st)}),st.addCommand("mceCancel",()=>{yt(st)})},_t=st=>Qe=>{const ie=()=>{Qe.setEnabled(!Q(st)||st.isDirty())};return ie(),st.on("NodeChange dirty",ie),()=>st.off("NodeChange dirty",ie)},Lt=st=>{st.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>st.execCommand("mceSave"),onSetup:_t(st),shortcut:"Meta+S"}),st.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>st.execCommand("mceCancel"),onSetup:_t(st)}),st.addShortcut("Meta+S","","mceSave")};var gt=()=>{h.add("save",st=>{de(st),Lt(st),Tt(st)})};gt()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=Object.getPrototypeOf,D=($,se,De)=>{var at;return De($,se.prototype)?!0:((at=$.constructor)===null||at===void 0?void 0:at.name)===se.name},N=$=>{const se=typeof $;return $===null?"null":se==="object"&&Array.isArray($)?"array":se==="object"&&D($,String,(De,at)=>at.isPrototypeOf(De))?"string":se},W=$=>se=>N(se)===$,Y=$=>se=>typeof se===$,de=$=>se=>$===se,Q=($,se)=>ct($)&&D($,se,(De,at)=>C(De)===at),Te=W("string"),ct=W("object"),Xe=$=>Q($,Object),wt=W("array"),yt=de(null),Tt=Y("boolean"),_t=$=>$==null,Lt=$=>!_t($),gt=Y("function"),st=Y("number"),Qe=($,se)=>{if(wt($)){for(let De=0,at=$.length;De<at;++De)if(!se($[De]))return!1;return!0}return!1},ie=()=>{};class St{constructor(se,De){this.tag=se,this.value=De}static some(se){return new St(!0,se)}static none(){return St.singletonNone}fold(se,De){return this.tag?De(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?St.some(se(this.value)):St.none()}bind(se){return this.tag?se(this.value):St.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:St.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Lt(se)?St.some(se):St.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}St.singletonNone=new St(!1);const Wn=Object.keys,vt=Object.hasOwnProperty,J=($,se)=>{const De=Wn($);for(let at=0,pt=De.length;at<pt;at++){const vo=De[at],Ps=$[vo];se(Ps,vo)}},Yt=$=>(se,De)=>{$[De]=se},On=($,se,De,at)=>{J($,(pt,vo)=>{(se(pt,vo)?De:at)(pt,vo)})},gn=($,se)=>{const De={};return On($,se,Yt(De),ie),De},rt=($,se)=>vt.call($,se),we=($,se)=>rt($,se)&&$[se]!==void 0&&$[se]!==null,Ro=Array.prototype.push,Ve=$=>{const se=[];for(let De=0,at=$.length;De<at;++De){if(!wt($[De]))throw new Error("Arr.flatten item "+De+" was not an array, input: "+$);Ro.apply(se,$[De])}return se},je=($,se)=>se>=0&&se<$.length?St.some($[se]):St.none(),T=$=>je($,0),it=($,se)=>{for(let De=0;De<$.length;De++){const at=se($[De],De);if(at.isSome())return at}return St.none()};typeof window<"u"||Function("return this;")();const ve=($,se,De)=>{if(Te(De)||Tt(De)||st(De))$.setAttribute(se,De+"");else throw console.error("Invalid call to Attribute.set. Key ",se,":: Value ",De,":: Element ",$),new Error("Attribute value was not simple")},Rt=($,se,De)=>{ve($.dom,se,De)},It=($,se)=>{$.dom.removeAttribute(se)},_e=($,se)=>{const at=(se||document).createElement("div");if(at.innerHTML=$,!at.hasChildNodes()||at.childNodes.length>1){const pt="HTML does not have a single root node";throw console.error(pt,$),new Error(pt)}return nt(at.childNodes[0])},Dt=($,se)=>{const at=(se||document).createElement($);return nt(at)},An=($,se)=>{const at=(se||document).createTextNode($);return nt(at)},nt=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},Ne={fromHtml:_e,fromTag:Dt,fromText:An,fromDom:nt,fromPoint:($,se,De)=>St.from($.dom.elementFromPoint(se,De)).map(nt)};var dt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.util.URI");const Ao=$=>$.length>0,Ct=$=>se=>se.options.get($),jt=$=>{const se=$.options.register;se("image_dimensions",{processor:"boolean",default:!0}),se("image_advtab",{processor:"boolean",default:!1}),se("image_uploadtab",{processor:"boolean",default:!0}),se("image_prepend_url",{processor:"string",default:""}),se("image_class_list",{processor:"object[]"}),se("image_description",{processor:"boolean",default:!0}),se("image_title",{processor:"boolean",default:!1}),se("image_caption",{processor:"boolean",default:!1}),se("image_list",{processor:De=>{const at=De===!1||Te(De)||Qe(De,ct)||gt(De);return at?{value:De,valid:at}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},tt=Ct("image_dimensions"),re=Ct("image_advtab"),I=Ct("image_uploadtab"),G=Ct("image_prepend_url"),le=Ct("image_class_list"),L=Ct("image_description"),ye=Ct("image_title"),He=Ct("image_caption"),ke=Ct("image_list"),lt=Ct("a11y_advanced_options"),Je=Ct("automatic_uploads"),cn=$=>Ao($.options.get("images_upload_url")),Wt=$=>Lt($.options.get("images_upload_handler")),wn=($,se)=>Math.max(parseInt($,10),parseInt(se,10)),ot=$=>new Promise(se=>{const De=document.createElement("img"),at=vo=>{De.onload=De.onerror=null,De.parentNode&&De.parentNode.removeChild(De),se(vo)};De.onload=()=>{const vo=wn(De.width,De.clientWidth),Ps=wn(De.height,De.clientHeight),Os={width:vo,height:Ps};at(Promise.resolve(Os))},De.onerror=()=>{at(Promise.reject(`Failed to get image dimensions for: ${$}`))};const pt=De.style;pt.visibility="hidden",pt.position="fixed",pt.bottom=pt.left="0px",pt.width=pt.height="auto",document.body.appendChild(De),De.src=$}),mt=$=>($&&($=$.replace(/px$/,"")),$),Xt=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),sn=$=>{if($.margin){const se=String($.margin).split(" ");switch(se.length){case 1:$["margin-top"]=$["margin-top"]||se[0],$["margin-right"]=$["margin-right"]||se[0],$["margin-bottom"]=$["margin-bottom"]||se[0],$["margin-left"]=$["margin-left"]||se[0];break;case 2:$["margin-top"]=$["margin-top"]||se[0],$["margin-right"]=$["margin-right"]||se[1],$["margin-bottom"]=$["margin-bottom"]||se[0],$["margin-left"]=$["margin-left"]||se[1];break;case 3:$["margin-top"]=$["margin-top"]||se[0],$["margin-right"]=$["margin-right"]||se[1],$["margin-bottom"]=$["margin-bottom"]||se[2],$["margin-left"]=$["margin-left"]||se[1];break;case 4:$["margin-top"]=$["margin-top"]||se[0],$["margin-right"]=$["margin-right"]||se[1],$["margin-bottom"]=$["margin-bottom"]||se[2],$["margin-left"]=$["margin-left"]||se[3]}delete $.margin}return $},lo=($,se)=>{const De=ke($);Te(De)?fetch(De).then(at=>{at.ok&&at.json().then(se)}):gt(De)?De(se):se(De)},po=($,se,De)=>{const at=()=>{De.onload=De.onerror=null,$.selection&&($.selection.select(De),$.nodeChanged())};De.onload=()=>{!se.width&&!se.height&&tt($)&&$.dom.setAttribs(De,{width:String(De.clientWidth),height:String(De.clientHeight)}),at()},De.onerror=at},ro=$=>new Promise((se,De)=>{const at=new FileReader;at.onload=()=>{se(at.result)},at.onerror=()=>{var pt;De((pt=at.error)===null||pt===void 0?void 0:pt.message)},at.readAsDataURL($)}),Ds=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),to=($,se)=>{const De=$.options.get;return V.isDomSafe(se,"img",{allow_html_data_urls:De("allow_html_data_urls"),allow_script_urls:De("allow_script_urls"),allow_svg_data_urls:De("allow_svg_data_urls")})},Qo=dt.DOM,ss=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?mt($.style.marginLeft):"",Lo=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?mt($.style.marginTop):"",ir=$=>$.style.borderWidth?mt($.style.borderWidth):"",xo=($,se)=>{var De;return $.hasAttribute(se)&&(De=$.getAttribute(se))!==null&&De!==void 0?De:""},zr=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",on=($,se,De)=>{De===""||De===null?$.removeAttribute(se):$.setAttribute(se,De)},Zo=$=>{const se=Qo.create("figure",{class:"image"});Qo.insertAfter(se,$),se.appendChild($),se.appendChild(Qo.create("figcaption",{contentEditable:"true"},"Caption")),se.contentEditable="false"},gr=$=>{const se=$.parentNode;Lt(se)&&(Qo.insertAfter($,se),Qo.remove(se))},tr=$=>{zr($)?gr($):Zo($)},Rr=($,se)=>{const De=$.getAttribute("style"),at=se(De!==null?De:"");at.length>0?($.setAttribute("style",at),$.setAttribute("data-mce-style",at)):$.removeAttribute("style")},_r=($,se)=>(De,at,pt)=>{const vo=De.style;vo[at]?(vo[at]=Xt(pt),Rr(De,se)):on(De,at,pt)},ys=($,se)=>$.style[se]?mt($.style[se]):xo($,se),ea=($,se)=>{const De=Xt(se);$.style.marginLeft=De,$.style.marginRight=De},Gr=($,se)=>{const De=Xt(se);$.style.marginTop=De,$.style.marginBottom=De},bs=($,se)=>{const De=Xt(se);$.style.borderWidth=De},Qn=($,se)=>{$.style.borderStyle=se},Ns=$=>{var se;return(se=$.style.borderStyle)!==null&&se!==void 0?se:""},Ke=$=>Lt($)&&$.nodeName==="FIGURE",xt=$=>$.nodeName==="IMG",xn=$=>Qo.getAttrib($,"alt").length===0&&Qo.getAttrib($,"role")==="presentation",Bn=$=>xn($)?"":xo($,"alt"),Ho=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),as=($,se)=>{var De;const at=document.createElement("img");return on(at,"style",se.style),(ss(at)||se.hspace!=="")&&ea(at,se.hspace),(Lo(at)||se.vspace!=="")&&Gr(at,se.vspace),(ir(at)||se.border!=="")&&bs(at,se.border),(Ns(at)||se.borderStyle!=="")&&Qn(at,se.borderStyle),$((De=at.getAttribute("style"))!==null&&De!==void 0?De:"")},pr=($,se)=>{const De=document.createElement("img");if(Ft($,{...se,caption:!1},De),Ae(De,se.alt,se.isDecorative),se.caption){const at=Qo.create("figure",{class:"image"});return at.appendChild(De),at.appendChild(Qo.create("figcaption",{contentEditable:"true"},"Caption")),at.contentEditable="false",at}else return De},Sr=($,se)=>({src:xo(se,"src"),alt:Bn(se),title:xo(se,"title"),width:ys(se,"width"),height:ys(se,"height"),class:xo(se,"class"),style:$(xo(se,"style")),caption:zr(se),hspace:ss(se),vspace:Lo(se),border:ir(se),borderStyle:Ns(se),isDecorative:xn(se)}),lr=($,se,De,at,pt)=>{De[at]!==se[at]&&pt($,at,String(De[at]))},Ae=($,se,De)=>{if(De){Qo.setAttrib($,"role","presentation");const at=Ne.fromDom($);Rt(at,"alt","")}else{if(yt(se)){const at=Ne.fromDom($);It(at,"alt")}else{const at=Ne.fromDom($);Rt(at,"alt",se)}Qo.getAttrib($,"role")==="presentation"&&Qo.setAttrib($,"role","")}},Ce=($,se,De)=>{(De.alt!==se.alt||De.isDecorative!==se.isDecorative)&&Ae($,De.alt,De.isDecorative)},ht=($,se)=>(De,at,pt)=>{$(De,pt),Rr(De,se)},Ft=($,se,De)=>{const at=Sr($,De);lr(De,at,se,"caption",(pt,vo,Ps)=>tr(pt)),lr(De,at,se,"src",on),lr(De,at,se,"title",on),lr(De,at,se,"width",_r("width",$)),lr(De,at,se,"height",_r("height",$)),lr(De,at,se,"class",on),lr(De,at,se,"style",ht((pt,vo)=>on(pt,"style",vo),$)),lr(De,at,se,"hspace",ht(ea,$)),lr(De,at,se,"vspace",ht(Gr,$)),lr(De,at,se,"border",ht(bs,$)),lr(De,at,se,"borderStyle",ht(Qn,$)),Ce(De,at,se)},Yn=($,se)=>{const De=$.dom.styles.parse(se),at=sn(De),pt=$.dom.styles.parse($.dom.styles.serialize(at));return $.dom.styles.serialize(pt)},Co=$=>{const se=$.selection.getNode(),De=$.dom.getParent(se,"figure.image");return De?$.dom.select("img",De)[0]:se&&(se.nodeName!=="IMG"||Ds(se))?null:se},Bo=($,se)=>{var De;const at=$.dom,pt=gn($.schema.getTextBlockElements(),(Ps,Os)=>!$.schema.isValidChild(Os,"figure")),vo=at.getParent(se.parentNode,Ps=>we(pt,Ps.nodeName),$.getBody());return vo&&(De=at.split(vo,se))!==null&&De!==void 0?De:se},ur=$=>{const se=Co($);return se?Sr(De=>Yn($,De),se):Ho()},Le=($,se)=>{const De=pr(pt=>Yn($,pt),se);$.dom.setAttrib(De,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(De.outerHTML);const at=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(at,"data-mce-id",null),Ke(at)){const pt=Bo($,at);$.selection.select(pt)}else $.selection.select(at)},Fo=($,se)=>{$.dom.setAttrib(se,"src",se.getAttribute("src"))},Re=($,se)=>{if(se){const De=$.dom.is(se.parentNode,"figure.image")?se.parentNode:se;$.dom.remove(De),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},Be=($,se)=>{const De=Co($);if(De)if(Ft(at=>Yn($,at),se,De),Fo($,De),Ke(De.parentNode)){const at=De.parentNode;Bo($,at),$.selection.select(De.parentNode)}else $.selection.select(De),po($,se,De)},qt=($,se)=>{const De=se.src;return{...se,src:to($,De)?De:""}},tn=($,se)=>{const De=Co($);if(De){const pt={...Sr(Ps=>Yn($,Ps),De),...se},vo=qt($,pt);pt.src?Be($,vo):Re($,De)}else se.src&&Le($,{...Ho(),...se})},Gn=($=>(...se)=>{if(se.length===0)throw new Error("Can't merge zero objects");const De={};for(let at=0;at<se.length;at++){const pt=se[at];for(const vo in pt)rt(pt,vo)&&(De[vo]=$(De[vo],pt[vo]))}return De})(($,se)=>Xe($)&&Xe(se)?Gn($,se):se);var zn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),no=tinymce.util.Tools.resolve("tinymce.util.Tools");const bo=$=>Te($.value)?$.value:"",hs=$=>Te($.text)?$.text:Te($.title)?$.title:"",As=($,se)=>{const De=[];return no.each($,at=>{const pt=hs(at);if(at.menu!==void 0){const vo=As(at.menu,se);De.push({text:pt,items:vo})}else{const vo=se(at);De.push({text:pt,value:vo})}}),De},Ls=($=bo)=>se=>se?St.from(se).map(De=>As(De,$)):St.none(),wa=$=>Ls(bo)($),la=$=>rt($,"items"),fo=($,se)=>it($,De=>la(De)?fo(De.items,se):De.value===se?St.some(De):St.none()),ms={sanitizer:Ls,sanitize:wa,findEntry:($,se)=>$.bind(De=>fo(De,se))},ta={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Fr=$=>{const se=ms.sanitizer(nr=>$.convertURL(nr.value||nr.url||"","src")),De=new Promise(nr=>{lo($,ji=>{nr(se(ji).map(Qd=>Ve([[{text:"None",value:""}],Qd])))})}),at=ms.sanitize(le($)),pt=re($),vo=I($),Ps=cn($),Os=Wt($),Qt=ur($),Hs=L($),pa=ye($),gc=tt($),qo=He($),hc=lt($),qr=Je($),eu=St.some(G($)).filter(nr=>Te(nr)&&nr.length>0);return De.then(nr=>({image:Qt,imageList:nr,classList:at,hasAdvTab:pt,hasUploadTab:vo,hasUploadUrl:Ps,hasUploadHandler:Os,hasDescription:Hs,hasImageTitle:pa,hasDimensions:gc,hasImageCaption:qo,prependURL:eu,hasAccessibilityOptions:hc,automaticUploads:qr}))},dr=$=>{const se={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},De=$.imageList.map(pa=>({name:"images",type:"listbox",label:"Image list",items:pa})),at={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},pt={name:"title",type:"input",label:"Image title"},vo={name:"dimensions",type:"sizeinput"},Ps={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Os=$.classList.map(pa=>({name:"classes",type:"listbox",label:"Class",items:pa})),Qt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Hs=pa=>pa?{type:"grid",columns:2}:{type:"panel"};return Ve([[se],De.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Ps]:[],$.hasDescription?[at]:[],$.hasImageTitle?[pt]:[],$.hasDimensions?[vo]:[],[{...Hs($.classList.isSome()&&$.hasImageCaption),items:Ve([Os.toArray(),$.hasImageCaption?[Qt]:[]])}]])},ec={makeTab:$=>({title:"General",name:"general",items:dr($)}),makeItems:dr},Sa={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ha=$=>({prevImage:ms.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),Vr=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),pi=($,se)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&se?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),xa=($,se)=>/^(?:[a-zA-Z]+:)?\/\//.test(se)?St.none():$.prependURL.bind(De=>se.substring(0,De.length)!==De?St.some(De+se):St.none()),Fa=($,se)=>{const De=se.getData();xa($,De.src.value).each(at=>{se.setData({src:{value:at,meta:De.src.meta}})})},fc=($,se,De)=>{$.hasDescription&&Te(De.alt)&&(se.alt=De.alt),$.hasAccessibilityOptions&&(se.isDecorative=De.isDecorative||se.isDecorative||!1),$.hasImageTitle&&Te(De.title)&&(se.title=De.title),$.hasDimensions&&(Te(De.width)&&(se.dimensions.width=De.width),Te(De.height)&&(se.dimensions.height=De.height)),Te(De.class)&&ms.findEntry($.classList,De.class).each(at=>{se.classes=at.value}),$.hasImageCaption&&Tt(De.caption)&&(se.caption=De.caption),$.hasAdvTab&&(Te(De.style)&&(se.style=De.style),Te(De.vspace)&&(se.vspace=De.vspace),Te(De.border)&&(se.border=De.border),Te(De.hspace)&&(se.hspace=De.hspace),Te(De.borderstyle)&&(se.borderstyle=De.borderstyle))},tc=($,se)=>{const De=se.getData(),at=De.src.meta;if(at!==void 0){const pt=Gn({},De);fc($,pt,at),se.setData(pt)}},Wi=($,se,De,at)=>{const pt=at.getData(),vo=pt.src.value,Ps=pt.src.meta||{};!Ps.width&&!Ps.height&&se.hasDimensions&&(Ao(vo)?$.imageSize(vo).then(Os=>{De.open&&at.setData({dimensions:Os})}).catch(Os=>console.error(Os)):at.setData({dimensions:{width:"",height:""}}))},ni=($,se,De)=>{const at=De.getData(),pt=ms.findEntry($.imageList,at.src.value);se.prevImage=pt,De.setData({images:pt.map(vo=>vo.value).getOr("")})},Uc=($,se,De,at)=>{Fa(se,at),tc(se,at),Wi($,se,De,at),ni(se,De,at)},Na=($,se,De,at)=>{const pt=at.getData(),vo=ms.findEntry(se.imageList,pt.images);vo.each(Ps=>{pt.alt===""||De.prevImage.map(Qt=>Qt.text===pt.alt).getOr(!1)?Ps.value===""?at.setData({src:Ps,alt:De.prevAlt}):at.setData({src:Ps,alt:Ps.text}):at.setData({src:Ps})}),De.prevImage=vo,Uc($,se,De,at)},Nr=($,se,De,at)=>{const pt=at.getData();at.block("Uploading image"),T(pt.fileinput).fold(()=>{at.unblock()},vo=>{const Ps=URL.createObjectURL(vo),Os=()=>{at.unblock(),URL.revokeObjectURL(Ps)},Qt=Hs=>{at.setData({src:{value:Hs,meta:{}}}),at.showTab("general"),Uc($,se,De,at),at.focus("src")};ro(vo).then(Hs=>{const pa=$.createBlobCache(vo,Ps,Hs);se.automaticUploads?$.uploadImage(pa).then(gc=>{Qt(gc.url),Os()}).catch(gc=>{Os(),$.alertErr(gc)}):($.addToBlobCache(pa),Qt(pa.blobUri()),at.unblock())})})},Ei=($,se,De)=>(at,pt)=>{pt.name==="src"?Uc($,se,De,at):pt.name==="images"?Na($,se,De,at):pt.name==="alt"?De.prevAlt=at.getData().alt:pt.name==="fileinput"?Nr($,se,De,at):pt.name==="isDecorative"&&at.setEnabled("alt",!at.getData().isDecorative)},Zi=$=>()=>{$.open=!1},Ti=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:Ve([[ec.makeTab($)],$.hasAdvTab?[ta.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Sa.makeTab($)]:[]])}:{type:"panel",items:ec.makeItems($)},Ai=($,se,De)=>at=>{const pt=Gn(Vr(se.image),at.getData()),vo={...pt,style:as(De.normalizeCss,pi(pt,!1))};$.execCommand("mceUpdateImage",!1,pi(vo,se.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),at.close()},Ur=$=>se=>to($,se)?ot($.documentBaseURI.toAbsolute(se)).then(De=>({width:String(De.width),height:String(De.height)})):Promise.resolve({width:"",height:""}),Za=$=>(se,De,at)=>{var pt;return $.editorUpload.blobCache.create({blob:se,blobUri:De,name:(pt=se.name)===null||pt===void 0?void 0:pt.replace(/\.[^\.]+$/,""),filename:se.name,base64:at.split(",")[1]})},te=$=>se=>{$.editorUpload.blobCache.add(se)},Se=$=>se=>{$.windowManager.alert(se)},Ge=$=>se=>Yn($,se),Ht=$=>se=>$.dom.parseStyle(se),dn=$=>(se,De)=>$.dom.serializeStyle(se,De),$n=$=>se=>zn($).upload([se],!1).then(De=>{var at;return De.length===0?Promise.reject("Failed to upload image"):De[0].status===!1?Promise.reject((at=De[0].error)===null||at===void 0?void 0:at.message):De[0]}),es=$=>{const se={imageSize:Ur($),addToBlobCache:te($),createBlobCache:Za($),alertErr:Se($),normalizeCss:Ge($),parseStyle:Ht($),serializeStyle:dn($),uploadImage:$n($)};return{open:()=>{Fr($).then(at=>{const pt=ha(at);return{title:"Insert/Edit Image",size:"normal",body:Ti(at),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Vr(at.image),onSubmit:Ai($,at,se),onChange:Ei(se,at,pt),onClose:Zi(pt)}}).then($.windowManager.open)}}},Ws=$=>{$.addCommand("mceImage",es($).open),$.addCommand("mceUpdateImage",(se,De)=>{$.undoManager.transact(()=>tn($,De))})},ls=$=>{const se=$.attr("class");return Lt(se)&&/\bimage\b/.test(se)},q=$=>se=>{let De=se.length;const at=pt=>{pt.attr("contenteditable",$?"true":null)};for(;De--;){const pt=se[De];ls(pt)&&(pt.attr("contenteditable",$?"false":null),no.each(pt.getAll("figcaption"),at))}},xe=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",q(!0)),$.serializer.addNodeFilter("figure",q(!1))})},Ie=$=>se=>{const De=()=>{se.setEnabled($.selection.isEditable())};return $.on("NodeChange",De),De(),()=>{$.off("NodeChange",De)}},nn=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:es($).open,onSetup:se=>{se.setActive(Lt(Co($)));const De=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",se.setActive).unbind,at=Ie($)(se);return()=>{De(),at()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:es($).open,onSetup:Ie($)}),$.ui.registry.addContextMenu("image",{update:se=>$.selection.isEditable()&&(Ke(se)||xt(se)&&!Ds(se))?["image"]:[]})};var zo=()=>{h.add("image",$=>{jt($),xe($),nn($),Ws($)})};zo()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=(I=>G=>I===G)(null),N=I=>I,W=(I,G)=>{const le=I.length,L=new Array(le);for(let ye=0;ye<le;ye++){const He=I[ye];L[ye]=G(He,ye)}return L},de={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},Q={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Te=[new RegExp(de.aletter),new RegExp(de.midnumlet),new RegExp(de.midletter),new RegExp(de.midnum),new RegExp(de.numeric),new RegExp(de.cr),new RegExp(de.lf),new RegExp(de.newline),new RegExp(de.extend),new RegExp(de.format),new RegExp(de.katakana),new RegExp(de.extendnumlet),new RegExp("@")],ct="",Xe=new RegExp("^"+de.punctuation+"$"),wt=/^\s+$/,yt=Te,Tt=Q.OTHER,_t=I=>{let G=Tt;const le=yt.length;for(let L=0;L<le;++L){const ye=yt[L];if(ye&&ye.test(I)){G=L;break}}return G},Lt=I=>{const G={};return le=>{if(G[le])return G[le];{const L=I(le);return G[le]=L,L}}},gt=I=>{const G=Lt(_t);return W(I,G)},st=(I,G)=>{const le=I[G],L=I[G+1];if(G<0||G>I.length-1&&G!==0||le===Q.ALETTER&&L===Q.ALETTER)return!1;const ye=I[G+2];if(le===Q.ALETTER&&(L===Q.MIDLETTER||L===Q.MIDNUMLET||L===Q.AT)&&ye===Q.ALETTER)return!1;const He=I[G-1];return(le===Q.MIDLETTER||le===Q.MIDNUMLET||L===Q.AT)&&L===Q.ALETTER&&He===Q.ALETTER||(le===Q.NUMERIC||le===Q.ALETTER)&&(L===Q.NUMERIC||L===Q.ALETTER)||(le===Q.MIDNUM||le===Q.MIDNUMLET)&&L===Q.NUMERIC&&He===Q.NUMERIC||le===Q.NUMERIC&&(L===Q.MIDNUM||L===Q.MIDNUMLET)&&ye===Q.NUMERIC||(le===Q.EXTEND||le===Q.FORMAT)&&(L===Q.ALETTER||L===Q.NUMERIC||L===Q.KATAKANA||L===Q.EXTEND||L===Q.FORMAT)||(L===Q.EXTEND||L===Q.FORMAT&&(ye===Q.ALETTER||ye===Q.NUMERIC||ye===Q.KATAKANA||ye===Q.EXTEND||ye===Q.FORMAT))&&(le===Q.ALETTER||le===Q.NUMERIC||le===Q.KATAKANA||le===Q.EXTEND||le===Q.FORMAT)||le===Q.CR&&L===Q.LF?!1:le===Q.NEWLINE||le===Q.CR||le===Q.LF||L===Q.NEWLINE||L===Q.CR||L===Q.LF?!0:!(le===Q.KATAKANA&&L===Q.KATAKANA||L===Q.EXTENDNUMLET&&(le===Q.ALETTER||le===Q.NUMERIC||le===Q.KATAKANA||le===Q.EXTENDNUMLET)||le===Q.EXTENDNUMLET&&(L===Q.ALETTER||L===Q.NUMERIC||L===Q.KATAKANA)||le===Q.AT)},Qe=ct,ie=wt,St=Xe,Wn=I=>I==="http"||I==="https",vt=(I,G)=>{let le;for(le=G;le<I.length&&!ie.test(I[le]);le++);return le},J=(I,G)=>{const le=vt(I,G+1);return I.slice(G+1,le).join(Qe).substr(0,3)==="://"?le:G},Yt=(I,G,le,L)=>{const ye=[],He=[];let ke=[];for(let lt=0;lt<le.length;++lt)if(ke.push(I[lt]),st(le,lt)){const Je=G[lt];if((L.includeWhitespace||!ie.test(Je))&&(L.includePunctuation||!St.test(Je))){const cn=lt-ke.length+1,Wt=lt+1,wn=G.slice(cn,Wt).join(Qe);if(Wn(wn)){const ot=J(G,lt),mt=I.slice(Wt,ot);Array.prototype.push.apply(ke,mt),lt=ot}G[lt+1]==="."&&/^([a-zA-Z]\.)+$/.test(wn+".")?(ke.push(I[lt+1]),He.push({start:cn,end:Wt+1})):He.push({start:cn,end:Wt}),ye.push(ke)}ke=[]}return{words:ye,indices:He}},On=()=>({includeWhitespace:!1,includePunctuation:!1}),gn=(I,G,le)=>{le={...On(),...le};const L=W(I,G),ye=gt(L);return Yt(I,L,ye,le)},we=(I,G,le)=>gn(I,G,le).words,Ro=I=>I.replace(/\uFEFF/g,"");var Ve=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const je=(I,G)=>{const le=G.getBlockElements(),L=G.getVoidElements(),ye=cn=>le[cn.nodeName]||L[cn.nodeName],He=[];let ke="";const lt=new Ve(I,I);let Je;for(;Je=lt.next();)Je.nodeType===3?ke+=Ro(Je.data):ye(Je)&&ke.length&&(He.push(ke),ke="");return ke.length&&He.push(ke),He},T=I=>I.replace(/\u200B/g,""),it=I=>I.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ve=(I,G)=>{const le=T(je(I,G).join(`
`));return we(le.split(""),N).length},Rt=(I,G)=>{const le=je(I,G).join("");return it(le)},It=(I,G)=>{const le=je(I,G).join("").replace(/\s/g,"");return it(le)},_e=(I,G)=>()=>G(I.getBody(),I.schema),Dt=(I,G)=>()=>G(I.selection.getRng().cloneContents(),I.schema),An=I=>_e(I,ve),nt=I=>({body:{getWordCount:An(I),getCharacterCount:_e(I,Rt),getCharacterCountWithoutSpaces:_e(I,It)},selection:{getWordCount:Dt(I,ve),getCharacterCount:Dt(I,Rt),getCharacterCountWithoutSpaces:Dt(I,It)},getCount:An(I)}),rn=(I,G)=>{I.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(G.body.getWordCount()),String(G.selection.getWordCount())],["Characters (no spaces)",String(G.body.getCharacterCountWithoutSpaces()),String(G.selection.getCharacterCountWithoutSpaces())],["Characters",String(G.body.getCharacterCount()),String(G.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Ne=(I,G)=>{I.addCommand("mceWordCount",()=>rn(I,G))},dt=(I,G)=>{let le=null;return{cancel:()=>{D(le)||(clearTimeout(le),le=null)},throttle:(...He)=>{D(le)&&(le=setTimeout(()=>{le=null,I.apply(null,He)},G))}}};var V=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ao=(I,G)=>{I.dispatch("wordCountUpdate",{wordCount:{words:G.body.getWordCount(),characters:G.body.getCharacterCount(),charactersWithoutSpaces:G.body.getCharacterCountWithoutSpaces()}})},Ct=(I,G)=>{Ao(I,G)},jt=(I,G,le)=>{const L=dt(()=>Ct(I,G),le);I.on("init",()=>{Ct(I,G),V.setEditorTimeout(I,()=>{I.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",L.throttle)},0),I.on("remove",L.cancel)})},tt=I=>{const G=()=>I.execCommand("mceWordCount");I.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:G}),I.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:G})};var re=(I=300)=>{h.add("wordcount",G=>{const le=nt(G);return Ne(G,le),tt(G),jt(G,le,I),le})};re()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(te,Se,Ge)=>{var Ht;return Ge(te,Se.prototype)?!0:((Ht=te.constructor)===null||Ht===void 0?void 0:Ht.name)===Se.name},D=te=>{const Se=typeof te;return te===null?"null":Se==="object"&&Array.isArray(te)?"array":Se==="object"&&C(te,String,(Ge,Ht)=>Ht.isPrototypeOf(Ge))?"string":Se},N=te=>Se=>D(Se)===te,W=te=>Se=>typeof Se===te,Y=te=>Se=>te===Se,de=N("string"),Q=N("object"),Te=N("array"),ct=Y(null),Xe=W("boolean"),wt=te=>te==null,yt=te=>!wt(te),Tt=W("function"),_t=(te,Se)=>{if(Te(te)){for(let Ge=0,Ht=te.length;Ge<Ht;++Ge)if(!Se(te[Ge]))return!1;return!0}return!1},Lt=()=>{},gt=te=>()=>te,st=(te,Se)=>te===Se;class Qe{constructor(Se,Ge){this.tag=Se,this.value=Ge}static some(Se){return new Qe(!0,Se)}static none(){return Qe.singletonNone}fold(Se,Ge){return this.tag?Ge(this.value):Se()}isSome(){return this.tag}isNone(){return!this.tag}map(Se){return this.tag?Qe.some(Se(this.value)):Qe.none()}bind(Se){return this.tag?Se(this.value):Qe.none()}exists(Se){return this.tag&&Se(this.value)}forall(Se){return!this.tag||Se(this.value)}filter(Se){return!this.tag||Se(this.value)?this:Qe.none()}getOr(Se){return this.tag?this.value:Se}or(Se){return this.tag?this:Se}getOrThunk(Se){return this.tag?this.value:Se()}orThunk(Se){return this.tag?this:Se()}getOrDie(Se){if(this.tag)return this.value;throw new Error(Se??"Called getOrDie on None")}static from(Se){return yt(Se)?Qe.some(Se):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Se){this.tag&&Se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1);const ie=Array.prototype.indexOf,St=Array.prototype.push,Wn=(te,Se)=>ie.call(te,Se),vt=(te,Se)=>Wn(te,Se)>-1,J=(te,Se)=>{const Ge=te.length,Ht=new Array(Ge);for(let dn=0;dn<Ge;dn++){const $n=te[dn];Ht[dn]=Se($n,dn)}return Ht},Yt=(te,Se)=>{for(let Ge=0,Ht=te.length;Ge<Ht;Ge++){const dn=te[Ge];Se(dn,Ge)}},On=(te,Se,Ge)=>(Yt(te,(Ht,dn)=>{Ge=Se(Ge,Ht,dn)}),Ge),gn=te=>{const Se=[];for(let Ge=0,Ht=te.length;Ge<Ht;++Ge){if(!Te(te[Ge]))throw new Error("Arr.flatten item "+Ge+" was not an array, input: "+te);St.apply(Se,te[Ge])}return Se},rt=(te,Se)=>gn(J(te,Se)),we=(te,Se)=>{for(let Ge=0;Ge<te.length;Ge++){const Ht=Se(te[Ge],Ge);if(Ht.isSome())return Ht}return Qe.none()},Ro=(te,Se,Ge=st)=>te.exists(Ht=>Ge(Ht,Se)),Ve=te=>{const Se=[],Ge=Ht=>{Se.push(Ht)};for(let Ht=0;Ht<te.length;Ht++)te[Ht].each(Ge);return Se},je=(te,Se)=>te?Qe.some(Se):Qe.none(),T=te=>Se=>Se.options.get(te),it=te=>{const Se=te.options.register;Se("link_assume_external_targets",{processor:Ge=>{const Ht=de(Ge)||Xe(Ge);return Ht?Ge===!0?{value:1,valid:Ht}:Ge==="http"||Ge==="https"?{value:Ge,valid:Ht}:{value:0,valid:Ht}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Se("link_context_toolbar",{processor:"boolean",default:!1}),Se("link_list",{processor:Ge=>de(Ge)||Tt(Ge)||_t(Ge,Q)}),Se("link_default_target",{processor:"string"}),Se("link_default_protocol",{processor:"string",default:"https"}),Se("link_target_list",{processor:Ge=>Xe(Ge)||_t(Ge,Q),default:!0}),Se("link_rel_list",{processor:"object[]",default:[]}),Se("link_class_list",{processor:"object[]",default:[]}),Se("link_title",{processor:"boolean",default:!0}),Se("allow_unsafe_link_target",{processor:"boolean",default:!1}),Se("link_quicklink",{processor:"boolean",default:!1})},ve=T("link_assume_external_targets"),Rt=T("link_context_toolbar"),It=T("link_list"),_e=T("link_default_target"),Dt=T("link_default_protocol"),An=T("link_target_list"),nt=T("link_rel_list"),rn=T("link_class_list"),Ne=T("link_title"),dt=T("allow_unsafe_link_target"),V=T("link_quicklink"),Ao=Object.keys,Ct=Object.hasOwnProperty,jt=(te,Se)=>{const Ge=Ao(te);for(let Ht=0,dn=Ge.length;Ht<dn;Ht++){const $n=Ge[Ht],es=te[$n];Se(es,$n)}},tt=te=>(Se,Ge)=>{te[Ge]=Se},re=(te,Se,Ge,Ht)=>{jt(te,(dn,$n)=>{(Se(dn,$n)?Ge:Ht)(dn,$n)})},I=(te,Se)=>{const Ge={};return re(te,Se,tt(Ge),Lt),Ge},G=(te,Se)=>Ct.call(te,Se),le=(te,Se)=>G(te,Se)&&te[Se]!==void 0&&te[Se]!==null;var L=tinymce.util.Tools.resolve("tinymce.util.URI"),ye=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),He=tinymce.util.Tools.resolve("tinymce.util.Tools");const ke=te=>yt(te)&&te.nodeName.toLowerCase()==="a",lt=te=>ke(te)&&!!Wt(te),Je=(te,Se)=>{if(te.collapsed)return[];{const Ge=te.cloneContents(),Ht=Ge.firstChild,dn=new ye(Ht,Ge),$n=[];let es=Ht;do Se(es)&&$n.push(es);while(es=dn.next());return $n}},cn=te=>/^\w+:/i.test(te),Wt=te=>{var Se,Ge;return(Ge=(Se=te.getAttribute("data-mce-href"))!==null&&Se!==void 0?Se:te.getAttribute("href"))!==null&&Ge!==void 0?Ge:""},wn=(te,Se)=>{const Ge=["noopener"],Ht=te?te.split(/\s+/):[],dn=ls=>He.trim(ls.sort().join(" ")),$n=ls=>(ls=es(ls),ls.length>0?ls.concat(Ge):Ge),es=ls=>ls.filter(q=>He.inArray(Ge,q)===-1),Ws=Se?$n(Ht):es(Ht);return Ws.length>0?dn(Ws):""},ot=te=>te.replace(/\uFEFF/g,""),mt=(te,Se)=>(Se=Se||lo(te.selection.getRng())[0]||te.selection.getNode(),Qo(Se)?Qe.from(te.dom.select("a[href]",Se)[0]):Qe.from(te.dom.getParent(Se,"a[href]"))),Xt=(te,Se)=>mt(te,Se).isSome(),sn=(te,Se)=>{const Ge=Se.fold(()=>te.getContent({format:"text"}),Ht=>Ht.innerText||Ht.textContent||"");return ot(Ge)},lo=te=>Je(te,lt),po=te=>He.grep(te,lt),ro=te=>po(te).length>0,Ds=te=>lo(te).length>0,to=te=>{const Se=te.schema.getTextInlineElements(),Ge=$n=>$n.nodeType===1&&!ke($n)&&!G(Se,$n.nodeName.toLowerCase());if(mt(te).exists($n=>$n.hasAttribute("data-mce-block")))return!1;const dn=te.selection.getRng();return dn.collapsed?!0:Je(dn,Ge).length===0},Qo=te=>yt(te)&&te.nodeName==="FIGURE"&&/\bimage\b/i.test(te.className),ss=te=>On(["title","rel","class","target"],(Ge,Ht)=>(te[Ht].each(dn=>{Ge[Ht]=dn.length>0?dn:null}),Ge),{href:te.href}),Lo=(te,Se)=>(Se==="http"||Se==="https")&&!cn(te)?Se+"://"+te:te,ir=(te,Se)=>{const Ge={...Se};if(nt(te).length===0&&!dt(te)){const Ht=wn(Ge.rel,Ge.target==="_blank");Ge.rel=Ht||null}return Qe.from(Ge.target).isNone()&&An(te)===!1&&(Ge.target=_e(te)),Ge.href=Lo(Ge.href,ve(te)),Ge},xo=(te,Se,Ge,Ht)=>{Ge.each(dn=>{G(Se,"innerText")?Se.innerText=dn:Se.textContent=dn}),te.dom.setAttribs(Se,Ht),te.selection.select(Se)},zr=(te,Se,Ge,Ht)=>{const dn=te.dom;Qo(Se)?Gr(dn,Se,Ht):Ge.fold(()=>{te.execCommand("mceInsertLink",!1,Ht)},$n=>{te.insertContent(dn.createHTML("a",Ht,dn.encode($n)))})},on=(te,Se,Ge)=>{const Ht=te.selection.getNode(),dn=mt(te,Ht),$n=ir(te,ss(Ge));te.undoManager.transact(()=>{Ge.href===Se.href&&Se.attach(),dn.fold(()=>{zr(te,Ht,Ge.text,$n)},es=>{te.focus(),xo(te,es,Ge.text,$n)})})},Zo=te=>{const Se=te.dom,Ge=te.selection,Ht=Ge.getBookmark(),dn=Ge.getRng().cloneRange(),$n=Se.getParent(dn.startContainer,"a[href]",te.getBody()),es=Se.getParent(dn.endContainer,"a[href]",te.getBody());$n&&dn.setStartBefore($n),es&&dn.setEndAfter(es),Ge.setRng(dn),te.execCommand("unlink"),Ge.moveToBookmark(Ht)},gr=te=>{te.undoManager.transact(()=>{const Se=te.selection.getNode();Qo(Se)?ea(te,Se):Zo(te),te.focus()})},tr=te=>{const{class:Se,href:Ge,rel:Ht,target:dn,text:$n,title:es}=te;return I({class:Se.getOrNull(),href:Ge,rel:Ht.getOrNull(),target:dn.getOrNull(),text:$n.getOrNull(),title:es.getOrNull()},(Ws,ls)=>ct(Ws)===!1)},Rr=(te,Se)=>{const Ge=te.options.get,Ht={allow_html_data_urls:Ge("allow_html_data_urls"),allow_script_urls:Ge("allow_script_urls"),allow_svg_data_urls:Ge("allow_svg_data_urls")},dn=Se.href;return{...Se,href:L.isDomSafe(dn,"a",Ht)?dn:""}},_r=(te,Se,Ge)=>{const Ht=Rr(te,Ge);te.hasPlugin("rtc",!0)?te.execCommand("createlink",!1,tr(Ht)):on(te,Se,Ht)},ys=te=>{te.hasPlugin("rtc",!0)?te.execCommand("unlink"):gr(te)},ea=(te,Se)=>{var Ge;const Ht=te.dom.select("img",Se)[0];if(Ht){const dn=te.dom.getParents(Ht,"a[href]",Se)[0];dn&&((Ge=dn.parentNode)===null||Ge===void 0||Ge.insertBefore(Ht,dn),te.dom.remove(dn))}},Gr=(te,Se,Ge)=>{var Ht;const dn=te.select("img",Se)[0];if(dn){const $n=te.create("a",Ge);(Ht=dn.parentNode)===null||Ht===void 0||Ht.insertBefore($n,dn),$n.appendChild(dn)}},bs=te=>de(te.value)?te.value:"",Qn=te=>de(te.text)?te.text:de(te.title)?te.title:"",Ns=(te,Se)=>{const Ge=[];return He.each(te,Ht=>{const dn=Qn(Ht);if(Ht.menu!==void 0){const $n=Ns(Ht.menu,Se);Ge.push({text:dn,items:$n})}else{const $n=Se(Ht);Ge.push({text:dn,value:$n})}}),Ge},Ke=(te=bs)=>Se=>Qe.from(Se).map(Ge=>Ns(Ge,te)),Bn={sanitize:te=>Ke(bs)(te),sanitizeWith:Ke,createUi:(te,Se)=>Ge=>({name:te,type:"listbox",label:Se,items:Ge}),getValue:bs},Ho=te=>le(te,"items"),as=(te,Se)=>we(Se,Ge=>Ho(Ge)?as(te,Ge.items):je(Ge.value===te,Ge)),pr=(te,Se,Ge,Ht)=>{const dn=Ht[Se],$n=te.length>0;return dn!==void 0?as(dn,Ge).map(es=>({url:{value:es.value,meta:{text:$n?te:es.text,attach:Lt}},text:$n?te:es.text})):Qe.none()},Sr=(te,Se)=>Se==="link"?te.link:Se==="anchor"?te.anchor:Qe.none(),Ae={init:(te,Se)=>{const Ge={text:te.text,title:te.title},Ht=ls=>{var q;return je(Ge.title.length<=0,Qe.from((q=ls.meta)===null||q===void 0?void 0:q.title).getOr(""))},dn=ls=>{var q;return je(Ge.text.length<=0,Qe.from((q=ls.meta)===null||q===void 0?void 0:q.text).getOr(ls.value))},$n=ls=>{const q=dn(ls.url),xe=Ht(ls.url);return q.isSome()||xe.isSome()?Qe.some({...q.map(Ie=>({text:Ie})).getOr({}),...xe.map(Ie=>({title:Ie})).getOr({})}):Qe.none()},es=(ls,q)=>{const xe=Sr(Se,q).getOr([]);return pr(Ge.text,q,xe,ls)};return{onChange:(ls,q)=>{const xe=q.name;return xe==="url"?$n(ls()):vt(["anchor","link"],xe)?es(ls(),xe):((xe==="text"||xe==="title")&&(Ge[xe]=ls()[xe]),Qe.none())}}},getDelta:pr};var Ce=tinymce.util.Tools.resolve("tinymce.util.Delay");const ht=(te,Se,Ge)=>{const Ht=te.selection.getRng();Ce.setEditorTimeout(te,()=>{te.windowManager.confirm(Se,dn=>{te.selection.setRng(Ht),Ge(dn)})})},Ft=te=>{const Se=te.href;return Se.indexOf("@")>0&&Se.indexOf("/")===-1&&Se.indexOf("mailto:")===-1?Qe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ht=>({...Ht,href:"mailto:"+Se})}):Qe.none()},Yn=(te,Se)=>Ge=>{const Ht=Ge.href;return te===1&&!cn(Ht)||te===0&&/^\s*www(\.|\d\.)/i.test(Ht)?Qe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Se}:// prefix?`,preprocess:$n=>({...$n,href:Se+"://"+Ht})}):Qe.none()},Bo={preprocess:(te,Se)=>we([Ft,Yn(ve(te),Dt(te))],Ge=>Ge(Se)).fold(()=>Promise.resolve(Se),Ge=>new Promise(Ht=>{ht(te,Ge.message,dn=>{Ht(dn?Ge.preprocess(Se):Se)})}))},Le={getAnchors:te=>{const Se=te.dom.select("a:not([href])"),Ge=rt(Se,Ht=>{const dn=Ht.name||Ht.id;return dn?[{text:dn,value:"#"+dn}]:[]});return Ge.length>0?Qe.some([{text:"None",value:""}].concat(Ge)):Qe.none()}},Re={getClasses:te=>{const Se=rn(te);return Se.length>0?Bn.sanitize(Se):Qe.none()}},Be=te=>{try{return Qe.some(JSON.parse(te))}catch{return Qe.none()}},tn={getLinks:te=>{const Se=Ht=>te.convertURL(Ht.value||Ht.url||"","href"),Ge=It(te);return new Promise(Ht=>{de(Ge)?fetch(Ge).then(dn=>dn.ok?dn.text().then(Be):Promise.reject()).then(Ht,()=>Ht(Qe.none())):Tt(Ge)?Ge(dn=>Ht(Qe.some(dn))):Ht(Qe.from(Ge))}).then(Ht=>Ht.bind(Bn.sanitizeWith(Se)).map(dn=>dn.length>0?[{text:"None",value:""}].concat(dn):dn))}},Zn={getRels:(te,Se)=>{const Ge=nt(te);if(Ge.length>0){const Ht=Ro(Se,"_blank"),dn=dt(te)===!1,$n=Ws=>wn(Bn.getValue(Ws),Ht);return(dn?Bn.sanitizeWith($n):Bn.sanitize)(Ge)}return Qe.none()}},Gn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],no={getTargets:te=>{const Se=An(te);return Te(Se)?Bn.sanitize(Se).orThunk(()=>Qe.some(Gn)):Se===!1?Qe.none():Qe.some(Gn)}},bo=(te,Se,Ge)=>{const Ht=te.getAttrib(Se,Ge);return Ht!==null&&Ht.length>0?Qe.some(Ht):Qe.none()},hs=(te,Se)=>{const Ge=te.dom,dn=to(te)?Qe.some(sn(te.selection,Se)):Qe.none(),$n=Se.bind(xe=>Qe.from(Ge.getAttrib(xe,"href"))),es=Se.bind(xe=>Qe.from(Ge.getAttrib(xe,"target"))),Ws=Se.bind(xe=>bo(Ge,xe,"rel")),ls=Se.bind(xe=>bo(Ge,xe,"class")),q=Se.bind(xe=>bo(Ge,xe,"title"));return{url:$n,text:dn,title:q,target:es,rel:Ws,linkClass:ls}},Ls={collect:(te,Se)=>tn.getLinks(te).then(Ge=>{const Ht=hs(te,Se);return{anchor:Ht,catalogs:{targets:no.getTargets(te),rels:Zn.getRels(te,Ht.target),classes:Re.getClasses(te),anchor:Le.getAnchors(te),link:Ge},optNode:Se,flags:{titleEnabled:Ne(te)}}})},wa=(te,Se)=>Ge=>{const Ht=Ge.getData();if(!Ht.url.value){ys(te),Ge.close();return}const dn=Ws=>Qe.from(Ht[Ws]).filter(ls=>!Ro(Se.anchor[Ws],ls)),$n={href:Ht.url.value,text:dn("text"),target:dn("target"),rel:dn("rel"),class:dn("linkClass"),title:dn("title")},es={href:Ht.url.value,attach:Ht.url.meta!==void 0&&Ht.url.meta.attach?Ht.url.meta.attach:Lt};Bo.preprocess(te,$n).then(Ws=>{_r(te,es,Ws)}),Ge.close()},la=te=>{const Se=mt(te);return Ls.collect(te,Se)},fo=(te,Se)=>{const Ge=te.anchor,Ht=Ge.url.getOr("");return{url:{value:Ht,meta:{original:{value:Ht}}},text:Ge.text.getOr(""),title:Ge.title.getOr(""),anchor:Ht,link:Ht,rel:Ge.rel.getOr(""),target:Ge.target.or(Se).getOr(""),linkClass:Ge.linkClass.getOr("")}},is=(te,Se,Ge)=>{const Ht=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],dn=te.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),$n=te.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],es=Qe.from(_e(Ge)),Ws=fo(te,es),ls=te.catalogs,q=Ae.init(Ws,ls);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:gn([Ht,dn,$n,Ve([ls.anchor.map(Bn.createUi("anchor","Anchors")),ls.rels.map(Bn.createUi("rel","Rel")),ls.targets.map(Bn.createUi("target","Open link in...")),ls.link.map(Bn.createUi("link","Link list")),ls.classes.map(Bn.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ws,onChange:(Ie,{name:nn})=>{q.onChange(Ie.getData,{name:nn}).each(zo=>{Ie.setData(zo)})},onSubmit:Se}},ms=te=>{la(te).then(Ge=>{const Ht=wa(te,Ge);return is(Ge,Ht,te)}).then(Ge=>{te.windowManager.open(Ge)})},aa=te=>{te.addCommand("mceLink",(Se,Ge)=>{(Ge==null?void 0:Ge.dialog)===!0||!V(te)?ms(te):te.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ta=te=>{te.addShortcut("Meta+K","",()=>{te.execCommand("mceLink")})},Fr=te=>{let Se=te;return{get:()=>Se,set:dn=>{Se=dn}}},dr=te=>{const Se=Fr(Qe.none()),Ge=()=>Se.get().each(te);return{clear:()=>{Ge(),Se.set(Qe.none())},isSet:()=>Se.get().isSome(),get:()=>Se.get(),set:Ws=>{Ge(),Se.set(Qe.some(Ws))}}},_l=()=>{const te=dr(Lt);return{...te,on:Ge=>te.get().each(Ge)}};var ec=tinymce.util.Tools.resolve("tinymce.util.VK");const ks=(te,Se)=>{document.body.appendChild(te),te.dispatchEvent(Se),document.body.removeChild(te)},Sa=te=>{const Se=document.createElement("a");Se.target="_blank",Se.href=te,Se.rel="noreferrer noopener";const Ge=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Ge),ks(Se,Ge)},ha=te=>te.altKey===!0&&te.shiftKey===!1&&te.ctrlKey===!1&&te.metaKey===!1,Vr=(te,Se)=>{if(Se){const Ge=Wt(Se);if(/^#/.test(Ge)){const Ht=te.dom.select(Ge);Ht.length&&te.selection.scrollIntoView(Ht[0],!0)}else Sa(Se.href)}},pi=te=>{const Se=te.selection.getRng(),Ge=Se.startContainer;return lt(Ge)&&Se.startContainer===Se.endContainer&&te.dom.select("img",Ge).length===1},xa=(te,Se)=>{const Ge=po(te.dom.getParents(Se));return je(Ge.length===1,Ge[0])},Fa=te=>{const Se=lo(te.selection.getRng());return je(Se.length>0,Se[0]).or(xa(te,te.selection.getNode()))},fc=te=>te.selection.isCollapsed()||pi(te)?xa(te,te.selection.getStart()):Fa(te),tc=te=>{const Se=_l(),Ge=()=>Se.get().or(fc(te)),Ht=()=>Ge().each(dn=>Vr(te,dn));return te.on("contextmenu",dn=>{xa(te,dn.target).each(Se.set)}),te.on("SelectionChange",()=>{Se.isSet()||fc(te).each(Se.set)}),te.on("click",dn=>{Se.clear();const $n=po(te.dom.getParents(dn.target));$n.length===1&&ec.metaKeyPressed(dn)&&(dn.preventDefault(),Vr(te,$n[0]))}),te.on("keydown",dn=>{Se.clear(),!dn.isDefaultPrevented()&&dn.keyCode===13&&ha(dn)&&Ge().each($n=>{dn.preventDefault(),Vr(te,$n)})}),{gotoSelectedLink:Ht}},Wi=te=>()=>{te.execCommand("mceLink",!1,{dialog:!0})},ni=(te,Se)=>(te.on("NodeChange",Se),()=>te.off("NodeChange",Se)),Uc=te=>Se=>{const Ge=()=>{Se.setActive(!te.mode.isReadOnly()&&Xt(te,te.selection.getNode())),Se.setEnabled(te.selection.isEditable())};return Ge(),ni(te,Ge)},Na=te=>Se=>{const Ge=()=>{Se.setEnabled(te.selection.isEditable())};return Ge(),ni(te,Ge)},Nr=te=>Se=>{const Ge=$n=>ro($n)||Ds(te.selection.getRng()),Ht=te.dom.getParents(te.selection.getStart()),dn=$n=>{Se.setEnabled(Ge($n)&&te.selection.isEditable())};return dn(Ht),ni(te,$n=>dn($n.parents))},Ei=(te,Se)=>{te.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Wi(te),onSetup:Uc(te)}),te.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Se.gotoSelectedLink,onSetup:Nr(te)}),te.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ys(te),onSetup:Nr(te)})},Zi=(te,Se)=>{te.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Se.gotoSelectedLink,onSetup:Nr(te)}),te.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Wi(te),onSetup:Na(te)}),te.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ys(te),onSetup:Nr(te)})},Ti=te=>{const Se="link unlink openlink",Ge="link";te.ui.registry.addContextMenu("link",{update:Ht=>te.dom.isEditable(Ht)?ro(te.dom.getParents(Ht,"a"))?Se:Ge:""})},Ai=(te,Se)=>{const Ge=$n=>{$n.selection.collapse(!1)},Ht=$n=>{const es=te.selection.getNode();return $n.setEnabled(Xt(te,es)),Lt},dn=$n=>{const es=mt(te),Ws=to(te);if(es.isNone()&&Ws){const ls=sn(te.selection,es);return je(ls.length===0,$n)}else return Qe.none()};te.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Uc(te)},label:"Link",predicate:$n=>Rt(te)&&Xt(te,$n),initValue:()=>mt(te).fold(gt(""),Wt),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:$n=>{const es=te.selection.getNode();return $n.setActive(Xt(te,es)),Uc(te)($n)},onAction:$n=>{const es=$n.getValue(),Ws=dn(es);_r(te,{href:es,attach:Lt},{href:es,text:Ws,title:Qe.none(),rel:Qe.none(),target:Qe.from(_e(te)),class:Qe.none()}),Ge(te),$n.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ht,onAction:$n=>{ys(te),$n.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ht,onAction:$n=>{Se.gotoSelectedLink(),$n.hide()}}]})},Ur=te=>{const Se=tc(te);Ei(te,Se),Zi(te,Se),Ti(te),Ai(te,Se)};var Za=()=>{h.add("link",te=>{it(te),aa(te),Ur(te),ta(te)})};Za()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(Q,Te)=>{Q.focus(),Q.undoManager.transact(()=>{Q.setContent(Te)}),Q.selection.setCursorLocation(),Q.nodeChanged()},D=Q=>Q.getContent({source_view:!0}),N=Q=>{const Te=D(Q);Q.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Te},onSubmit:ct=>{C(Q,ct.getData().code),ct.close()}})},W=Q=>{Q.addCommand("mceCodeEditor",()=>{N(Q)})},Y=Q=>{const Te=()=>Q.execCommand("mceCodeEditor");Q.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Te}),Q.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Te})};var de=()=>{h.add("code",Q=>(W(Q),Y(Q),{}))};de()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(Ct,jt,tt)=>{var re;return tt(Ct,jt.prototype)?!0:((re=Ct.constructor)===null||re===void 0?void 0:re.name)===jt.name},D=Ct=>{const jt=typeof Ct;return Ct===null?"null":jt==="object"&&Array.isArray(Ct)?"array":jt==="object"&&C(Ct,String,(tt,re)=>re.isPrototypeOf(tt))?"string":jt},N=Ct=>jt=>D(jt)===Ct,W=Ct=>jt=>typeof jt===Ct,Y=N("string"),de=N("object"),Q=N("array"),Te=W("function");var ct=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xe=tinymce.util.Tools.resolve("tinymce.EditorManager"),wt=tinymce.util.Tools.resolve("tinymce.Env"),yt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Tt=Ct=>jt=>jt.options.get(Ct),_t=Ct=>{const jt=Ct.options.register,tt=re=>Y(re)||Te(re)||de(re);jt("importcss_merge_classes",{processor:"boolean",default:!0}),jt("importcss_exclusive",{processor:"boolean",default:!0}),jt("importcss_selector_converter",{processor:"function"}),jt("importcss_selector_filter",{processor:tt}),jt("importcss_file_filter",{processor:tt}),jt("importcss_groups",{processor:"object[]"}),jt("importcss_append",{processor:"boolean",default:!1})},Lt=Tt("importcss_merge_classes"),gt=Tt("importcss_exclusive"),st=Tt("importcss_selector_converter"),Qe=Tt("importcss_selector_filter"),ie=Tt("importcss_groups"),St=Tt("importcss_append"),Wn=Tt("importcss_file_filter"),vt=Tt("skin"),J=Tt("skin_url"),Yt=Array.prototype.push,On=(Ct,jt)=>{const tt=Ct.length,re=new Array(tt);for(let I=0;I<tt;I++){const G=Ct[I];re[I]=jt(G,I)}return re},gn=Ct=>{const jt=[];for(let tt=0,re=Ct.length;tt<re;++tt){if(!Q(Ct[tt]))throw new Error("Arr.flatten item "+tt+" was not an array, input: "+Ct);Yt.apply(jt,Ct[tt])}return jt},rt=(Ct,jt)=>gn(On(Ct,jt)),we=()=>{const Ct=[],jt=[],tt={};return{addItemToGroup:(le,L)=>{tt[le]?tt[le].push(L):(jt.push(le),tt[le]=[L])},addItem:le=>{Ct.push(le)},toFormats:()=>rt(jt,L=>{const ye=tt[L];return ye.length===0?[]:[{title:L,items:ye}]}).concat(Ct)}},Ro=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,Ve=Ct=>{const jt=wt.cacheSuffix;return Y(Ct)&&(Ct=Ct.replace("?"+jt,"").replace("&"+jt,"")),Ct},je=(Ct,jt)=>{const tt=vt(Ct);if(tt){const re=J(Ct),I=re?Ct.documentBaseURI.toAbsolute(re):Xe.baseURL+"/skins/ui/"+tt,G=Xe.baseURL+"/skins/content/",le=Ct.editorManager.suffix;return jt===I+"/content"+(Ct.inline?".inline":"")+`${le}.css`||jt.indexOf(G)!==-1}return!1},T=Ct=>Y(Ct)?jt=>jt.indexOf(Ct)!==-1:Ct instanceof RegExp?jt=>Ct.test(jt):Ct,it=Ct=>Ct.styleSheet,ve=Ct=>Ct.selectorText,Rt=(Ct,jt,tt)=>{const re=[],I={},G=(le,L)=>{let ye=le.href,He;if(ye=Ve(ye),!(!ye||tt&&!tt(ye,L)||je(Ct,ye))){yt.each(le.imports,ke=>{G(ke,!0)});try{He=le.cssRules||le.rules}catch{}yt.each(He,ke=>{it(ke)&&ke.styleSheet?G(ke.styleSheet,!0):ve(ke)&&yt.each(ke.selectorText.split(","),lt=>{re.push(yt.trim(lt))})})}};yt.each(Ct.contentCSS,le=>{I[le]=!0}),tt||(tt=(le,L)=>L||I[le]);try{yt.each(jt.styleSheets,le=>{G(le)})}catch{}return re},It=(Ct,jt)=>{let tt={};const re=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(jt);if(!re)return;const I=re[1],G=re[2].substr(1).split(".").join(" "),le=yt.makeMap("a,img");return re[1]?(tt={title:jt},Ct.schema.getTextBlockElements()[I]?tt.block=I:Ct.schema.getBlockElements()[I]||le[I.toLowerCase()]?tt.selector=I:tt.inline=I):re[2]&&(tt={inline:"span",title:jt.substr(1),classes:G}),Lt(Ct)?tt.classes=G:tt.attributes={class:G},tt},_e=(Ct,jt)=>yt.grep(Ct,tt=>!tt.filter||tt.filter(jt)),Dt=Ct=>yt.map(Ct,jt=>yt.extend({},jt,{original:jt,selectors:{},filter:T(jt.filter)})),An=(Ct,jt)=>jt===null||gt(Ct),nt=(Ct,jt,tt,re)=>!(An(Ct,tt)?jt in re:jt in tt.selectors),rn=(Ct,jt,tt,re)=>{An(Ct,tt)?re[jt]=!0:tt.selectors[jt]=!0},Ne=(Ct,jt,tt,re)=>{let I;const G=st(Ct);return re&&re.selector_converter?I=re.selector_converter:G?I=G:I=()=>It(Ct,tt),I.call(jt,tt,re)},dt=Ct=>{Ct.on("init",()=>{const jt=we(),tt={},re=T(Qe(Ct)),I=Dt(ie(Ct)),G=(L,ye)=>{if(nt(Ct,L,ye,tt)){rn(Ct,L,ye,tt);const He=Ne(Ct,Ct.plugins.importcss,L,ye);if(He){const ke=He.name||ct.DOM.uniqueId();return Ct.formatter.register(ke,He),{title:He.title,format:ke}}}return null};yt.each(Rt(Ct,Ct.getDoc(),T(Wn(Ct))),L=>{if(!Ro.test(L)&&(!re||re(L))){const ye=_e(I,L);if(ye.length>0)yt.each(ye,He=>{const ke=G(L,He);ke&&jt.addItemToGroup(He.title,ke)});else{const He=G(L,null);He&&jt.addItem(He)}}});const le=jt.toFormats();Ct.dispatch("addStyleModifications",{items:le,replace:!St(Ct)})})},V=Ct=>({convertSelectorToFormat:tt=>It(Ct,tt)});var Ao=()=>{h.add("importcss",Ct=>(_t(Ct),dt(Ct),V(Ct)))};Ao()})();(function(){const h=Re=>{let Be=Re;return{get:()=>Be,set:Dn=>{Be=Dn}}};var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=(Re,Be,qt)=>{var tn;return qt(Re,Be.prototype)?!0:((tn=Re.constructor)===null||tn===void 0?void 0:tn.name)===Be.name},N=Re=>{const Be=typeof Re;return Re===null?"null":Be==="object"&&Array.isArray(Re)?"array":Be==="object"&&D(Re,String,(qt,tn)=>tn.isPrototypeOf(qt))?"string":Be},W=Re=>Be=>N(Be)===Re,Y=Re=>Be=>typeof Be===Re,de=W("string"),Q=W("array"),Te=Y("boolean"),ct=Re=>Re==null,Xe=Re=>!ct(Re),wt=Y("number"),yt=()=>{},Tt=Re=>()=>Re,_t=Tt(!0),gt=Tt("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class st{constructor(Be,qt){this.tag=Be,this.value=qt}static some(Be){return new st(!0,Be)}static none(){return st.singletonNone}fold(Be,qt){return this.tag?qt(this.value):Be()}isSome(){return this.tag}isNone(){return!this.tag}map(Be){return this.tag?st.some(Be(this.value)):st.none()}bind(Be){return this.tag?Be(this.value):st.none()}exists(Be){return this.tag&&Be(this.value)}forall(Be){return!this.tag||Be(this.value)}filter(Be){return!this.tag||Be(this.value)?this:st.none()}getOr(Be){return this.tag?this.value:Be}or(Be){return this.tag?this:Be}getOrThunk(Be){return this.tag?this.value:Be()}orThunk(Be){return this.tag?this:Be()}getOrDie(Be){if(this.tag)return this.value;throw new Error(Be??"Called getOrDie on None")}static from(Be){return Xe(Be)?st.some(Be):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Be){this.tag&&Be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const Qe=gt;var ie=tinymce.util.Tools.resolve("tinymce.Env"),St=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wn=Array.prototype.slice,vt=Array.prototype.push,J=(Re,Be)=>{const qt=Re.length,tn=new Array(qt);for(let Dn=0;Dn<qt;Dn++){const Zn=Re[Dn];tn[Dn]=Be(Zn,Dn)}return tn},Yt=(Re,Be)=>{for(let qt=0,tn=Re.length;qt<tn;qt++){const Dn=Re[qt];Be(Dn,qt)}},On=(Re,Be)=>{for(let qt=Re.length-1;qt>=0;qt--){const tn=Re[qt];Be(tn,qt)}},gn=(Re,Be)=>{if(Re.length===0)return[];{let qt=Be(Re[0]);const tn=[];let Dn=[];for(let Zn=0,Gn=Re.length;Zn<Gn;Zn++){const zn=Re[Zn],no=Be(zn);no!==qt&&(tn.push(Dn),Dn=[]),qt=no,Dn.push(zn)}return Dn.length!==0&&tn.push(Dn),tn}},rt=(Re,Be,qt)=>(Yt(Re,(tn,Dn)=>{qt=Be(qt,tn,Dn)}),qt),we=Re=>{const Be=[];for(let qt=0,tn=Re.length;qt<tn;++qt){if(!Q(Re[qt]))throw new Error("Arr.flatten item "+qt+" was not an array, input: "+Re);vt.apply(Be,Re[qt])}return Be},Ro=(Re,Be)=>we(J(Re,Be)),Ve=(Re,Be)=>{const qt=Wn.call(Re,0);return qt.sort(Be),qt},je=Object.hasOwnProperty,T=(Re,Be)=>je.call(Re,Be);typeof window<"u"||Function("return this;")();const it=9,ve=11,Rt=1,It=3,_e=Re=>Re.dom.nodeType,An=(Re=>Be=>_e(Be)===Re)(It),nt=(Re,Be,qt)=>{if(de(qt)||Te(qt)||wt(qt))Re.setAttribute(Be,qt+"");else throw console.error("Invalid call to Attribute.set. Key ",Be,":: Value ",qt,":: Element ",Re),new Error("Attribute value was not simple")},rn=(Re,Be,qt)=>{nt(Re.dom,Be,qt)},Ne=(Re,Be)=>{const tn=(Be||document).createElement("div");if(tn.innerHTML=Re,!tn.hasChildNodes()||tn.childNodes.length>1){const Dn="HTML does not have a single root node";throw console.error(Dn,Re),new Error(Dn)}return Ao(tn.childNodes[0])},dt=(Re,Be)=>{const tn=(Be||document).createElement(Re);return Ao(tn)},V=(Re,Be)=>{const tn=(Be||document).createTextNode(Re);return Ao(tn)},Ao=Re=>{if(Re==null)throw new Error("Node cannot be null or undefined");return{dom:Re}},jt={fromHtml:Ne,fromTag:dt,fromText:V,fromDom:Ao,fromPoint:(Re,Be,qt)=>st.from(Re.dom.elementFromPoint(Be,qt)).map(Ao)},tt=Re=>Re.nodeType!==Rt&&Re.nodeType!==it&&Re.nodeType!==ve||Re.childElementCount===0,re=(Re,Be)=>{const qt=Be===void 0?document:Be.dom;return tt(qt)?[]:J(qt.querySelectorAll(Re),jt.fromDom)},I=Re=>st.from(Re.dom.parentNode).map(jt.fromDom),G=Re=>J(Re.dom.childNodes,jt.fromDom),le=(Re,Be)=>({element:Re,offset:Be}),L=(Re,Be)=>{const qt=G(Re);return qt.length>0&&Be<qt.length?le(qt[Be],0):le(Re,Be)},ye=(Re,Be)=>{I(Re).each(tn=>{tn.dom.insertBefore(Be.dom,Re.dom)})},He=(Re,Be)=>{Re.dom.appendChild(Be.dom)},ke=(Re,Be)=>{ye(Re,Be),He(Be,Re)},Je=((Re,Be)=>{const qt=Zn=>{if(!Re(Zn))throw new Error("Can only get "+Be+" value of a "+Be+" node");return tn(Zn).getOr("")},tn=Zn=>Re(Zn)?st.from(Zn.dom.nodeValue):st.none();return{get:qt,getOption:tn,set:(Zn,Gn)=>{if(!Re(Zn))throw new Error("Can only set raw "+Be+" value of a "+Be+" node");Zn.dom.nodeValue=Gn}}})(An,"text"),cn=Re=>Je.get(Re),Wt=(Re,Be,qt)=>(Re.compareDocumentPosition(Be)&qt)!==0,wn=(Re,Be)=>Wt(Re,Be,Node.DOCUMENT_POSITION_PRECEDING),ot=(Re,Be)=>re(Be,Re);var mt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Xt=(Re,Be)=>Re.isBlock(Be)||T(Re.schema.getVoidElements(),Be.nodeName),sn=(Re,Be)=>!Re.isEditable(Be),lo=(Re,Be)=>Re.getContentEditable(Be)==="true"&&Be.parentNode&&!Re.isEditable(Be.parentNode),po=(Re,Be)=>!Re.isBlock(Be)&&T(Re.schema.getWhitespaceElements(),Be.nodeName),ro=(Re,Be)=>Xt(Re,Be)||sn(Re,Be)||po(Re,Be)||lo(Re,Be),Ds=Re=>Re.nodeType===3,to=()=>({sOffset:0,fOffset:0,elements:[]}),Qo=(Re,Be)=>L(jt.fromDom(Re),Be),ss=(Re,Be,qt,tn,Dn,Zn=!0)=>{let Gn=Zn?Be(!1):qt;for(;Gn;){const zn=sn(Re,Gn);if(zn||po(Re,Gn)){if(zn?tn.cef(Gn):tn.boundary(Gn))break;Gn=Be(!0);continue}else if(Xt(Re,Gn)){if(tn.boundary(Gn))break}else Ds(Gn)&&tn.text(Gn);if(Gn===Dn)break;Gn=Be(!1)}},Lo=(Re,Be,qt,tn,Dn)=>{var Zn;if(ro(Re,qt))return;const Gn=(Zn=Re.getParent(tn,Re.isBlock))!==null&&Zn!==void 0?Zn:Re.getRoot(),zn=new mt(qt,Gn),no=Dn?zn.next.bind(zn):zn.prev.bind(zn);ss(Re,no,qt,{boundary:_t,cef:_t,text:bo=>{Dn?Be.fOffset+=bo.length:Be.sOffset+=bo.length,Be.elements.push(jt.fromDom(bo))}})},ir=(Re,Be,qt,tn,Dn,Zn=!0)=>{const Gn=new mt(qt,Be),zn=[];let no=to();Lo(Re,no,qt,Be,!1);const bo=()=>(no.elements.length>0&&(zn.push(no),no=to()),!1);return ss(Re,Gn.next.bind(Gn),qt,{boundary:bo,cef:hs=>(bo(),Dn&&zn.push(...Dn.cef(hs)),!1),text:hs=>{no.elements.push(jt.fromDom(hs)),Dn&&Dn.text(hs,no)}},tn,Zn),tn&&Lo(Re,no,tn,Be,!0),bo(),zn},xo=(Re,Be)=>{const qt=Qo(Be.startContainer,Be.startOffset),tn=qt.element.dom,Dn=Qo(Be.endContainer,Be.endOffset),Zn=Dn.element.dom;return ir(Re,Be.commonAncestorContainer,tn,Zn,{text:(Gn,zn)=>{Gn===Zn?zn.fOffset+=Gn.length-Dn.offset:Gn===tn&&(zn.sOffset+=qt.offset)},cef:Gn=>{const zn=Ro(ot(jt.fromDom(Gn),"*[contenteditable=true]"),no=>{const bo=no.dom;return ir(Re,bo,bo)});return Ve(zn,(no,bo)=>wn(no.elements[0].dom,bo.elements[0].dom)?1:-1)}},!1)},zr=(Re,Be)=>Be.collapsed?[]:xo(Re,Be),on=(Re,Be)=>{const qt=Re.createRng();return qt.selectNode(Be),zr(Re,qt)},Zo=(Re,Be)=>Ro(Be,qt=>on(Re,qt)),gr=(Re,Be,qt=0,tn=Re.length)=>{const Dn=Be.regex;Dn.lastIndex=qt;const Zn=[];let Gn;for(;Gn=Dn.exec(Re);){const zn=Gn[Be.matchIndex],no=Gn.index+Gn[0].indexOf(zn),bo=no+zn.length;if(bo>tn)break;Zn.push({start:no,finish:bo}),Dn.lastIndex=bo}return Zn},tr=(Re,Be)=>{const qt=rt(Re,(tn,Dn)=>{const Zn=cn(Dn),Gn=tn.last,zn=Gn+Zn.length,no=Ro(Be,(bo,hs)=>bo.start<zn&&bo.finish>Gn?[{element:Dn,start:Math.max(Gn,bo.start)-Gn,finish:Math.min(zn,bo.finish)-Gn,matchId:hs}]:[]);return{results:tn.results.concat(no),last:zn}},{results:[],last:0}).results;return gn(qt,tn=>tn.matchId)},Rr=(Re,Be)=>Ro(Be,qt=>{const tn=qt.elements,Dn=J(tn,cn).join(""),Zn=gr(Dn,Re,qt.sOffset,Dn.length-qt.fOffset);return tr(tn,Zn)}),_r=(Re,Be)=>{On(Re,(qt,tn)=>{On(qt,Dn=>{const Zn=jt.fromDom(Be.cloneNode(!1));rn(Zn,"data-mce-index",tn);const Gn=Dn.element.dom;if(Gn.length===Dn.finish&&Dn.start===0)ke(Dn.element,Zn);else{Gn.length!==Dn.finish&&Gn.splitText(Dn.finish);const zn=Gn.splitText(Dn.start);ke(jt.fromDom(zn),Zn)}})})},ys=(Re,Be,qt,tn)=>{const Dn=on(Re,qt),Zn=Rr(Be,Dn);return _r(Zn,tn),Zn.length},ea=(Re,Be,qt,tn)=>{const Dn=qt.getBookmark(),Zn=Re.select("td[data-mce-selected],th[data-mce-selected]"),Gn=Zn.length>0?Zo(Re,Zn):zr(Re,qt.getRng()),zn=Rr(Be,Gn);return _r(zn,tn),qt.moveToBookmark(Dn),zn.length},Gr=Re=>Re.getAttribute("data-mce-index"),bs=(Re,Be,qt,tn)=>{const Dn=Re.dom.create("span",{"data-mce-bogus":1});Dn.className="mce-match-marker";const Zn=Re.getBody();return lr(Re,Be,!1),tn?ea(Re.dom,qt,Re.selection,Dn):ys(Re.dom,qt,Zn,Dn)},Qn=Re=>{var Be;const qt=Re.parentNode;Re.firstChild&&qt.insertBefore(Re.firstChild,Re),(Be=Re.parentNode)===null||Be===void 0||Be.removeChild(Re)},Ns=(Re,Be)=>{const qt=[],tn=St.toArray(Re.getBody().getElementsByTagName("span"));if(tn.length)for(let Dn=0;Dn<tn.length;Dn++){const Zn=Gr(tn[Dn]);Zn===null||!Zn.length||Zn===Be.toString()&&qt.push(tn[Dn])}return qt},Ke=(Re,Be,qt)=>{const tn=Be.get();let Dn=tn.index;const Zn=Re.dom;qt?Dn+1===tn.count?Dn=0:Dn++:Dn-1===-1?Dn=tn.count-1:Dn--,Zn.removeClass(Ns(Re,tn.index),"mce-match-marker-selected");const Gn=Ns(Re,Dn);return Gn.length?(Zn.addClass(Ns(Re,Dn),"mce-match-marker-selected"),Re.selection.scrollIntoView(Gn[0]),Dn):-1},xt=(Re,Be)=>{const qt=Be.parentNode;Re.remove(Be),qt&&Re.isEmpty(qt)&&Re.remove(qt)},xn=(Re,Be)=>{const tn="("+Re.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return Be?`(?:^|\\s|${Qe()})`+tn+`(?=$|\\s|${Qe()})`:tn},Bn=(Re,Be,qt,tn,Dn,Zn)=>{const Gn=Re.selection,zn=xn(qt,Dn),no=Gn.isForward(),bo={regex:new RegExp(zn,tn?"g":"gi"),matchIndex:1},hs=bs(Re,Be,bo,Zn);if(ie.browser.isSafari()&&Gn.setRng(Gn.getRng(),no),hs){const As=Ke(Re,Be,!0);Be.set({index:As,count:hs,text:qt,matchCase:tn,wholeWord:Dn,inSelection:Zn})}return hs},Ho=(Re,Be)=>{const qt=Ke(Re,Be,!0);Be.set({...Be.get(),index:qt})},as=(Re,Be)=>{const qt=Ke(Re,Be,!1);Be.set({...Be.get(),index:qt})},pr=Re=>{const Be=Gr(Re);return Be!==null&&Be.length>0},Sr=(Re,Be,qt,tn,Dn)=>{const Zn=Be.get(),Gn=Zn.index;let zn,no=Gn;tn=tn!==!1;const bo=Re.getBody(),hs=St.grep(St.toArray(bo.getElementsByTagName("span")),pr);for(let As=0;As<hs.length;As++){const Ls=Gr(hs[As]);let wa=zn=parseInt(Ls,10);if(Dn||wa===Zn.index){for(qt.length?(hs[As].innerText=qt,Qn(hs[As])):xt(Re.dom,hs[As]);hs[++As];)if(wa=parseInt(Gr(hs[As]),10),wa===zn)xt(Re.dom,hs[As]);else{As--;break}tn&&no--}else zn>Gn&&hs[As].setAttribute("data-mce-index",String(zn-1))}return Be.set({...Zn,count:Dn?0:Zn.count-1,index:no}),tn?Ho(Re,Be):as(Re,Be),!Dn&&Be.get().count>0},lr=(Re,Be,qt)=>{let tn,Dn;const Zn=Be.get(),Gn=St.toArray(Re.getBody().getElementsByTagName("span"));for(let zn=0;zn<Gn.length;zn++){const no=Gr(Gn[zn]);no!==null&&no.length&&(no===Zn.index.toString()&&(tn||(tn=Gn[zn].firstChild),Dn=Gn[zn].firstChild),Qn(Gn[zn]))}if(Be.set({...Zn,index:-1,count:0,text:""}),tn&&Dn){const zn=Re.dom.createRng();return zn.setStart(tn,0),zn.setEnd(Dn,Dn.data.length),qt!==!1&&Re.selection.setRng(zn),zn}else return},Ae=(Re,Be)=>Be.get().count>1,Ce=(Re,Be)=>Be.get().count>1,ht=(Re,Be)=>({done:zn=>lr(Re,Be,zn),find:(zn,no,bo,hs=!1)=>Bn(Re,Be,zn,no,bo,hs),next:()=>Ho(Re,Be),prev:()=>as(Re,Be),replace:(zn,no,bo)=>Sr(Re,Be,zn,no,bo)}),Ft=Re=>{const Be=h(st.none()),qt=()=>Be.get().each(Re);return{clear:()=>{qt(),Be.set(st.none())},isSet:()=>Be.get().isSome(),get:()=>Be.get(),set:zn=>{qt(),Be.set(st.some(zn))}}},Yn=()=>{const Re=Ft(yt);return{...Re,on:qt=>Re.get().each(qt)}},Co=(Re,Be)=>{const qt=Yn();Re.undoManager.add();const tn=St.trim(Re.selection.getContent({format:"text"})),Dn=fo=>{fo.setEnabled("next",Ae(Re,Be)),fo.setEnabled("prev",Ce(Re,Be))},Zn=fo=>{const is=fo.getData(),ms=Be.get();Be.set({...ms,matchCase:is.matchcase,wholeWord:is.wholewords,inSelection:is.inselection})},Gn=(fo,is)=>{Yt(["replace","replaceall","prev","next"],ta=>fo.setEnabled(ta,!is))},zn=(fo,is)=>{is.redial(la(fo,is.getData()))},no=(fo,is)=>{ie.browser.isSafari()&&ie.deviceType.isTouch()&&(is==="find"||is==="replace"||is==="replaceall")&&fo.focus(is)},bo=fo=>{lr(Re,Be,!1),Gn(fo,!0),Dn(fo)},hs=fo=>{const is=fo.getData(),ms=Be.get();if(!is.findtext.length){bo(fo);return}if(ms.text===is.findtext&&ms.matchCase===is.matchcase&&ms.wholeWord===is.wholewords)Ho(Re,Be);else{const aa=Bn(Re,Be,is.findtext,is.matchcase,is.wholewords,is.inselection);aa<=0&&zn(!0,fo),Gn(fo,aa===0)}Dn(fo)},As=Be.get(),Ls={findtext:tn,replacetext:"",wholewords:As.wholeWord,matchcase:As.matchCase,inselection:As.inSelection},wa=fo=>{const is=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return fo&&is.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),is},la=(fo,is)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:wa(fo)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:is,onChange:(ms,aa)=>{fo&&zn(!1,ms),aa.name==="findtext"&&Be.get().count>0&&bo(ms)},onAction:(ms,aa)=>{const ta=ms.getData();switch(aa.name){case"find":hs(ms);break;case"replace":Sr(Re,Be,ta.replacetext)?Dn(ms):bo(ms);break;case"replaceall":Sr(Re,Be,ta.replacetext,!0,!0),bo(ms);break;case"prev":as(Re,Be),Dn(ms);break;case"next":Ho(Re,Be),Dn(ms);break;case"matchcase":case"wholewords":case"inselection":zn(!1,ms),Zn(ms),bo(ms);break}no(ms,aa.name)},onSubmit:ms=>{hs(ms),no(ms,"find")},onClose:()=>{Re.focus(),lr(Re,Be),Re.undoManager.add()}});qt.set(Re.windowManager.open(la(!1,Ls),{inline:"toolbar"}))},Bo=(Re,Be)=>{Re.addCommand("SearchReplace",()=>{Co(Re,Be)})},ur=(Re,Be)=>()=>{Co(Re,Be)},Le=(Re,Be)=>{Re.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ur(Re,Be),icon:"search"}),Re.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ur(Re,Be),icon:"search",shortcut:"Meta+F"}),Re.shortcuts.add("Meta+F","",ur(Re,Be))};var Fo=()=>{C.add("searchreplace",Re=>{const Be=h({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Bo(Re,Be),Le(Re,Be),ht(Re,Be)})};Fo()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,D=nt=>rn=>rn.options.get(nt),N=nt=>{const rn=nt.options.register;rn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+C().source+"$","i")}),rn("link_default_target",{processor:"string"}),rn("link_default_protocol",{processor:"string",default:"https"})},W=D("autolink_pattern"),Y=D("link_default_target"),de=D("link_default_protocol"),Q=D("allow_unsafe_link_target"),Te=(nt,rn,Ne)=>{var dt;return Ne(nt,rn.prototype)?!0:((dt=nt.constructor)===null||dt===void 0?void 0:dt.name)===rn.name},ct=nt=>{const rn=typeof nt;return nt===null?"null":rn==="object"&&Array.isArray(nt)?"array":rn==="object"&&Te(nt,String,(Ne,dt)=>dt.isPrototypeOf(Ne))?"string":rn},Xe=nt=>rn=>ct(rn)===nt,wt=nt=>rn=>nt===rn,yt=Xe("string"),Tt=wt(void 0),_t=nt=>nt==null,Lt=nt=>!_t(nt),gt=nt=>rn=>!nt(rn),st=Object.hasOwnProperty,Qe=(nt,rn)=>st.call(nt,rn),ie=(nt,rn,Ne)=>nt.length>=rn.length&&nt.substr(Ne,Ne+rn.length)===rn,St=(nt,rn,Ne=0,dt)=>{const V=nt.indexOf(rn,Ne);return V!==-1?Tt(dt)?!0:V+rn.length<=dt:!1},Wn=(nt,rn)=>ie(nt,rn,0),vt="\uFEFF",J=nt=>nt===vt,Yt=nt=>nt.replace(/\uFEFF/g,"");var On=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const gn=nt=>nt.nodeType===3,rt=nt=>nt.nodeType===1,we=nt=>/^[(\[{ \u00a0]$/.test(nt),Ro=nt=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(nt),Ve=nt=>/[?!,.;:]/.test(nt),je=(nt,rn,Ne)=>{for(let dt=rn-1;dt>=0;dt--){const V=nt.charAt(dt);if(!J(V)&&Ne(V))return dt}return-1},T=(nt,rn)=>{let Ne=nt,dt=rn;for(;rt(Ne)&&Ne.childNodes[dt];)Ne=Ne.childNodes[dt],dt=gn(Ne)?Ne.data.length:Ne.childNodes.length;return{container:Ne,offset:dt}},it=(nt,rn)=>{var Ne;const dt=nt.schema.getVoidElements(),V=W(nt),{dom:Ao,selection:Ct}=nt;if(Ao.getParent(Ct.getNode(),"a[href]")!==null)return null;const jt=Ct.getRng(),tt=On(Ao,Je=>Ao.isBlock(Je)||Qe(dt,Je.nodeName.toLowerCase())||Ao.getContentEditable(Je)==="false"),{container:re,offset:I}=T(jt.endContainer,jt.endOffset),G=(Ne=Ao.getParent(re,Ao.isBlock))!==null&&Ne!==void 0?Ne:Ao.getRoot(),le=tt.backwards(re,I+rn,(Je,cn)=>{const Wt=Je.data,wn=je(Wt,cn,gt(we));return wn===-1||Ve(Wt[wn])?wn:wn+1},G);if(!le)return null;let L=le.container;const ye=tt.backwards(le.container,le.offset,(Je,cn)=>{L=Je;const Wt=je(Je.data,cn,we);return Wt===-1?Wt:Wt+1},G),He=Ao.createRng();ye?He.setStart(ye.container,ye.offset):He.setStart(L,0),He.setEnd(le.container,le.offset);const lt=Yt(He.toString()).match(V);if(lt){let Je=lt[0];return Wn(Je,"www.")?Je=de(nt)+"://"+Je:St(Je,"@")&&!Ro(Je)&&(Je="mailto:"+Je),{rng:He,url:Je}}else return null},ve=(nt,rn)=>{const{dom:Ne,selection:dt}=nt,{rng:V,url:Ao}=rn,Ct=dt.getBookmark();dt.setRng(V);const jt="createlink",tt={command:jt,ui:!1,value:Ao};if(!nt.dispatch("BeforeExecCommand",tt).isDefaultPrevented()){nt.getDoc().execCommand(jt,!1,Ao),nt.dispatch("ExecCommand",tt);const I=Y(nt);if(yt(I)){const G=dt.getNode();Ne.setAttrib(G,"target",I),I==="_blank"&&!Q(nt)&&Ne.setAttrib(G,"rel","noopener")}}dt.moveToBookmark(Ct),nt.nodeChanged()},Rt=nt=>{const rn=it(nt,-1);Lt(rn)&&ve(nt,rn)},It=Rt,_e=nt=>{const rn=it(nt,0);Lt(rn)&&ve(nt,rn)},Dt=nt=>{nt.on("keydown",rn=>{rn.keyCode===13&&!rn.isDefaultPrevented()&&_e(nt)}),nt.on("keyup",rn=>{rn.keyCode===32?Rt(nt):(rn.keyCode===48&&rn.shiftKey||rn.keyCode===221)&&It(nt)})};var An=()=>{h.add("autolink",nt=>{N(nt),Dt(nt)})};An()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(ot,mt,Xt)=>{var sn;return Xt(ot,mt.prototype)?!0:((sn=ot.constructor)===null||sn===void 0?void 0:sn.name)===mt.name},D=ot=>{const mt=typeof ot;return ot===null?"null":mt==="object"&&Array.isArray(ot)?"array":mt==="object"&&C(ot,String,(Xt,sn)=>sn.isPrototypeOf(Xt))?"string":mt},N=ot=>mt=>D(mt)===ot,W=ot=>mt=>typeof mt===ot,Y=N("string"),de=W("boolean"),Q=ot=>ot==null,Te=ot=>!Q(ot),ct=W("function"),Xe=W("number"),wt=(ot,mt)=>Xt=>ot(mt(Xt)),Tt=(ot=>()=>ot)(!1);class _t{constructor(mt,Xt){this.tag=mt,this.value=Xt}static some(mt){return new _t(!0,mt)}static none(){return _t.singletonNone}fold(mt,Xt){return this.tag?Xt(this.value):mt()}isSome(){return this.tag}isNone(){return!this.tag}map(mt){return this.tag?_t.some(mt(this.value)):_t.none()}bind(mt){return this.tag?mt(this.value):_t.none()}exists(mt){return this.tag&&mt(this.value)}forall(mt){return!this.tag||mt(this.value)}filter(mt){return!this.tag||mt(this.value)?this:_t.none()}getOr(mt){return this.tag?this.value:mt}or(mt){return this.tag?this:mt}getOrThunk(mt){return this.tag?this.value:mt()}orThunk(mt){return this.tag?this:mt()}getOrDie(mt){if(this.tag)return this.value;throw new Error(mt??"Called getOrDie on None")}static from(mt){return Te(mt)?_t.some(mt):_t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(mt){this.tag&&mt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_t.singletonNone=new _t(!1);const Lt=(ot,mt)=>{const Xt=ot.length,sn=new Array(Xt);for(let lo=0;lo<Xt;lo++){const po=ot[lo];sn[lo]=mt(po,lo)}return sn},gt=(ot,mt)=>{for(let Xt=0,sn=ot.length;Xt<sn;Xt++){const lo=ot[Xt];mt(lo,Xt)}},st=(ot,mt)=>{const Xt=[];for(let sn=0,lo=ot.length;sn<lo;sn++){const po=ot[sn];mt(po,sn)&&Xt.push(po)}return Xt},Qe=11,ie=1,St=3,Wn=(ot,mt)=>{const sn=(mt||document).createElement("div");if(sn.innerHTML=ot,!sn.hasChildNodes()||sn.childNodes.length>1){const lo="HTML does not have a single root node";throw console.error(lo,ot),new Error(lo)}return Yt(sn.childNodes[0])},vt=(ot,mt)=>{const sn=(mt||document).createElement(ot);return Yt(sn)},J=(ot,mt)=>{const sn=(mt||document).createTextNode(ot);return Yt(sn)},Yt=ot=>{if(ot==null)throw new Error("Node cannot be null or undefined");return{dom:ot}},gn={fromHtml:Wn,fromTag:vt,fromText:J,fromDom:Yt,fromPoint:(ot,mt,Xt)=>_t.from(ot.dom.elementFromPoint(mt,Xt)).map(Yt)},rt=(ot,mt)=>{const Xt=ot.dom;if(Xt.nodeType!==ie)return!1;{const sn=Xt;if(sn.matches!==void 0)return sn.matches(mt);if(sn.msMatchesSelector!==void 0)return sn.msMatchesSelector(mt);if(sn.webkitMatchesSelector!==void 0)return sn.webkitMatchesSelector(mt);if(sn.mozMatchesSelector!==void 0)return sn.mozMatchesSelector(mt);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const we=ot=>ot.dom.nodeName.toLowerCase(),Ro=ot=>ot.dom.nodeType,Ve=ot=>mt=>Ro(mt)===ot,je=Ve(ie),T=Ve(St),it=Ve(Qe),ve=ot=>mt=>je(mt)&&we(mt)===ot,Rt=ot=>_t.from(ot.dom.parentNode).map(gn.fromDom),It=ot=>Lt(ot.dom.childNodes,gn.fromDom),_e=(ot,mt,Xt)=>{if(Y(Xt)||de(Xt)||Xe(Xt))ot.setAttribute(mt,Xt+"");else throw console.error("Invalid call to Attribute.set. Key ",mt,":: Value ",Xt,":: Element ",ot),new Error("Attribute value was not simple")},Dt=(ot,mt,Xt)=>{_e(ot.dom,mt,Xt)},An=(ot,mt)=>{ot.dom.removeAttribute(mt)},nt=ot=>it(ot)&&Te(ot.dom.host),rn=ot=>gn.fromDom(ot.dom.getRootNode()),Ne=ot=>{const mt=rn(ot);return nt(mt)?_t.some(mt):_t.none()},dt=ot=>gn.fromDom(ot.dom.host),V=ot=>{const mt=T(ot)?ot.dom.parentNode:ot.dom;if(mt==null||mt.ownerDocument===null)return!1;const Xt=mt.ownerDocument;return Ne(gn.fromDom(mt)).fold(()=>Xt.body.contains(mt),wt(V,dt))},Ao=(ot,mt,Xt)=>{let sn=ot.dom;const lo=ct(Xt)?Xt:Tt;for(;sn.parentNode;){sn=sn.parentNode;const po=gn.fromDom(sn);if(mt(po))return _t.some(po);if(lo(po))break}return _t.none()},Ct=(ot,mt,Xt)=>Ao(ot,sn=>rt(sn,mt),Xt),jt=ot=>ot.style!==void 0&&ct(ot.style.getPropertyValue),tt=(ot,mt)=>{const Xt=ot.dom,lo=window.getComputedStyle(Xt).getPropertyValue(mt);return lo===""&&!V(ot)?re(Xt,mt):lo},re=(ot,mt)=>jt(ot)?ot.style.getPropertyValue(mt):"",I=ot=>tt(ot,"direction")==="rtl"?"rtl":"ltr",G=(ot,mt)=>st(It(ot),mt),le=(ot,mt)=>G(ot,Xt=>rt(Xt,mt)),L=ot=>Rt(ot).filter(je),ye=(ot,mt)=>(mt?Ct(ot,"ol,ul"):_t.some(ot)).getOr(ot),He=ve("li"),ke=(ot,mt,Xt)=>{gt(mt,sn=>{const lo=gn.fromDom(sn),po=He(lo),ro=ye(lo,po);L(ro).each(to=>{if(ot.setStyle(ro.dom,"direction",null),I(to)===Xt?An(ro,"dir"):Dt(ro,"dir",Xt),I(ro)!==Xt&&ot.setStyle(ro.dom,"direction",Xt),po){const ss=le(ro,"li[dir],li[style]");gt(ss,Lo=>{An(Lo,"dir"),ot.setStyle(Lo.dom,"direction",null)})}})})},lt=(ot,mt)=>{ot.selection.isEditable()&&(ke(ot.dom,ot.selection.getSelectedBlocks(),mt),ot.nodeChanged())},Je=ot=>{ot.addCommand("mceDirectionLTR",()=>{lt(ot,"ltr")}),ot.addCommand("mceDirectionRTL",()=>{lt(ot,"rtl")})},cn=(ot,mt)=>Xt=>{const sn=lo=>{const po=gn.fromDom(lo.element);Xt.setActive(I(po)===mt),Xt.setEnabled(ot.selection.isEditable())};return ot.on("NodeChange",sn),Xt.setEnabled(ot.selection.isEditable()),()=>ot.off("NodeChange",sn)},Wt=ot=>{ot.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>ot.execCommand("mceDirectionLTR"),onSetup:cn(ot,"ltr")}),ot.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>ot.execCommand("mceDirectionRTL"),onSetup:cn(ot,"rtl")})};var wn=()=>{h.add("directionality",ot=>{Je(ot),Wt(ot)})};wn()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(ve,Rt,It)=>{var _e;return It(ve,Rt.prototype)?!0:((_e=ve.constructor)===null||_e===void 0?void 0:_e.name)===Rt.name},D=ve=>{const Rt=typeof ve;return ve===null?"null":Rt==="object"&&Array.isArray(ve)?"array":Rt==="object"&&C(ve,String,(It,_e)=>_e.isPrototypeOf(It))?"string":Rt},N=ve=>Rt=>D(Rt)===ve,W=ve=>Rt=>ve===Rt,Y=N("string"),de=W(void 0);var Q=tinymce.util.Tools.resolve("tinymce.util.Delay"),Te=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),ct=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xe=ve=>ve.dispatch("RestoreDraft"),wt=ve=>ve.dispatch("StoreDraft"),yt=ve=>ve.dispatch("RemoveDraft"),Tt=ve=>{const Rt={s:1e3,m:6e4},It=/^(\d+)([ms]?)$/.exec(ve);return(It&&It[2]?Rt[It[2]]:1)*parseInt(ve,10)},_t=ve=>Rt=>Rt.options.get(ve),Lt=ve=>{const Rt=ve.options.register,It=_e=>{const Dt=Y(_e);return Dt?{value:Tt(_e),valid:Dt}:{valid:!1,message:"Must be a string."}};Rt("autosave_ask_before_unload",{processor:"boolean",default:!0}),Rt("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),Rt("autosave_restore_when_empty",{processor:"boolean",default:!1}),Rt("autosave_interval",{processor:It,default:"30s"}),Rt("autosave_retention",{processor:It,default:"20m"})},gt=_t("autosave_ask_before_unload"),st=_t("autosave_restore_when_empty"),Qe=_t("autosave_interval"),ie=_t("autosave_retention"),St=ve=>{const Rt=document.location;return ve.options.get("autosave_prefix").replace(/{path}/g,Rt.pathname).replace(/{query}/g,Rt.search).replace(/{hash}/g,Rt.hash).replace(/{id}/g,ve.id)},Wn=(ve,Rt)=>{if(de(Rt))return ve.dom.isEmpty(ve.getBody());{const It=ct.trim(Rt);if(It==="")return!0;{const _e=new DOMParser().parseFromString(It,"text/html");return ve.dom.isEmpty(_e)}}},vt=ve=>{var Rt;const It=parseInt((Rt=Te.getItem(St(ve)+"time"))!==null&&Rt!==void 0?Rt:"0",10)||0;return new Date().getTime()-It>ie(ve)?(J(ve,!1),!1):!0},J=(ve,Rt)=>{const It=St(ve);Te.removeItem(It+"draft"),Te.removeItem(It+"time"),Rt!==!1&&yt(ve)},Yt=ve=>{const Rt=St(ve);!Wn(ve)&&ve.isDirty()&&(Te.setItem(Rt+"draft",ve.getContent({format:"raw",no_events:!0})),Te.setItem(Rt+"time",new Date().getTime().toString()),wt(ve))},On=ve=>{var Rt;const It=St(ve);vt(ve)&&(ve.setContent((Rt=Te.getItem(It+"draft"))!==null&&Rt!==void 0?Rt:"",{format:"raw"}),Xe(ve))},gn=ve=>{const Rt=Qe(ve);Q.setEditorInterval(ve,()=>{Yt(ve)},Rt)},rt=ve=>{ve.undoManager.transact(()=>{On(ve),J(ve)}),ve.focus()},we=ve=>({hasDraft:()=>vt(ve),storeDraft:()=>Yt(ve),restoreDraft:()=>On(ve),removeDraft:Rt=>J(ve,Rt),isEmpty:Rt=>Wn(ve,Rt)});var Ro=tinymce.util.Tools.resolve("tinymce.EditorManager");const Ve=ve=>{ve.editorManager.on("BeforeUnload",Rt=>{let It;ct.each(Ro.get(),_e=>{_e.plugins.autosave&&_e.plugins.autosave.storeDraft(),!It&&_e.isDirty()&&gt(_e)&&(It=_e.translate("You have unsaved changes are you sure you want to navigate away?"))}),It&&(Rt.preventDefault(),Rt.returnValue=It)})},je=ve=>Rt=>{Rt.setEnabled(vt(ve));const It=()=>Rt.setEnabled(vt(ve));return ve.on("StoreDraft RestoreDraft RemoveDraft",It),()=>ve.off("StoreDraft RestoreDraft RemoveDraft",It)},T=ve=>{gn(ve);const Rt=()=>{rt(ve)};ve.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:Rt,onSetup:je(ve)}),ve.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:Rt,onSetup:je(ve)})};var it=()=>{h.add("autosave",ve=>(Lt(ve),Ve(ve),T(ve),ve.on("init",()=>{st(ve)&&ve.dom.isEmpty(ve.getBody())&&On(ve)}),we(ve)))};it()})();(function(){const h=yt=>{let Tt=yt;return{get:()=>Tt,set:gt=>{Tt=gt}}};var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=(yt,Tt)=>{yt.dispatch("VisualBlocks",{state:Tt})},N=(yt,Tt,_t)=>{yt.dom.toggleClass(yt.getBody(),"mce-visualblocks"),_t.set(!_t.get()),D(yt,_t.get())},W=(yt,Tt,_t)=>{yt.addCommand("mceVisualBlocks",()=>{N(yt,Tt,_t)})},Y=yt=>Tt=>Tt.options.get(yt),de=yt=>{const Tt=yt.options.register;Tt("visualblocks_default_state",{processor:"boolean",default:!1})},Q=Y("visualblocks_default_state"),Te=(yt,Tt,_t)=>{yt.on("PreviewFormats AfterPreviewFormats",Lt=>{_t.get()&&yt.dom.toggleClass(yt.getBody(),"mce-visualblocks",Lt.type==="afterpreviewformats")}),yt.on("init",()=>{Q(yt)&&N(yt,Tt,_t)})},ct=(yt,Tt)=>_t=>{_t.setActive(Tt.get());const Lt=gt=>_t.setActive(gt.state);return yt.on("VisualBlocks",Lt),()=>yt.off("VisualBlocks",Lt)},Xe=(yt,Tt)=>{const _t=()=>yt.execCommand("mceVisualBlocks");yt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:_t,onSetup:ct(yt,Tt)}),yt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:_t,onSetup:ct(yt,Tt)})};var wt=()=>{C.add("visualblocks",(yt,Tt)=>{de(yt);const _t=h(!1);W(yt,Tt,_t),Xe(yt,_t),Te(yt,Tt,_t)})};wt()})();(function(){const h=Ke=>{let xt=Ke;return{get:()=>xt,set:Ho=>{xt=Ho}}};var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const D=Ke=>({isEnabled:()=>Ke.get()}),N=(Ke,xt)=>Ke.dispatch("VisualChars",{state:xt}),W=(Ke,xt,xn)=>{var Bn;return xn(Ke,xt.prototype)?!0:((Bn=Ke.constructor)===null||Bn===void 0?void 0:Bn.name)===xt.name},Y=Ke=>{const xt=typeof Ke;return Ke===null?"null":xt==="object"&&Array.isArray(Ke)?"array":xt==="object"&&W(Ke,String,(xn,Bn)=>Bn.isPrototypeOf(xn))?"string":xt},de=Ke=>xt=>Y(xt)===Ke,Q=Ke=>xt=>typeof xt===Ke,Te=Ke=>xt=>Ke===xt,ct=de("string"),Xe=de("object"),wt=Te(null),yt=Q("boolean"),Tt=Ke=>Ke==null,_t=Ke=>!Tt(Ke),Lt=Q("number");class gt{constructor(xt,xn){this.tag=xt,this.value=xn}static some(xt){return new gt(!0,xt)}static none(){return gt.singletonNone}fold(xt,xn){return this.tag?xn(this.value):xt()}isSome(){return this.tag}isNone(){return!this.tag}map(xt){return this.tag?gt.some(xt(this.value)):gt.none()}bind(xt){return this.tag?xt(this.value):gt.none()}exists(xt){return this.tag&&xt(this.value)}forall(xt){return!this.tag||xt(this.value)}filter(xt){return!this.tag||xt(this.value)?this:gt.none()}getOr(xt){return this.tag?this.value:xt}or(xt){return this.tag?this:xt}getOrThunk(xt){return this.tag?this.value:xt()}orThunk(xt){return this.tag?this:xt()}getOrDie(xt){if(this.tag)return this.value;throw new Error(xt??"Called getOrDie on None")}static from(xt){return _t(xt)?gt.some(xt):gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xt){this.tag&&xt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gt.singletonNone=new gt(!1);const st=(Ke,xt)=>{const xn=Ke.length,Bn=new Array(xn);for(let Ho=0;Ho<xn;Ho++){const as=Ke[Ho];Bn[Ho]=xt(as,Ho)}return Bn},Qe=(Ke,xt)=>{for(let xn=0,Bn=Ke.length;xn<Bn;xn++){const Ho=Ke[xn];xt(Ho,xn)}},ie=(Ke,xt)=>{const xn=[];for(let Bn=0,Ho=Ke.length;Bn<Ho;Bn++){const as=Ke[Bn];xt(as,Bn)&&xn.push(as)}return xn},St=Object.keys,Wn=(Ke,xt)=>{const xn=St(Ke);for(let Bn=0,Ho=xn.length;Bn<Ho;Bn++){const as=xn[Bn],pr=Ke[as];xt(pr,as)}},vt=typeof window<"u"?window:Function("return this;")(),J=(Ke,xt)=>{let xn=xt??vt;for(let Bn=0;Bn<Ke.length&&xn!==void 0&&xn!==null;++Bn)xn=xn[Ke[Bn]];return xn},Yt=(Ke,xt)=>{const xn=Ke.split(".");return J(xn,xt)},On=(Ke,xt)=>Yt(Ke,xt),gn=(Ke,xt)=>{const xn=On(Ke,xt);if(xn==null)throw new Error(Ke+" not available on this browser");return xn},rt=Object.getPrototypeOf,we=Ke=>gn("HTMLElement",Ke),Ro=Ke=>{const xt=Yt("ownerDocument.defaultView",Ke);return Xe(Ke)&&(we(xt).prototype.isPrototypeOf(Ke)||/^HTML\w*Element$/.test(rt(Ke).constructor.name))},Ve=1,je=3,T=Ke=>Ke.dom.nodeType,it=Ke=>Ke.dom.nodeValue,ve=Ke=>xt=>T(xt)===Ke,Rt=Ke=>It(Ke)&&Ro(Ke.dom),It=ve(Ve),_e=ve(je),Dt=(Ke,xt,xn)=>{if(ct(xn)||yt(xn)||Lt(xn))Ke.setAttribute(xt,xn+"");else throw console.error("Invalid call to Attribute.set. Key ",xt,":: Value ",xn,":: Element ",Ke),new Error("Attribute value was not simple")},An=(Ke,xt,xn)=>{Dt(Ke.dom,xt,xn)},nt=(Ke,xt)=>{const xn=Ke.dom.getAttribute(xt);return xn===null?void 0:xn},rn=(Ke,xt)=>{Ke.dom.removeAttribute(xt)},Ne=(Ke,xt)=>{const xn=nt(Ke,xt);return xn===void 0||xn===""?[]:xn.split(" ")},dt=(Ke,xt,xn)=>{const Ho=Ne(Ke,xt).concat([xn]);return An(Ke,xt,Ho.join(" ")),!0},V=(Ke,xt,xn)=>{const Bn=ie(Ne(Ke,xt),Ho=>Ho!==xn);return Bn.length>0?An(Ke,xt,Bn.join(" ")):rn(Ke,xt),!1},Ao=Ke=>Ke.dom.classList!==void 0,Ct=Ke=>Ne(Ke,"class"),jt=(Ke,xt)=>dt(Ke,"class",xt),tt=(Ke,xt)=>V(Ke,"class",xt),re=(Ke,xt)=>{Ao(Ke)?Ke.dom.classList.add(xt):jt(Ke,xt)},I=Ke=>{(Ao(Ke)?Ke.dom.classList:Ct(Ke)).length===0&&rn(Ke,"class")},G=(Ke,xt)=>{Ao(Ke)?Ke.dom.classList.remove(xt):tt(Ke,xt),I(Ke)},le=(Ke,xt)=>{const Bn=(xt||document).createElement("div");if(Bn.innerHTML=Ke,!Bn.hasChildNodes()||Bn.childNodes.length>1){const Ho="HTML does not have a single root node";throw console.error(Ho,Ke),new Error(Ho)}return He(Bn.childNodes[0])},L=(Ke,xt)=>{const Bn=(xt||document).createElement(Ke);return He(Bn)},ye=(Ke,xt)=>{const Bn=(xt||document).createTextNode(Ke);return He(Bn)},He=Ke=>{if(Ke==null)throw new Error("Node cannot be null or undefined");return{dom:Ke}},lt={fromHtml:le,fromTag:L,fromText:ye,fromDom:He,fromPoint:(Ke,xt,xn)=>gt.from(Ke.dom.elementFromPoint(xt,xn)).map(He)},Je={" ":"nbsp","­":"shy"},cn=(Ke,xt)=>{let xn="";return Wn(Ke,(Bn,Ho)=>{xn+=Ho}),new RegExp("["+xn+"]",xt?"g":"")},Wt=Ke=>{let xt="";return Wn(Ke,xn=>{xt&&(xt+=","),xt+="span.mce-"+xn}),xt},wn=cn(Je),ot=cn(Je,!0),mt=Wt(Je),Xt="mce-nbsp",sn=Ke=>Ke.dom.contentEditable,lo=Ke=>'<span data-mce-bogus="1" class="mce-'+Je[Ke]+'">'+Ke+"</span>",po=Ke=>Ke.nodeName.toLowerCase()==="span"&&Ke.classList.contains("mce-nbsp-wrap"),ro=Ke=>{const xt=it(Ke);return _e(Ke)&&ct(xt)&&wn.test(xt)},Ds=Ke=>Rt(Ke)&&sn(Ke)==="false",to=(Ke,xt)=>{if(Rt(Ke)&&!po(Ke.dom)){const xn=sn(Ke);if(xn==="true")return!0;if(xn==="false")return!1}return xt},Qo=(Ke,xt,xn)=>{let Bn=[];const Ho=Ke.dom,as=st(Ho.childNodes,lt.fromDom),pr=Sr=>po(Sr.dom)||!Ds(Sr);return Qe(as,Sr=>{xn&&pr(Sr)&&xt(Sr)&&(Bn=Bn.concat([Sr])),Bn=Bn.concat(Qo(Sr,xt,to(Sr,xn)))}),Bn},ss=(Ke,xt)=>{for(;Ke.parentNode;){if(Ke.parentNode===xt)return xt;Ke=Ke.parentNode}},Lo=Ke=>Ke.replace(ot,lo),ir=(Ke,xt)=>{const xn=Ke.dom,Bn=Qo(lt.fromDom(xt),ro,Ke.dom.isEditable(xt));Qe(Bn,Ho=>{var as;const pr=Ho.dom.parentNode;if(po(pr))re(lt.fromDom(pr),Xt);else{const Sr=Lo(xn.encode((as=it(Ho))!==null&&as!==void 0?as:"")),lr=xn.create("div",{},Sr);let Ae;for(;Ae=lr.lastChild;)xn.insertAfter(Ae,Ho.dom);Ke.dom.remove(Ho.dom)}})},xo=(Ke,xt)=>{const xn=Ke.dom.select(mt,xt);Qe(xn,Bn=>{po(Bn)?G(lt.fromDom(Bn),Xt):Ke.dom.remove(Bn,!0)})},zr=Ke=>{const xt=Ke.getBody(),xn=Ke.selection.getBookmark();let Bn=ss(Ke.selection.getNode(),xt);Bn=Bn!==void 0?Bn:xt,xo(Ke,Bn),ir(Ke,Bn),Ke.selection.moveToBookmark(xn)},on=(Ke,xt)=>{N(Ke,xt.get());const xn=Ke.getBody();xt.get()===!0?ir(Ke,xn):xo(Ke,xn)},Zo=(Ke,xt)=>{xt.set(!xt.get());const xn=Ke.selection.getBookmark();on(Ke,xt),Ke.selection.moveToBookmark(xn)},gr=(Ke,xt)=>{Ke.addCommand("mceVisualChars",()=>{Zo(Ke,xt)})},tr=Ke=>xt=>xt.options.get(Ke),Rr=Ke=>{const xt=Ke.options.register;xt("visualchars_default_state",{processor:"boolean",default:!1})},_r=tr("visualchars_default_state"),ys=(Ke,xt)=>{Ke.on("init",()=>{on(Ke,xt)})},ea=(Ke,xt)=>{let xn=null;return{cancel:()=>{wt(xn)||(clearTimeout(xn),xn=null)},throttle:(...as)=>{wt(xn)&&(xn=setTimeout(()=>{xn=null,Ke.apply(null,as)},xt))}}},Gr=(Ke,xt)=>{const xn=ea(()=>{zr(Ke)},300);Ke.on("keydown",Bn=>{xt.get()===!0&&(Bn.keyCode===13?zr(Ke):xn.throttle())}),Ke.on("remove",xn.cancel)},bs=(Ke,xt)=>xn=>{xn.setActive(xt.get());const Bn=Ho=>xn.setActive(Ho.state);return Ke.on("VisualChars",Bn),()=>Ke.off("VisualChars",Bn)},Qn=(Ke,xt)=>{const xn=()=>Ke.execCommand("mceVisualChars");Ke.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:xn,onSetup:bs(Ke,xt)}),Ke.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:xn,onSetup:bs(Ke,xt)})};var Ns=()=>{C.add("visualchars",Ke=>{Rr(Ke);const xt=h(_r(Ke));return gr(Ke,xt),Qn(Ke,xt),Gr(Ke,xt),ys(Ke,xt),D(xt)})};Ns()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(Ae,Ce,ht)=>{var Ft;return ht(Ae,Ce.prototype)?!0:((Ft=Ae.constructor)===null||Ft===void 0?void 0:Ft.name)===Ce.name},D=Ae=>{const Ce=typeof Ae;return Ae===null?"null":Ce==="object"&&Array.isArray(Ae)?"array":Ce==="object"&&C(Ae,String,(ht,Ft)=>Ft.isPrototypeOf(ht))?"string":Ce},N=Ae=>Ce=>D(Ce)===Ae,W=N("string"),Y=N("object"),de=N("array"),Q=Ae=>Ae==null,Te=Ae=>!Q(Ae);class ct{constructor(Ce,ht){this.tag=Ce,this.value=ht}static some(Ce){return new ct(!0,Ce)}static none(){return ct.singletonNone}fold(Ce,ht){return this.tag?ht(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?ct.some(Ce(this.value)):ct.none()}bind(Ce){return this.tag?Ce(this.value):ct.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:ct.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce??"Called getOrDie on None")}static from(Ce){return Te(Ce)?ct.some(Ce):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const Xe=Array.prototype.push,wt=(Ae,Ce)=>{for(let ht=0,Ft=Ae.length;ht<Ft;ht++){const Yn=Ae[ht];Ce(Yn,ht)}},yt=Ae=>{const Ce=[];for(let ht=0,Ft=Ae.length;ht<Ft;++ht){if(!de(Ae[ht]))throw new Error("Arr.flatten item "+ht+" was not an array, input: "+Ae);Xe.apply(Ce,Ae[ht])}return Ce},Tt=Ae=>{let Ce=Ae;return{get:()=>Ce,set:Yn=>{Ce=Yn}}},_t=Object.keys,Lt=Object.hasOwnProperty,gt=(Ae,Ce)=>{const ht=_t(Ae);for(let Ft=0,Yn=ht.length;Ft<Yn;Ft++){const Co=ht[Ft],Bo=Ae[Co];Ce(Bo,Co)}},st=(Ae,Ce)=>Qe(Ae,Ce)?ct.from(Ae[Ce]):ct.none(),Qe=(Ae,Ce)=>Lt.call(Ae,Ce),ie=Ae=>Ce=>Ce.options.get(Ae),St=Ae=>{const Ce=Ae.options.register;Ce("audio_template_callback",{processor:"function"}),Ce("video_template_callback",{processor:"function"}),Ce("iframe_template_callback",{processor:"function"}),Ce("media_live_embeds",{processor:"boolean",default:!0}),Ce("media_filter_html",{processor:"boolean",default:!0}),Ce("media_url_resolver",{processor:"function"}),Ce("media_alt_source",{processor:"boolean",default:!0}),Ce("media_poster",{processor:"boolean",default:!0}),Ce("media_dimensions",{processor:"boolean",default:!0})},Wn=ie("audio_template_callback"),vt=ie("video_template_callback"),J=ie("iframe_template_callback"),Yt=ie("media_live_embeds"),On=ie("media_filter_html"),gn=ie("media_url_resolver"),rt=ie("media_alt_source"),we=ie("media_poster"),Ro=ie("media_dimensions");var Ve=tinymce.util.Tools.resolve("tinymce.util.Tools"),je=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=tinymce.util.Tools.resolve("tinymce.html.DomParser");const it=je.DOM,ve=Ae=>Ae.replace(/px$/,""),Rt=Ae=>{const Ce=Ae.attr("style"),ht=Ce?it.parseStyle(Ce):{};return{type:"ephox-embed-iri",source:Ae.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:st(ht,"max-width").map(ve).getOr(""),height:st(ht,"max-height").map(ve).getOr("")}},It=(Ae,Ce)=>{let ht={};const Yn=T({validate:!1,forced_root_block:!1},Ce).parse(Ae);for(let Co=Yn;Co;Co=Co.walk())if(Co.type===1){const Bo=Co.name;if(Co.attr("data-ephox-embed-iri")){ht=Rt(Co);break}else!ht.source&&Bo==="param"&&(ht.source=Co.attr("movie")),(Bo==="iframe"||Bo==="object"||Bo==="embed"||Bo==="video"||Bo==="audio")&&(ht.type||(ht.type=Bo),ht=Ve.extend(Co.attributes.map,ht)),Bo==="source"&&(ht.source?ht.altsource||(ht.altsource=Co.attr("src")):ht.source=Co.attr("src")),Bo==="img"&&!ht.poster&&(ht.poster=Co.attr("src"))}return ht.source=ht.source||ht.src||"",ht.altsource=ht.altsource||"",ht.poster=ht.poster||"",ht},_e=Ae=>{var Ce;const ht={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ft=(Ce=Ae.toLowerCase().split(".").pop())!==null&&Ce!==void 0?Ce:"";return st(ht,Ft).getOr("")};var Dt=tinymce.util.Tools.resolve("tinymce.html.Node"),An=tinymce.util.Tools.resolve("tinymce.html.Serializer");const nt=(Ae,Ce={})=>T({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Ce},Ae),rn=je.DOM,Ne=Ae=>/^[0-9.]+$/.test(Ae)?Ae+"px":Ae,dt=(Ae,Ce)=>{const ht=Ce.attr("style"),Ft=ht?rn.parseStyle(ht):{};Te(Ae.width)&&(Ft["max-width"]=Ne(Ae.width)),Te(Ae.height)&&(Ft["max-height"]=Ne(Ae.height)),Ce.attr("style",rn.serializeStyle(Ft))},V=["source","altsource"],Ao=(Ae,Ce,ht,Ft)=>{let Yn=0,Co=0;const Bo=nt(Ft);Bo.addNodeFilter("source",Le=>Yn=Le.length);const ur=Bo.parse(Ae);for(let Le=ur;Le;Le=Le.walk())if(Le.type===1){const Fo=Le.name;if(Le.attr("data-ephox-embed-iri")){dt(Ce,Le);break}else{switch(Fo){case"video":case"object":case"embed":case"img":case"iframe":Ce.height!==void 0&&Ce.width!==void 0&&(Le.attr("width",Ce.width),Le.attr("height",Ce.height));break}if(ht)switch(Fo){case"video":Le.attr("poster",Ce.poster),Le.attr("src",null);for(let Be=Yn;Be<2;Be++)if(Ce[V[Be]]){const qt=new Dt("source",1);qt.attr("src",Ce[V[Be]]),qt.attr("type",Ce[V[Be]+"mime"]||null),Le.append(qt)}break;case"iframe":Le.attr("src",Ce.source);break;case"object":const Re=Le.getAll("img").length>0;if(Ce.poster&&!Re){Le.attr("src",Ce.poster);const Be=new Dt("img",1);Be.attr("src",Ce.poster),Be.attr("width",Ce.width),Be.attr("height",Ce.height),Le.append(Be)}break;case"source":if(Co<2&&(Le.attr("src",Ce[V[Co]]),Le.attr("type",Ce[V[Co]+"mime"]||null),!Ce[V[Co]])){Le.remove();continue}Co++;break;case"img":Ce.poster||Le.remove();break}}}return An({},Ft).serialize(ur)},Ct=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],jt=Ae=>{const Ce=Ae.match(/^(https?:\/\/|www\.)(.+)$/i);return Ce&&Ce.length>1?Ce[1]==="www."?"https://":Ce[1]:"https://"},tt=(Ae,Ce)=>{const ht=jt(Ce),Ft=Ae.regex.exec(Ce);let Yn=ht+Ae.url;if(Te(Ft))for(let Co=0;Co<Ft.length;Co++)Yn=Yn.replace("$"+Co,()=>Ft[Co]?Ft[Co]:"");return Yn.replace(/\?$/,"")},re=Ae=>{const Ce=Ct.filter(ht=>ht.regex.test(Ae));return Ce.length>0?Ve.extend({},Ce[0],{url:tt(Ce[0],Ae)}):null},I=(Ae,Ce)=>{if(Ce)return Ce(Ae);{const ht=Ae.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Ae.source+'" width="'+Ae.width+'" height="'+Ae.height+'"'+ht+"></iframe>"}},G=Ae=>{let Ce='<object data="'+Ae.source+'" width="'+Ae.width+'" height="'+Ae.height+'" type="application/x-shockwave-flash">';return Ae.poster&&(Ce+='<img src="'+Ae.poster+'" width="'+Ae.width+'" height="'+Ae.height+'" />'),Ce+="</object>",Ce},le=(Ae,Ce)=>Ce?Ce(Ae):'<audio controls="controls" src="'+Ae.source+'">'+(Ae.altsource?`
<source src="`+Ae.altsource+'"'+(Ae.altsourcemime?' type="'+Ae.altsourcemime+'"':"")+` />
`:"")+"</audio>",L=(Ae,Ce)=>Ce?Ce(Ae):'<video width="'+Ae.width+'" height="'+Ae.height+'"'+(Ae.poster?' poster="'+Ae.poster+'"':"")+` controls="controls">
<source src="`+Ae.source+'"'+(Ae.sourcemime?' type="'+Ae.sourcemime+'"':"")+` />
`+(Ae.altsource?'<source src="'+Ae.altsource+'"'+(Ae.altsourcemime?' type="'+Ae.altsourcemime+'"':"")+` />
`:"")+"</video>",ye=(Ae,Ce)=>{var ht;const Ft=Ve.extend({},Ce);if(!Ft.source&&(Ve.extend(Ft,It((ht=Ft.embed)!==null&&ht!==void 0?ht:"",Ae.schema)),!Ft.source))return"";Ft.altsource||(Ft.altsource=""),Ft.poster||(Ft.poster=""),Ft.source=Ae.convertURL(Ft.source,"source"),Ft.altsource=Ae.convertURL(Ft.altsource,"source"),Ft.sourcemime=_e(Ft.source),Ft.altsourcemime=_e(Ft.altsource),Ft.poster=Ae.convertURL(Ft.poster,"poster");const Yn=re(Ft.source);if(Yn&&(Ft.source=Yn.url,Ft.type=Yn.type,Ft.allowfullscreen=Yn.allowFullscreen,Ft.width=Ft.width||String(Yn.w),Ft.height=Ft.height||String(Yn.h)),Ft.embed)return Ao(Ft.embed,Ft,!0,Ae.schema);{const Co=Wn(Ae),Bo=vt(Ae),ur=J(Ae);return Ft.width=Ft.width||"300",Ft.height=Ft.height||"150",Ve.each(Ft,(Le,Fo)=>{Ft[Fo]=Ae.dom.encode(""+Le)}),Ft.type==="iframe"?I(Ft,ur):Ft.sourcemime==="application/x-shockwave-flash"?G(Ft):Ft.sourcemime.indexOf("audio")!==-1?le(Ft,Co):L(Ft,Bo)}},He=Ae=>Ae.hasAttribute("data-mce-object")||Ae.hasAttribute("data-ephox-embed-iri"),ke=Ae=>{Ae.on("mousedown",Ce=>{const ht=Ae.dom.getParent(Ce.target,".mce-preview-object");ht&&Ae.dom.getAttrib(ht,"data-mce-selected")==="2"&&Ce.stopImmediatePropagation()}),Ae.on("click keyup touchend",()=>{const Ce=Ae.selection.getNode();Ce&&Ae.dom.hasClass(Ce,"mce-preview-object")&&Ae.dom.getAttrib(Ce,"data-mce-selected")&&Ce.setAttribute("data-mce-selected","2")}),Ae.on("ObjectResized",Ce=>{const ht=Ce.target;if(ht.getAttribute("data-mce-object")){let Ft=ht.getAttribute("data-mce-html");Ft&&(Ft=unescape(Ft),ht.setAttribute("data-mce-html",escape(Ao(Ft,{width:String(Ce.width),height:String(Ce.height)},!1,Ae.schema))))}})},lt={},Je=(Ae,Ce,ht)=>new Promise((Ft,Yn)=>{const Co=Bo=>(Bo.html&&(lt[Ae.source]=Bo),Ft({url:Ae.source,html:Bo.html?Bo.html:Ce(Ae)}));lt[Ae.source]?Co(lt[Ae.source]):ht({url:Ae.source}).then(Co).catch(Yn)}),cn=(Ae,Ce)=>Promise.resolve({html:Ce(Ae),url:Ae.source}),Wt=Ae=>Ce=>ye(Ae,Ce),wn=(Ae,Ce)=>{const ht=gn(Ae);return ht?Je(Ce,Wt(Ae),ht):cn(Ce,Wt(Ae))},ot=Ae=>Qe(lt,Ae),mt=(Ae,Ce)=>st(Ce,Ae).bind(ht=>st(ht,"meta")),Xt=(Ae,Ce,ht)=>Ft=>{const Yn=()=>st(Ae,Ft),Co=()=>st(Ce,Ft),Bo=Fo=>st(Fo,"value").bind(Re=>Re.length>0?ct.some(Re):ct.none()),ur=()=>Yn().bind(Fo=>Y(Fo)?Bo(Fo).orThunk(Co):Co().orThunk(()=>ct.from(Fo))),Le=()=>Co().orThunk(()=>Yn().bind(Fo=>Y(Fo)?Bo(Fo):ct.from(Fo)));return{[Ft]:(Ft===ht?ur():Le()).getOr("")}},sn=(Ae,Ce)=>{const ht={};return st(Ae,"dimensions").each(Ft=>{wt(["width","height"],Yn=>{st(Ce,Yn).orThunk(()=>st(Ft,Yn)).each(Co=>ht[Yn]=Co)})}),ht},lo=(Ae,Ce)=>{const ht=Ce&&Ce!=="dimensions"?mt(Ce,Ae).getOr({}):{},Ft=Xt(Ae,ht,Ce);return{...Ft("source"),...Ft("altsource"),...Ft("poster"),...Ft("embed"),...sn(Ae,ht)}},po=Ae=>{const Ce={...Ae,source:{value:st(Ae,"source").getOr("")},altsource:{value:st(Ae,"altsource").getOr("")},poster:{value:st(Ae,"poster").getOr("")}};return wt(["width","height"],ht=>{st(Ae,ht).each(Ft=>{const Yn=Ce.dimensions||{};Yn[ht]=Ft,Ce.dimensions=Yn})}),Ce},ro=Ae=>Ce=>{const ht=Ce&&Ce.msg?"Media embed handler error: "+Ce.msg:"Media embed handler threw unknown error.";Ae.notificationManager.open({type:"error",text:ht})},Ds=Ae=>{const Ce=Ae.selection.getNode(),ht=He(Ce)?Ae.serializer.serialize(Ce,{selection:!0}):"",Ft=It(ht,Ae.schema),Co=(()=>{if(Lo(Ft.source,Ft.type)){const Bo=Ae.dom.getRect(Ce);return{width:Bo.w.toString().replace(/px$/,""),height:Bo.h.toString().replace(/px$/,"")}}else return{}})();return{embed:ht,...Ft,...Co}},to=(Ae,Ce)=>ht=>{if(W(ht.url)&&ht.url.trim().length>0){const Ft=ht.html,Co={...It(Ft,Ce.schema),source:ht.url,embed:Ft};Ae.setData(po(Co))}},Qo=(Ae,Ce)=>{const ht=Ae.dom.select("*[data-mce-object]");for(let Ft=0;Ft<Ce.length;Ft++)for(let Yn=ht.length-1;Yn>=0;Yn--)Ce[Ft]===ht[Yn]&&ht.splice(Yn,1);Ae.selection.select(ht[0])},ss=(Ae,Ce)=>{const ht=Ae.dom.select("*[data-mce-object]");Ae.insertContent(Ce),Qo(Ae,ht),Ae.nodeChanged()},Lo=(Ae,Ce)=>Te(Ce)&&Ce==="ephox-embed-iri"&&Te(re(Ae)),ir=(Ae,Ce)=>((Ft,Yn)=>Ft.width!==Yn.width||Ft.height!==Yn.height)(Ae,Ce)&&Lo(Ce.source,Ae.type),xo=(Ae,Ce,ht)=>{var Ft;Ce.embed=ir(Ae,Ce)&&Ro(ht)?ye(ht,{...Ce,embed:""}):Ao((Ft=Ce.embed)!==null&&Ft!==void 0?Ft:"",Ce,!1,ht.schema),Ce.embed&&(Ae.source===Ce.source||ot(Ce.source))?ss(ht,Ce.embed):wn(ht,Ce).then(Yn=>{ss(ht,Yn.html)}).catch(ro(ht))},zr=Ae=>{const Ce=Ds(Ae),ht=Tt(Ce),Ft=po(Ce),Yn=(zn,no)=>{const bo=lo(no.getData(),"source");zn.source!==bo.source&&(to(Gn,Ae)({url:bo.source,html:""}),wn(Ae,bo).then(to(Gn,Ae)).catch(ro(Ae)))},Co=zn=>{var no;const bo=lo(zn.getData()),hs=It((no=bo.embed)!==null&&no!==void 0?no:"",Ae.schema);zn.setData(po(hs))},Bo=(zn,no,bo)=>{const hs=lo(zn.getData(),no),As=ir(bo,hs)&&Ro(Ae)?{...hs,embed:""}:hs,Ls=ye(Ae,As);zn.setData(po({...As,embed:Ls}))},ur=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Le=Ro(Ae)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Fo={title:"General",name:"general",items:yt([ur,Le])},Be={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},qt=[];rt(Ae)&&qt.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),we(Ae)&&qt.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const tn={title:"Advanced",name:"advanced",items:qt},Dn=[Fo,Be];qt.length>0&&Dn.push(tn);const Zn={type:"tabpanel",tabs:Dn},Gn=Ae.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Zn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:zn=>{const no=lo(zn.getData());xo(ht.get(),no,Ae),zn.close()},onChange:(zn,no)=>{switch(no.name){case"source":Yn(ht.get(),zn);break;case"embed":Co(zn);break;case"dimensions":case"altsource":case"poster":Bo(zn,no.name,ht.get());break}ht.set(lo(zn.getData()))},initialData:Ft})},on=Ae=>({showDialog:()=>{zr(Ae)}}),Zo=Ae=>{const Ce=()=>{zr(Ae)};Ae.addCommand("mceMedia",Ce)},gr=(Ae,Ce,ht)=>Ae.length>=Ce.length&&Ae.substr(ht,ht+Ce.length)===Ce,tr=(Ae,Ce)=>gr(Ae,Ce,0);var Rr=tinymce.util.Tools.resolve("tinymce.Env");const _r=Ae=>{const Ce=Ae.name;return Ce==="iframe"||Ce==="video"||Ce==="audio"},ys=(Ae,Ce,ht,Ft=null)=>{const Yn=Ae.attr(ht);return Te(Yn)?Yn:Qe(Ce,ht)?null:Ft},ea=(Ae,Ce,ht)=>{const Ft=Ce.name==="img"||Ae.name==="video",Yn=Ft?"300":null,Co=Ae.name==="audio"?"30":"150",Bo=Ft?Co:null;Ce.attr({width:ys(Ae,ht,"width",Yn),height:ys(Ae,ht,"height",Bo)})},Gr=(Ae,Ce,ht,Ft)=>{const Yn=nt(Ae.schema).parse(Ft,{context:Ce});for(;Yn.firstChild;)ht.append(Yn.firstChild)},bs=(Ae,Ce)=>{const ht=Ce.name,Ft=new Dt("img",1);return Ns(Ae,Ce,Ft),ea(Ce,Ft,{}),Ft.attr({style:Ce.attr("style"),src:Rr.transparentSrc,"data-mce-object":ht,class:"mce-object mce-object-"+ht}),Ft},Qn=(Ae,Ce)=>{var ht;const Ft=Ce.name,Yn=new Dt("span",1);Yn.attr({contentEditable:"false",style:Ce.attr("style"),"data-mce-object":Ft,class:"mce-preview-object mce-object-"+Ft}),Ns(Ae,Ce,Yn);const Co=Ae.dom.parseStyle((ht=Ce.attr("style"))!==null&&ht!==void 0?ht:""),Bo=new Dt(Ft,1);if(ea(Ce,Bo,Co),Bo.attr({src:Ce.attr("src"),style:Ce.attr("style"),class:Ce.attr("class")}),Ft==="iframe")Bo.attr({allowfullscreen:Ce.attr("allowfullscreen"),frameborder:"0",sandbox:Ce.attr("sandbox"),referrerpolicy:Ce.attr("referrerpolicy")});else{wt(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Re=>{Bo.attr(Re,Ce.attr(Re))});const Fo=Yn.attr("data-mce-html");Te(Fo)&&Gr(Ae,Ft,Bo,unescape(Fo))}const ur=new Dt("span",1);return ur.attr("class","mce-shim"),Yn.append(Bo),Yn.append(ur),Yn},Ns=(Ae,Ce,ht)=>{var Ft;const Yn=(Ft=Ce.attributes)!==null&&Ft!==void 0?Ft:[];let Co=Yn.length;for(;Co--;){const Fo=Yn[Co].name;let Re=Yn[Co].value;Fo!=="width"&&Fo!=="height"&&Fo!=="style"&&!tr(Fo,"data-mce-")&&((Fo==="data"||Fo==="src")&&(Re=Ae.convertURL(Re,Fo)),ht.attr("data-mce-p-"+Fo,Re))}const Bo=An({inner:!0},Ae.schema),ur=new Dt("div",1);wt(Ce.children(),Fo=>ur.append(Fo));const Le=Bo.serialize(ur);Le&&(ht.attr("data-mce-html",escape(Le)),ht.empty())},Ke=Ae=>{const Ce=Ae.attr("class");return W(Ce)&&/\btiny-pageembed\b/.test(Ce)},xt=Ae=>{let Ce=Ae;for(;Ce=Ce.parent;)if(Ce.attr("data-ephox-embed-iri")||Ke(Ce))return!0;return!1},xn=Ae=>Ce=>{let ht=Ce.length,Ft;for(;ht--;)Ft=Ce[ht],Ft.parent&&(Ft.parent.attr("data-mce-object")||(_r(Ft)&&Yt(Ae)?xt(Ft)||Ft.replace(Qn(Ae,Ft)):xt(Ft)||Ft.replace(bs(Ae,Ft))))},Bn=(Ae,Ce,ht)=>{const Ft=Ae.options.get,Yn=Ft("xss_sanitization"),Co=On(Ae);return nt(Ae.schema,{sanitize:Yn,validate:Co}).parse(ht,{context:Ce})},Ho=Ae=>{Ae.on("PreInit",()=>{const{schema:Ce,serializer:ht,parser:Ft}=Ae,Yn=Ce.getBoolAttrs();wt("webkitallowfullscreen mozallowfullscreen".split(" "),Co=>{Yn[Co]={}}),gt({embed:["wmode"]},(Co,Bo)=>{const ur=Ce.getElementRule(Bo);ur&&wt(Co,Le=>{ur.attributes[Le]={},ur.attributesOrder.push(Le)})}),Ft.addNodeFilter("iframe,video,audio,object,embed",xn(Ae)),ht.addAttributeFilter("data-mce-object",(Co,Bo)=>{var ur;let Le=Co.length;for(;Le--;){const Fo=Co[Le];if(!Fo.parent)continue;const Re=Fo.attr(Bo),Be=new Dt(Re,1);if(Re!=="audio"){const Zn=Fo.attr("class");Zn&&Zn.indexOf("mce-preview-object")!==-1&&Fo.firstChild?Be.attr({width:Fo.firstChild.attr("width"),height:Fo.firstChild.attr("height")}):Be.attr({width:Fo.attr("width"),height:Fo.attr("height")})}Be.attr({style:Fo.attr("style")});const qt=(ur=Fo.attributes)!==null&&ur!==void 0?ur:[];let tn=qt.length;for(;tn--;){const Zn=qt[tn].name;Zn.indexOf("data-mce-p-")===0&&Be.attr(Zn.substr(11),qt[tn].value)}const Dn=Fo.attr("data-mce-html");if(Dn){const Zn=Bn(Ae,Re,unescape(Dn));wt(Zn.children(),Gn=>Be.append(Gn))}Fo.replace(Be)}})}),Ae.on("SetContent",()=>{const Ce=Ae.dom;wt(Ce.select("span.mce-preview-object"),ht=>{Ce.select("span.mce-shim",ht).length===0&&Ce.add(ht,"span",{class:"mce-shim"})})})},as=Ae=>{Ae.on("ResolveName",Ce=>{let ht;Ce.target.nodeType===1&&(ht=Ce.target.getAttribute("data-mce-object"))&&(Ce.name=ht)})},pr=Ae=>Ce=>{const ht=()=>{Ce.setEnabled(Ae.selection.isEditable())};return Ae.on("NodeChange",ht),ht(),()=>{Ae.off("NodeChange",ht)}},Sr=Ae=>{const Ce=()=>Ae.execCommand("mceMedia");Ae.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Ce,onSetup:ht=>{const Ft=Ae.selection;ht.setActive(He(Ft.getNode()));const Yn=Ft.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ht.setActive).unbind,Co=pr(Ae)(ht);return()=>{Yn(),Co()}}}),Ae.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Ce,onSetup:pr(Ae)})};var lr=()=>{h.add("media",Ae=>(St(Ae),Zo(Ae),Sr(Ae),as(Ae),Ho(Ae),ke(Ae),on(Ae)))};lr()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=T=>T==null,D=T=>!C(T),N=()=>{},W=T=>()=>T;class Y{constructor(it,ve){this.tag=it,this.value=ve}static some(it){return new Y(!0,it)}static none(){return Y.singletonNone}fold(it,ve){return this.tag?ve(this.value):it()}isSome(){return this.tag}isNone(){return!this.tag}map(it){return this.tag?Y.some(it(this.value)):Y.none()}bind(it){return this.tag?it(this.value):Y.none()}exists(it){return this.tag&&it(this.value)}forall(it){return!this.tag||it(this.value)}filter(it){return!this.tag||it(this.value)?this:Y.none()}getOr(it){return this.tag?this.value:it}or(it){return this.tag?this:it}getOrThunk(it){return this.tag?this.value:it()}orThunk(it){return this.tag?this:it()}getOrDie(it){if(this.tag)return this.value;throw new Error(it??"Called getOrDie on None")}static from(it){return D(it)?Y.some(it):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(it){this.tag&&it(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const de=(T,it)=>it>=0&&it<T.length?Y.some(T[it]):Y.none(),Q=T=>de(T,0);var Te=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const ct=typeof window<"u"?window:Function("return this;")(),Xe=function(T,it,ve){const Rt=window.Prism;window.Prism={manual:!0};var It=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},_e=function(Dt){var An=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,nt=0,rn={},Ne={manual:Dt.Prism&&Dt.Prism.manual,disableWorkerMessageHandler:Dt.Prism&&Dt.Prism.disableWorkerMessageHandler,util:{encode:function L(ye){return ye instanceof dt?new dt(ye.type,L(ye.content),ye.alias):Array.isArray(ye)?ye.map(L):ye.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(L){return Object.prototype.toString.call(L).slice(8,-1)},objId:function(L){return L.__id||Object.defineProperty(L,"__id",{value:++nt}),L.__id},clone:function L(ye,He){He=He||{};var ke,lt;switch(Ne.util.type(ye)){case"Object":if(lt=Ne.util.objId(ye),He[lt])return He[lt];ke={},He[lt]=ke;for(var Je in ye)ye.hasOwnProperty(Je)&&(ke[Je]=L(ye[Je],He));return ke;case"Array":return lt=Ne.util.objId(ye),He[lt]?He[lt]:(ke=[],He[lt]=ke,ye.forEach(function(cn,Wt){ke[Wt]=L(cn,He)}),ke);default:return ye}},getLanguage:function(L){for(;L;){var ye=An.exec(L.className);if(ye)return ye[1].toLowerCase();L=L.parentElement}return"none"},setLanguage:function(L,ye){L.className=L.className.replace(RegExp(An,"gi"),""),L.classList.add("language-"+ye)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(ke){var L=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(ke.stack)||[])[1];if(L){var ye=document.getElementsByTagName("script");for(var He in ye)if(ye[He].src==L)return ye[He]}return null}},isActive:function(L,ye,He){for(var ke="no-"+ye;L;){var lt=L.classList;if(lt.contains(ye))return!0;if(lt.contains(ke))return!1;L=L.parentElement}return!!He}},languages:{plain:rn,plaintext:rn,text:rn,txt:rn,extend:function(L,ye){var He=Ne.util.clone(Ne.languages[L]);for(var ke in ye)He[ke]=ye[ke];return He},insertBefore:function(L,ye,He,ke){ke=ke||Ne.languages;var lt=ke[L],Je={};for(var cn in lt)if(lt.hasOwnProperty(cn)){if(cn==ye)for(var Wt in He)He.hasOwnProperty(Wt)&&(Je[Wt]=He[Wt]);He.hasOwnProperty(cn)||(Je[cn]=lt[cn])}var wn=ke[L];return ke[L]=Je,Ne.languages.DFS(Ne.languages,function(ot,mt){mt===wn&&ot!=L&&(this[ot]=Je)}),Je},DFS:function L(ye,He,ke,lt){lt=lt||{};var Je=Ne.util.objId;for(var cn in ye)if(ye.hasOwnProperty(cn)){He.call(ye,cn,ye[cn],ke||cn);var Wt=ye[cn],wn=Ne.util.type(Wt);wn==="Object"&&!lt[Je(Wt)]?(lt[Je(Wt)]=!0,L(Wt,He,null,lt)):wn==="Array"&&!lt[Je(Wt)]&&(lt[Je(Wt)]=!0,L(Wt,He,cn,lt))}}},plugins:{},highlightAll:function(L,ye){Ne.highlightAllUnder(document,L,ye)},highlightAllUnder:function(L,ye,He){var ke={callback:He,container:L,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};Ne.hooks.run("before-highlightall",ke),ke.elements=Array.prototype.slice.apply(ke.container.querySelectorAll(ke.selector)),Ne.hooks.run("before-all-elements-highlight",ke);for(var lt=0,Je;Je=ke.elements[lt++];)Ne.highlightElement(Je,ye===!0,ke.callback)},highlightElement:function(L,ye,He){var ke=Ne.util.getLanguage(L),lt=Ne.languages[ke];Ne.util.setLanguage(L,ke);var Je=L.parentElement;Je&&Je.nodeName.toLowerCase()==="pre"&&Ne.util.setLanguage(Je,ke);var cn=L.textContent,Wt={element:L,language:ke,grammar:lt,code:cn};function wn(mt){Wt.highlightedCode=mt,Ne.hooks.run("before-insert",Wt),Wt.element.innerHTML=Wt.highlightedCode,Ne.hooks.run("after-highlight",Wt),Ne.hooks.run("complete",Wt),He&&He.call(Wt.element)}if(Ne.hooks.run("before-sanity-check",Wt),Je=Wt.element.parentElement,Je&&Je.nodeName.toLowerCase()==="pre"&&!Je.hasAttribute("tabindex")&&Je.setAttribute("tabindex","0"),!Wt.code){Ne.hooks.run("complete",Wt),He&&He.call(Wt.element);return}if(Ne.hooks.run("before-highlight",Wt),!Wt.grammar){wn(Ne.util.encode(Wt.code));return}if(ye&&Dt.Worker){var ot=new Worker(Ne.filename);ot.onmessage=function(mt){wn(mt.data)},ot.postMessage(JSON.stringify({language:Wt.language,code:Wt.code,immediateClose:!0}))}else wn(Ne.highlight(Wt.code,Wt.grammar,Wt.language))},highlight:function(L,ye,He){var ke={code:L,grammar:ye,language:He};if(Ne.hooks.run("before-tokenize",ke),!ke.grammar)throw new Error('The language "'+ke.language+'" has no grammar.');return ke.tokens=Ne.tokenize(ke.code,ke.grammar),Ne.hooks.run("after-tokenize",ke),dt.stringify(Ne.util.encode(ke.tokens),ke.language)},tokenize:function(L,ye){var He=ye.rest;if(He){for(var ke in He)ye[ke]=He[ke];delete ye.rest}var lt=new Ct;return jt(lt,lt.head,L),Ao(L,lt,ye,lt.head,0),re(lt)},hooks:{all:{},add:function(L,ye){var He=Ne.hooks.all;He[L]=He[L]||[],He[L].push(ye)},run:function(L,ye){var He=Ne.hooks.all[L];if(!(!He||!He.length))for(var ke=0,lt;lt=He[ke++];)lt(ye)}},Token:dt};Dt.Prism=Ne;function dt(L,ye,He,ke){this.type=L,this.content=ye,this.alias=He,this.length=(ke||"").length|0}dt.stringify=function L(ye,He){if(typeof ye=="string")return ye;if(Array.isArray(ye)){var ke="";return ye.forEach(function(wn){ke+=L(wn,He)}),ke}var lt={type:ye.type,content:L(ye.content,He),tag:"span",classes:["token",ye.type],attributes:{},language:He},Je=ye.alias;Je&&(Array.isArray(Je)?Array.prototype.push.apply(lt.classes,Je):lt.classes.push(Je)),Ne.hooks.run("wrap",lt);var cn="";for(var Wt in lt.attributes)cn+=" "+Wt+'="'+(lt.attributes[Wt]||"").replace(/"/g,"&quot;")+'"';return"<"+lt.tag+' class="'+lt.classes.join(" ")+'"'+cn+">"+lt.content+"</"+lt.tag+">"};function V(L,ye,He,ke){L.lastIndex=ye;var lt=L.exec(He);if(lt&&ke&&lt[1]){var Je=lt[1].length;lt.index+=Je,lt[0]=lt[0].slice(Je)}return lt}function Ao(L,ye,He,ke,lt,Je){for(var cn in He)if(!(!He.hasOwnProperty(cn)||!He[cn])){var Wt=He[cn];Wt=Array.isArray(Wt)?Wt:[Wt];for(var wn=0;wn<Wt.length;++wn){if(Je&&Je.cause==cn+","+wn)return;var ot=Wt[wn],mt=ot.inside,Xt=!!ot.lookbehind,sn=!!ot.greedy,lo=ot.alias;if(sn&&!ot.pattern.global){var po=ot.pattern.toString().match(/[imsuy]*$/)[0];ot.pattern=RegExp(ot.pattern.source,po+"g")}for(var ro=ot.pattern||ot,Ds=ke.next,to=lt;Ds!==ye.tail&&!(Je&&to>=Je.reach);to+=Ds.value.length,Ds=Ds.next){var Qo=Ds.value;if(ye.length>L.length)return;if(!(Qo instanceof dt)){var ss=1,Lo;if(sn){if(Lo=V(ro,to,L,Xt),!Lo||Lo.index>=L.length)break;var on=Lo.index,ir=Lo.index+Lo[0].length,xo=to;for(xo+=Ds.value.length;on>=xo;)Ds=Ds.next,xo+=Ds.value.length;if(xo-=Ds.value.length,to=xo,Ds.value instanceof dt)continue;for(var zr=Ds;zr!==ye.tail&&(xo<ir||typeof zr.value=="string");zr=zr.next)ss++,xo+=zr.value.length;ss--,Qo=L.slice(to,xo),Lo.index-=to}else if(Lo=V(ro,0,Qo,Xt),!Lo)continue;var on=Lo.index,Zo=Lo[0],gr=Qo.slice(0,on),tr=Qo.slice(on+Zo.length),Rr=to+Qo.length;Je&&Rr>Je.reach&&(Je.reach=Rr);var _r=Ds.prev;gr&&(_r=jt(ye,_r,gr),to+=gr.length),tt(ye,_r,ss);var ys=new dt(cn,mt?Ne.tokenize(Zo,mt):Zo,lo,Zo);if(Ds=jt(ye,_r,ys),tr&&jt(ye,Ds,tr),ss>1){var ea={cause:cn+","+wn,reach:Rr};Ao(L,ye,He,Ds.prev,to,ea),Je&&ea.reach>Je.reach&&(Je.reach=ea.reach)}}}}}}function Ct(){var L={value:null,prev:null,next:null},ye={value:null,prev:L,next:null};L.next=ye,this.head=L,this.tail=ye,this.length=0}function jt(L,ye,He){var ke=ye.next,lt={value:He,prev:ye,next:ke};return ye.next=lt,ke.prev=lt,L.length++,lt}function tt(L,ye,He){for(var ke=ye.next,lt=0;lt<He&&ke!==L.tail;lt++)ke=ke.next;ye.next=ke,ke.prev=ye,L.length-=lt}function re(L){for(var ye=[],He=L.head.next;He!==L.tail;)ye.push(He.value),He=He.next;return ye}if(!Dt.document)return Dt.addEventListener&&(Ne.disableWorkerMessageHandler||Dt.addEventListener("message",function(L){var ye=JSON.parse(L.data),He=ye.language,ke=ye.code,lt=ye.immediateClose;Dt.postMessage(Ne.highlight(ke,Ne.languages[He],He)),lt&&Dt.close()},!1)),Ne;var I=Ne.util.currentScript();I&&(Ne.filename=I.src,I.hasAttribute("data-manual")&&(Ne.manual=!0));function G(){Ne.manual||Ne.highlightAll()}if(!Ne.manual){var le=document.readyState;le==="loading"||le==="interactive"&&I&&I.defer?document.addEventListener("DOMContentLoaded",G):window.requestAnimationFrame?window.requestAnimationFrame(G):window.setTimeout(G,16)}return Ne}(It);return _e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Dt){function An(nt,rn){return"___"+nt.toUpperCase()+rn+"___"}Object.defineProperties(Dt.languages["markup-templating"]={},{buildPlaceholders:{value:function(nt,rn,Ne,dt){if(nt.language===rn){var V=nt.tokenStack=[];nt.code=nt.code.replace(Ne,function(Ao){if(typeof dt=="function"&&!dt(Ao))return Ao;for(var Ct=V.length,jt;nt.code.indexOf(jt=An(rn,Ct))!==-1;)++Ct;return V[Ct]=Ao,jt}),nt.grammar=Dt.languages.markup}}},tokenizePlaceholders:{value:function(nt,rn){if(nt.language!==rn||!nt.tokenStack)return;nt.grammar=Dt.languages[rn];var Ne=0,dt=Object.keys(nt.tokenStack);function V(Ao){for(var Ct=0;Ct<Ao.length&&!(Ne>=dt.length);Ct++){var jt=Ao[Ct];if(typeof jt=="string"||jt.content&&typeof jt.content=="string"){var tt=dt[Ne],re=nt.tokenStack[tt],I=typeof jt=="string"?jt:jt.content,G=An(rn,tt),le=I.indexOf(G);if(le>-1){++Ne;var L=I.substring(0,le),ye=new Dt.Token(rn,Dt.tokenize(re,nt.grammar),"language-"+rn,re),He=I.substring(le+G.length),ke=[];L&&ke.push.apply(ke,V([L])),ke.push(ye),He&&ke.push.apply(ke,V([He])),typeof jt=="string"?Ao.splice.apply(Ao,[Ct,1].concat(ke)):jt.content=ke}}else jt.content&&V(jt.content)}return Ao}V(nt.tokens)}}})}(_e),_e.languages.c=_e.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),_e.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),_e.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},_e.languages.c.string],char:_e.languages.c.char,comment:_e.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:_e.languages.c}}}}),_e.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete _e.languages.c.boolean,function(Dt){var An=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,nt=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return An.source});Dt.languages.cpp=Dt.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return An.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:An,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Dt.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return nt})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Dt.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Dt.languages.cpp}}}}),Dt.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Dt.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Dt.languages.extend("cpp",{})}}),Dt.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Dt.languages.cpp["base-clause"])}(_e),function(Dt){function An(Lo,ir){return Lo.replace(/<<(\d+)>>/g,function(xo,zr){return"(?:"+ir[+zr]+")"})}function nt(Lo,ir,xo){return RegExp(An(Lo,ir),"")}function rn(Lo,ir){for(var xo=0;xo<ir;xo++)Lo=Lo.replace(/<<self>>/g,function(){return"(?:"+Lo+")"});return Lo.replace(/<<self>>/g,"[^\\s\\S]")}var Ne={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function dt(Lo){return"\\b(?:"+Lo.trim().replace(/ /g,"|")+")\\b"}var V=dt(Ne.typeDeclaration),Ao=RegExp(dt(Ne.type+" "+Ne.typeDeclaration+" "+Ne.contextual+" "+Ne.other)),Ct=dt(Ne.typeDeclaration+" "+Ne.contextual+" "+Ne.other),jt=dt(Ne.type+" "+Ne.typeDeclaration+" "+Ne.other),tt=rn(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),re=rn(/\((?:[^()]|<<self>>)*\)/.source,2),I=/@?\b[A-Za-z_]\w*\b/.source,G=An(/<<0>>(?:\s*<<1>>)?/.source,[I,tt]),le=An(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[Ct,G]),L=/\[\s*(?:,\s*)*\]/.source,ye=An(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[le,L]),He=An(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[tt,re,L]),ke=An(/\(<<0>>+(?:,<<0>>+)+\)/.source,[He]),lt=An(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[ke,le,L]),Je={keyword:Ao,punctuation:/[<>()?,.:[\]]/},cn=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Wt=/"(?:\\.|[^\\"\r\n])*"/.source,wn=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Dt.languages.csharp=Dt.languages.extend("clike",{string:[{pattern:nt(/(^|[^$\\])<<0>>/.source,[wn]),lookbehind:!0,greedy:!0},{pattern:nt(/(^|[^@$\\])<<0>>/.source,[Wt]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:nt(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[le]),lookbehind:!0,inside:Je},{pattern:nt(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[I,lt]),lookbehind:!0,inside:Je},{pattern:nt(/(\busing\s+)<<0>>(?=\s*=)/.source,[I]),lookbehind:!0},{pattern:nt(/(\b<<0>>\s+)<<1>>/.source,[V,G]),lookbehind:!0,inside:Je},{pattern:nt(/(\bcatch\s*\(\s*)<<0>>/.source,[le]),lookbehind:!0,inside:Je},{pattern:nt(/(\bwhere\s+)<<0>>/.source,[I]),lookbehind:!0},{pattern:nt(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[ye]),lookbehind:!0,inside:Je},{pattern:nt(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[lt,jt,I]),inside:Je}],keyword:Ao,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Dt.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Dt.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:nt(/([(,]\s*)<<0>>(?=\s*:)/.source,[I]),lookbehind:!0,alias:"punctuation"}}),Dt.languages.insertBefore("csharp","class-name",{namespace:{pattern:nt(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[I]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:nt(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[re]),lookbehind:!0,alias:"class-name",inside:Je},"return-type":{pattern:nt(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[lt,le]),inside:Je,alias:"class-name"},"constructor-invocation":{pattern:nt(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[lt]),lookbehind:!0,inside:Je,alias:"class-name"},"generic-method":{pattern:nt(/<<0>>\s*<<1>>(?=\s*\()/.source,[I,tt]),inside:{function:nt(/^<<0>>/.source,[I]),generic:{pattern:RegExp(tt),alias:"class-name",inside:Je}}},"type-list":{pattern:nt(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[V,G,I,lt,Ao.source,re,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:nt(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[G,re]),lookbehind:!0,greedy:!0,inside:Dt.languages.csharp},keyword:Ao,"class-name":{pattern:RegExp(lt),greedy:!0,inside:Je},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var ot=Wt+"|"+cn,mt=An(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[ot]),Xt=rn(An(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[mt]),2),sn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,lo=An(/<<0>>(?:\s*\(<<1>>*\))?/.source,[le,Xt]);Dt.languages.insertBefore("csharp","class-name",{attribute:{pattern:nt(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[sn,lo]),lookbehind:!0,greedy:!0,inside:{target:{pattern:nt(/^<<0>>(?=\s*:)/.source,[sn]),alias:"keyword"},"attribute-arguments":{pattern:nt(/\(<<0>>*\)/.source,[Xt]),inside:Dt.languages.csharp},"class-name":{pattern:RegExp(le),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var po=/:[^}\r\n]+/.source,ro=rn(An(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[mt]),2),Ds=An(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[ro,po]),to=rn(An(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[ot]),2),Qo=An(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[to,po]);function ss(Lo,ir){return{interpolation:{pattern:nt(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[Lo]),lookbehind:!0,inside:{"format-string":{pattern:nt(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[ir,po]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Dt.languages.csharp}}},string:/[\s\S]+/}}Dt.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:nt(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Ds]),lookbehind:!0,greedy:!0,inside:ss(Ds,ro)},{pattern:nt(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[Qo]),lookbehind:!0,greedy:!0,inside:ss(Qo,to)}],char:{pattern:RegExp(cn),greedy:!0}}),Dt.languages.dotnet=Dt.languages.cs=Dt.languages.csharp}(_e),function(Dt){var An=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Dt.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+An.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+An.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+An.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+An.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:An,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Dt.languages.css.atrule.inside.rest=Dt.languages.css;var nt=Dt.languages.markup;nt&&(nt.tag.addInlined("style","css"),nt.tag.addAttribute("style","css"))}(_e),function(Dt){var An=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,nt=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,rn={pattern:RegExp(/(^|[^\w.])/.source+nt+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Dt.languages.java=Dt.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[rn,{pattern:RegExp(/(^|[^\w.])/.source+nt+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:rn.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+nt+/[A-Z]\w*\b/.source),lookbehind:!0,inside:rn.inside}],keyword:An,function:[Dt.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),Dt.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Dt.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":rn,keyword:An,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+nt+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:rn.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+nt+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:rn.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return An.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(_e),_e.languages.javascript=_e.languages.extend("clike",{"class-name":[_e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),_e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,_e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:_e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:_e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:_e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:_e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:_e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),_e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:_e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),_e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),_e.languages.markup&&(_e.languages.markup.tag.addInlined("script","javascript"),_e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),_e.languages.js=_e.languages.javascript,_e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},_e.languages.markup.tag.inside["attr-value"].inside.entity=_e.languages.markup.entity,_e.languages.markup.doctype.inside["internal-subset"].inside=_e.languages.markup,_e.hooks.add("wrap",function(Dt){Dt.type==="entity"&&(Dt.attributes.title=Dt.content.replace(/&amp;/,"&"))}),Object.defineProperty(_e.languages.markup.tag,"addInlined",{value:function(An,nt){var rn={};rn["language-"+nt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:_e.languages[nt]},rn.cdata=/^<!\[CDATA\[|\]\]>$/i;var Ne={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:rn}};Ne["language-"+nt]={pattern:/[\s\S]+/,inside:_e.languages[nt]};var dt={};dt[An]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return An}),"i"),lookbehind:!0,greedy:!0,inside:Ne},_e.languages.insertBefore("markup","cdata",dt)}}),Object.defineProperty(_e.languages.markup.tag,"addAttribute",{value:function(Dt,An){_e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Dt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[An,"language-"+An],inside:_e.languages[An]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),_e.languages.html=_e.languages.markup,_e.languages.mathml=_e.languages.markup,_e.languages.svg=_e.languages.markup,_e.languages.xml=_e.languages.extend("markup",{}),_e.languages.ssml=_e.languages.xml,_e.languages.atom=_e.languages.xml,_e.languages.rss=_e.languages.xml,function(Dt){var An=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,nt=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],rn=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,Ne=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,dt=/[{}\[\](),:;]/;Dt.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:An,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:nt,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:rn,operator:Ne,punctuation:dt};var V={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Dt.languages.php},Ao=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:V}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:V}}];Dt.languages.insertBefore("php","variable",{string:Ao,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:An,string:Ao,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:nt,number:rn,operator:Ne,punctuation:dt}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Dt.hooks.add("before-tokenize",function(Ct){if(/<\?/.test(Ct.code)){var jt=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Dt.languages["markup-templating"].buildPlaceholders(Ct,"php",jt)}}),Dt.hooks.add("after-tokenize",function(Ct){Dt.languages["markup-templating"].tokenizePlaceholders(Ct,"php")})}(_e),_e.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},_e.languages.python["string-interpolation"].inside.interpolation.inside.rest=_e.languages.python,_e.languages.py=_e.languages.python,function(Dt){Dt.languages.ruby=Dt.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Dt.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var An={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Dt.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Dt.languages.ruby.function;var nt="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",rn=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Dt.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+nt+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:An,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:An,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+rn),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+rn+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Dt.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+nt),greedy:!0,inside:{interpolation:An,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:An,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:An,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+nt),greedy:!0,inside:{interpolation:An,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:An,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Dt.languages.ruby.string,Dt.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Dt.languages.rb=Dt.languages.ruby}(_e),window.Prism=Rt,_e}(),wt=T=>it=>it.options.get(T),yt=T=>{const it=T.options.register;it("codesample_languages",{processor:"object[]"}),it("codesample_global_prismjs",{processor:"boolean",default:!1})},Tt=wt("codesample_languages"),_t=wt("codesample_global_prismjs"),Lt=T=>ct.Prism&&_t(T)?ct.Prism:Xe,gt=T=>D(T)&&T.nodeName==="PRE"&&T.className.indexOf("language-")!==-1,st=T=>{const it=T.selection?T.selection.getNode():null;return gt(it)?Y.some(it):Y.none()},Qe=(T,it,ve)=>{const Rt=T.dom;T.undoManager.transact(()=>{const It=st(T);return ve=Te.DOM.encode(ve),It.fold(()=>{T.insertContent('<pre id="__new" class="language-'+it+'">'+ve+"</pre>");const _e=Rt.select("#__new")[0];Rt.setAttrib(_e,"id",null),T.selection.select(_e)},_e=>{Rt.setAttrib(_e,"class","language-"+it),_e.innerHTML=ve,Lt(T).highlightElement(_e),T.selection.select(_e)})})},ie=T=>st(T).bind(ve=>Y.from(ve.textContent)).getOr(""),St=T=>{const it=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],ve=Tt(T);return ve||it},Wn=(T,it)=>st(T).fold(()=>it,Rt=>{const It=Rt.className.match(/language-(\w+)/);return It?It[1]:it}),vt=T=>{const it=St(T),ve=Q(it).fold(W(""),_e=>_e.value),Rt=Wn(T,ve),It=ie(T);T.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:it},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:Rt,code:It},onSubmit:_e=>{const Dt=_e.getData();Qe(T,Dt.language,Dt.code),_e.close()}})},J=T=>{T.addCommand("codesample",()=>{const it=T.selection.getNode();T.selection.isCollapsed()||gt(it)?vt(T):T.formatter.toggle("code")})},On=(T=>it=>it.replace(T,""))(/^\s+|\s+$/g);var gn=tinymce.util.Tools.resolve("tinymce.util.Tools");const rt=T=>{T.on("PreProcess",it=>{const ve=T.dom,Rt=ve.select("pre[contenteditable=false]",it.node);gn.each(gn.grep(Rt,gt),It=>{const _e=It.textContent;ve.setAttrib(It,"class",On(ve.getAttrib(It,"class"))),ve.setAttrib(It,"contentEditable",null),ve.setAttrib(It,"data-mce-highlighted",null);let Dt;for(;Dt=It.firstChild;)It.removeChild(Dt);const An=ve.add(It,"code");An.textContent=_e})}),T.on("SetContent",()=>{const it=T.dom,ve=gn.grep(it.select("pre"),Rt=>gt(Rt)&&it.getAttrib(Rt,"data-mce-highlighted")!=="true");ve.length&&T.undoManager.transact(()=>{gn.each(ve,Rt=>{var It;gn.each(it.select("br",Rt),_e=>{it.replace(T.getDoc().createTextNode(`
`),_e)}),Rt.innerHTML=it.encode((It=Rt.textContent)!==null&&It!==void 0?It:""),Lt(T).highlightElement(Rt),it.setAttrib(Rt,"data-mce-highlighted",!0),Rt.className=On(Rt.className)})})}),T.on("PreInit",()=>{T.parser.addNodeFilter("pre",it=>{var ve;for(let Rt=0,It=it.length;Rt<It;Rt++){const _e=it[Rt];((ve=_e.attr("class"))!==null&&ve!==void 0?ve:"").indexOf("language-")!==-1&&(_e.attr("contenteditable","false"),_e.attr("data-mce-highlighted","false"))}})})},we=(T,it=N)=>ve=>{const Rt=()=>{ve.setEnabled(T.selection.isEditable()),it(ve)};return T.on("NodeChange",Rt),Rt(),()=>{T.off("NodeChange",Rt)}},Ro=T=>{const it=T.selection.getStart();return T.dom.is(it,'pre[class*="language-"]')},Ve=T=>{const it=()=>T.execCommand("codesample");T.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:it,onSetup:we(T,ve=>{ve.setActive(Ro(T))})}),T.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:it,onSetup:we(T)})};var je=()=>{h.add("codesample",T=>{yt(T),rt(T),Ve(T),J(T),T.on("dblclick",it=>{gt(it.target)&&vt(T)})})};je()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(I,G)=>I.dispatch("insertCustomChar",{chr:G}),D=(I,G)=>{const le=C(I,G).chr;I.execCommand("mceInsertContent",!1,le)},N=(I,G,le)=>{var L;return le(I,G.prototype)?!0:((L=I.constructor)===null||L===void 0?void 0:L.name)===G.name},W=I=>{const G=typeof I;return I===null?"null":G==="object"&&Array.isArray(I)?"array":G==="object"&&N(I,String,(le,L)=>L.isPrototypeOf(le))?"string":G},Y=I=>G=>W(G)===I,de=I=>G=>typeof G===I,Q=I=>G=>I===G,Te=Y("array"),ct=Q(null),Xe=Q(void 0),wt=I=>I==null,yt=I=>!wt(I),Tt=de("function"),Lt=(I=>()=>I)(!1);class gt{constructor(G,le){this.tag=G,this.value=le}static some(G){return new gt(!0,G)}static none(){return gt.singletonNone}fold(G,le){return this.tag?le(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?gt.some(G(this.value)):gt.none()}bind(G){return this.tag?G(this.value):gt.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:gt.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G??"Called getOrDie on None")}static from(G){return yt(G)?gt.some(G):gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gt.singletonNone=new gt(!1);const st=Array.prototype.push,Qe=(I,G)=>{const le=I.length,L=new Array(le);for(let ye=0;ye<le;ye++){const He=I[ye];L[ye]=G(He,ye)}return L},ie=(I,G)=>{for(let le=0,L=I.length;le<L;le++){const ye=I[le];G(ye,le)}},St=(I,G,le)=>{for(let L=0,ye=I.length;L<ye;L++){const He=I[L];if(G(He,L))return gt.some(He);if(le(He,L))break}return gt.none()},Wn=(I,G)=>St(I,G,Lt),vt=I=>{const G=[];for(let le=0,L=I.length;le<L;++le){if(!Te(I[le]))throw new Error("Arr.flatten item "+le+" was not an array, input: "+I);st.apply(G,I[le])}return G},J=(I,G)=>vt(Qe(I,G));var Yt=tinymce.util.Tools.resolve("tinymce.util.Tools");const On=I=>G=>G.options.get(I),gn=I=>{const G=I.options.register,le=L=>Tt(L)||Te(L);G("charmap",{processor:le}),G("charmap_append",{processor:le})},rt=On("charmap"),we=On("charmap_append"),Ro=Yt.isArray,Ve="User Defined",je=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],T=I=>Yt.grep(I,G=>Ro(G)&&G.length===2),it=I=>Ro(I)?T(I):typeof I=="function"?I():[],ve=(I,G)=>{const le=rt(I);le&&(G=[{name:Ve,characters:it(le)}]);const L=we(I);if(L){const ye=Yt.grep(G,He=>He.name===Ve);return ye.length?(ye[0].characters=[...ye[0].characters,...it(L)],G):G.concat({name:Ve,characters:it(L)})}return G},Rt=I=>{const G=ve(I,je());return G.length>1?[{name:"All",characters:J(G,le=>le.characters)}].concat(G):G},It=I=>({getCharMap:()=>Rt(I),insertChar:L=>{D(I,L)}}),_e=I=>{let G=I;return{get:()=>G,set:ye=>{G=ye}}},Dt=(I,G)=>{let le=null;const L=()=>{ct(le)||(clearTimeout(le),le=null)};return{cancel:L,throttle:(...He)=>{L(),le=setTimeout(()=>{le=null,I.apply(null,He)},G)}}},An=(I,G,le=0,L)=>{const ye=I.indexOf(G,le);return ye!==-1?Xe(L)?!0:ye+G.length<=L:!1},nt=String.fromCodePoint,rn=(I,G,le)=>An(nt(I).toLowerCase(),le)?!0:An(G.toLowerCase(),le)||An(G.toLowerCase().replace(/\s+/g,""),le),Ne=(I,G)=>{const le=[],L=G.toLowerCase();return ie(I.characters,ye=>{rn(ye[0],ye[1],L)&&le.push(ye)}),Qe(le,ye=>({text:ye[1],value:nt(ye[0]),icon:nt(ye[0])}))},dt="pattern",V=(I,G)=>{const le=()=>[{label:"Search",type:"input",name:dt},{type:"collection",name:"results"}],L=()=>Qe(G,Xt=>({title:Xt.name,name:Xt.name,items:le()})),ye=()=>({type:"panel",items:le()}),He=()=>({type:"tabpanel",tabs:L()}),ke=G.length===1?_e(Ve):_e("All"),lt=(Xt,sn)=>{Wn(G,lo=>lo.name===ke.get()).each(lo=>{const po=Ne(lo,sn);Xt.setData({results:po})})},cn=Dt(Xt=>{const sn=Xt.getData().pattern;lt(Xt,sn)},40),Wt=G.length===1?ye():He(),wn={pattern:"",results:Ne(G[0],"")},ot={title:"Special Character",size:"normal",body:Wt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:wn,onAction:(Xt,sn)=>{sn.name==="results"&&(D(I,sn.value),Xt.close())},onTabChange:(Xt,sn)=>{ke.set(sn.newTabName),cn.throttle(Xt)},onChange:(Xt,sn)=>{sn.name===dt&&cn.throttle(Xt)}};I.windowManager.open(ot).focus(dt)},Ao=(I,G)=>{I.addCommand("mceShowCharmap",()=>{V(I,G)})},Ct=(I,G)=>{I.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(le,L)=>new Promise((ye,He)=>{ye(Ne(G,le))}),onAction:(le,L,ye)=>{I.selection.setRng(L),I.insertContent(ye),le.hide()}})},jt=I=>G=>{const le=()=>{G.setEnabled(I.selection.isEditable())};return I.on("NodeChange",le),le(),()=>{I.off("NodeChange",le)}},tt=I=>{const G=()=>I.execCommand("mceShowCharmap");I.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:G,onSetup:jt(I)}),I.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:G,onSetup:jt(I)})};var re=()=>{h.add("charmap",I=>{gn(I);const G=Rt(I);return Ao(I,G),tt(I),Ct(I,G[0]),It(I)})};re()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=tinymce.util.Tools.resolve("tinymce.Env");const D=_t=>Lt=>Lt.options.get(_t),N=_t=>{const Lt=_t.options.register;Lt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Lt("pagebreak_split_block",{processor:"boolean",default:!1})},W=D("pagebreak_separator"),Y=D("pagebreak_split_block"),de="mce-pagebreak",Q=_t=>{const Lt=`<img src="${C.transparentSrc}" class="${de}" data-mce-resize="false" data-mce-placeholder />`;return _t?`<p>${Lt}</p>`:Lt},Te=_t=>{const Lt=W(_t),gt=()=>Y(_t),st=new RegExp(Lt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Qe=>"\\"+Qe),"gi");_t.on("BeforeSetContent",Qe=>{Qe.content=Qe.content.replace(st,Q(gt()))}),_t.on("PreInit",()=>{_t.serializer.addNodeFilter("img",Qe=>{let ie=Qe.length,St,Wn;for(;ie--;)if(St=Qe[ie],Wn=St.attr("class"),Wn&&Wn.indexOf(de)!==-1){const vt=St.parent;if(vt&&_t.schema.getBlockElements()[vt.name]&&gt()){vt.type=3,vt.value=Lt,vt.raw=!0,St.remove();continue}St.type=3,St.value=Lt,St.raw=!0}})})},ct=_t=>{_t.addCommand("mcePageBreak",()=>{_t.insertContent(Q(Y(_t)))})},Xe=_t=>{_t.on("ResolveName",Lt=>{Lt.target.nodeName==="IMG"&&_t.dom.hasClass(Lt.target,de)&&(Lt.name="pagebreak")})},wt=_t=>Lt=>{const gt=()=>{Lt.setEnabled(_t.selection.isEditable())};return _t.on("NodeChange",gt),gt(),()=>{_t.off("NodeChange",gt)}},yt=_t=>{const Lt=()=>_t.execCommand("mcePageBreak");_t.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Lt,onSetup:wt(_t)}),_t.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Lt,onSetup:wt(_t)})};var Tt=()=>{h.add("pagebreak",_t=>{N(_t),ct(_t),yt(_t),Te(_t),Xe(_t)})};Tt()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=st=>Qe=>typeof Qe===st,D=C("boolean"),N=C("number"),W=st=>Qe=>Qe.options.get(st),Y=st=>{const Qe=st.options.register;Qe("nonbreaking_force_tab",{processor:ie=>D(ie)?{value:ie?3:0,valid:!0}:N(ie)?{value:ie,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),Qe("nonbreaking_wrap",{processor:"boolean",default:!0})},de=W("nonbreaking_force_tab"),Q=W("nonbreaking_wrap"),Te=(st,Qe)=>{let ie="";for(let St=0;St<Qe;St++)ie+=st;return ie},ct=st=>st.plugins.visualchars?st.plugins.visualchars.isEnabled():!1,Xe=(st,Qe)=>{const ie=()=>ct(st)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",St=()=>`<span class="${ie()}" contenteditable="false">${Te("&nbsp;",Qe)}</span>`,vt=Q(st)||st.plugins.visualchars?St():Te("&nbsp;",Qe);st.undoManager.transact(()=>st.insertContent(vt))},wt=st=>{st.addCommand("mceNonBreaking",()=>{Xe(st,1)})};var yt=tinymce.util.Tools.resolve("tinymce.util.VK");const Tt=st=>{const Qe=de(st);Qe>0&&st.on("keydown",ie=>{if(ie.keyCode===yt.TAB&&!ie.isDefaultPrevented()){if(ie.shiftKey)return;ie.preventDefault(),ie.stopImmediatePropagation(),Xe(st,Qe)}})},_t=st=>Qe=>{const ie=()=>{Qe.setEnabled(st.selection.isEditable())};return st.on("NodeChange",ie),ie(),()=>{st.off("NodeChange",ie)}},Lt=st=>{const Qe=()=>st.execCommand("mceNonBreaking");st.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:Qe,onSetup:_t(st)}),st.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:Qe,onSetup:_t(st)})};var gt=()=>{h.add("nonbreaking",st=>{Y(st),wt(st),Lt(st),Tt(st)})};gt()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),D=tinymce.util.Tools.resolve("tinymce.util.Tools");const N=Ve=>je=>je.options.get(Ve),W=Ve=>{const je=Ve.options.register;je("allow_html_in_named_anchor",{processor:"boolean",default:!1})},Y=N("allow_html_in_named_anchor"),de="a:not([href])",Q=Ve=>!Ve,Te=Ve=>Ve.getAttribute("id")||Ve.getAttribute("name")||"",ct=Ve=>Ve.nodeName.toLowerCase()==="a",Xe=Ve=>ct(Ve)&&!Ve.getAttribute("href")&&Te(Ve)!=="",wt=Ve=>Xe(Ve)&&!Ve.firstChild,yt=Ve=>{const je=Ve.dom;C(je).walk(Ve.selection.getRng(),T=>{D.each(T,it=>{wt(it)&&je.remove(it,!1)})})},Tt=Ve=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Ve),_t=Ve=>Ve.dom.getParent(Ve.selection.getStart(),de),Lt=Ve=>{const je=_t(Ve);return je?Te(je):""},gt=(Ve,je)=>{Ve.undoManager.transact(()=>{Y(Ve)||Ve.selection.collapse(!0),Ve.selection.isCollapsed()?Ve.insertContent(Ve.dom.createHTML("a",{id:je})):(yt(Ve),Ve.formatter.remove("namedAnchor",void 0,void 0,!0),Ve.formatter.apply("namedAnchor",{value:je}),Ve.addVisual())})},st=(Ve,je,T)=>{T.removeAttribute("name"),T.id=je,Ve.addVisual(),Ve.undoManager.add()},Qe=(Ve,je)=>{const T=_t(Ve);T?st(Ve,je,T):gt(Ve,je),Ve.focus()},ie=(Ve,je)=>Tt(je)?(Qe(Ve,je),!0):(Ve.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),St=Ve=>{const je=Lt(Ve);Ve.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:je},onSubmit:T=>{ie(Ve,T.getData().id)&&T.close()}})},Wn=Ve=>{Ve.addCommand("mceAnchor",()=>{St(Ve)})},vt=Ve=>Q(Ve.attr("href"))&&!Q(Ve.attr("id")||Ve.attr("name")),J=Ve=>vt(Ve)&&!Ve.firstChild,Yt=Ve=>je=>{for(let T=0;T<je.length;T++){const it=je[T];J(it)&&it.attr("contenteditable",Ve)}},On=Ve=>{Ve.on("PreInit",()=>{Ve.parser.addNodeFilter("a",Yt("false")),Ve.serializer.addNodeFilter("a",Yt(null))})},gn=Ve=>{Ve.formatter.register("namedAnchor",{inline:"a",selector:de,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(je,T,it)=>Xe(je)})},rt=Ve=>je=>{const T=()=>{je.setEnabled(Ve.selection.isEditable())};return Ve.on("NodeChange",T),T(),()=>{Ve.off("NodeChange",T)}},we=Ve=>{const je=()=>Ve.execCommand("mceAnchor");Ve.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:je,onSetup:T=>{const it=Ve.selection.selectorChangedWithUnbind("a:not([href])",T.setActive).unbind,ve=rt(Ve)(T);return()=>{it(),ve()}}}),Ve.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:je,onSetup:rt(Ve)})};var Ro=()=>{h.add("anchor",Ve=>{W(Ve),On(Ve),Wn(Ve),we(Ve),Ve.on("PreInit",()=>{gn(Ve)})})};Ro()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=vt=>J=>J.options.get(vt),D=vt=>{const J=vt.options.register;J("insertdatetime_dateformat",{processor:"string",default:vt.translate("%Y-%m-%d")}),J("insertdatetime_timeformat",{processor:"string",default:vt.translate("%H:%M:%S")}),J("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),J("insertdatetime_element",{processor:"boolean",default:!1})},N=C("insertdatetime_dateformat"),W=C("insertdatetime_timeformat"),Y=C("insertdatetime_formats"),de=C("insertdatetime_element"),Q=vt=>{const J=Y(vt);return J.length>0?J[0]:W(vt)},Te="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),ct="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Xe="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),wt="January February March April May June July August September October November December".split(" "),yt=(vt,J)=>{if(vt=""+vt,vt.length<J)for(let Yt=0;Yt<J-vt.length;Yt++)vt="0"+vt;return vt},Tt=(vt,J,Yt=new Date)=>(J=J.replace("%D","%m/%d/%Y"),J=J.replace("%r","%I:%M:%S %p"),J=J.replace("%Y",""+Yt.getFullYear()),J=J.replace("%y",""+Yt.getYear()),J=J.replace("%m",yt(Yt.getMonth()+1,2)),J=J.replace("%d",yt(Yt.getDate(),2)),J=J.replace("%H",""+yt(Yt.getHours(),2)),J=J.replace("%M",""+yt(Yt.getMinutes(),2)),J=J.replace("%S",""+yt(Yt.getSeconds(),2)),J=J.replace("%I",""+((Yt.getHours()+11)%12+1)),J=J.replace("%p",Yt.getHours()<12?"AM":"PM"),J=J.replace("%B",""+vt.translate(wt[Yt.getMonth()])),J=J.replace("%b",""+vt.translate(Xe[Yt.getMonth()])),J=J.replace("%A",""+vt.translate(ct[Yt.getDay()])),J=J.replace("%a",""+vt.translate(Te[Yt.getDay()])),J=J.replace("%%","%"),J),_t=(vt,J,Yt,On)=>{const gn=vt.dom.create("time",{datetime:Yt},On);vt.dom.replace(gn,J),vt.selection.select(gn,!0),vt.selection.collapse(!1)},Lt=(vt,J)=>{if(de(vt)){const Yt=Tt(vt,J);let On;/%[HMSIp]/.test(J)?On=Tt(vt,"%Y-%m-%dT%H:%M"):On=Tt(vt,"%Y-%m-%d");const gn=vt.dom.getParent(vt.selection.getStart(),"time");gn?_t(vt,gn,On,Yt):vt.insertContent('<time datetime="'+On+'">'+Yt+"</time>")}else vt.insertContent(Tt(vt,J))},gt=vt=>{vt.addCommand("mceInsertDate",(J,Yt)=>{Lt(vt,Yt??N(vt))}),vt.addCommand("mceInsertTime",(J,Yt)=>{Lt(vt,Yt??W(vt))})},st=vt=>{let J=vt;return{get:()=>J,set:gn=>{J=gn}}};var Qe=tinymce.util.Tools.resolve("tinymce.util.Tools");const ie=vt=>J=>{const Yt=()=>{J.setEnabled(vt.selection.isEditable())};return vt.on("NodeChange",Yt),Yt(),()=>{vt.off("NodeChange",Yt)}},St=vt=>{const J=Y(vt),Yt=st(Q(vt)),On=rt=>vt.execCommand("mceInsertDate",!1,rt);vt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:rt=>rt===Yt.get(),fetch:rt=>{rt(Qe.map(J,we=>({type:"choiceitem",text:Tt(vt,we),value:we})))},onAction:rt=>{On(Yt.get())},onItemAction:(rt,we)=>{Yt.set(we),On(we)},onSetup:ie(vt)});const gn=rt=>()=>{Yt.set(rt),On(rt)};vt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Qe.map(J,rt=>({type:"menuitem",text:Tt(vt,rt),onAction:gn(rt)})),onSetup:ie(vt)})};var Wn=()=>{h.add("insertdatetime",vt=>{D(vt),gt(vt),St(vt)})};Wn()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=(tt,re,I)=>{var G;return I(tt,re.prototype)?!0:((G=tt.constructor)===null||G===void 0?void 0:G.name)===re.name},D=tt=>{const re=typeof tt;return tt===null?"null":re==="object"&&Array.isArray(tt)?"array":re==="object"&&C(tt,String,(I,G)=>G.isPrototypeOf(I))?"string":re},N=tt=>re=>D(re)===tt,W=tt=>re=>typeof re===tt,Y=N("string"),de=W("boolean"),Q=tt=>tt==null,Te=tt=>!Q(tt),ct=W("function"),Xe=tt=>re=>re.options.get(tt),wt=tt=>{const re=tt.options.register,I=ye=>He=>{const ke=de(He)||Y(He);return ke?de(He)?{value:He?ye:"",valid:ke}:{value:He.trim(),valid:ke}:{valid:!1,message:"Must be a boolean or string."}},G="bold italic | quicklink h2 h3 blockquote";re("quickbars_selection_toolbar",{processor:I(G),default:G});const le="quickimage quicktable";re("quickbars_insert_toolbar",{processor:I(le),default:le});const L="alignleft aligncenter alignright";re("quickbars_image_toolbar",{processor:I(L),default:L})},yt=Xe("quickbars_selection_toolbar"),Tt=Xe("quickbars_insert_toolbar"),_t=Xe("quickbars_image_toolbar"),Lt=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let gt=0;const st=tt=>{const I=new Date().getTime(),G=Math.floor(Lt()*1e9);return gt++,tt+"_"+G+gt+String(I)},Qe=(tt,re,I)=>{tt.execCommand("mceInsertTable",!1,{rows:I,columns:re})},ie=(tt,re,I)=>{const G=tt.editorUpload.blobCache,le=G.create(st("mceu"),I,re);G.add(le),tt.insertContent(tt.dom.createHTML("img",{src:le.blobUri()}))},St=tt=>new Promise(re=>{const I=new FileReader;I.onloadend=()=>{re(I.result.split(",")[1])},I.readAsDataURL(tt)});var Wn=tinymce.util.Tools.resolve("tinymce.util.Delay");const vt=tt=>new Promise(re=>{let I=!1;const G=document.createElement("input");G.type="file",G.accept="image/*",G.style.position="fixed",G.style.left="0",G.style.top="0",G.style.opacity="0.001",document.body.appendChild(G);const le=He=>{var ke;I||((ke=G.parentNode)===null||ke===void 0||ke.removeChild(G),I=!0,re(He))},L=He=>{le(Array.prototype.slice.call(He.target.files))};G.addEventListener("input",L),G.addEventListener("change",L);const ye=He=>{const ke=()=>{le([])};I||(He.type==="focusin"?Wn.setEditorTimeout(tt,ke,1e3):ke()),tt.off("focusin remove",ye)};tt.on("focusin remove",ye),G.click()}),J=tt=>{tt.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{vt(tt).then(re=>{if(re.length>0){const I=re[0];St(I).then(G=>{ie(tt,G,I)})}})}}),tt.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{Qe(tt,2,2)}})},On=(tt=>()=>tt)(!1);class gn{constructor(re,I){this.tag=re,this.value=I}static some(re){return new gn(!0,re)}static none(){return gn.singletonNone}fold(re,I){return this.tag?I(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?gn.some(re(this.value)):gn.none()}bind(re){return this.tag?re(this.value):gn.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:gn.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return Te(re)?gn.some(re):gn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gn.singletonNone=new gn(!1),typeof window<"u"||Function("return this;")();const rt=1,we=tt=>tt.dom.nodeName.toLowerCase(),Ro=(tt,re)=>{const I=tt.dom;return I&&I.hasAttribute?I.hasAttribute(re):!1};var Ve=(tt,re,I,G,le)=>tt(I,G)?gn.some(I):ct(le)&&le(I)?gn.none():re(I,G,le);const je=(tt,re)=>{const G=(re||document).createElement("div");if(G.innerHTML=tt,!G.hasChildNodes()||G.childNodes.length>1){const le="HTML does not have a single root node";throw console.error(le,tt),new Error(le)}return ve(G.childNodes[0])},T=(tt,re)=>{const G=(re||document).createElement(tt);return ve(G)},it=(tt,re)=>{const G=(re||document).createTextNode(tt);return ve(G)},ve=tt=>{if(tt==null)throw new Error("Node cannot be null or undefined");return{dom:tt}},It={fromHtml:je,fromTag:T,fromText:it,fromDom:ve,fromPoint:(tt,re,I)=>gn.from(tt.dom.elementFromPoint(re,I)).map(ve)},_e=(tt,re)=>{const I=tt.dom;if(I.nodeType!==rt)return!1;{const G=I;if(G.matches!==void 0)return G.matches(re);if(G.msMatchesSelector!==void 0)return G.msMatchesSelector(re);if(G.webkitMatchesSelector!==void 0)return G.webkitMatchesSelector(re);if(G.mozMatchesSelector!==void 0)return G.mozMatchesSelector(re);throw new Error("Browser lacks native selectors")}},Dt=(tt,re,I)=>{let G=tt.dom;const le=ct(I)?I:On;for(;G.parentNode;){G=G.parentNode;const L=It.fromDom(G);if(re(L))return gn.some(L);if(le(L))break}return gn.none()},An=(tt,re,I)=>Ve((le,L)=>L(le),Dt,tt,re,I),nt=(tt,re,I)=>An(tt,re,I).isSome(),rn=(tt,re,I)=>Dt(tt,G=>_e(G,re),I),Ne=(tt,re,I)=>Ve((le,L)=>_e(le,L),rn,tt,re,I),dt=tt=>{const re=Tt(tt);re.length>0&&tt.ui.registry.addContextToolbar("quickblock",{predicate:I=>{const G=It.fromDom(I),le=tt.schema.getTextBlockElements(),L=ye=>ye.dom===tt.getBody();return!Ro(G,"data-mce-bogus")&&Ne(G,'table,[data-mce-bogus="all"]',L).fold(()=>nt(G,ye=>we(ye)in le&&tt.dom.isEmpty(ye.dom),L),On)},items:re,position:"line",scope:"editor"})},V=tt=>tt.dom.classList!==void 0,Ao=(tt,re)=>V(tt)&&tt.dom.classList.contains(re),Ct=tt=>{const re=ye=>tt.dom.isEditable(ye),I=ye=>re(ye.parentElement),G=ye=>{const He=ye.nodeName==="FIGURE"&&/image/i.test(ye.className),ke=ye.nodeName==="IMG"||He,lt=Ao(It.fromDom(ye),"mce-pagebreak");return ke&&I(ye)&&!lt},le=_t(tt);le.length>0&&tt.ui.registry.addContextToolbar("imageselection",{predicate:G,items:le,position:"node"});const L=yt(tt);L.length>0&&tt.ui.registry.addContextToolbar("textselection",{predicate:ye=>!G(ye)&&!tt.selection.isCollapsed()&&re(ye),items:L,position:"selection",scope:"editor"})};var jt=()=>{h.add("quickbars",tt=>{wt(tt),J(tt),dt(tt),Ct(tt)})};jt()})();(function(){var h=tinymce.util.Tools.resolve("tinymce.PluginManager");const C=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let D=0;const N=q=>{const Ie=new Date().getTime(),nn=Math.floor(C()*1e9);return D++,q+"_"+nn+D+String(Ie)},W=(q,xe,Ie)=>{var nn;return Ie(q,xe.prototype)?!0:((nn=q.constructor)===null||nn===void 0?void 0:nn.name)===xe.name},Y=q=>{const xe=typeof q;return q===null?"null":xe==="object"&&Array.isArray(q)?"array":xe==="object"&&W(q,String,(Ie,nn)=>nn.isPrototypeOf(Ie))?"string":xe},de=q=>xe=>Y(xe)===q,Q=q=>xe=>typeof xe===q,Te=de("string"),ct=Q("boolean"),Xe=q=>q==null,wt=q=>!Xe(q),yt=Q("function"),Tt=Q("number"),_t=(q,xe)=>Ie=>q(xe(Ie)),Lt=q=>()=>q,gt=(q,xe)=>q===xe,st=Lt(!1);class Qe{constructor(xe,Ie){this.tag=xe,this.value=Ie}static some(xe){return new Qe(!0,xe)}static none(){return Qe.singletonNone}fold(xe,Ie){return this.tag?Ie(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?Qe.some(xe(this.value)):Qe.none()}bind(xe){return this.tag?xe(this.value):Qe.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:Qe.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe??"Called getOrDie on None")}static from(xe){return wt(xe)?Qe.some(xe):Qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qe.singletonNone=new Qe(!1);const ie=Array.prototype.indexOf,St=(q,xe)=>ie.call(q,xe),Wn=(q,xe)=>St(q,xe)>-1,vt=(q,xe)=>{const Ie=q.length,nn=new Array(Ie);for(let zo=0;zo<Ie;zo++){const $=q[zo];nn[zo]=xe($,zo)}return nn},J=(q,xe)=>{for(let Ie=0,nn=q.length;Ie<nn;Ie++){const zo=q[Ie];xe(zo,Ie)}},Yt=(q,xe)=>{const Ie=[];for(let nn=0,zo=q.length;nn<zo;nn++){const $=q[nn];xe($,nn)&&Ie.push($)}return Ie},On=(q,xe,Ie)=>(J(q,(nn,zo)=>{Ie=xe(Ie,nn,zo)}),Ie),gn=Object.keys,rt=(q,xe)=>{const Ie=gn(q);for(let nn=0,zo=Ie.length;nn<zo;nn++){const $=Ie[nn],se=q[$];xe(se,$)}};typeof window<"u"||Function("return this;")();const we=8,Ro=9,Ve=11,je=1,T=3,it=q=>q.dom.nodeName.toLowerCase(),ve=q=>q.dom.nodeType,Rt=q=>xe=>ve(xe)===q,It=q=>ve(q)===we||it(q)==="#comment",_e=Rt(je),Dt=Rt(T),An=Rt(Ro),nt=Rt(Ve),rn=(q,xe,Ie)=>{if(Te(Ie)||ct(Ie)||Tt(Ie))q.setAttribute(xe,Ie+"");else throw console.error("Invalid call to Attribute.set. Key ",xe,":: Value ",Ie,":: Element ",q),new Error("Attribute value was not simple")},Ne=(q,xe,Ie)=>{rn(q.dom,xe,Ie)},dt=(q,xe)=>{const Ie=q.dom;rt(xe,(nn,zo)=>{rn(Ie,zo,nn)})},V=(q,xe)=>{const Ie=q.dom.getAttribute(xe);return Ie===null?void 0:Ie},Ao=(q,xe)=>Qe.from(V(q,xe)),Ct=(q,xe)=>{q.dom.removeAttribute(xe)},jt=q=>On(q.dom.attributes,(xe,Ie)=>(xe[Ie.name]=Ie.value,xe),{}),tt=(q,xe)=>{const nn=(xe||document).createElement("div");if(nn.innerHTML=q,!nn.hasChildNodes()||nn.childNodes.length>1){const zo="HTML does not have a single root node";throw console.error(zo,q),new Error(zo)}return G(nn.childNodes[0])},re=(q,xe)=>{const nn=(xe||document).createElement(q);return G(nn)},I=(q,xe)=>{const nn=(xe||document).createTextNode(q);return G(nn)},G=q=>{if(q==null)throw new Error("Node cannot be null or undefined");return{dom:q}},L={fromHtml:tt,fromTag:re,fromText:I,fromDom:G,fromPoint:(q,xe,Ie)=>Qe.from(q.dom.elementFromPoint(xe,Ie)).map(G)},ye=(q,xe)=>{const Ie=q.dom;if(Ie.nodeType!==je)return!1;{const nn=Ie;if(nn.matches!==void 0)return nn.matches(xe);if(nn.msMatchesSelector!==void 0)return nn.msMatchesSelector(xe);if(nn.webkitMatchesSelector!==void 0)return nn.webkitMatchesSelector(xe);if(nn.mozMatchesSelector!==void 0)return nn.mozMatchesSelector(xe);throw new Error("Browser lacks native selectors")}},He=q=>q.nodeType!==je&&q.nodeType!==Ro&&q.nodeType!==Ve||q.childElementCount===0,ke=(q,xe)=>{const Ie=xe===void 0?document:xe.dom;return He(Ie)?[]:vt(Ie.querySelectorAll(q),L.fromDom)},lt=(q,xe)=>{const Ie=xe===void 0?document:xe.dom;return He(Ie)?Qe.none():Qe.from(Ie.querySelector(q)).map(L.fromDom)},Je=(q,xe)=>q.dom===xe.dom,cn=ye,Wt=(q,xe,Ie=gt)=>q.exists(nn=>Ie(nn,xe)),ot=(q=>xe=>xe.replace(q,""))(/^\s+|\s+$/g),mt=q=>q.style!==void 0&&yt(q.style.getPropertyValue),Xt=q=>L.fromDom(q.dom.ownerDocument),sn=q=>An(q)?q:Xt(q),lo=q=>Qe.from(q.dom.parentNode).map(L.fromDom),po=(q,xe)=>{const Ie=yt(xe)?xe:st;let nn=q.dom;const zo=[];for(;nn.parentNode!==null&&nn.parentNode!==void 0;){const $=nn.parentNode,se=L.fromDom($);if(zo.push(se),Ie(se)===!0)break;nn=$}return zo},ro=q=>Qe.from(q.dom.previousSibling).map(L.fromDom),Ds=q=>Qe.from(q.dom.nextSibling).map(L.fromDom),to=q=>vt(q.dom.childNodes,L.fromDom),Qo=(q,xe)=>{const Ie=q.dom.childNodes;return Qe.from(Ie[xe]).map(L.fromDom)},ss=q=>Qo(q,0),Lo=q=>nt(q)&&wt(q.dom.host),ir=q=>L.fromDom(q.dom.getRootNode()),xo=q=>{const xe=ir(q);return Lo(xe)?Qe.some(xe):Qe.none()},zr=q=>L.fromDom(q.dom.host),on=q=>{const xe=Dt(q)?q.dom.parentNode:q.dom;if(xe==null||xe.ownerDocument===null)return!1;const Ie=xe.ownerDocument;return xo(L.fromDom(xe)).fold(()=>Ie.body.contains(xe),_t(on,zr))},Zo=(q,xe,Ie)=>{if(!Te(Ie))throw console.error("Invalid call to CSS.set. Property ",xe,":: Value ",Ie,":: Element ",q),new Error("CSS value must be a string: "+Ie);mt(q)&&q.style.setProperty(xe,Ie)},gr=(q,xe)=>{mt(q)&&q.style.removeProperty(xe)},tr=(q,xe,Ie)=>{const nn=q.dom;Zo(nn,xe,Ie)},Rr=(q,xe)=>{const Ie=q.dom,zo=window.getComputedStyle(Ie).getPropertyValue(xe);return zo===""&&!on(q)?_r(Ie,xe):zo},_r=(q,xe)=>mt(q)?q.style.getPropertyValue(xe):"",ys=(q,xe)=>{const Ie=q.dom,nn=_r(Ie,xe);return Qe.from(nn).filter(zo=>zo.length>0)},ea=(q,xe)=>{const Ie=q.dom;gr(Ie,xe),Wt(Ao(q,"style").map(ot),"")&&Ct(q,"style")},Gr=(q,xe)=>{lo(q).each(nn=>{nn.dom.insertBefore(xe.dom,q.dom)})},bs=(q,xe)=>{Ds(q).fold(()=>{lo(q).each(zo=>{Ns(zo,xe)})},nn=>{Gr(nn,xe)})},Qn=(q,xe)=>{ss(q).fold(()=>{Ns(q,xe)},nn=>{q.dom.insertBefore(xe.dom,nn.dom)})},Ns=(q,xe)=>{q.dom.appendChild(xe.dom)},Ke=(q,xe)=>{Gr(q,xe),Ns(xe,q)},xt=(q,xe)=>{J(xe,(Ie,nn)=>{const zo=nn===0?q:xe[nn-1];bs(zo,Ie)})},xn=(q,xe)=>{J(xe,Ie=>{Ns(q,Ie)})},Bn=(q,xe)=>{let Ie=[];return J(to(q),nn=>{xe(nn)&&(Ie=Ie.concat([nn])),Ie=Ie.concat(Bn(nn,xe))}),Ie};var Ho=(q,xe,Ie,nn,zo)=>q(Ie,nn)?Qe.some(Ie):yt(zo)&&zo(Ie)?Qe.none():xe(Ie,nn,zo);const as=(q,xe,Ie)=>{let nn=q.dom;const zo=yt(Ie)?Ie:st;for(;nn.parentNode;){nn=nn.parentNode;const $=L.fromDom(nn);if(xe($))return Qe.some($);if(zo($))break}return Qe.none()},pr=q=>{const xe=q.dom;xe.parentNode!==null&&xe.parentNode.removeChild(xe)},Sr=q=>{const xe=to(q);xe.length>0&&xt(q,xe),pr(q)},lr=(q,xe)=>ke(xe,q),Ae=(q,xe,Ie)=>as(q,nn=>ye(nn,xe),Ie),Ce=(q,xe)=>lt(xe,q),ht=(q,xe,Ie)=>Ho((zo,$)=>ye(zo,$),Ae,q,xe,Ie),Yn=((q,xe)=>{const Ie=$=>{if(!q($))throw new Error("Can only get "+xe+" value of a "+xe+" node");return nn($).getOr("")},nn=$=>q($)?Qe.from($.dom.nodeValue):Qe.none();return{get:Ie,getOption:nn,set:($,se)=>{if(!q($))throw new Error("Can only set raw "+xe+" value of a "+xe+" node");$.dom.nodeValue=se}}})(Dt,"text"),Co=q=>Yn.get(q),Bo=(q,xe)=>Yn.set(q,xe);var ur=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Le=()=>{const q=pt=>L.fromDom(pt.dom.cloneNode(!1)),xe=pt=>sn(pt).dom,Ie=pt=>_e(pt)?it(pt)==="body"?!0:Wn(ur,it(pt)):!1,nn=pt=>_e(pt)?Wn(["br","img","hr","input"],it(pt)):!1,zo=pt=>_e(pt)&&V(pt,"contenteditable")==="false",$=(pt,vo)=>pt.dom.compareDocumentPosition(vo.dom),se=(pt,vo)=>{const Ps=jt(pt);dt(vo,Ps)},De=pt=>{const vo=it(pt);return Wn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],vo)},at=pt=>_e(pt)?Ao(pt,"lang"):Qe.none();return{up:Lt({selector:Ae,closest:ht,predicate:as,all:po}),down:Lt({selector:lr,predicate:Bn}),styles:Lt({get:Rr,getRaw:ys,set:tr,remove:ea}),attrs:Lt({get:V,set:Ne,remove:Ct,copyTo:se}),insert:Lt({before:Gr,after:bs,afterAll:xt,append:Ns,appendAll:xn,prepend:Qn,wrap:Ke}),remove:Lt({unwrap:Sr,remove:pr}),create:Lt({nu:L.fromTag,clone:q,text:L.fromText}),query:Lt({comparePosition:$,prevSibling:ro,nextSibling:Ds}),property:Lt({children:to,name:it,parent:lo,document:xe,isText:Dt,isComment:It,isElement:_e,isSpecial:De,getLanguage:at,getText:Co,setText:Bo,isBoundary:Ie,isEmptyTag:nn,isNonEditable:zo}),eq:Je,is:cn}};const Fo=(q,xe)=>({element:q,offset:xe}),Re=(q,xe,Ie)=>q.property().isText(xe)&&q.property().getText(xe).trim().length===0||q.property().isComment(xe)?Ie(xe).bind(nn=>Re(q,nn,Ie).orThunk(()=>Qe.some(nn))):Qe.none(),Be=(q,xe)=>q.property().isText(xe)?q.property().getText(xe).length:q.property().children(xe).length,qt=(q,xe)=>{const Ie=Re(q,xe,q.query().prevSibling).getOr(xe);if(q.property().isText(Ie))return Fo(Ie,Be(q,Ie));const nn=q.property().children(Ie);return nn.length>0?qt(q,nn[nn.length-1]):Fo(Ie,Be(q,Ie))},tn=qt,Dn=Le(),Zn=q=>tn(Dn,q),Gn=(q,xe,Ie)=>q.dispatch("ToggledAccordion",{element:xe,state:Ie}),zn=(q,xe,Ie)=>q.dispatch("ToggledAllAccordions",{elements:xe,state:Ie}),no="details",bo="mce-accordion",hs="mce-accordion-summary",As="mce-accordion-body",Ls="div";var wa=tinymce.util.Tools.resolve("tinymce.util.Tools");const la=q=>(q==null?void 0:q.nodeName)==="SUMMARY",fo=q=>(q==null?void 0:q.nodeName)==="DETAILS",is=q=>q.hasAttribute("open"),ms=q=>{const xe=q.selection.getNode();return la(xe)||!!q.dom.getParent(xe,la)},aa=q=>{const xe=q.selection.getRng();return fo(xe.startContainer)&&xe.collapsed&&xe.startOffset===0},ta=q=>!ms(q)&&q.dom.isEditable(q.selection.getNode()),Fr=q=>Qe.from(q.dom.getParent(q.selection.getNode(),fo)),dr=q=>Fr(q).isSome(),_l=q=>(q.innerHTML='<br data-mce-bogus="1" />',q),ec=q=>_l(q.dom.create("p")),ks=q=>_l(q.dom.create("summary")),Sa=(q,xe)=>{const Ie=ec(q);xe.insertAdjacentElement("afterend",Ie),q.selection.setCursorLocation(Ie,0)},ha=(q,xe)=>{if(la(xe==null?void 0:xe.lastChild)){const Ie=ec(q);xe.appendChild(Ie),q.selection.setCursorLocation(Ie,0)}},Vr=(q,xe)=>{if(!la(xe==null?void 0:xe.firstChild)){const Ie=ks(q);xe.prepend(Ie),q.selection.setCursorLocation(Ie,0)}},pi=q=>xe=>{ha(q,xe),Vr(q,xe)},xa=q=>{wa.each(wa.grep(q.dom.select("details",q.getBody())),pi(q))},Fa=q=>{if(!ta(q))return;const xe=L.fromDom(q.getBody()),Ie=N("acc"),nn=q.dom.encode(q.selection.getRng().toString()||q.translate("Accordion summary...")),zo=q.dom.encode(q.translate("Accordion body...")),$=`<summary class="${hs}">${nn}</summary>`,se=`<${Ls} class="${As}"><p>${zo}</p></${Ls}>`;q.undoManager.transact(()=>{q.insertContent([`<details data-mce-id="${Ie}" class="${bo}" open="open">`,$,se,"</details>"].join("")),Ce(xe,`[data-mce-id="${Ie}"]`).each(De=>{Ct(De,"data-mce-id"),Ce(De,"summary").each(at=>{const pt=q.dom.createRng(),vo=Zn(at);pt.setStart(vo.element.dom,vo.offset),pt.setEnd(vo.element.dom,vo.offset),q.selection.setRng(pt)})})})},fc=(q,xe)=>{const Ie=xe??!is(q);return Ie?q.setAttribute("open","open"):q.removeAttribute("open"),Ie},tc=(q,xe)=>{Fr(q).each(Ie=>{Gn(q,Ie,fc(Ie,xe))})},Wi=q=>{Fr(q).each(xe=>{const{nextSibling:Ie}=xe;Ie?(q.selection.select(Ie,!0),q.selection.collapse(!0)):Sa(q,xe),xe.remove()})},ni=(q,xe)=>{const Ie=Array.from(q.getBody().querySelectorAll("details"));Ie.length!==0&&(J(Ie,nn=>fc(nn,xe??!is(nn))),zn(q,Ie,xe))},Uc=q=>{q.addCommand("InsertAccordion",()=>Fa(q)),q.addCommand("ToggleAccordion",(xe,Ie)=>tc(q,Ie)),q.addCommand("ToggleAllAccordions",(xe,Ie)=>ni(q,Ie)),q.addCommand("RemoveAccordion",()=>Wi(q))};var Na=tinymce.util.Tools.resolve("tinymce.html.Node");const Nr=q=>{var xe,Ie;return(Ie=(xe=q.attr("class"))===null||xe===void 0?void 0:xe.split(" "))!==null&&Ie!==void 0?Ie:[]},Ei=(q,xe)=>{const Ie=new Set([...Nr(q),...xe]),nn=Array.from(Ie);nn.length>0&&q.attr("class",nn.join(" "))},Zi=(q,xe)=>{const Ie=Yt(Nr(q),nn=>!xe.has(nn));q.attr("class",Ie.length>0?Ie.join(" "):null)},Ti=q=>q.name===no&&Wn(Nr(q),bo),Ai=q=>q.name===Ls&&Wn(Nr(q),As),Ur=q=>{const xe=q.children();let Ie,nn;const zo=[];for(let $=0;$<xe.length;$++){const se=xe[$];se.name==="summary"&&Xe(Ie)?Ie=se:Ai(se)&&Xe(nn)?nn=se:zo.push(se)}return{summaryNode:Ie,wrapperNode:nn,otherNodes:zo}},Za=q=>{const xe=new Na("br",1);xe.attr("data-mce-bogus","1"),q.empty(),q.append(xe)},te=q=>{q.on("PreInit",()=>{const{serializer:xe,parser:Ie}=q;Ie.addNodeFilter(no,nn=>{for(let zo=0;zo<nn.length;zo++){const $=nn[zo];if(Ti($)){const se=$,{summaryNode:De,wrapperNode:at,otherNodes:pt}=Ur(se),vo=wt(De),Ps=vo?De:new Na("summary",1);Xe(Ps.firstChild)&&Za(Ps),Ei(Ps,[hs]),vo||(wt(se.firstChild)?se.insert(Ps,se.firstChild,!0):se.append(Ps));const Os=wt(at),Qt=Os?at:new Na(Ls,1);if(Qt.attr("data-mce-bogus","1"),Ei(Qt,[As]),pt.length>0)for(let Hs=0;Hs<pt.length;Hs++){const pa=pt[Hs];Qt.append(pa)}if(Xe(Qt.firstChild)){const Hs=new Na("p",1);Za(Hs),Qt.append(Hs)}Os||se.append(Qt)}}}),xe.addNodeFilter(no,nn=>{const zo=new Set([hs]);for(let $=0;$<nn.length;$++){const se=nn[$];if(Ti(se)){const De=se,{summaryNode:at,wrapperNode:pt}=Ur(De);wt(at)&&Zi(at,zo),wt(pt)&&pt.unwrap()}}})})};var Se=tinymce.util.Tools.resolve("tinymce.util.VK");const Ge=q=>{q.on("keydown",xe=>{(!xe.shiftKey&&xe.keyCode===Se.ENTER&&ms(q)||aa(q))&&(xe.preventDefault(),q.execCommand("ToggleAccordion"))})},Ht=q=>{Ge(q),q.on("ExecCommand",xe=>{const Ie=xe.command.toLowerCase();(Ie==="delete"||Ie==="forwarddelete")&&dr(q)&&xa(q)})};var dn=tinymce.util.Tools.resolve("tinymce.Env");const $n=q=>{dn.browser.isSafari()&&q.on("click",xe=>{if(la(xe.target)){const Ie=xe.target,nn=q.selection.getRng();nn.collapsed&&nn.startContainer===Ie.parentNode&&nn.startOffset===0&&q.selection.setCursorLocation(Ie,0)}})},es=q=>xe=>{const Ie=()=>xe.setEnabled(ta(q));return q.on("NodeChange",Ie),()=>q.off("NodeChange",Ie)},Ws=q=>{const xe=()=>q.execCommand("InsertAccordion");q.ui.registry.addButton("accordion",{icon:"accordion",tooltip:"Insert accordion",onSetup:es(q),onAction:xe}),q.ui.registry.addMenuItem("accordion",{icon:"accordion",text:"Accordion",onSetup:es(q),onAction:xe}),q.ui.registry.addToggleButton("accordiontoggle",{icon:"accordion-toggle",tooltip:"Toggle accordion",onAction:()=>q.execCommand("ToggleAccordion")}),q.ui.registry.addToggleButton("accordionremove",{icon:"remove",tooltip:"Delete accordion",onAction:()=>q.execCommand("RemoveAccordion")}),q.ui.registry.addContextToolbar("accordion",{predicate:Ie=>q.dom.is(Ie,"details")&&q.getBody().contains(Ie)&&q.dom.isEditable(Ie.parentNode),items:"accordiontoggle accordionremove",scope:"node",position:"node"})};var ls=()=>{h.add("accordion",q=>{Ws(q),Uc(q),Ht(q),te(q),$n(q)})};ls()})();var Vq=function(h){if(h===null)return"null";if(h===void 0)return"undefined";var C=typeof h;return C==="object"&&(Array.prototype.isPrototypeOf(h)||h.constructor&&h.constructor.name==="Array")?"array":C==="object"&&(String.prototype.isPrototypeOf(h)||h.constructor&&h.constructor.name==="String")?"string":C},Qy=function(h){return function(C){return Vq(C)===h}},rne=Qy("string"),ane=Qy("object"),cne=Qy("array"),ine=Qy("null"),lne=Qy("boolean"),une=Qy("undefined"),dne=Qy("function"),mne=Qy("number"),fne=function(h){return["undefined","boolean","number","string","function","xml","null"].indexOf(h)!==-1},zJ=function(h,C,D){for(var N=h.length,W=new Array(N),Y=0;Y<N-1;Y++){var de=h[Y];W[Y]=D(C(de))}return N>0&&(W[N-1]=C(h[N-1])),W},gne=function(h,C){var D=Array.prototype.slice.call(h);return D.sort(C)},hne=function(h,C){return _F(function(D,N){return h.eq(C(D),C(N))})},_F=function(h){return{eq:h}},DF=_F(function(h,C){return h===C}),VJ=DF,pne=DF,bne=DF,vne=DF,UJ=function(h){return _F(function(C,D){if(C.length!==D.length)return!1;for(var N=C.length,W=0;W<N;W++)if(!h.eq(C[W],D[W]))return!1;return!0})},yne=function(h,C){return hne(UJ(h),function(D){return gne(D,C)})},Cne=function(h){return _F(function(C,D){var N=Object.keys(C),W=Object.keys(D);if(!yne(VJ).eq(N,W))return!1;for(var Y=N.length,de=0;de<Y;de++){var Q=N[de];if(!h.eq(C[Q],D[Q]))return!1}return!0})},Uq=_F(function(h,C){if(h===C)return!0;var D=Vq(h),N=Vq(C);return D!==N?!1:fne(D)?h===C:D==="array"?UJ(Uq).eq(h,C):D==="object"?Cne(Uq).eq(h,C):!1}),wne=function(h){for(var C=[],D=Object.keys(h),N=D.length,W=0;W<N;W++){var Y=D[W],de=h[Y];C.push([Y,de])}return C},WJ=function(h){return'"'+h.replace(/"/g,'\\"')+'"'},pK=function(h){return{show:h}},bK=function(h){return pK(function(){return h})},vK=pK(function(h){return String(h)}),Sne=bK("undefined"),xne=bK("null"),Ene=vK,Tne=vK,Ane=pK(function(h){return WJ(h)}),kne=bK("function() {...}"),Ky=function(){return Ky=Object.assign||function(C){for(var D,N=1,W=arguments.length;N<W;N++){D=arguments[N];for(var Y in D)Object.prototype.hasOwnProperty.call(D,Y)&&(C[Y]=D[Y])}return C},Ky.apply(this,arguments)};var yK=function(h,C,D){return{start:h,children:C,end:D}},_ne=function(h){return yK(h,[],"")},Dne=function(h){return function(C){return Ky(Ky({},C),{start:h})}},One=function(h){return function(C){return Ky(Ky({},C),{end:h})}},Rne=function(h){return function(C){return Dne(h(C.start))(C)}},Fne=function(h){return function(C){return One(h(C.end))(C)}},Nne=function(h){return Rne(function(C){return h+C})},ZJ=function(h){return Fne(function(C){return C+h})},j8=function(h){return{pprint:h}},JS=function(h){return j8(function(C){return _ne(h.show(C))})},jJ=JS(Sne),GJ=JS(xne),qJ=JS(Ane),Bne=JS(Ene),KJ=JS(Tne),Mne=JS(kne),Pne=JS(vK),$ne=function(h){return j8(function(C){var D=zJ(C,h.pprint,ZJ(","));return yK("[",D,"]")})},Ine=function(h){return j8(function(C){var D=wne(C),N=function(Y){var de=Y[0],Q=Y[1],Te=h.pprint(Q),ct=WJ(de)+": ";return Nne(ct)(Te)},W=zJ(D,N,ZJ(","));return yK("{",W,"}")})},M8=j8(function(h){return une(h)?jJ.pprint(h):ine(h)?GJ.pprint(h):mne(h)?KJ.pprint(h):lne(h)?Bne.pprint(h):dne(h)?Mne.pprint(h):rne(h)?qJ.pprint(h):cne(h)?$ne(M8).pprint(h):ane(h)?Ine(M8).pprint(h):Pne.pprint(h)}),Ok=function(h,C){return Ky(Ky({},h),C)};Ok(bne,jJ);Ok(vne,GJ);Ok(VJ,qJ);Ok(pne,KJ);Ok(Uq,M8);Ok(DF,M8);const Lne=(h,C,D)=>{var N;return D(h,C.prototype)?!0:((N=h.constructor)===null||N===void 0?void 0:N.name)===C.name},Hne=h=>{const C=typeof h;return h===null?"null":C==="object"&&Array.isArray(h)?"array":C==="object"&&Lne(h,String,(D,N)=>N.isPrototypeOf(D))?"string":C},zne=h=>C=>Hne(C)===h,Vne=h=>C=>h===C,TX=zne("array"),AX=Vne(null),Une=h=>()=>h,YJ=h=>h,Wne=Une(!0),Zne=Array.prototype.indexOf,jne=(h,C)=>Zne.call(h,C),Gne=(h,C)=>jne(h,C)>-1,XJ=(h,C)=>{const D=h.length,N=new Array(D);for(let W=0;W<D;W++){const Y=h[W];N[W]=C(Y,W)}return N},qne=(h,C)=>{for(let D=0,N=h.length;D<N;D++){const W=h[D];C(W,D)}},Kne=(h,C)=>{for(let D=0,N=h.length;D<N;++D){const W=h[D];if(C(W,D)!==!0)return!1}return!0},kX=Object.keys,Yne=h=>{if(!TX(h))throw new Error("cases must be an array");if(h.length===0)throw new Error("there must be at least one case");const C=[],D={};return qne(h,(N,W)=>{const Y=kX(N);if(Y.length!==1)throw new Error("one and only one name per case");const de=Y[0],Q=N[de];if(D[de]!==void 0)throw new Error("duplicate key detected:"+de);if(de==="cata")throw new Error("cannot have a case named cata (sorry)");if(!TX(Q))throw new Error("case arguments must be an array");C.push(de),D[de]=(...Te)=>{const ct=Te.length;if(ct!==Q.length)throw new Error("Wrong number of arguments to case "+de+". Expected "+Q.length+" ("+Q+"), got "+ct);return{fold:(...wt)=>{if(wt.length!==h.length)throw new Error("Wrong number of arguments to fold. Expected "+h.length+", got "+wt.length);return wt[W].apply(null,Te)},match:wt=>{const yt=kX(wt);if(C.length!==yt.length)throw new Error("Wrong number of arguments to match. Expected: "+C.join(",")+`
Actual: `+yt.join(","));if(!Kne(C,_t=>Gne(yt,_t)))throw new Error("Not all branches were specified when using match. Specified: "+yt.join(", ")+`
Required: `+C.join(", "));return wt[de].apply(null,Te)},log:wt=>{console.log(wt,{constructors:C,constructor:de,params:Te})}}}}),D},CK={generate:Yne};typeof window<"u"||Function("return this;")();CK.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const xk=CK.generate([{starts:["value","f"]},{pattern:["regex","f"]},{contains:["value","f"]},{exact:["value","f"]},{all:[]},{not:["stringMatch"]}]),Xne=h=>h.toLowerCase(),Jne=YJ,JJ=(h,C)=>h.fold((D,N)=>N(C).indexOf(N(D))===0,(D,N)=>D.test(N(C)),(D,N)=>N(C).indexOf(N(D))>=0,(D,N)=>N(C)===N(D),Wne,D=>!JJ(D,C)),Qne=(h,C,D,N,W,Y,de)=>h.fold(C,D,N,W,Y,de);xk.starts,xk.pattern,xk.contains,xk.exact,xk.all,xk.not;const eoe=(h,C)=>{let D=null;return{cancel:()=>{AX(D)||(clearTimeout(D),D=null)},throttle:(...Y)=>{AX(D)&&(D=setTimeout(()=>{D=null,h.apply(null,Y)},C))}}},toe=h=>h.replace(/\uFEFF/g,""),Dq=CK.generate([{include:["item"]},{excludeWith:["item"]},{excludeWithout:["item"]}]),noe=(h,C,D,N)=>h.fold(C,D,N);Dq.include,Dq.excludeWith,Dq.excludeWithout;const ooe="[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",_f={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:ooe},cs={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},soe=[new RegExp(_f.aletter),new RegExp(_f.midnumlet),new RegExp(_f.midletter),new RegExp(_f.midnum),new RegExp(_f.numeric),new RegExp(_f.cr),new RegExp(_f.lf),new RegExp(_f.newline),new RegExp(_f.extend),new RegExp(_f.format),new RegExp(_f.katakana),new RegExp(_f.extendnumlet),new RegExp("@")],roe="",aoe=new RegExp("^"+_f.punctuation+"$"),coe=/^\s+$/,_X=soe,ioe=cs.OTHER,loe=h=>{let C=ioe;const D=_X.length;for(let N=0;N<D;++N){const W=_X[N];if(W&&W.test(h)){C=N;break}}return C},uoe=h=>{const C={};return D=>{if(C[D])return C[D];{const N=h(D);return C[D]=N,N}}},doe=h=>{const C=uoe(loe);return XJ(h,C)},moe=(h,C)=>{const D=h[C],N=h[C+1];if(C<0||C>h.length-1&&C!==0||D===cs.ALETTER&&N===cs.ALETTER)return!1;const W=h[C+2];if(D===cs.ALETTER&&(N===cs.MIDLETTER||N===cs.MIDNUMLET||N===cs.AT)&&W===cs.ALETTER)return!1;const Y=h[C-1];return(D===cs.MIDLETTER||D===cs.MIDNUMLET||N===cs.AT)&&N===cs.ALETTER&&Y===cs.ALETTER||(D===cs.NUMERIC||D===cs.ALETTER)&&(N===cs.NUMERIC||N===cs.ALETTER)||(D===cs.MIDNUM||D===cs.MIDNUMLET)&&N===cs.NUMERIC&&Y===cs.NUMERIC||D===cs.NUMERIC&&(N===cs.MIDNUM||N===cs.MIDNUMLET)&&W===cs.NUMERIC||(D===cs.EXTEND||D===cs.FORMAT)&&(N===cs.ALETTER||N===cs.NUMERIC||N===cs.KATAKANA||N===cs.EXTEND||N===cs.FORMAT)||(N===cs.EXTEND||N===cs.FORMAT&&(W===cs.ALETTER||W===cs.NUMERIC||W===cs.KATAKANA||W===cs.EXTEND||W===cs.FORMAT))&&(D===cs.ALETTER||D===cs.NUMERIC||D===cs.KATAKANA||D===cs.EXTEND||D===cs.FORMAT)||D===cs.CR&&N===cs.LF?!1:D===cs.NEWLINE||D===cs.CR||D===cs.LF||N===cs.NEWLINE||N===cs.CR||N===cs.LF?!0:!(D===cs.KATAKANA&&N===cs.KATAKANA||N===cs.EXTENDNUMLET&&(D===cs.ALETTER||D===cs.NUMERIC||D===cs.KATAKANA||D===cs.EXTENDNUMLET)||D===cs.EXTENDNUMLET&&(N===cs.ALETTER||N===cs.NUMERIC||N===cs.KATAKANA)||D===cs.AT)},QJ=roe,eQ=coe,foe=aoe,goe=h=>h==="http"||h==="https",hoe=(h,C)=>{let D;for(D=C;D<h.length&&!eQ.test(h[D]);D++);return D},poe=(h,C)=>{const D=hoe(h,C+1);return h.slice(C+1,D).join(QJ).substr(0,3)==="://"?D:C},boe=(h,C,D,N)=>{const W=[],Y=[];let de=[];for(let Q=0;Q<D.length;++Q)if(de.push(h[Q]),moe(D,Q)){const Te=C[Q];if((N.includeWhitespace||!eQ.test(Te))&&(N.includePunctuation||!foe.test(Te))){const ct=Q-de.length+1,Xe=Q+1,wt=C.slice(ct,Xe).join(QJ);if(goe(wt)){const yt=poe(C,Q),Tt=h.slice(Xe,yt);Array.prototype.push.apply(de,Tt),Q=yt}W.push(de),Y.push({start:ct,end:Xe})}de=[]}return{words:W,indices:Y}},voe=()=>({includeWhitespace:!1,includePunctuation:!1}),yoe=(h,C,D)=>{D={...voe(),...D};const N=XJ(h,C),W=doe(N);return boe(h,N,W,D)},Coe=(h,C,D)=>yoe(h,C,D).words,woe=Coe;class Soe{constructor(C,D){vq(this,"rootNode");vq(this,"node");this.node=C,this.rootNode=D,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(C){return this.node=this.findSibling(this.node,"firstChild","nextSibling",C),this.node}prev(C){return this.node=this.findSibling(this.node,"lastChild","previousSibling",C),this.node}prev2(C){return this.node=this.findPreviousNode(this.node,C),this.node}findSibling(C,D,N,W){if(C){if(!W&&C[D])return C[D];if(C!==this.rootNode){let Y=C[N];if(Y)return Y;for(let de=C.parentNode;de&&de!==this.rootNode;de=de.parentNode)if(Y=de[N],Y)return Y}}}findPreviousNode(C,D){if(C){const N=C.previousSibling;if(this.rootNode&&N===this.rootNode)return;if(N){if(!D){for(let Y=N.lastChild;Y;Y=Y.lastChild)if(!Y.lastChild)return Y}return N}const W=C.parentNode;if(W&&W!==this.rootNode)return W}}}const wK=(h,C)=>{const D=C.getBlockElements(),N=C.getVoidElements(),W=ct=>D[ct.nodeName]||N[ct.nodeName],Y=[];let de="";const Q=new Soe(h,h);let Te;for(;Te=Q.next();)Te.nodeType===3?de+=toe(Te.data):W(Te)&&de.length&&(Y.push(de),de="");return de.length&&Y.push(de),Y},xoe=h=>h.replace(/\u200B/g,""),tQ=h=>h.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,nQ=(h,C)=>{const D=xoe(wK(h,C).join(`
`));return woe(D.split(""),YJ).length},DX=(h,C)=>{const D=wK(h,C).join("");return tQ(D)},OX=(h,C)=>{const D=wK(h,C).join("").replace(/\s/g,"");return tQ(D)},Wq=(h,C)=>()=>C(h.getBody(),h.schema),Oq=(h,C)=>()=>C(h.selection.getRng().cloneContents(),h.schema),RX=h=>Wq(h,nQ),Eoe=h=>({body:{getWordCount:RX(h),getCharacterCount:Wq(h,DX),getCharacterCountWithoutSpaces:Wq(h,OX)},selection:{getWordCount:Oq(h,nQ),getCharacterCount:Oq(h,DX),getCharacterCountWithoutSpaces:Oq(h,OX)},getCount:RX(h)}),Toe=h=>C=>C.options.get(h),Aoe={max:20,spaces:!1},koe=h=>{const C=h.options.register;C("word_limit",{processor:"object",default:Aoe})},_oe=Toe("word_limit"),FX=(h,C)=>{const D=_oe(h);console.log("触发更新"),console.log(C.body.getWordCount()),console.log(C.body.getCharacterCount()),console.log(C.body.getCharacterCountWithoutSpaces()),C.body.getWordCount()>D.max&&(h.setContent(Zq),h.getBody().blur()),Zq=h.getContent()};let Zq="";const Doe=(h,C,D)=>{Zq=h.getContent();const N=eoe(()=>{FX(h,C)},D);h.on("init",()=>{FX(h,C),n0().util.Delay.setEditorTimeout(h,()=>{h.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",N.throttle)},0),h.on("remove",N.cancel)})},Ooe=(h=300)=>{n0().PluginManager.add("wordlimit",C=>{koe(C);const D=Eoe(C);return Doe(C,D,h),D})};Ooe();const Roe=z8({__name:"TinymceEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(h,{emit:C}){const D=h,N=C,W=SF();W.value=D.modelValue,Gy(()=>W.value,Q=>N("update:modelValue",Q));const Y=SF({license_key:"gpl",theme:"silver",skin:!1,content_css:"",language:"zh_CN",width:"100%",height:"100%",resize:!1,placeholder:"请输入...",menubar:!1,toolbar_mode:"wrap",toolbar_location:"auto",toolbar:"undo redo | accordion accordionremove | blocks fontfamily fontsize | bold italic underline strikethrough | align numlist bullist | link image | table media | lineheight outdent indent| forecolor backcolor removeformat | charmap | code fullscreen preview | save print | pagebreak anchor codesample | ltr rtl",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount charmap quickbars accordion wordlimit",promotion:!1,branding:!1,highlight_on_focus:!1,readonly:!0,setup:Q=>{Q.on("init",function(Te){console.log(Te),Te.target.editorCommands.execCommand("fontName",!1,"JingDong"),Te.target.getBody().style.fontFamily="JingDong"}),Q.on("click",()=>{console.log("Editor was clicked")})},mobile:{menubar:!0},elementpath:!1,content_style:`
  @font-face {
    font-family: 'JingDong';
    font-weight: bold;
    src: url('/vue-tinymce-example/jingdong.ttf') format('truetype');
  }
  p {font-famliy: JingDong;}
  img {width:100%;height:100%;}
  `,pad_empty_with_br:!0,paste_postprocess:(Q,Te)=>{de(Te.node)},paste_merge_formats:!0,paste_webkit_styles:"color font-size font-weight",image_dimensions:!1,file_picker_types:"image",images_file_types:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",paste_data_images:!0,images_upload_handler:(Q,Te)=>(console.log("文件上传======"),new Promise((ct,Xe)=>{const wt=new XMLHttpRequest;wt.withCredentials=!1,wt.open("POST","postAcceptor.php"),wt.upload.onprogress=Tt=>{Te(Tt.loaded/Tt.total*100)},wt.onload=()=>{if(wt.status===403){Xe({message:"HTTP Error: "+wt.status,remove:!0});return}if(wt.status<200||wt.status>=300){Xe("HTTP Error: "+wt.status);return}const Tt=JSON.parse(wt.responseText);if(!Tt||typeof Tt.location!="string"){Xe("Invalid JSON: "+wt.responseText);return}ct(Tt.location)},wt.onerror=()=>{Xe("Image upload failed due to a XHR Transport error. Code: "+wt.status)};const yt=new FormData;yt.append("file",Q.blob(),Q.filename()),wt.send(yt)})),init_instance_callback:Q=>{Q.on("paste",Te=>{console.log("测试",Te),console.log("黏贴事件监听");const ct=(Te.clipboardData||window.clipboardData).items;if(console.log("----内容",Te.clipboardData),ct[0].type.indexOf("image")!==-1){const Xe=ct[0].getAsFile();console.log("-----文件",Xe),Te.preventDefault()}else console.log("粘贴的不是图片，不能上传")})},font_size_formats:"12px 14px 16px 18px 20px 22px 24px 26px 28px 32px 36px 42px 48px 72px",font_size_input_default_unit:"px",font_family_formats:"京东朗正体=JingDong;",line_height_formats:"1 1.2 1.4 1.6 2",indentation:"20px",word_limit:{max:2e3}}),de=Q=>{var wt,yt;if(Q.nodeType===Node.COMMENT_NODE){Q.remove();return}if(Q.nodeName==="TABLE"){Q.remove();return}const Te=["style"],ct=["title","href","target"],Xe=["src","alt"];if(Q.hasAttributes("tabindex")&&Q.removeAttribute("tabindex"),Q.style.color&&Q.style.color.startsWith("var(")&&Q.style.removeProperty("color"),Q.style.fontSize&&Q.style.fontSize.startsWith("var(")&&Q.style.removeProperty("font-size"),Q.style.fontWeight&&Q.style.fontWeight.startsWith("var(")&&Q.style.removeProperty("font-weight"),Q.style){const Tt=Q.style;for(let _t=Tt.length-1;_t>=0;_t--){const Lt=Tt[_t];Lt!=="text-align"&&(Lt==="color"&&!((wt=Tt.getPropertyValue("color"))!=null&&wt.startsWith("var("))||Lt==="font-weight"&&!((yt=Tt.getPropertyValue("font-weight"))!=null&&yt.startsWith("var("))||Q.style.removeProperty(Lt))}}if(Q.hasAttributes()){const Tt=Q.getAttributeNames();for(const _t of Tt)Q.nodeName==="A"&&ct.includes(_t)||Q.nodeName==="IMG"&&Xe.includes(_t)||Te.includes(_t)||Q.removeAttribute(_t)}for(let Tt=0;Tt<Q.childNodes.length;Tt++){const _t=Q.childNodes[Tt];_t.nodeType===Node.ELEMENT_NODE?de(_t):Q.nodeType===Node.COMMENT_NODE&&Q.remove(),console.log("-----节点类型",Q.nodeType)}};return(Q,Te)=>(dK(),mK("div",null,[Mm(rJ(tne),{class:"editor",modelValue:W.value,"onUpdate:modelValue":Te[0]||(Te[0]=ct=>W.value=ct),licenseKey:"gpl",init:Y.value},null,8,["modelValue","init"])]))}}),SK=(h,C)=>{const D=h.__vccOpts||h;for(const[N,W]of C)D[N]=W;return D},Foe=SK(Roe,[["__scopeId","data-v-157147b2"]]),Noe=z8({__name:"RichText",props:{htmlText:{},styleText:{}},emits:["previewImage"],setup(h,{emit:C}){const D=h,N=C,W=SF(null),Y=Xe=>{ct.innerHTML=Xe};let de;const Q=Xe=>{Xe&&(de=document.createElement("style"),de.textContent=Xe,ct.appendChild(de))};Gy(()=>[D.htmlText,D.styleText],([Xe,wt])=>{R8(()=>{Y(Xe||""),Q(wt||"")})},{immediate:!0});const Te=Xe=>{Xe&&Xe.target.nodeName=="IMG"?N("previewImage",Xe.target.currentSrc):console.log("点击内容不为img")};let ct;return iK(()=>{W.value.shadowRoot?ct=W.value.shadowRoot:ct=W.value.attachShadow({mode:"open"}),ct.addEventListener("click",Te)}),(Xe,wt)=>(dK(),mK("div",{ref_key:"richText",ref:W,class:"editor"},null,512))}}),Boe=SK(Noe,[["__scopeId","data-v-ff971e85"]]),Moe={class:"wrapper"},Poe={style:{width:"100%"}},$oe="*{max-width:100%;}",Ioe=z8({__name:"App",setup(h){const C=SF(""),D=N=>{console.log(N)};return(N,W)=>(dK(),mK("div",Moe,[Mm(Foe,{modelValue:C.value,"onUpdate:modelValue":W[0]||(W[0]=Y=>C.value=Y),class:"editor"},null,8,["modelValue"]),fK("div",Poe,VX(C.value),1),Mm(Boe,{"html-text":C.value,"style-text":$oe,onPreviewImage:D},null,8,["html-text"])]))}}),Loe=SK(Ioe,[["__scopeId","data-v-b6669daa"]]);Ite(Loe).mount("#app");
